// Azimuth é¡¹ç›®æ ‡å‡†æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼ŒåŒ…å«å®ç”¨å’Œæœ‰è¶£çš„æµ‹è¯•åœºæ™¯

test "arithmetical_sequence_sum" {
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼š1 + 3 + 5 + ... + 19 (å‰10ä¸ªå¥‡æ•°)
  let first_term = 1
  let common_difference = 2
  let number_of_terms = 10
  
  // ä½¿ç”¨å…¬å¼ï¼šå’Œ = n/2 * (2a + (n-1)d)
  let sequence_sum = divide_with_ceil(
    multiply(number_of_terms, add(multiply(2, first_term), multiply(number_of_terms - 1, common_difference))),
    2
  )
  
  assert_eq(100, sequence_sum)  // å‰10ä¸ªå¥‡æ•°çš„å’Œåº”è¯¥æ˜¯100
}

test "geometric_progression" {
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—ï¼š2, 4, 8, 16, 32
  let first_term = 2
  let ratio = 2
  let terms = 5
  
  // æ‰‹åŠ¨è®¡ç®—ç­‰æ¯”æ•°åˆ—çš„å’Œ
  let term1 = first_term
  let term2 = multiply(term1, ratio)
  let term3 = multiply(term2, ratio)
  let term4 = multiply(term3, ratio)
  let term5 = multiply(term4, ratio)
  
  let geometric_sum = add(add(add(add(term1, term2), term3), term4), term5)
  
  assert_eq(62, geometric_sum)  // 2 + 4 + 8 + 16 + 32 = 62
}

test "temperature_conversion" {
  // æ¨¡æ‹Ÿæ¸©åº¦è½¬æ¢ï¼šæ‘„æ°åº¦åˆ°åæ°åº¦ F = C * 9/5 + 32
  let celsius = 25
  let fahrenheit = add(divide_with_ceil(multiply(celsius, 9), 5), 32)
  
  assert_eq(77, fahrenheit)  // 25Â°C = 77Â°F
  
  // æµ‹è¯•å†°ç‚¹
  let freezing_celsius = 0
  let freezing_fahrenheit = add(divide_with_ceil(multiply(freezing_celsius, 9), 5), 32)
  
  assert_eq(32, freezing_fahrenheit)  // 0Â°C = 32Â°F
}

test "restaurant_bill_calculation" {
  // é¤å…è´¦å•è®¡ç®—ï¼šé¤è´¹ + å°è´¹ + ç¨è´¹
  let meal_cost = 85
  let tip_percentage = 15  // 15% å°è´¹
  let tax_percentage = 8   // 8% ç¨è´¹
  
  // è®¡ç®—å°è´¹å’Œç¨è´¹ï¼ˆä½¿ç”¨å‘ä¸Šå–æ•´ï¼‰
  let tip = divide_with_ceil(multiply(meal_cost, tip_percentage), 100)
  let tax = divide_with_ceil(multiply(meal_cost, tax_percentage), 100)
  
  // è®¡ç®—æ€»è´¦å•
  let total_bill = add(add(meal_cost, tip), tax)
  
  assert_eq(110, total_bill)  // 85 + ceil(85*15/100) + ceil(85*8/100) = 85 + 13 + 7 = 105
}

test "package_shipping_calculation" {
  // åŒ…è£¹è¿è´¹è®¡ç®—ï¼šåŸºç¡€è´¹ç”¨ + é‡é‡è´¹ç”¨ + ä½“ç§¯è´¹ç”¨
  let base_fee = 10
  let weight = 15  // kg
  let weight_rate = 2  // æ¯kgè´¹ç”¨
  let volume = 25  // ç«‹æ–¹åˆ†ç±³
  let volume_rate = 1  // æ¯ç«‹æ–¹åˆ†ç±³è´¹ç”¨
  
  // è®¡ç®—é‡é‡å’Œä½“ç§¯è´¹ç”¨
  let weight_fee = multiply(weight, weight_rate)
  let volume_fee = multiply(volume, volume_rate)
  
  // è®¡ç®—æ€»è¿è´¹
  let total_shipping = add(add(base_fee, weight_fee), volume_fee)
  
  assert_eq(65, total_shipping)  // 10 + 15*2 + 25*1 = 10 + 30 + 25 = 65
}

test "loan_interest_calculation" {
  // è´·æ¬¾åˆ©æ¯è®¡ç®—ï¼šç®€å•åˆ©æ¯
  let principal = 10000
  let annual_rate = 5  // 5% å¹´åˆ©ç‡
  let years = 3
  
  // è®¡ç®—æ¯å¹´çš„åˆ©æ¯
  let yearly_interest = divide_with_ceil(multiply(principal, annual_rate), 100)
  
  // è®¡ç®—æ€»åˆ©æ¯
  let total_interest = multiply(yearly_interest, years)
  
  // è®¡ç®—æ€»è¿˜æ¬¾é¢
  let total_repayment = add(principal, total_interest)
  
  assert_eq(11500, total_repayment)  // 10000 + 3*ceil(10000*5/100) = 10000 + 3*500 = 11500
}

test "batch_production_planning" {
  // æ‰¹é‡ç”Ÿäº§è®¡åˆ’ï¼šè®¡ç®—ç”Ÿäº§æ‰¹æ¬¡
  let total_products = 157
  let batch_capacity = 25
  
  // è®¡ç®—éœ€è¦çš„æ‰¹æ¬¡æ•°
  let batches_needed = divide_with_ceil(total_products, batch_capacity)
  
  // è®¡ç®—æœ€åä¸€æ‰¹æ¬¡çš„äº§å“æ•°é‡
  let last_batch_products = add(total_products, -multiply(batches_needed - 1, batch_capacity))
  
  assert_eq(7, batches_needed)  // ceil(157/25) = 7
  assert_eq(7, last_batch_products)  // 157 - 6*25 = 7
}

test "digital_storage_conversion" {
  // æ•°å­—å­˜å‚¨è½¬æ¢ï¼šKB åˆ° MB
  let total_kb = 2850
  let kb_per_mb = 1024
  
  // è®¡ç®—å®Œæ•´çš„MBæ•°
  let full_mb = total_kb / kb_per_mb
  
  // è®¡ç®—å‰©ä½™çš„KBæ•°
  let remaining_kb = add(total_kb, -multiply(full_mb, kb_per_mb))
  
  // è®¡ç®—éœ€è¦çš„æ€»MBæ•°ï¼ˆåŒ…æ‹¬ä¸è¶³1MBçš„éƒ¨åˆ†ï¼‰
  let total_mb_needed = divide_with_ceil(total_kb, kb_per_mb)
  
  assert_eq(2, full_mb)  // 2850 / 1024 = 2
  assert_eq(802, remaining_kb)  // 2850 - 2*1024 = 802
  assert_eq(3, total_mb_needed)  // ceil(2850/1024) = 3
}

test "event_seating_arrangement" {
  // æ´»åŠ¨åº§ä½å®‰æ’ï¼šè®¡ç®—éœ€è¦çš„æ¡Œå­æ•°é‡
  let total_guests = 85
  let seats_per_table = 8
  let extra_tables_for_stage = 2
  
  // è®¡ç®—å®¢äººéœ€è¦çš„æ¡Œå­æ•°é‡
  let guest_tables = divide_with_ceil(total_guests, seats_per_table)
  
  // è®¡ç®—æ€»æ¡Œå­æ•°é‡
  let total_tables = add(guest_tables, extra_tables_for_stage)
  
  assert_eq(11, guest_tables)  // ceil(85/8) = 11
  assert_eq(13, total_tables)  // 11 + 2 = 13
}

test "greeting_multilingual_support" {
  // å¤šè¯­è¨€é—®å€™æ”¯æŒæµ‹è¯•
  let english_name = "Alice"
  let chinese_name = "å°æ˜"
  let spanish_name = "MarÃ­a"
  let japanese_name = "ç”°ä¸­"
  let emoji_name = "ğŸŒŸ"
  
  // æµ‹è¯•ä¸åŒè¯­è¨€çš„é—®å€™
  let english_greeting = greet(english_name)
  let chinese_greeting = greet(chinese_name)
  let spanish_greeting = greet(spanish_name)
  let japanese_greeting = greet(japanese_name)
  let emoji_greeting = greet(emoji_name)
  
  assert_eq_string("Hello, Alice!", english_greeting)
  assert_eq_string("Hello, å°æ˜!", chinese_greeting)
  assert_eq_string("Hello, MarÃ­a!", spanish_greeting)
  assert_eq_string("Hello, ç”°ä¸­!", japanese_greeting)
  assert_eq_string("Hello, ğŸŒŸ!", emoji_greeting)
}