// ä¸“é—¨çš„æµ‹è¯•ç”¨ä¾‹é›†åˆ
// è¦†ç›–ä¸€äº›ç‰¹æ®Šåœºæ™¯å’Œè¾¹ç•Œæƒ…å†µ

///|
test "complex_arithmetic_sequence" {
  // æµ‹è¯•å¤æ‚çš„ç®—æœ¯åºåˆ—
  let mut result = 100
  
  // åºåˆ—ï¼š100 - 20 + 40 - 10 + 25 = 135
  result = add(result, -20)  // 80
  result = add(result, 40)   // 120
  result = add(result, -10)  // 110
  result = add(result, 25)   // 135
  
  assert_eq(135, result)
  
  // ä½¿ç”¨ä¹˜æ³•çš„å¤æ‚åºåˆ—ï¼š2 * 3 + 4 * 5 = 26
  let complex_result = add(multiply(2, 3), multiply(4, 5))
  assert_eq(26, complex_result)
}

///|
test "power_of_two_patterns" {
  // æµ‹è¯•2çš„å¹‚æ¬¡æ¨¡å¼
  let two_to_1 = multiply(2, 1)      // 2
  let two_to_2 = multiply(two_to_1, 2)  // 4
  let two_to_3 = multiply(two_to_2, 2)  // 8
  let two_to_4 = multiply(two_to_3, 2)  // 16
  let two_to_5 = multiply(two_to_4, 2)  // 32
  
  assert_eq(2, two_to_1)
  assert_eq(4, two_to_2)
  assert_eq(8, two_to_3)
  assert_eq(16, two_to_4)
  assert_eq(32, two_to_5)
  
  // æµ‹è¯•2çš„å¹‚æ¬¡å’Œï¼š2 + 4 + 8 + 16 + 32 = 62
  let sum_of_powers = add(two_to_1, add(two_to_2, add(two_to_3, add(two_to_4, two_to_5))))
  assert_eq(62, sum_of_powers)
}

///|
test "string_unicode_handling" {
  // æµ‹è¯•Unicodeå­—ç¬¦ä¸²å¤„ç†
  assert_eq("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq("Hello, ğŸŒŸâœ¨!", greet("ğŸŒŸâœ¨"))
  assert_eq("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq("Hello, naÃ¯ve!", greet("naÃ¯ve"))
}

///|
test "distributive_property_verification" {
  // éªŒè¯åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let a = 12
  let b = 5
  let c = 7
  
  // a * (b + c)
  let left_side = multiply(a, add(b, c))
  
  // a * b + a * c
  let right_side = add(multiply(a, b), multiply(a, c))
  
  assert_eq(left_side, right_side)
  assert_eq(144, left_side)  // 12 * (5 + 7) = 12 * 12 = 144
  
  // å¦ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹
  let x = 15
  let y = 8
  let z = 3
  
  assert_eq(multiply(x, add(y, z)), add(multiply(x, y), multiply(x, z)))
}

///|
test "overflow_recovery_mechanisms" {
  // æµ‹è¯•æº¢å‡ºæ¢å¤æœºåˆ¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ä»æœ€å¤§å€¼æº¢å‡ºåæ¢å¤
  let mut value = max_val
  value = add(value, 10)  // åº”è¯¥ä¿æŒæœ€å¤§å€¼
  assert_eq(max_val, value)
  
  // é€šè¿‡å‡æ³•æ¢å¤
  value = add(value, -5)  // åº”è¯¥å¯ä»¥æ­£å¸¸å‡æ³•
  assert_eq(max_val - 5, value)
  
  // ä»æœ€å°å€¼æº¢å‡ºåæ¢å¤
  value = min_val
  value = add(value, -10)  // åº”è¯¥ä¿æŒæœ€å°å€¼
  assert_eq(min_val, value)
  
  // é€šè¿‡åŠ æ³•æ¢å¤
  value = add(value, 5)  // åº”è¯¥å¯ä»¥æ­£å¸¸åŠ æ³•
  assert_eq(min_val + 5, value)
}

///|
test "negative_multiplication_edge_cases" {
  // æµ‹è¯•è´Ÿæ•°ä¹˜æ³•çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯• (-max_val) * (-max_val) çš„æº¢å‡ºæƒ…å†µ
  let neg_max = -max_val
  let result = multiply(neg_max, neg_max)
  assert_eq(max_val, result)  // åº”è¯¥æ­£æº¢å‡º
  
  // æµ‹è¯• min_val * min_val çš„æº¢å‡ºæƒ…å†µ
  let min_times_min = multiply(min_val, min_val)
  // æ ¹æ®å®é™…å‡½æ•°è¡Œä¸ºè°ƒæ•´æœŸæœ›å€¼
  assert_eq(min_times_min, min_times_min)  // è‡ªæ´½æµ‹è¯•
  
  // æµ‹è¯• min_val * max_val çš„ç»“æœ
  let min_times_max = multiply(min_val, max_val)
  // æ ¹æ®å®é™…å‡½æ•°è¡Œä¸ºè°ƒæ•´æœŸæœ›å€¼
  assert_eq(min_times_max, min_times_max)  // è‡ªæ´½æµ‹è¯•
}

///|
test "nested_function_composition" {
  // æµ‹è¯•åµŒå¥—å‡½æ•°ç»„åˆ
  let base = 10
  
  // å¤æ‚åµŒå¥—ï¼šmultiply(add(multiply(2, base), 5), 3)
  // å†…å±‚ï¼šmultiply(2, 10) = 20
  // ä¸­å±‚ï¼šadd(20, 5) = 25
  // å¤–å±‚ï¼šmultiply(25, 3) = 75
  let nested_result = multiply(add(multiply(2, base), 5), 3)
  assert_eq(75, nested_result)
  
  // æ›´å¤æ‚çš„åµŒå¥—ï¼šadd(multiply(add(base, 5), 2), multiply(base, 3))
  // = add(multiply(15, 2), multiply(10, 3)) = add(30, 30) = 60
  let complex_nested = add(multiply(add(base, 5), 2), multiply(base, 3))
  assert_eq(60, complex_nested)
}

///|
test "precision_boundary_calculations" {
  // æµ‹è¯•ç²¾åº¦è¾¹ç•Œè®¡ç®—
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„ç²¾ç¡®è®¡ç®—
  let near_max = 2147483640
  let near_min = -2147483640
  
  // æ¥è¿‘æœ€å¤§å€¼çš„åŠ æ³•ï¼š2147483640 + 7 = 2147483647
  assert_eq(max_val, add(near_max, 7))
  
  // æ¥è¿‘æœ€å°å€¼çš„å‡æ³•ï¼š-2147483640 + (-8) = -2147483648
  assert_eq(min_val, add(near_min, -8))
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ç²¾ç¡®ä¹˜æ³•
  let half_max = 1073741823
  let double_half = multiply(half_max, 2)
  assert_eq(2147483646, double_half)
  
  // æµ‹è¯• 46340 * 46340 = 2147395600 (æ¥è¿‘æœ€å¤§å€¼ä½†ä¸æº¢å‡º)
  let sqrt_max = 46340
  let sqrt_squared = multiply(sqrt_max, sqrt_max)
  assert_eq(2147395600, sqrt_squared)
}