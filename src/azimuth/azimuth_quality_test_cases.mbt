// é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“æ ¸å¿ƒåŠŸèƒ½çš„å…¨é¢æµ‹è¯•
// åŒ…å«è¾¹ç•Œæƒ…å†µã€å®é™…åº”ç”¨åœºæ™¯å’Œæ•°å­¦æ€§è´¨éªŒè¯

test "addition_commutative_and_associative" {

test "addition_commutative_and_associative" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹å’Œç»“åˆå¾‹
  let a = 15
  let b = 27
  let c = 42
  
  // äº¤æ¢å¾‹: a + b = b + a
  assert_eq(add(a, b), add(b, a))
  
  // ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  assert_eq(add(add(a, b), c), add(a, add(b, c)))
  
  // å•ä½å…ƒæ€§è´¨: a + 0 = a
  assert_eq(a, add(a, 0))
  assert_eq(0, add(0, 0))
}

test "multiplication_properties_and_edge_cases" {
  // æµ‹è¯•ä¹˜æ³•æ€§è´¨å’Œè¾¹ç•Œæƒ…å†µ
  let a = 12
  let b = 8
  
  // äº¤æ¢å¾‹: a * b = b * a
  assert_eq(multiply(a, b), multiply(b, a))
  
  // é›¶å…ƒç´ æ€§è´¨: a * 0 = 0
  assert_eq(0, multiply(a, 0))
  assert_eq(0, multiply(0, b))
  assert_eq(0, multiply(0, 0))
  
  // å•ä½å…ƒæ€§è´¨: a * 1 = a
  assert_eq(a, multiply(a, 1))
  assert_eq(b, multiply(1, b))
}

test "divide_with_ceil_comprehensive_scenarios" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å„ç§åœºæ™¯
  // æ­£æ•°é™¤æ³•
  assert_eq(4, divide_with_ceil(10, 3))  // 3.333... -> 4
  assert_eq(3, divide_with_ceil(9, 3))   // 3 -> 3
  assert_eq(1, divide_with_ceil(1, 100)) // 0.01 -> 1
  
  // è´Ÿæ•°é™¤æ³•
  assert_eq(-3, divide_with_ceil(-10, 3))  // -3.333... -> -3
  assert_eq(4, divide_with_ceil(-10, -3))  // 3.333... -> 4
  
  // è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(5, 0))    // é™¤æ•°ä¸ºé›¶
  assert_eq(0, divide_with_ceil(0, 5))    // è¢«é™¤æ•°ä¸ºé›¶
  assert_eq(1, divide_with_ceil(5, 5))    // ç›¸ç­‰æ•°
}

test "greet_function_multilingual_and_special_chars" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å¤šè¯­è¨€å’Œç‰¹æ®Šå­—ç¬¦æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, MarÃ­a!", greet("MarÃ­a"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, !", greet(""))  // ç©ºå­—ç¬¦ä¸²
  assert_eq_string("Hello, 123!", greet("123"))  // æ•°å­—
}

test "complex_business_calculation_workflow" {
  // å¤æ‚ä¸šåŠ¡è®¡ç®—å·¥ä½œæµï¼šè®¢å•å¤„ç†
  let unit_price = 89
  let quantity = 6
  let tax_rate = 8  // 8%
  let shipping = 25
  let discount = 50
  
  // æ­¥éª¤1: è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  assert_eq(534, subtotal)  // 89 * 6
  
  // æ­¥éª¤2: è®¡ç®—ç¨è´¹ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  assert_eq(43, tax_amount)  // ceil(534 * 8 / 100) = ceil(42.72) = 43
  
  // æ­¥éª¤3: è®¡ç®—æ€»ä»·
  let total_before_discount = add(add(subtotal, tax_amount), shipping)
  assert_eq(602, total_before_discount)  // 534 + 43 + 25
  
  // æ­¥éª¤4: åº”ç”¨æŠ˜æ‰£
  let final_total = add(total_before_discount, -discount)
  assert_eq(552, final_total)  // 602 - 50
}

test "mathematical_distributive_property" {
  // éªŒè¯æ•°å­¦åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let a = 7
  let b = 12
  let c = 8
  
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  
  assert_eq(left_side, right_side)  // 7 * (12 + 8) = 7 * 12 + 7 * 8 = 140
}

test "packaging_and_logistics_optimization" {
  // åŒ…è£…å’Œç‰©æµä¼˜åŒ–è®¡ç®—
  let product_a_qty = 45
  let product_b_qty = 67
  let product_c_qty = 23
  let items_per_box = 12
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°
  let boxes_a = divide_with_ceil(product_a_qty, items_per_box)
  let boxes_b = divide_with_ceil(product_b_qty, items_per_box)
  let boxes_c = divide_with_ceil(product_c_qty, items_per_box)
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  
  assert_eq(4, boxes_a)   // ceil(45/12) = 4
  assert_eq(6, boxes_b)   // ceil(67/12) = 6
  assert_eq(2, boxes_c)   // ceil(23/12) = 2
  assert_eq(12, total_boxes)  // 4 + 6 + 2 = 12
}

test "financial_compound_interest_simulation" {
  // é‡‘èå¤åˆ©è®¡ç®—æ¨¡æ‹Ÿ
  let principal = 10000
  let rate_percent = 6
  let years = 3
  
  // ç®€åŒ–çš„å¹´å¤åˆ©è®¡ç®—ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let amount_year1 = add(principal, divide_with_ceil(multiply(principal, rate_percent), 100))
  let amount_year2 = add(amount_year1, divide_with_ceil(multiply(amount_year1, rate_percent), 100))
  let amount_year3 = add(amount_year2, divide_with_ceil(multiply(amount_year2, rate_percent), 100))
  
  assert_eq(10600, amount_year1)  // 10000 + ceil(10000*6/100) = 10000 + 600
  assert_eq(11236, amount_year2)  // 10600 + ceil(10600*6/100) = 10600 + 636
  assert_eq(11911, amount_year3)  // 11236 + ceil(11236*6/100) = 11236 + 675
}