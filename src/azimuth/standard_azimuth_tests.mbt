// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“
// ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•ç¼–å†™

test "add_function_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 15
  let b = 27
  assert_eq(add(a, b), add(b, a))
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let x = -10
  let y = 25
  assert_eq(add(x, y), add(y, x))
}

test "multiply_function_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let a = 4
  let b = 7
  let c = 9
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  assert_eq(left_side, right_side)
}

test "divide_with_ceil_comprehensive_cases" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å„ç§æƒ…å†µ
  // æ­£æ•°æƒ…å†µ
  assert_eq(4, divide_with_ceil(11, 3))  // 11/3 = 3.666... -> 4
  assert_eq(3, divide_with_ceil(9, 3))   // 9/3 = 3 -> 3
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(-10, 3)) // -10/3 = -3.333... -> -3
  assert_eq(4, divide_with_ceil(-11, -3)) // -11/-3 = 3.666... -> 4
  
  // è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(5, 0))   // é™¤æ•°ä¸º0
  assert_eq(1, divide_with_ceil(1, 100)) // è¢«é™¤æ•°å°äºé™¤æ•°
}

test "greet_function_unicode_support" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ Unicode æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
}

test "complex_business_calculation" {
  // å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¢å•æ€»ä»·è®¡ç®—
  let unit_price = 89
  let quantity = 6
  let tax_rate = 8  // 8%
  let shipping = 25
  let discount = 50
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  // è®¡ç®—æ€»ä»·
  let total = add(add(subtotal, tax), add(shipping, -discount))
  
  assert_eq(534, total)  // 89*6 + ceil(534*8/100) + 25 - 50 = 534 + 43 + 25 - 50 = 552
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—ï¼šç­‰å·®æ•°åˆ—æ±‚å’Œ
  let first_term = 5
  let common_difference = 3
  let terms_count = 8
  
  // ä½¿ç”¨å…¬å¼ï¼šS = n/2 * (2a + (n-1)d)
  let sum = divide_with_ceil(
    multiply(terms_count, add(multiply(2, first_term), multiply(terms_count - 1, common_difference))),
    2
  )
  
  assert_eq(124, sum)  // 8/2 * (10 + 21) = 4 * 31 = 124
}

test "inventory_packaging_optimization" {
  // åº“å­˜åŒ…è£…ä¼˜åŒ–ï¼šè®¡ç®—æœ€ä¼˜åŒ…è£…æ–¹æ¡ˆ
  let small_items = 35
  let medium_items = 48
  let large_items = 27
  
  let small_box_capacity = 12
  let medium_box_capacity = 8
  let large_box_capacity = 6
  
  // è®¡ç®—å„ç±»ç‰©å“éœ€è¦çš„ç®±å­æ•°é‡
  let small_boxes = divide_with_ceil(small_items, small_box_capacity)
  let medium_boxes = divide_with_ceil(medium_items, medium_box_capacity)
  let large_boxes = divide_with_ceil(large_items, large_box_capacity)
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = add(add(small_boxes, medium_boxes), large_boxes)
  
  assert_eq(3, small_boxes)   // ceil(35/12) = 3
  assert_eq(6, medium_boxes)  // ceil(48/8) = 6
  assert_eq(5, large_boxes)   // ceil(27/6) = 5
  assert_eq(14, total_boxes)  // 3 + 6 + 5 = 14
}

test "time_management_calculation" {
  // æ—¶é—´ç®¡ç†è®¡ç®—ï¼šé¡¹ç›®å®Œæˆæ—¶é—´é¢„ä¼°
  let total_tasks = 87
  let tasks_per_day = 6
  let working_days_per_week = 5
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œæ—¥
  let workdays_needed = divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(workdays_needed, working_days_per_week)
  
  assert_eq(15, workdays_needed)  // ceil(87/6) = 15
  assert_eq(3, weeks_needed)      // ceil(15/5) = 3
}

test "financial_compound_interest" {
  // é‡‘èå¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let principal = 10000
  let annual_rate = 6  // 6%
  let years = 3
  
  // ç¬¬ä¸€å¹´
  let year1 = add(principal, divide_with_ceil(multiply(principal, annual_rate), 100))
  // ç¬¬äºŒå¹´
  let year2 = add(year1, divide_with_ceil(multiply(year1, annual_rate), 100))
  // ç¬¬ä¸‰å¹´
  let year3 = add(year2, divide_with_ceil(multiply(year2, annual_rate), 100))
  
  assert_eq(10600, year1)  // 10000 + 600
  assert_eq(11236, year2)  // 10600 + 636
  assert_eq(11910, year3)  // 11236 + 674
}

test "resource_allocation_algorithm" {
  // èµ„æºåˆ†é…ç®—æ³•
  let total_resources = 500
  let project_a_priority = 3
  let project_b_priority = 2
  let project_c_priority = 1
  
  let total_priority = add(add(project_a_priority, project_b_priority), project_c_priority)
  
  // æŒ‰ä¼˜å…ˆçº§åˆ†é…èµ„æº
  let resources_a = divide_with_ceil(multiply(total_resources, project_a_priority), total_priority)
  let resources_b = divide_with_ceil(multiply(total_resources, project_b_priority), total_priority)
  let resources_c = total_resources - add(resources_a, resources_b)
  
  assert_eq(250, resources_a)  // 500 * 3 / 6 = 250
  assert_eq(167, resources_b)  // ceil(500 * 2 / 6) = 167
  assert_eq(83, resources_c)   // 500 - 250 - 167 = 83
}