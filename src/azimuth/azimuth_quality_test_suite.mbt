// é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“çš„å…¨é¢æµ‹è¯•
// åŒ…å«è¾¹ç•Œæƒ…å†µã€é”™è¯¯å¤„ç†å’Œå®é™…åº”ç”¨åœºæ™¯

test "mathematical_commutativity_verification" {
  // éªŒè¯åŠ æ³•å’Œä¹˜æ³•äº¤æ¢å¾‹
  let a = 17
  let b = 29
  assert_eq(add(a, b), add(b, a))
  assert_eq(multiply(a, b), multiply(b, a))
  
  // æµ‹è¯•è´Ÿæ•°äº¤æ¢å¾‹
  let x = -15
  let y = 8
  assert_eq(add(x, y), add(y, x))
  assert_eq(multiply(x, y), multiply(y, x))
}

test "divide_with_ceil_comprehensive_edge_cases" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•æ­£æ•°æƒ…å†µ
  assert_eq(4, divide_with_ceil(11, 3))  // 11/3 = 3.666... -> 4
  assert_eq(7, divide_with_ceil(13, 2))  // 13/2 = 6.5 -> 7
  assert_eq(1, divide_with_ceil(1, 100)) // 1/100 = 0.01 -> 1
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(-10, 3))  // -10/3 = -3.333... -> -3
  assert_eq(-4, divide_with_ceil(-11, 3))  // -11/3 = -3.666... -> -4
  assert_eq(4, divide_with_ceil(-11, -3))  // -11/-3 = 3.666... -> 4
  
  // æµ‹è¯•é›¶é™¤æ•°
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-50, 0))
  assert_eq(0, divide_with_ceil(0, 0))
}

test "greet_function_international_comprehensive" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å›½é™…åŒ–å’Œç‰¹æ®Šå­—ç¬¦å¤„ç†
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, MarÃ­a!", greet("MarÃ­a"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,   !", greet("  "))
}

test "complex_business_workflow_calculation" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµè®¡ç®—ï¼šè®¢å•å¤„ç†ç³»ç»Ÿ
  let unit_price = 89
  let quantity = 12
  let tax_rate = 8
  let shipping_per_item = 5
  let bulk_discount_threshold = 1000
  let bulk_discount_amount = 75
  
  // è®¡ç®—å•†å“å°è®¡
  let subtotal = multiply(unit_price, quantity)
  
  // è®¡ç®—è¿è´¹
  let total_shipping = multiply(shipping_per_item, quantity)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  
  // è®¡ç®—æŠ˜æ‰£å‰æ€»ä»·
  let pre_discount_total = add(add(subtotal, total_shipping), tax_amount)
  
  // åº”ç”¨æ‰¹é‡æŠ˜æ‰£ï¼ˆå¦‚æœæ»¡è¶³æ¡ä»¶ï¼‰
  let final_total = if pre_discount_total > bulk_discount_threshold {
    add(pre_discount_total, multiply(bulk_discount_amount, -1))
  } else {
    pre_discount_total
  }
  
  assert_eq(1068, subtotal)
  assert_eq(60, total_shipping)
  assert_eq(86, tax_amount)
  assert_eq(1214, pre_discount_total)
  assert_eq(1139, final_total)
}

test "mathematical_series_and_progressions" {
  // æ•°å­¦çº§æ•°å’Œæ•°åˆ—è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šS = n/2 * (2a + (n-1)d)
  let first_term = 7
  let common_diff = 5
  let num_terms = 12
  
  let series_sum = divide_with_ceil(
    multiply(num_terms, add(multiply(2, first_term), multiply(num_terms - 1, common_diff))),
    2
  )
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let geo_first = 3
  let geo_ratio = 2
  let _geo_terms = 6  // ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€è¡¨ç¤ºæœªä½¿ç”¨çš„å˜é‡
  
  let geo_sum = add(add(add(add(add(geo_first, 
    multiply(geo_first, geo_ratio)), 
    multiply(geo_first, multiply(geo_ratio, geo_ratio))),
    multiply(geo_first, multiply(geo_ratio, multiply(geo_ratio, geo_ratio)))),
    multiply(geo_first, multiply(geo_ratio, multiply(geo_ratio, multiply(geo_ratio, geo_ratio)))))
  
  assert_eq(474, series_sum)  // 12/2 * (14 + 55) = 6 * 69 = 414
  assert_eq(189, geo_sum)     // 3 + 6 + 12 + 24 + 48 + 96 = 189
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜
  let total_budget = 5000
  let project_a_cost = 1200
  let project_b_cost = 800
  let project_c_cost = 1500
  let contingency_percentage = 10
  
  // è®¡ç®—é¡¹ç›®æ€»æˆæœ¬
  let total_project_cost = add(add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—åº”æ€¥èµ„é‡‘
  let contingency_fund = divide_with_ceil(multiply(total_project_cost, contingency_percentage), 100)
  
  // è®¡ç®—æ€»éœ€æ±‚
  let total_required = add(total_project_cost, contingency_fund)
  
  // è®¡ç®—å‰©ä½™èµ„é‡‘
  let remaining_budget = add(total_budget, multiply(total_required, -1))
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡
  let small_project_cost = 300
  let additional_projects = divide_with_ceil(remaining_budget, small_project_cost)
  
  assert_eq(3500, total_project_cost)
  assert_eq(350, contingency_fund)
  assert_eq(3850, total_required)
  assert_eq(1150, remaining_budget)
  assert_eq(4, additional_projects)
}

test "data_structure_simulation" {
  // æ¨¡æ‹Ÿæ•°æ®ç»“æ„æ“ä½œ
  // æ¨¡æ‹Ÿæ ˆæ“ä½œï¼špushå’Œpop
  let stack_initial = 0
  let push1 = 10
  let push2 = 20
  let push3 = 30
  let push4 = 15
  
  // æ¨¡æ‹Ÿpushæ“ä½œ
  let stack_after_pushes = add(add(add(add(stack_initial, push1), push2), push3), push4)
  
  // æ¨¡æ‹Ÿpopæ“ä½œï¼ˆç§»é™¤æœ€åä¸¤ä¸ªå…ƒç´ ï¼‰
  let stack_after_pops = add(add(stack_initial, push1), push2)
  
  assert_eq(75, stack_after_pushes)
  assert_eq(30, stack_after_pops)
}

test "time_and_scheduling_calculations" {
  // æ—¶é—´å’Œè°ƒåº¦è®¡ç®—
  let total_tasks = 87
  let tasks_per_day = 8
  let work_hours_per_day = 8
  let meeting_hours_per_day = 1
  
  // è®¡ç®—å·¥ä½œæ—¥æ•°
  let workdays_needed = divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—å®é™…å·¥ä½œå°æ—¶æ•°
  let actual_work_hours = multiply(workdays_needed, add(work_hours_per_day, multiply(meeting_hours_per_day, -1)))
  
  // è®¡ç®—æ€»æ—¥å†å¤©æ•°ï¼ˆåŒ…æ‹¬å‘¨æœ«ï¼‰
  let calendar_days = multiply(workdays_needed, divide_with_ceil(7, 5))
  
  assert_eq(11, workdays_needed)
  assert_eq(77, actual_work_hours)
  assert_eq(15, calendar_days)
}

test "financial_compound_interest_simulation" {
  // é‡‘èå¤åˆ©è®¡ç®—æ¨¡æ‹Ÿ
  let principal = 10000
  let annual_rate = 6
  let years = 4
  
  // ç¬¬ä¸€å¹´
  let year1_interest = divide_with_ceil(multiply(principal, annual_rate), 100)
  let year1_balance = add(principal, year1_interest)
  
  // ç¬¬äºŒå¹´
  let year2_interest = divide_with_ceil(multiply(year1_balance, annual_rate), 100)
  let year2_balance = add(year1_balance, year2_interest)
  
  // ç¬¬ä¸‰å¹´
  let year3_interest = divide_with_ceil(multiply(year2_balance, annual_rate), 100)
  let year3_balance = add(year2_balance, year3_interest)
  
  // ç¬¬å››å¹´
  let year4_interest = divide_with_ceil(multiply(year3_balance, annual_rate), 100)
  let final_balance = add(year3_balance, year4_interest)
  
  assert_eq(600, year1_interest)
  assert_eq(10600, year1_balance)
  assert_eq(636, year2_interest)
  assert_eq(11236, year2_balance)
  assert_eq(675, year3_interest)
  assert_eq(11911, year3_balance)
  assert_eq(715, year4_interest)
  assert_eq(12626, final_balance)
}

test "error_handling_and_robustness" {
  // é”™è¯¯å¤„ç†å’Œå¥å£®æ€§æµ‹è¯•
  // æµ‹è¯•æç«¯æ•°å€¼æƒ…å†µ
  let large_positive = 1000000
  let large_negative = -1000000
  let zero_value = 0
  
  // æµ‹è¯•å¤§æ•°è¿ç®—
  assert_eq(2000000, add(large_positive, large_positive))
  assert_eq(-2000000, add(large_negative, large_negative))
  assert_eq(0, add(large_positive, large_negative))
  
  // æµ‹è¯•å¤§æ•°ä¹˜æ³•ï¼ˆä½¿ç”¨è¾ƒå°çš„æ•°å€¼ä»¥é¿å…è¶…å‡ºèŒƒå›´ï¼‰
  assert_eq(1000000, multiply(1000, 1000))
  assert_eq(1000000, multiply(-1000, -1000))
  assert_eq(-1000000, multiply(1000, -1000))
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  assert_eq(0, multiply(large_positive, zero_value))
  assert_eq(0, multiply(large_negative, zero_value))
  assert_eq(large_positive, add(large_positive, zero_value))
  assert_eq(large_negative, add(large_negative, zero_value))
  
  // æµ‹è¯•é™¤æ³•çš„å®‰å…¨å¤„ç†
  assert_eq(0, divide_with_ceil(large_positive, zero_value))
  assert_eq(0, divide_with_ceil(large_negative, zero_value))
  assert_eq(0, divide_with_ceil(zero_value, zero_value))
  
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„å¥å£®æ€§
  assert_eq_string("Hello, 123456789!", greet("123456789"))
  assert_eq_string("Hello, !@#$%^&*()!", greet("!@#$%^&*()"))
  assert_eq_string("Hello,   !", greet("   "))
}