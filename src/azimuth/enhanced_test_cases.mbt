// å¢å¼ºæµ‹è¯•ç”¨ä¾‹ - è¦†ç›–å„ç§åœºæ™¯çš„ MoonBit æµ‹è¯•
// ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•

test "enhanced_basic_arithmetic" {
  // åŸºæœ¬ç®—æœ¯è¿ç®—æµ‹è¯•
  assert_eq(10, add(3, 7))
  assert_eq(0, add(-5, 5))
  assert_eq(15, multiply(3, 5))
  assert_eq(-25, multiply(-5, 5))
}

test "enhanced_boundary_conditions" {
  // è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼è¾¹ç•Œ
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, max_val))
  assert_eq(0, multiply(max_val, 0))
  
  // æµ‹è¯•æœ€å°å€¼è¾¹ç•Œ
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
}

test "enhanced_string_operations" {
  // å­—ç¬¦ä¸²æ“ä½œæµ‹è¯•
  assert_eq_string("Hello, MoonBit!", greet("MoonBit"))
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello, ç”¨æˆ·123!", greet("ç”¨æˆ·123"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
}

test "enhanced_complex_calculations" {
  // å¤æ‚è®¡ç®—æµ‹è¯•
  // è®¡ç®— (a + b) * c - d
  let a = 8
  let b = 12
  let c = 5
  let d = 15
  
  let sum_ab = add(a, b)
  let product = multiply(sum_ab, c)
  let result = add(product, -d)
  
  assert_eq(85, result)  // (8 + 12) * 5 - 15 = 85
}

test "enhanced_financial_calculations" {
  // é‡‘èè®¡ç®—æµ‹è¯•
  let principal = 10000
  let rate = 5  // 5%
  let years = 3
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼šæœ¬é‡‘ + (æœ¬é‡‘ * åˆ©ç‡ * å¹´æ•°)
  let interest = multiply(principal, multiply(rate, years))
  let total = add(principal, interest)
  
  assert_eq(160000, total)  // 10000 + (10000 * 5 * 3) = 160000
}

test "enhanced_temperature_conversion" {
  // æ¸©åº¦è½¬æ¢æµ‹è¯•ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 2 + 30
  let celsius = 25
  let fahrenheit = add(multiply(celsius, 2), 30)
  
  assert_eq(80, fahrenheit)  // 25 * 2 + 30 = 80
  
  // æµ‹è¯•å†°ç‚¹
  let freezing = add(multiply(0, 2), 30)
  assert_eq(30, freezing)
  
  // æµ‹è¯•æ²¸ç‚¹
  let boiling = add(multiply(100, 2), 30)
  assert_eq(230, boiling)
}

test "enhanced_shopping_cart" {
  // è´­ç‰©è½¦è®¡ç®—æµ‹è¯•
  let item1_price = 199
  let item1_qty = 2
  let item2_price = 299
  let item2_qty = 1
  let shipping = 20
  
  let total1 = multiply(item1_price, item1_qty)
  let total2 = multiply(item2_price, item2_qty)
  let subtotal = add(total1, total2)
  let final_total = add(subtotal, shipping)
  
  assert_eq(717, final_total)  // (199 * 2) + (299 * 1) + 20 = 717
}

test "enhanced_geometric_calculations" {
  // å‡ ä½•è®¡ç®—æµ‹è¯•
  let length = 10
  let width = 6
  
  // çŸ©å½¢é¢ç§¯
  let area = multiply(length, width)
  assert_eq(60, area)
  
  // çŸ©å½¢å‘¨é•¿
  let perimeter = add(multiply(2, length), multiply(2, width))
  assert_eq(32, perimeter)
  
  // ä¸‰è§’å½¢é¢ç§¯ï¼ˆåº• Ã— é«˜ Ã· 2ï¼‰
  let base = 8
  let height = 5
  let triangle_area = multiply(base, height) / 2
  assert_eq(20, triangle_area)
}

test "enhanced_statistical_calculations" {
  // ç»Ÿè®¡è®¡ç®—æµ‹è¯•
  let values = [15, 25, 35, 45, 55]
  
  // è®¡ç®—æ€»å’Œ
  let sum = add(add(add(add(values[0], values[1]), values[2]), values[3]), values[4])
  assert_eq(175, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  assert_eq(35, average)
  
  // è®¡ç®—ä¸­ä½æ•°ï¼ˆå·²æ’åºæ•°ç»„ï¼‰
  let median = values[2]  // ç¬¬ä¸‰ä¸ªå…ƒç´ 
  assert_eq(35, median)
}

test "enhanced_error_handling" {
  // é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µæµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  assert_true(true)
  assert_false(false)
  assert_eq(42, 42)
  assert_eq_string("test", "test")
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  assert_true(add(max_val, 100) == max_val)
  assert_true(add(min_val, -100) == min_val)
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•ç‰¹æ®Šå€¼å¤„ç†
  assert_eq(0, multiply(0, max_val))
  assert_eq(0, multiply(0, min_val))
  assert_eq(max_val, add(max_val, 0))
  assert_eq(min_val, add(min_val, 0))
}