// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// åŸºäº azimuth åŒ…ä¸­çš„ addã€multiplyã€greet ç­‰å‡½æ•°

test "calculation_parentheses_priority" {
  // æµ‹è¯•è¿ç®—ä¼˜å…ˆçº§å’Œæ‹¬å·çš„å½±å“
  let a = 5
  let b = 10
  let c = 2
  
  // æµ‹è¯• (a + b) * c ä¸ a + b * c çš„åŒºåˆ«
  let with_parentheses = multiply(add(a, b), c)  // (5 + 10) * 2 = 30
  let without_parentheses = add(a, multiply(b, c))  // 5 + 10 * 2 = 25
  
  assert_eq(30, with_parentheses)
  assert_eq(25, without_parentheses)
}

test "discount_calculation" {
  // æµ‹è¯•æŠ˜æ‰£è®¡ç®—åœºæ™¯
  let original_price = 1000
  let discount_percentage = 20  // 20% æŠ˜æ‰£
  
  // è®¡ç®—æŠ˜æ‰£é‡‘é¢
  let discount_amount = multiply(original_price, discount_percentage) / 100
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_price = add(original_price, -discount_amount)
  
  assert_eq(200, discount_amount)
  assert_eq(800, discounted_price)
}

test "compound_calculation" {
  // æµ‹è¯•å¤åˆè®¡ç®—ï¼š(a + b) * (c - d) + e
  let a = 8
  let b = 7
  let c = 15
  let d = 5
  let e = 10
  
  let sum_ab = add(a, b)  // 15
  let diff_cd = add(c, -d)  // 10
  let product = multiply(sum_ab, diff_cd)  // 150
  let result = add(product, e)  // 160
  
  assert_eq(160, result)
}

test "string_with_various_lengths" {
  // æµ‹è¯•ä¸åŒé•¿åº¦å­—ç¬¦ä¸²çš„å¤„ç†
  let very_short = "A"
  let short = "Hi"
  let medium = "MoonBit"
  let long = "ThisIsALongStringForTesting"
  let very_long = "ThisIsAVeryVeryLongStringThatContainsManyCharactersToTestTheGreetFunctionsWithDifferentInputLengths"
  
  assert_eq_string("Hello, A!", greet(very_short))
  assert_eq_string("Hello, Hi!", greet(short))
  assert_eq_string("Hello, MoonBit!", greet(medium))
  assert_eq_string("Hello, ThisIsALongStringForTesting!", greet(long))
  assert_eq_string("Hello, ThisIsAVeryVeryLongStringThatContainsManyCharactersToTestTheGreetFunctionsWithDifferentInputLengths!", greet(very_long))
}

test "calculation_with_negative_numbers" {
  // æµ‹è¯•è´Ÿæ•°è®¡ç®—
  let a = -10
  let b = 5
  let c = -3
  
  // è´Ÿæ•°åŠ æ³•
  assert_eq(-5, add(a, b))
  assert_eq(-13, add(a, c))
  
  // è´Ÿæ•°ä¹˜æ³•
  assert_eq(50, multiply(a, c))
  assert_eq(-30, multiply(b, c))
  
  // æ··åˆè¿ç®—
  let result = add(multiply(a, b), c)  // (-10) * 5 + (-3) = -53
  assert_eq(-53, result)
}

test "temperature_conversion_scenarios" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢åœºæ™¯ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 2 + 30 (ç®€åŒ–å…¬å¼)
  
  let freezing_celsius = 0
  let room_celsius = 20
  let boiling_celsius = 100
  
  let freezing_fahrenheit = add(multiply(freezing_celsius, 2), 30)
  let room_fahrenheit = add(multiply(room_celsius, 2), 30)
  let boiling_fahrenheit = add(multiply(boiling_celsius, 2), 30)
  
  assert_eq(30, freezing_fahrenheit)  // 0Â°C â‰ˆ 30Â°F (ç®€åŒ–)
  assert_eq(70, room_fahrenheit)     // 20Â°C â‰ˆ 70Â°F (ç®€åŒ–)
  assert_eq(230, boiling_fahrenheit) // 100Â°C â‰ˆ 230Â°F (ç®€åŒ–)
}

test "calculation_chaining" {
  // æµ‹è¯•è®¡ç®—é“¾ï¼š((((a + b) + c) + d) + e)
  let a = 10
  let b = 20
  let c = 30
  let d = 40
  let e = 50
  
  let result = add(add(add(add(a, b), c), d), e)
  assert_eq(150, result)
  
  // æµ‹è¯•ä¹˜æ³•é“¾ï¼ša * b * c * d
  let m1 = 2
  let m2 = 3
  let m3 = 4
  let m4 = 5
  
  let product_result = multiply(multiply(multiply(m1, m2), m3), m4)
  assert_eq(120, product_result)
}

test "mixed_operations_complex" {
  // æµ‹è¯•æ··åˆè¿ç®—çš„å¤æ‚æƒ…å†µ
  let base_value = 100
  let multiplier = 3
  let addition = 50
  let subtraction = 25
  
  // è®¡ç®—ï¼š(base_value * multiplier) + addition - subtraction
  let step1 = multiply(base_value, multiplier)  // 300
  let step2 = add(step1, addition)              // 350
  let final_result = add(step2, -subtraction)   // 325
  
  assert_eq(325, final_result)
}

test "string_special_characters_extended" {
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let with_spaces = "John Doe"
  let with_symbols = "user@domain.com"
  let with_numbers = "Test123"
  let with_mixed = "User_2023@Project#1"
  let with_unicode = "æµ‹è¯•ä¸­æ–‡"
  let with_emoji = "ğŸŒğŸš€"
  
  assert_eq_string("Hello, John Doe!", greet(with_spaces))
  assert_eq_string("Hello, user@domain.com!", greet(with_symbols))
  assert_eq_string("Hello, Test123!", greet(with_numbers))
  assert_eq_string("Hello, User_2023@Project#1!", greet(with_mixed))
  assert_eq_string("Hello, æµ‹è¯•ä¸­æ–‡!", greet(with_unicode))
  assert_eq_string("Hello, ğŸŒğŸš€!", greet(with_emoji))
}

test "boundary_value_combinations_extended" {
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ç»„åˆæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  let one = 1
  let neg_one = -1
  
  // æœ€å¤§å€¼ä¸ä¸åŒå€¼çš„è¿ç®—
  assert_eq(max_val, add(max_val, 0))
  assert_eq(max_val, add(max_val, one))
  assert_eq(max_val, add(max_val, max_val))
  
  // æœ€å°å€¼ä¸ä¸åŒå€¼çš„è¿ç®—
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, add(min_val, neg_one))
  assert_eq(min_val, add(min_val, min_val))
  
  // ä¹˜æ³•è¾¹ç•Œæµ‹è¯•
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(max_val, multiply(max_val, one))
  assert_eq(min_val, multiply(min_val, one))
  assert_eq(min_val, multiply(max_val, neg_one))
  assert_eq(max_val, multiply(min_val, neg_one))
}