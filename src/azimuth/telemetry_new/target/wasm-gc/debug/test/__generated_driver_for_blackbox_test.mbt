// Generated by moon test.

type Moonbit_Test_Driver_Internal_No_Args_Function = () -> Unit raise Error

type Moonbit_Test_Driver_Internal_With_Args_Function = (Moonbit_Test_Driver_Internal_Test_Arg) -> Unit raise Error

type Moonbit_Test_Driver_Internal_Async_Function = async (Moonbit_Test_Driver_Internal_Test_Arg) -> Unit raise

type Moonbit_Test_Driver_Internal_No_Args_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_No_Args_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

type Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_With_Args_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

type Moonbit_Test_Driver_Internal_TestDriver_Async_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_Async_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

struct Moonbit_Test_Driver_Internal_Meta {
  filename : String
  index : Int
  attrs : @moonbitlang/core/builtin.Array[String]
}

enum Moonbit_Test_Driver_Internal__F {
  F0(Moonbit_Test_Driver_Internal_No_Args_Function)
  F1(Moonbit_Test_Driver_Internal_With_Args_Function)
  F2(Moonbit_Test_Driver_Internal_Async_Function)
}

struct Moonbit_Test_Driver_Internal__TestCase {
  f : Moonbit_Test_Driver_Internal__F
  meta : Moonbit_Test_Driver_Internal_Meta
}

let moonbit_test_driver_internal_no_args_tests : Moonbit_Test_Driver_Internal_No_Args_Map = {
  "telemetry_stream_processing_test.mbt": {
    0: (__test_74656c656d657472795f73747265616d5f70726f63657373696e675f746573742e6d6274_0, ["stream_data_ingestion"]),
    1: (__test_74656c656d657472795f73747265616d5f70726f63657373696e675f746573742e6d6274_1, ["stream_data_transformation"]),
    2: (__test_74656c656d657472795f73747265616d5f70726f63657373696e675f746573742e6d6274_2, ["real_time_stream_analytics"]),
    3: (__test_74656c656d657472795f73747265616d5f70726f63657373696e675f746573742e6d6274_3, ["stream_data_sinks"]),
  },
  "telemetry_simple_sampling_test.mbt": {
    0: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_0, ["telemetry_trace_id_ratio_sampling"]),
    1: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_1, ["telemetry_parent_based_sampling"]),
    2: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_2, ["telemetry_attribute_based_sampling"]),
    3: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_3, ["telemetry_adaptive_sampling"]),
    4: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_4, ["telemetry_probabilistic_sampling"]),
    5: (__test_74656c656d657472795f73696d706c655f73616d706c696e675f746573742e6d6274_5, ["telemetry_rate_limiting_sampling"]),
  },
  "telemetry_simple_error_test.mbt": {
    0: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_0, ["telemetry_connection_error_handling"]),
    1: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_1, ["telemetry_serialization_error_handling"]),
    2: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_2, ["telemetry_memory_error_handling"]),
    3: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_3, ["telemetry_data_corruption_handling"]),
    4: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_4, ["telemetry_circuit_breaker_error_handling"]),
    5: (__test_74656c656d657472795f73696d706c655f6572726f725f746573742e6d6274_5, ["telemetry_retry_policy_error_handling"]),
  },
  "telemetry_simple_config_test.mbt": {
    0: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_0, ["telemetry_service_config_validation"]),
    1: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_1, ["telemetry_exporter_config_validation"]),
    2: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_2, ["telemetry_sampling_config_validation"]),
    3: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_3, ["telemetry_resource_config_validation"]),
    4: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_4, ["telemetry_metrics_config_validation"]),
    5: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_5, ["telemetry_tracing_config_validation"]),
    6: (__test_74656c656d657472795f73696d706c655f636f6e6669675f746573742e6d6274_6, ["telemetry_logging_config_validation"]),
  },
  "telemetry_simple_aggregation_test.mbt": {
    0: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_0, ["telemetry_basic_sum"]),
    1: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_1, ["telemetry_basic_average"]),
    2: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_2, ["telemetry_min_max"]),
    3: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_3, ["telemetry_basic_counting"]),
    4: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_4, ["telemetry_percentage_calculation"]),
    5: (__test_74656c656d657472795f73696d706c655f6167677265676174696f6e5f746573742e6d6274_5, ["telemetry_simple_histogram"]),
  },
  "telemetry_service_discovery_test.mbt": {
    0: (__test_74656c656d657472795f736572766963655f646973636f766572795f746573742e6d6274_0, ["service_registry_discovery"]),
    1: (__test_74656c656d657472795f736572766963655f646973636f766572795f746573742e6d6274_1, ["service_health_monitoring"]),
    2: (__test_74656c656d657472795f736572766963655f646973636f766572795f746573742e6d6274_2, ["service_dependency_mapping"]),
    3: (__test_74656c656d657472795f736572766963655f646973636f766572795f746573742e6d6274_3, ["service_topology_visualization"]),
  },
  "telemetry_serialization_test.mbt": {
    0: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_0, ["telemetry_json_serialization"]),
    1: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_1, ["telemetry_protobuf_serialization"]),
    2: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_2, ["telemetry_metrics_serialization"]),
    3: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_3, ["telemetry_logs_serialization"]),
    4: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_4, ["telemetry_compression_serialization"]),
    5: (__test_74656c656d657472795f73657269616c697a6174696f6e5f746573742e6d6274_5, ["telemetry_batch_serialization"]),
  },
  "telemetry_security_test.mbt": {
    0: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_0, ["telemetry_data_encryption_aes"]),
    1: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_1, ["telemetry_key_management"]),
    2: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_2, ["telemetry_data_masking"]),
    3: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_3, ["telemetry_access_control"]),
    4: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_4, ["telemetry_audit_logging"]),
    5: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_5, ["telemetry_secure_transmission"]),
    6: (__test_74656c656d657472795f73656375726974795f746573742e6d6274_6, ["telemetry_vulnerability_protection"]),
  },
  "telemetry_security_compliance_test.mbt": {
    0: (__test_74656c656d657472795f73656375726974795f636f6d706c69616e63655f746573742e6d6274_0, ["data_privacy_compliance"]),
    1: (__test_74656c656d657472795f73656375726974795f636f6d706c69616e63655f746573742e6d6274_1, ["access_control_compliance"]),
    2: (__test_74656c656d657472795f73656375726974795f636f6d706c69616e63655f746573742e6d6274_2, ["data_retention_compliance"]),
    3: (__test_74656c656d657472795f73656375726974795f636f6d706c69616e63655f746573742e6d6274_3, ["encryption_compliance"]),
    4: (__test_74656c656d657472795f73656375726974795f636f6d706c69616e63655f746573742e6d6274_4, ["audit_logging_compliance"]),
  },
  "telemetry_sampling_test.mbt": {
    0: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_0, ["trace_sampling_probability"]),
    1: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_1, ["trace_sampling_decisions"]),
    2: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_2, ["parent_based_sampling"]),
    3: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_3, ["always_on_sampling"]),
    4: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_4, ["always_off_sampling"]),
    5: (__test_74656c656d657472795f73616d706c696e675f746573742e6d6274_5, ["attribute_based_sampling"]),
  },
  "telemetry_sampling_strategy_test.mbt": {
    0: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_0, ["telemetry_trace_id_ratio_sampling"]),
    1: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_1, ["telemetry_parent_based_sampling"]),
    2: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_2, ["telemetry_attribute_based_sampling"]),
    3: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_3, ["telemetry_adaptive_sampling"]),
    4: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_4, ["telemetry_probabilistic_sampling"]),
    5: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_5, ["telemetry_rate_limiting_sampling"]),
    6: (__test_74656c656d657472795f73616d706c696e675f73747261746567795f746573742e6d6274_6, ["telemetry_composite_sampling"]),
  },
  "telemetry_retention_policy_test.mbt": {
    0: (__test_74656c656d657472795f726574656e74696f6e5f706f6c6963795f746573742e6d6274_0, ["retention_policy_configuration"]),
    1: (__test_74656c656d657472795f726574656e74696f6e5f706f6c6963795f746573742e6d6274_1, ["retention_aging_process"]),
    2: (__test_74656c656d657472795f726574656e74696f6e5f706f6c6963795f746573742e6d6274_2, ["storage_tier_management"]),
    3: (__test_74656c656d657472795f726574656e74696f6e5f706f6c6963795f746573742e6d6274_3, ["retention_compliance_monitoring"]),
  },
  "telemetry_resource_utilization_test.mbt": {
    0: (__test_74656c656d657472795f7265736f757263655f7574696c697a6174696f6e5f746573742e6d6274_0, ["cpu_utilization_monitoring"]),
    1: (__test_74656c656d657472795f7265736f757263655f7574696c697a6174696f6e5f746573742e6d6274_1, ["memory_utilization_monitoring"]),
    2: (__test_74656c656d657472795f7265736f757263655f7574696c697a6174696f6e5f746573742e6d6274_2, ["disk_utilization_monitoring"]),
    3: (__test_74656c656d657472795f7265736f757263655f7574696c697a6174696f6e5f746573742e6d6274_3, ["network_utilization_monitoring"]),
    4: (__test_74656c656d657472795f7265736f757263655f7574696c697a6174696f6e5f746573742e6d6274_4, ["resource_utilization_trends"]),
  },
  "telemetry_resource_management_test.mbt": {
    0: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_0, ["telemetry_memory_pool_management"]),
    1: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_1, ["telemetry_buffer_management"]),
    2: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_2, ["telemetry_connection_pool_management"]),
    3: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_3, ["telemetry_thread_pool_management"]),
    4: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_4, ["telemetry_file_handle_management"]),
    5: (__test_74656c656d657472795f7265736f757263655f6d616e6167656d656e745f746573742e6d6274_5, ["telemetry_resource_cleanup"]),
  },
  "telemetry_recovery_test.mbt": {
    0: (__test_74656c656d657472795f7265636f766572795f746573742e6d6274_0, ["telemetry_backup_creation"]),
    1: (__test_74656c656d657472795f7265636f766572795f746573742e6d6274_1, ["telemetry_data_restoration"]),
    2: (__test_74656c656d657472795f7265636f766572795f746573742e6d6274_2, ["telemetry_incremental_backup"]),
    3: (__test_74656c656d657472795f7265636f766572795f746573742e6d6274_3, ["telemetry_point_in_time_recovery"]),
    4: (__test_74656c656d657472795f7265636f766572795f746573742e6d6274_4, ["telemetry_disaster_recovery"]),
  },
  "telemetry_performance_test.mbt": {
    0: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_0, ["telemetry_cpu_performance_monitoring"]),
    1: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_1, ["telemetry_memory_performance_monitoring"]),
    2: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_2, ["telemetry_disk_performance_monitoring"]),
    3: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_3, ["telemetry_network_performance_monitoring"]),
    4: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_4, ["telemetry_application_performance_monitoring"]),
    5: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_5, ["telemetry_performance_benchmarking"]),
    6: (__test_74656c656d657472795f706572666f726d616e63655f746573742e6d6274_6, ["telemetry_performance_alerting"]),
  },
  "telemetry_performance_optimization_test.mbt": {
    0: (__test_74656c656d657472795f706572666f726d616e63655f6f7074696d697a6174696f6e5f746573742e6d6274_0, ["batch_processing_optimization"]),
    1: (__test_74656c656d657472795f706572666f726d616e63655f6f7074696d697a6174696f6e5f746573742e6d6274_1, ["memory_usage_optimization"]),
    2: (__test_74656c656d657472795f706572666f726d616e63655f6f7074696d697a6174696f6e5f746573742e6d6274_2, ["network_io_optimization"]),
    3: (__test_74656c656d657472795f706572666f726d616e63655f6f7074696d697a6174696f6e5f746573742e6d6274_3, ["cpu_utilization_optimization"]),
    4: (__test_74656c656d657472795f706572666f726d616e63655f6f7074696d697a6174696f6e5f746573742e6d6274_4, ["cache_optimization"]),
  },
  "telemetry_network_test.mbt": {
    0: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_0, ["telemetry_http_transport"]),
    1: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_1, ["telemetry_grpc_transport"]),
    2: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_2, ["telemetry_tls_transport_security"]),
    3: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_3, ["telemetry_connection_pooling"]),
    4: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_4, ["telemetry_network_retry_strategy"]),
    5: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_5, ["telemetry_network_compression"]),
    6: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_6, ["telemetry_network_load_balancing"]),
    7: (__test_74656c656d657472795f6e6574776f726b5f746573742e6d6274_7, ["telemetry_network_metrics"]),
  },
  "telemetry_multi_tenant_isolation_test.mbt": {
    0: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_0, ["tenant_data_isolation"]),
    1: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_1, [""]),
    2: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_2, [""]),
    3: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_3, [""]),
    4: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_4, [""]),
    5: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_5, ["tenant_resource_quotas"]),
    6: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_6, ["tenant_performance_isolation"]),
    7: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_7, [""]),
    8: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_8, [""]),
    9: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_9, [""]),
    10: (__test_74656c656d657472795f6d756c74695f74656e616e745f69736f6c6174696f6e5f746573742e6d6274_10, [""]),
  },
  "telemetry_metrics_collection_test.mbt": {
    0: (__test_74656c656d657472795f6d6574726963735f636f6c6c656374696f6e5f746573742e6d6274_0, ["metrics_counter_functionality"]),
    1: (__test_74656c656d657472795f6d6574726963735f636f6c6c656374696f6e5f746573742e6d6274_1, ["metrics_histogram_functionality"]),
    2: (__test_74656c656d657472795f6d6574726963735f636f6c6c656374696f6e5f746573742e6d6274_2, ["metrics_gauge_functionality"]),
    3: (__test_74656c656d657472795f6d6574726963735f636f6c6c656374696f6e5f746573742e6d6274_3, ["metrics_with_attributes"]),
    4: (__test_74656c656d657472795f6d6574726963735f636f6c6c656374696f6e5f746573742e6d6274_4, ["metrics_aggregation"]),
  },
  "telemetry_metrics_aggregation_test.mbt": {
    0: (__test_74656c656d657472795f6d6574726963735f6167677265676174696f6e5f746573742e6d6274_0, ["counter_metrics_aggregation"]),
    1: (__test_74656c656d657472795f6d6574726963735f6167677265676174696f6e5f746573742e6d6274_1, ["gauge_metrics_aggregation"]),
    2: (__test_74656c656d657472795f6d6574726963735f6167677265676174696f6e5f746573742e6d6274_2, ["histogram_metrics_aggregation"]),
    3: (__test_74656c656d657472795f6d6574726963735f6167677265676174696f6e5f746573742e6d6274_3, ["multi_service_metrics_aggregation"]),
  },
  "telemetry_lifecycle_test.mbt": {
    0: (__test_74656c656d657472795f6c6966656379636c655f746573742e6d6274_0, ["telemetry_initialization_and_shutdown"]),
    1: (__test_74656c656d657472795f6c6966656379636c655f746573742e6d6274_1, ["telemetry_component_lifecycle"]),
    2: (__test_74656c656d657472795f6c6966656379636c655f746573742e6d6274_2, ["telemetry_resource_cleanup"]),
    3: (__test_74656c656d657472795f6c6966656379636c655f746573742e6d6274_3, ["telemetry_graceful_shutdown"]),
  },
  "telemetry_error_tracking_test.mbt": {
    0: (__test_74656c656d657472795f6572726f725f747261636b696e675f746573742e6d6274_0, ["error_classification_categorization"]),
    1: (__test_74656c656d657472795f6572726f725f747261636b696e675f746573742e6d6274_1, ["error_stack_trace_analysis"]),
    2: (__test_74656c656d657472795f6572726f725f747261636b696e675f746573742e6d6274_2, ["error_frequency_analysis"]),
    3: (__test_74656c656d657472795f6572726f725f747261636b696e675f746573742e6d6274_3, ["error_impact_assessment"]),
  },
  "telemetry_error_recovery_test.mbt": {
    0: (__test_74656c656d657472795f6572726f725f7265636f766572795f746573742e6d6274_0, ["connection_failure_recovery"]),
    1: (__test_74656c656d657472795f6572726f725f7265636f766572795f746573742e6d6274_1, ["data_pipeline_failure_recovery"]),
    2: (__test_74656c656d657472795f6572726f725f7265636f766572795f746573742e6d6274_2, ["circuit_breaker_recovery"]),
    3: (__test_74656c656d657472795f6572726f725f7265636f766572795f746573742e6d6274_3, ["graceful_degradation_recovery"]),
    4: (__test_74656c656d657472795f6572726f725f7265636f766572795f746573742e6d6274_4, ["data_consistency_recovery"]),
  },
  "telemetry_error_handling_test.mbt": {
    0: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_0, ["telemetry_connection_error_handling"]),
    1: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_1, ["telemetry_serialization_error_handling"]),
    2: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_2, ["telemetry_memory_error_handling"]),
    3: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_3, ["telemetry_data_corruption_handling"]),
    4: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_4, ["telemetry_circuit_breaker_error_handling"]),
    5: (__test_74656c656d657472795f6572726f725f68616e646c696e675f746573742e6d6274_5, ["telemetry_retry_policy_error_handling"]),
  },
  "telemetry_enhanced_features_test.mbt": {
    0: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_0, ["telemetry_data_compression"]),
    1: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_1, ["telemetry_data_encryption"]),
    2: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_2, ["telemetry_sampling_strategy"]),
    3: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_3, ["telemetry_data_aggregation"]),
    4: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_4, ["telemetry_data_filtering"]),
    5: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_5, ["telemetry_data_caching"]),
    6: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_6, ["telemetry_data_export"]),
    7: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_7, ["telemetry_health_check"]),
    8: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_8, ["telemetry_internationalization"]),
    9: (__test_74656c656d657472795f656e68616e6365645f66656174757265735f746573742e6d6274_9, ["telemetry_multi_tenant_isolation"]),
  },
  "telemetry_encryption_test.mbt": {
    0: (__test_74656c656d657472795f656e6372797074696f6e5f746573742e6d6274_0, ["telemetry_data_encryption_aes"]),
    1: (__test_74656c656d657472795f656e6372797074696f6e5f746573742e6d6274_1, ["telemetry_data_encryption_key_rotation"]),
    2: (__test_74656c656d657472795f656e6372797074696f6e5f746573742e6d6274_2, ["telemetry_data_encryption_field_level"]),
    3: (__test_74656c656d657472795f656e6372797074696f6e5f746573742e6d6274_3, ["telemetry_data_encryption_compliance"]),
    4: (__test_74656c656d657472795f656e6372797074696f6e5f746573742e6d6274_4, ["telemetry_data_encryption_performance"]),
  },
  "telemetry_encryption_security_test.mbt": {
    0: (__test_74656c656d657472795f656e6372797074696f6e5f73656375726974795f746573742e6d6274_0, ["telemetry_data_field_encryption"]),
    1: (__test_74656c656d657472795f656e6372797074696f6e5f73656375726974795f746573742e6d6274_1, ["telemetry_transmission_encryption"]),
    2: (__test_74656c656d657472795f656e6372797074696f6e5f73656375726974795f746573742e6d6274_2, ["telemetry_access_control"]),
    3: (__test_74656c656d657472795f656e6372797074696f6e5f73656375726974795f746573742e6d6274_3, ["telemetry_data_integrity"]),
  },
  "telemetry_distributed_tracing_test.mbt": {
    0: (__test_74656c656d657472795f64697374726962757465645f74726163696e675f746573742e6d6274_0, ["trace_context_propagation"]),
    1: (__test_74656c656d657472795f64697374726962757465645f74726163696e675f746573742e6d6274_1, ["span_lifecycle_management"]),
    2: (__test_74656c656d657472795f64697374726962757465645f74726163696e675f746573742e6d6274_2, ["trace_sampling_strategies"]),
    3: (__test_74656c656d657472795f64697374726962757465645f74726163696e675f746573742e6d6274_3, ["cross_service_trace_correlation"]),
    4: (__test_74656c656d657472795f64697374726962757465645f74726163696e675f746573742e6d6274_4, ["trace_error_handling"]),
  },
  "telemetry_distributed_context_test.mbt": {
    0: (__test_74656c656d657472795f64697374726962757465645f636f6e746578745f746573742e6d6274_0, ["context_trace_propagation"]),
    1: (__test_74656c656d657472795f64697374726962757465645f636f6e746578745f746573742e6d6274_1, ["context_baggage_items"]),
    2: (__test_74656c656d657472795f64697374726962757465645f636f6e746578745f746573742e6d6274_2, ["context_sampling_decision"]),
    3: (__test_74656c656d657472795f64697374726962757465645f636f6e746578745f746573742e6d6274_3, ["context_cross_service_propagation"]),
  },
  "telemetry_data_validation_test.mbt": {
    0: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_0, ["trace_id_validation"]),
    1: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_1, ["span_id_validation"]),
    2: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_2, ["metric_name_validation"]),
    3: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_3, ["attribute_key_validation"]),
    4: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_4, ["log_level_validation"]),
    5: (__test_74656c656d657472795f646174615f76616c69646174696f6e5f746573742e6d6274_5, ["service_name_validation"]),
  },
  "telemetry_data_pipeline_test.mbt": {
    0: (__test_74656c656d657472795f646174615f706970656c696e655f746573742e6d6274_0, ["data_ingestion_pipeline"]),
    1: (__test_74656c656d657472795f646174615f706970656c696e655f746573742e6d6274_1, ["data_transformation_pipeline"]),
    2: (__test_74656c656d657472795f646174615f706970656c696e655f746573742e6d6274_2, ["data_aggregation_pipeline"]),
    3: (__test_74656c656d657472795f646174615f706970656c696e655f746573742e6d6274_3, ["data_filtering_pipeline"]),
  },
  "telemetry_data_conversion_test.mbt": {
    0: (__test_74656c656d657472795f646174615f636f6e76657273696f6e5f746573742e6d6274_0, ["metric_value_conversion"]),
    1: (__test_74656c656d657472795f646174615f636f6e76657273696f6e5f746573742e6d6274_1, ["trace_format_conversion"]),
    2: (__test_74656c656d657472795f646174615f636f6e76657273696f6e5f746573742e6d6274_2, ["log_level_conversion"]),
    3: (__test_74656c656d657472795f646174615f636f6e76657273696f6e5f746573742e6d6274_3, ["attribute_type_conversion"]),
    4: (__test_74656c656d657472795f646174615f636f6e76657273696f6e5f746573742e6d6274_4, ["timestamp_conversion"]),
  },
  "telemetry_custom_instrumentation_test.mbt": {
    0: (__test_74656c656d657472795f637573746f6d5f696e737472756d656e746174696f6e5f746573742e6d6274_0, ["custom_counter_instrumentation"]),
    1: (__test_74656c656d657472795f637573746f6d5f696e737472756d656e746174696f6e5f746573742e6d6274_1, ["custom_gauge_instrumentation"]),
    2: (__test_74656c656d657472795f637573746f6d5f696e737472756d656e746174696f6e5f746573742e6d6274_2, ["custom_histogram_instrumentation"]),
    3: (__test_74656c656d657472795f637573746f6d5f696e737472756d656e746174696f6e5f746573742e6d6274_3, ["custom_business_metrics"]),
    4: (__test_74656c656d657472795f637573746f6d5f696e737472756d656e746174696f6e5f746573742e6d6274_4, ["custom_error_metrics"]),
  },
  "telemetry_custom_dashboard_test.mbt": {
    0: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_0, ["dashboard_widget_configuration"]),
    1: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_1, ["dashboard_data_source_integration"]),
    2: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_2, ["dashboard_template_system"]),
    3: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_3, ["dashboard_access_control"]),
    4: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_4, [""]),
    5: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_5, [""]),
    6: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_6, [""]),
    7: (__test_74656c656d657472795f637573746f6d5f64617368626f6172645f746573742e6d6274_7, [""]),
  },
  "telemetry_correlation_analysis_test.mbt": {
    0: (__test_74656c656d657472795f636f7272656c6174696f6e5f616e616c797369735f746573742e6d6274_0, ["trace_span_correlation_analysis"]),
    1: (__test_74656c656d657472795f636f7272656c6174696f6e5f616e616c797369735f746573742e6d6274_1, ["cross_service_correlation_analysis"]),
    2: (__test_74656c656d657472795f636f7272656c6174696f6e5f616e616c797369735f746573742e6d6274_2, ["temporal_correlation_analysis"]),
    3: (__test_74656c656d657472795f636f7272656c6174696f6e5f616e616c797369735f746573742e6d6274_3, ["metric_log_correlation_analysis"]),
  },
  "telemetry_context_propagation_test.mbt": {
    0: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_0, ["telemetry_trace_context_propagation"]),
    1: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_1, ["telemetry_baggage_propagation"]),
    2: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_2, ["telemetry_correlation_context_propagation"]),
    3: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_3, ["telemetry_cross_service_propagation"]),
    4: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_4, ["telemetry_async_context_propagation"]),
    5: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_5, ["telemetry_message_queue_context_propagation"]),
    6: (__test_74656c656d657472795f636f6e746578745f70726f7061676174696f6e5f746573742e6d6274_6, ["telemetry_grpc_context_propagation"]),
  },
  "telemetry_configuration_hot_reload_test.mbt": {
    0: (__test_74656c656d657472795f636f6e66696775726174696f6e5f686f745f72656c6f61645f746573742e6d6274_0, ["dynamic_config_update"]),
    1: (__test_74656c656d657472795f636f6e66696775726174696f6e5f686f745f72656c6f61645f746573742e6d6274_1, ["config_validation_on_reload"]),
    2: (__test_74656c656d657472795f636f6e66696775726174696f6e5f686f745f72656c6f61645f746573742e6d6274_2, ["config_rollback_on_failure"]),
    3: (__test_74656c656d657472795f636f6e66696775726174696f6e5f686f745f72656c6f61645f746573742e6d6274_3, ["config_change_notification"]),
  },
  "telemetry_config_validation_test.mbt": {
    0: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_0, ["telemetry_service_config_validation"]),
    1: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_1, ["telemetry_exporter_config_validation"]),
    2: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_2, ["telemetry_sampling_config_validation"]),
    3: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_3, ["telemetry_resource_config_validation"]),
    4: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_4, ["telemetry_metrics_config_validation"]),
    5: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_5, ["telemetry_tracing_config_validation"]),
    6: (__test_74656c656d657472795f636f6e6669675f76616c69646174696f6e5f746573742e6d6274_6, ["telemetry_logging_config_validation"]),
  },
  "telemetry_config_management_test.mbt": {
    0: (__test_74656c656d657472795f636f6e6669675f6d616e6167656d656e745f746573742e6d6274_0, ["telemetry_service_configuration"]),
    1: (__test_74656c656d657472795f636f6e6669675f6d616e6167656d656e745f746573742e6d6274_1, ["telemetry_endpoint_configuration"]),
    2: (__test_74656c656d657472795f636f6e6669675f6d616e6167656d656e745f746573742e6d6274_2, ["telemetry_sampling_configuration"]),
    3: (__test_74656c656d657472795f636f6e6669675f6d616e6167656d656e745f746573742e6d6274_3, ["telemetry_batch_configuration"]),
    4: (__test_74656c656d657472795f636f6e6669675f6d616e6167656d656e745f746573742e6d6274_4, ["telemetry_resource_configuration"]),
  },
  "telemetry_compression_test.mbt": {
    0: (__test_74656c656d657472795f636f6d7072657373696f6e5f746573742e6d6274_0, ["telemetry_data_compression_gzip"]),
    1: (__test_74656c656d657472795f636f6d7072657373696f6e5f746573742e6d6274_1, ["telemetry_data_compression_batch"]),
    2: (__test_74656c656d657472795f636f6d7072657373696f6e5f746573742e6d6274_2, ["telemetry_data_compression_algorithms"]),
    3: (__test_74656c656d657472795f636f6d7072657373696f6e5f746573742e6d6274_3, ["telemetry_data_compression_threshold"]),
    4: (__test_74656c656d657472795f636f6d7072657373696f6e5f746573742e6d6274_4, ["telemetry_data_compression_error_handling"]),
  },
  "telemetry_compression_optimization_test.mbt": {
    0: (__test_74656c656d657472795f636f6d7072657373696f6e5f6f7074696d697a6174696f6e5f746573742e6d6274_0, ["telemetry_data_compression_ratio"]),
    1: (__test_74656c656d657472795f636f6d7072657373696f6e5f6f7074696d697a6174696f6e5f746573742e6d6274_1, ["telemetry_batch_compression_optimization"]),
    2: (__test_74656c656d657472795f636f6d7072657373696f6e5f6f7074696d697a6174696f6e5f746573742e6d6274_2, ["telemetry_adaptive_compression"]),
    3: (__test_74656c656d657472795f636f6d7072657373696f6e5f6f7074696d697a6174696f6e5f746573742e6d6274_3, ["telemetry_compression_memory_optimization"]),
  },
  "telemetry_compatibility_test.mbt": {
    0: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_0, ["telemetry_opentelemetry_compatibility"]),
    1: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_1, ["telemetry_backward_compatibility"]),
    2: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_2, ["telemetry_cross_platform_compatibility"]),
    3: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_3, ["telemetry_protocol_compatibility"]),
    4: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_4, ["telemetry_version_compatibility"]),
    5: (__test_74656c656d657472795f636f6d7061746962696c6974795f746573742e6d6274_5, ["telemetry_data_model_compatibility"]),
  },
  "telemetry_cache_test.mbt": {
    0: (__test_74656c656d657472795f63616368655f746573742e6d6274_0, ["telemetry_memory_cache_operations"]),
    1: (__test_74656c656d657472795f63616368655f746573742e6d6274_1, ["telemetry_cache_ttl_expiration"]),
    2: (__test_74656c656d657472795f63616368655f746573742e6d6274_2, ["telemetry_cache_lru_eviction"]),
    3: (__test_74656c656d657472795f63616368655f746573742e6d6274_3, ["telemetry_cache_batch_operations"]),
    4: (__test_74656c656d657472795f63616368655f746573742e6d6274_4, ["telemetry_cache_persistence"]),
    5: (__test_74656c656d657472795f63616368655f746573742e6d6274_5, ["telemetry_cache_statistics"]),
    6: (__test_74656c656d657472795f63616368655f746573742e6d6274_6, ["telemetry_cache_warming"]),
    7: (__test_74656c656d657472795f63616368655f746573742e6d6274_7, ["telemetry_cache_invalidation"]),
  },
  "telemetry_batch_optimization_test.mbt": {
    0: (__test_74656c656d657472795f62617463685f6f7074696d697a6174696f6e5f746573742e6d6274_0, ["batch_size_optimization"]),
    1: (__test_74656c656d657472795f62617463685f6f7074696d697a6174696f6e5f746573742e6d6274_1, ["batch_processing_time"]),
    2: (__test_74656c656d657472795f62617463685f6f7074696d697a6174696f6e5f746573742e6d6274_2, ["batch_memory_usage"]),
    3: (__test_74656c656d657472795f62617463685f6f7074696d697a6174696f6e5f746573742e6d6274_3, ["batch_priority_processing"]),
    4: (__test_74656c656d657472795f62617463685f6f7074696d697a6174696f6e5f746573742e6d6274_4, ["batch_error_handling"]),
  },
  "telemetry_backup_recovery_test.mbt": {
    0: (__test_74656c656d657472795f6261636b75705f7265636f766572795f746573742e6d6274_0, ["backup_strategy_configuration"]),
    1: (__test_74656c656d657472795f6261636b75705f7265636f766572795f746573742e6d6274_1, ["backup_execution_monitoring"]),
    2: (__test_74656c656d657472795f6261636b75705f7265636f766572795f746573742e6d6274_2, ["restore_process_validation"]),
    3: (__test_74656c656d657472795f6261636b75705f7265636f766572795f746573742e6d6274_3, ["disaster_recovery_testing"]),
  },
  "telemetry_anomaly_detection_test.mbt": {
    0: (__test_74656c656d657472795f616e6f6d616c795f646574656374696f6e5f746573742e6d6274_0, ["metric_anomaly_detection"]),
    1: (__test_74656c656d657472795f616e6f6d616c795f646574656374696f6e5f746573742e6d6274_1, ["log_anomaly_detection"]),
    2: (__test_74656c656d657472795f616e6f6d616c795f646574656374696f6e5f746573742e6d6274_2, ["trace_anomaly_detection"]),
    3: (__test_74656c656d657472795f616e6f6d616c795f646574656374696f6e5f746573742e6d6274_3, ["behavioral_anomaly_detection"]),
  },
  "telemetry_alerting_test.mbt": {
    0: (__test_74656c656d657472795f616c657274696e675f746573742e6d6274_0, ["threshold_based_alerting"]),
    1: (__test_74656c656d657472795f616c657274696e675f746573742e6d6274_1, ["percentage_change_alerting"]),
    2: (__test_74656c656d657472795f616c657274696e675f746573742e6d6274_2, ["multi_condition_alerting"]),
    3: (__test_74656c656d657472795f616c657274696e675f746573742e6d6274_3, ["time_based_alerting"]),
    4: (__test_74656c656d657472795f616c657274696e675f746573742e6d6274_4, ["alert_escalation_test"]),
  },
  "telemetry_aggregation_test.mbt": {
    0: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_0, ["telemetry_metrics_aggregation_sum"]),
    1: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_1, ["telemetry_metrics_aggregation_average"]),
    2: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_2, ["telemetry_metrics_aggregation_min_max"]),
    3: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_3, ["telemetry_metrics_aggregation_percentiles"]),
    4: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_4, ["telemetry_histogram_aggregation"]),
    5: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_5, ["telemetry_time_series_aggregation"]),
    6: (__test_74656c656d657472795f6167677265676174696f6e5f746573742e6d6274_6, ["telemetry_group_by_aggregation"]),
  },
  "simple_telemetry_test.mbt": {
    0: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_0, ["basic_string_operations"]),
    1: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_1, ["telemetry_service_identification"]),
    2: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_2, ["telemetry_trace_identification"]),
    3: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_3, ["telemetry_metric_data"]),
    4: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_4, ["telemetry_log_severity_levels"]),
    5: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_5, ["telemetry_attribute_operations"]),
    6: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_6, ["telemetry_resource_metadata"]),
    7: (__test_73696d706c655f74656c656d657472795f746573742e6d6274_7, ["telemetry_batch_processing"]),
  },
  "cross_service_telemetry_test.mbt": {
    0: (__test_63726f73735f736572766963655f74656c656d657472795f746573742e6d6274_0, ["cross_service_trace_propagation"]),
    1: (__test_63726f73735f736572766963655f74656c656d657472795f746573742e6d6274_1, ["cross_service_headers"]),
    2: (__test_63726f73735f736572766963655f74656c656d657472795f746573742e6d6274_2, ["cross_service_metrics"]),
    3: (__test_63726f73735f736572766963655f74656c656d657472795f746573742e6d6274_3, ["cross_service_error_tracking"]),
    4: (__test_63726f73735f736572766963655f74656c656d657472795f746573742e6d6274_4, ["cross_service_correlation"]),
  },
}
let moonbit_test_driver_internal_with_args_tests : Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map = { }  // WILL BE REPLACED
let moonbit_test_driver_internal_async_tests : Moonbit_Test_Driver_Internal_TestDriver_Async_Map = { }  // WILL BE REPLACED

fn moonbit_test_driver_internal_apply_filter(
  no_args_tests : Moonbit_Test_Driver_Internal_No_Args_Map,
  with_args_tests : Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map,
  async_tests : Moonbit_Test_Driver_Internal_TestDriver_Async_Map,
  file_filter : String,
  index_filter : Int
) -> Option[Moonbit_Test_Driver_Internal__TestCase] {
  match no_args_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F0(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  match with_args_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F1(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  match async_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F2(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  None
}

pub fn moonbit_test_driver_internal_do_execute(
  async_tests : Array[async () -> Unit],
  filename : String,
  index : Int,
) -> Unit {
  let filtered_test = moonbit_test_driver_internal_apply_filter(
    moonbit_test_driver_internal_no_args_tests,
    moonbit_test_driver_internal_with_args_tests,
    moonbit_test_driver_internal_async_tests,
    filename,
    index
  )

  fn handle_result(
    test_name : String,
    file_name : String,
    message : String,
    skipped : Bool,
  ) {
    // In WASM, this function is called by the external test driver, but here
    // in native mode there's nothing that calls it, so we call it manually.
    if not(skipped) && MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE {
      
    }
    let file_name = file_name.escape()
    let test_name = test_name.escape()
    let message = message.escape()
    @moonbitlang/core/builtin.println("----- BEGIN MOON TEST RESULT -----")
    @moonbitlang/core/builtin.println(
      "{\"package\": \"azimuth/telemetry_new\", \"filename\": \{file_name}, \"index\": \"\{index}\", \"test_name\": \{test_name}, \"message\": \{message}}",
    )
    @moonbitlang/core/builtin.println("----- END MOON TEST RESULT -----")
  }

  match filtered_test {
    Some(item) => {
      let attrs = item.meta.attrs
      let file_name = item.meta.filename
      let name = if attrs.is_empty() { "" } else { attrs[0] }
      let name = if name.length() == 0 {
        item.meta.index.to_string()
      } else {
        name
      }

      if MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE && attrs.iter().any(fn(attr) -> Bool {
        attr is [.."panic", ..]
      }) {
        @moonbitlang/core/builtin.println("skipped test block: \{file_name}: \{attrs[0]}")
        handle_result(name, file_name, "skipped test", true)
        return
      }

      fn on_err(err : Error) {
        match err {
          @moonbitlang/core/builtin.Failure(e)
          | @moonbitlang/core/builtin.InspectError(e)
          | @moonbitlang/core/builtin.SnapshotError(e)
          | MoonBitTestDriverInternalJsError(e) => {
            handle_result(name, file_name, e, false)
          }
          e => {
            let message = moonbit_test_driver_internal_error_to_string(e)
            handle_result(name, file_name, message, false)
          }
        }
      }

      match item.f {
        Moonbit_Test_Driver_Internal__F::F0(f) => {
          moonbit_test_driver_internal_catch_error(
            f,
            on_ok=() => handle_result(name, file_name, "", false),
            on_err~,
          )
        }
        Moonbit_Test_Driver_Internal__F::F1(f) => {
          moonbit_test_driver_internal_catch_error(
            () => f(moonbit_test_driver_internal_new_test_arg(name)),
            on_ok=() => handle_result(name, file_name, "", false),
            on_err~,
          )
        }
        Moonbit_Test_Driver_Internal__F::F2(f) =>
          async_tests.push(() => {
            try f(moonbit_test_driver_internal_new_test_arg(name)) catch {
              err if moonbit_test_driver_internal_is_being_cancelled() => raise err
              err => on_err(err)
            } noraise {
              _ => handle_result(name, file_name, "", false)
            }
          })
      }
    }
    _ => handle_result("", "", "skipped test", true)
  }
}

///|
let moonbit_test_driver_internal_max_concurrent_tests : Int = 10

#cfg(target="native")
#test_entry
fn main {
  let async_tests = []
  for arg in moonbit_test_driver_internal_native_parse_args() {
    moonbit_test_driver_internal_do_execute(async_tests, arg.0, arg.1)
  }
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(not(target="native"))
#test_entry
fn main {
  ()
}

#cfg(target="js")
pub fn moonbit_test_driver_internal_execute(
  tests : Array[MoonBitTestDriverInternalTestEntry],
) -> Unit {
  let async_tests = []
  for i in 0..<tests.length() {
    let entry = tests[i]
    moonbit_test_driver_internal_do_execute(async_tests, entry.filename(), entry.index())
  }
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(any(target="wasm", target="wasm-gc"))
pub fn moonbit_test_driver_internal_execute(
  filename : MoonbitTestDriverInternalExternString,
  index : Int,
) -> Unit {
  let filename = moonbit_test_driver_internal_get_file_name(filename)
  let async_tests = []
  moonbit_test_driver_internal_do_execute(async_tests, filename, index)
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(not(target="native"))
pub fn moonbit_test_driver_finish() -> Unit {
  
}
type Moonbit_Test_Driver_Internal_Test_Arg = Int

fn moonbit_test_driver_internal_new_test_arg(
  _ : String,
) -> Moonbit_Test_Driver_Internal_Test_Arg {
  42
}
///|
fn moonbit_test_driver_internal_run_async_tests(
  _tests : @moonbitlang/core/builtin.Array[async () -> Unit],
) -> Unit {
  @moonbitlang/core/builtin.ignore(moonbit_test_driver_internal_max_concurrent_tests)
}

///|
fn moonbit_test_driver_internal_is_being_cancelled() -> Bool {
  false
}
fn moonbit_test_driver_internal_error_to_string(x : Error) -> String = "%error.to_string"

#cfg(target="native")
fn string_get(s: String, index: Int) -> Int = "%string_get"

#cfg(not(target="js"))
fn moonbit_unsafe_char_from_int(x : Int) -> Char = "%identity"

#cfg(target="native")
const MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE = true

#cfg(not(target="native"))
const MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE = false

// =========================================================
// ================== BEGIN WASM SPECIFIC ==================
// =========================================================

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_get_file_name(file_name : MoonbitTestDriverInternalExternString) -> String {
  moonbit_test_driver_internal_string_from_extern(file_name)
}

#cfg(any(target="wasm", target="wasm-gc"))
#external
type MoonbitTestDriverInternalStringReadHandle

#cfg(any(target="wasm", target="wasm-gc"))
#external
type MoonbitTestDriverInternalExternString

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_begin_read_string(s : MoonbitTestDriverInternalExternString) -> MoonbitTestDriverInternalStringReadHandle = "__moonbit_fs_unstable" "begin_read_string"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_string_read_char(handle : MoonbitTestDriverInternalStringReadHandle) -> Int = "__moonbit_fs_unstable" "string_read_char"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_finish_read_string(handle : MoonbitTestDriverInternalStringReadHandle) = "__moonbit_fs_unstable" "finish_read_string"

#cfg(any(target="wasm", target="wasm-gc"))
fn fixedarray_to_bytes(arr : FixedArray[Byte]) -> Bytes = "%identity"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_string_from_extern(e : MoonbitTestDriverInternalExternString) -> String {
  let buf = FixedArray::make(512, Byte::default())
  let mut len = 0
  let handle = moonbit_test_driver_internal_begin_read_string(e)
  while true {
    let ch = moonbit_test_driver_internal_string_read_char(handle)
    if ch == -1 {
      break
    } else {
      let written_bytes_len = buf.set_utf16le_char(len, moonbit_unsafe_char_from_int(ch))
      len += written_bytes_len
    }
  }
  moonbit_test_driver_internal_finish_read_string(handle)
  fixedarray_to_bytes(buf).to_unchecked_string(offset = 0, length = len).to_string()
}

// =========================================================
// =================== END WASM SPECIFIC ===================
// =========================================================

// =========================================================
// ================= BEGIN NATIVE SPECIFIC =================
// =========================================================
#cfg(target="native")
fn moonbit_test_driver_internal_native_parse_args() -> @moonbitlang/core/builtin.Array[(String, Int)] {
  fn moonbit_test_driver_internal_parse_int_(s : String) -> Int {
    let mut res = 0
    let len = s.length()
    for i = 0; i < len; i = i + 1 {
      res = res * 10 + (string_get(s, i) - '0')
    }
    res
  }

  fn moonbit_test_driver_internal_utf8_bytes_to_mbt_string(bytes : Bytes) -> String {
    let res = @moonbitlang/core/builtin.StringBuilder::new()
    let len = bytes.length()
    let mut i = 0
    while i < len {
      let mut c = bytes[i].to_int()
      if c < 0x80 {
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 1
      } else if c < 0xE0 {
        if i + 1 >= len {
          break
        }
        c = ((c & 0x1F) << 6) | (bytes[i + 1].to_int() & 0x3F)
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 2
      } else if c < 0xF0 {
        if i + 2 >= len {
          break
        }
        c = ((c & 0x0F) << 12) |
          ((bytes[i + 1].to_int() & 0x3F) << 6) |
          (bytes[i + 2].to_int() & 0x3F)
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 3
      } else {
        if i + 3 >= len {
          break
        }
        c = ((c & 0x07) << 18) |
          ((bytes[i + 1].to_int() & 0x3F) << 12) |
          ((bytes[i + 2].to_int() & 0x3F) << 6) |
          (bytes[i + 3].to_int() & 0x3F)
        c -= 0x10000
        res.write_char(moonbit_unsafe_char_from_int((c >> 10) + 0xD800))
        res.write_char(moonbit_unsafe_char_from_int((c & 0x3FF) + 0xDC00))
        i += 4
      }
    }
    res.to_string()
  }

  fn moonbit_test_driver_internal_get_cli_args_internal() -> @moonbitlang/core/builtin.Array[String] {
    let tmp = moonbit_test_driver_internal_get_cli_args_ffi()
    let res = @moonbitlang/core/builtin.Array::new(capacity=tmp.length())
    for i = 0; i < tmp.length(); i = i + 1 {
      res.push(moonbit_test_driver_internal_utf8_bytes_to_mbt_string(tmp[i]))
    }
    res
  }

  fn moonbit_test_driver_internal_split_mbt_string(s : String, sep : Char) -> @moonbitlang/core/builtin.Array[String] {
    let res = []
    let mut i = 0
    let mut start = 0
    while i < s.length() {
      if moonbit_unsafe_char_from_int(string_get(s, i)) == sep {
        res.push(s.unsafe_substring(start = start, end = i))
        start = i + 1
      }
      i += 1
    }
    if start < s.length() {
      res.push(s.unsafe_substring(start = start, end = s.length()))
    }
    res
  }

  let file_and_index = []

  let cli_args = moonbit_test_driver_internal_get_cli_args_internal()
  let test_args = moonbit_test_driver_internal_split_mbt_string(cli_args[1], '/')
  for arg in test_args {
    let file_and_range = moonbit_test_driver_internal_split_mbt_string(arg, ':')
    let file = file_and_range[0]
    let range = file_and_range[1]
    let start_and_end = moonbit_test_driver_internal_split_mbt_string(range, '-')
    let start = moonbit_test_driver_internal_parse_int_(start_and_end[0])
    let end = moonbit_test_driver_internal_parse_int_(start_and_end[1])
    for i = start; i < end; i = i + 1 {
      file_and_index.push((file, i))
    }
  }

  file_and_index
}

#cfg(target="native")
fn moonbit_test_driver_internal_get_cli_args_ffi() -> FixedArray[Bytes] = "$moonbit.get_cli_args"

// =========================================================
// ================== END NATIVE SPECIFIC ==================
// =========================================================

// =========================================================
// -================== BEGIN JS SPECIFIC ===================
// =========================================================

///|
#cfg(target="js")
#external
type MoonBitTestDriverInternalTestEntry

///|
#cfg(target="js")
extern "js" fn MoonBitTestDriverInternalTestEntry::filename(self : Self) -> String =
  #| (entry) => entry[0]

///|
#cfg(target="js")
extern "js" fn MoonBitTestDriverInternalTestEntry::index(self : Self) -> Int =
  #| (entry) => entry[1]

///|
pub(all) suberror MoonBitTestDriverInternalJsError String

///|
#cfg(target="js")
fn moonbit_test_driver_internal_catch_error(
  f : () -> Unit raise,
  on_ok~ : () -> Unit,
  on_err~ : (Error) -> Unit,
) -> Unit {
  moonbit_test_driver_internal_js_catch(
    on_err=(err_str) => on_err(MoonBitTestDriverInternalJsError(err_str)),
    () => {
      try f() catch {
        err => on_err(err)
      } noraise {
        _ => on_ok()
      }
    }
  )
}

///|
#cfg(target="js")
extern "js" fn moonbit_test_driver_internal_js_catch(
  f : () -> Unit,
  on_err~ : (String) -> Unit,
) =
  #| (f, on_err) => {
  #|   try {
  #|     f()
  #|   } catch (err) {
  #|     const msg = err.stack.toString()
  #|     on_err(msg)
  #|   }
  #| }

///|
#cfg(not(target="js"))
fn moonbit_test_driver_internal_catch_error(
  f : () -> Unit raise,
  on_ok~ : () -> Unit,
  on_err~ : (Error) -> Unit,
) -> Unit {
  try f() catch {
    err => on_err(err)
  } noraise {
    _ => on_ok()
  }
}

// =========================================================
// -=================== END JS SPECIFIC ====================
// =========================================================
