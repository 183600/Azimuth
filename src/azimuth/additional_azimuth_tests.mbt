// Azimuth é¡¹ç›®çš„é¢å¤–æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œè¦†ç›–ä¸»è¦åŠŸèƒ½çš„è¾¹ç•Œæƒ…å†µå’Œå®é™…åº”ç”¨åœºæ™¯

test "add_function_negative_numbers" {
  // æµ‹è¯• add å‡½æ•°å¤„ç†è´Ÿæ•°çš„æƒ…å†µ
  assert_eq(-10, add(-3, -7))
  assert_eq(-5, add(-8, 3))
  assert_eq(0, add(-5, 5))
  assert_eq(-2147483648, add(-2147483648, 0))
}

test "multiply_function_negative_combinations" {
  // æµ‹è¯• multiply å‡½æ•°çš„å„ç§è´Ÿæ•°ç»„åˆ
  assert_eq(15, multiply(-3, -5))
  assert_eq(-15, multiply(3, -5))
  assert_eq(-15, multiply(-3, 5))
  assert_eq(0, multiply(-5, 0))
  assert_eq(2147483647, multiply(-2147483648, -1))
}

test "greet_function_unicode_handling" {
  // æµ‹è¯• greet å‡½æ•°å¤„ç†å„ç§ Unicode å­—ç¬¦
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, Ã±oÃ±o!", greet("Ã±oÃ±o"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
}

test "divide_with_ceil_function" {
  // æµ‹è¯• divide_with_ceil å‡½æ•°çš„å„ç§æƒ…å†µ
  assert_eq(3, divide_with_ceil(10, 3))
  assert_eq(4, divide_with_ceil(11, 3))
  assert_eq(4, divide_with_ceil(12, 3))
  assert_eq(0, divide_with_ceil(0, 5))
  assert_eq(-3, divide_with_ceil(-10, 3))
  assert_eq(-3, divide_with_ceil(-11, 3))
  assert_eq(-4, divide_with_ceil(-10, -3))
}

test "complex_calculation_pipeline" {
  // æµ‹è¯•å¤æ‚è®¡ç®—ç®¡é“ï¼šå¤šä¸ªå‡½æ•°çš„ç»„åˆä½¿ç”¨
  let initial_value = 100
  let doubled = multiply(initial_value, 2)
  let added = add(doubled, 50)
  let final_result = multiply(added, 3)
  
  assert_eq(750, final_result)
  
  // æµ‹è¯•å¦ä¸€ä¸ªè®¡ç®—ç®¡é“
  let base = 25
  let expanded = add(base, 75)
  let halved = divide_with_ceil(expanded, 2)
  let processed = multiply(halved, 4)
  
  assert_eq(200, processed)
}

test "edge_case_combinations" {
  // æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µçš„ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—ç»„åˆ
  let sum_result = add(max_val, min_val)
  let mul_result = multiply(max_val, 0)
  let final_result = add(sum_result, mul_result)
  
  assert_eq(-1, final_result)
  
  // é“¾å¼è¿ç®—
  let chain = add(multiply(add(1, 2), 3), multiply(4, 5))
  assert_eq(26, chain)
}

test "real_world_invoice_calculation" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šå‘ç¥¨è®¡ç®—
  let item_price = 199
  let quantity = 3
  let tax_rate = 8
  let discount = 50
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(item_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = multiply(subtotal, tax_rate) / 100
  // åº”ç”¨æŠ˜æ‰£
  let discounted_total = add(subtotal, tax)
  let final_total = add(discounted_total, -discount)
  
  assert_eq(603, final_total)
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  assert_eq_string("Hello, !@#$%^&*()_+-=[]{}|;':\",./<?>!", greet(special_chars))
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  let mixed = "User123Admin456"
  assert_eq_string("Hello, User123Admin456!", greet(mixed))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  let spaced = "  leading and trailing  "
  assert_eq_string("Hello,   leading and trailing  !", greet(spaced))
}

test "mathematical_sequence_calculation" {
  // æµ‹è¯•æ•°å­¦åºåˆ—è®¡ç®—ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰å‡ é¡¹
  // F(0) = 0, F(1) = 1, F(n) = F(n-1) + F(n-2)
  
  // æ‰‹åŠ¨è®¡ç®—å‰å‡ ä¸ªæ–æ³¢é‚£å¥‘æ•°
  let f0 = 0
  let f1 = 1
  let f2 = add(f0, f1)  // 1
  let f3 = add(f1, f2)  // 2
  let f4 = add(f2, f3)  // 3
  let f5 = add(f3, f4)  // 5
  let f6 = add(f4, f5)  // 8
  let f7 = add(f5, f6)  // 13
  let f8 = add(f6, f7)  // 21
  
  // éªŒè¯è®¡ç®—ç»“æœ
  assert_eq(1, f2)
  assert_eq(2, f3)
  assert_eq(3, f4)
  assert_eq(5, f5)
  assert_eq(8, f6)
  assert_eq(13, f7)
  assert_eq(21, f8)
  
  // è®¡ç®—å‰8ä¸ªæ–æ³¢é‚£å¥‘æ•°çš„å’Œ
  let fib_sum = add(add(add(add(add(add(add(f0, f1), f2), f3), f4), f5), f6), f7)
  assert_eq(33, fib_sum)
}

test "performance_stress_test" {
  // æµ‹è¯•æ€§èƒ½å‹åŠ›åœºæ™¯ï¼šå¤§é‡è¿ç»­è¿ç®—
  let base = 1000
  
  // æ‰§è¡Œ10æ¬¡è¿ç»­ä¹˜æ³•
  let result1 = multiply(base, 2)
  let result2 = multiply(result1, 2)
  let result3 = multiply(result2, 2)
  let result4 = multiply(result3, 2)
  let result5 = multiply(result4, 2)
  let result6 = multiply(result5, 2)
  let result7 = multiply(result6, 2)
  let result8 = multiply(result7, 2)
  let result9 = multiply(result8, 2)
  let result10 = multiply(result9, 2)
  
  assert_eq(1024000, result10)
  
  // æ‰§è¡Œ10æ¬¡è¿ç»­åŠ æ³•
  let add_result1 = add(base, 100)
  let add_result2 = add(add_result1, 100)
  let add_result3 = add(add_result2, 100)
  let add_result4 = add(add_result3, 100)
  let add_result5 = add(add_result4, 100)
  let add_result6 = add(add_result5, 100)
  let add_result7 = add(add_result6, 100)
  let add_result8 = add(add_result7, 100)
  let add_result9 = add(add_result8, 100)
  let add_result10 = add(add_result9, 100)
  
  assert_eq(2000, add_result10)
}