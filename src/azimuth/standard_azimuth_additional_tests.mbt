// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - ä¸º Azimuth é¡¹ç›®æ·»åŠ 
// åŒ…å«å¯¹æ ¸å¿ƒåŠŸèƒ½çš„å…¨é¢æµ‹è¯•

test "add_function_basic_functionality" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„åŸºæœ¬åŠŸèƒ½
  @azimuth.assert_eq(10, @azimuth.add(3, 7))
  @azimuth.assert_eq(0, @azimuth.add(-5, 5))
  @azimuth.assert_eq(-8, @azimuth.add(-3, -5))
  @azimuth.assert_eq(100, @azimuth.add(100, 0))
}

test "add_function_overflow_protection" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // æµ‹è¯•è´Ÿæº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  
  // æµ‹è¯•è¾¹ç•Œç»„åˆ
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
}

test "multiply_function_basic_functionality" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„åŸºæœ¬åŠŸèƒ½
  @azimuth.assert_eq(15, @azimuth.multiply(3, 5))
  @azimuth.assert_eq(-12, @azimuth.multiply(-3, 4))
  @azimuth.assert_eq(12, @azimuth.multiply(-3, -4))
  @azimuth.assert_eq(0, @azimuth.multiply(5, 0))
  @azimuth.assert_eq(7, @azimuth.multiply(7, 1))
}

test "multiply_function_overflow_protection" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.multiply(46341, 46341))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  
  // æµ‹è¯•è´Ÿæº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.multiply(-46341, 46341))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  
  // æµ‹è¯•ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "greet_function_comprehensive" {
  // æµ‹è¯• greet å‡½æ•°çš„å„ç§æƒ…å†µ
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", @azimuth.greet("å¼ ä¸‰"))
  @azimuth.assert_eq_string("Hello, 123!", @azimuth.greet("123"))
  @azimuth.assert_eq_string("Hello, user@example.com!", @azimuth.greet("user@example.com"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
}

test "complex_calculation_scenarios" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  // åœºæ™¯1ï¼šè®¡ç®—çŸ©å½¢å‘¨é•¿ (2 * (length + width))
  let length = 8
  let width = 5
  let perimeter = @azimuth.multiply(2, @azimuth.add(length, width))
  @azimuth.assert_eq(26, perimeter)
  
  // åœºæ™¯2ï¼šè®¡ç®—æŠ˜æ‰£ä»·æ ¼ (price * (1 - discount_rate))
  let price = 200
  let discount_rate = 20  // 20%
  let discounted_price = @azimuth.multiply(price, @azimuth.add(100, -discount_rate))
  @azimuth.assert_eq(16000, discounted_price)  // 200 * 80 = 16000
  
  // åœºæ™¯3ï¼šè®¡ç®—å¤åˆ© (principal * (1 + rate * years))
  let principal = 1000
  let rate = 5
  let years = 3
  let total = @azimuth.multiply(principal, @azimuth.add(1, @azimuth.multiply(rate, years)))
  @azimuth.assert_eq(16000, total)  // 1000 * (1 + 5*3) = 16000
}

test "mathematical_properties_validation" {
  // æµ‹è¯•æ•°å­¦æ€§è´¨éªŒè¯
  let a = 12
  let b = 8
  let c = 5
  
  // åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  @azimuth.assert_eq(
    @azimuth.multiply(a, @azimuth.add(b, c)),
    @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  )
}

test "edge_cases_and_special_values" {
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  @azimuth.assert_eq(5, @azimuth.add(0, 5))
  @azimuth.assert_eq(0, @azimuth.multiply(0, 12345))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  
  // æµ‹è¯•å•ä½å€¼è¿ç®—
  @azimuth.assert_eq(7, @azimuth.multiply(7, 1))
  @azimuth.assert_eq(-7, @azimuth.multiply(7, -1))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  
  // æµ‹è¯•æœ€å°å€¼ç‰¹æ®Šå¤„ç†
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
}

test "assert_functions_functionality" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„åŠŸèƒ½
  // æµ‹è¯• assert_true å’Œ assert_false
  @azimuth.assert_true(5 > 3)
  @azimuth.assert_true(0 == 0)
  @azimuth.assert_false(5 < 3)
  @azimuth.assert_false(1 == 0)
  
  // æµ‹è¯• assert_eq å’Œ assert_eq_string
  @azimuth.assert_eq(42, 42)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•å¤åˆæ¡ä»¶
  let x = 10
  let y = 20
  @azimuth.assert_true(@azimuth.add(x, y) == 30)
  @azimuth.assert_true(@azimuth.multiply(x, y) == 200)
}

test "real_world_application_scenarios" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯
  // åœºæ™¯1ï¼šè´­ç‰©è½¦æ€»ä»·è®¡ç®—
  let item1_price = 199
  let item1_quantity = 2
  let item2_price = 299
  let item2_quantity = 1
  let shipping = 15
  
  let item1_total = @azimuth.multiply(item1_price, item1_quantity)
  let item2_total = @azimuth.multiply(item2_price, item2_quantity)
  let subtotal = @azimuth.add(item1_total, item2_total)
  let total = @azimuth.add(subtotal, shipping)
  
  @azimuth.assert_eq(712, total)  // (199*2) + (299*1) + 15 = 398 + 299 + 15 = 712
  
  // åœºæ™¯2ï¼šæ¸©åº¦è½¬æ¢ï¼ˆæ‘„æ°åº¦è½¬åæ°åº¦ï¼Œç®€åŒ–ç‰ˆï¼šF = C * 2 + 30ï¼‰
  let celsius = 25
  let fahrenheit = @azimuth.add(@azimuth.multiply(celsius, 2), 30)
  @azimuth.assert_eq(80, fahrenheit)  // 25 * 2 + 30 = 80
  
  // åœºæ™¯3ï¼šè®¡ç®—å¹³å‡åˆ†
  let score1 = 85
  let score2 = 90
  let score3 = 95
  let score4 = 80
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(score1, score2), score3), score4)
  let average = sum / 4
  @azimuth.assert_eq(87, average)  // (85+90+95+80)/4 = 350/4 = 87
}