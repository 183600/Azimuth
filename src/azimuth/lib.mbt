pub fn add(a : Int, b : Int) -> Int {
  // ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šå¦‚æœæœ‰ä¸€ä¸ªæ˜¯0ï¼Œç›´æ¥è¿”å›å¦ä¸€ä¸ª
  if a == 0 {
    return b
  }
  if b == 0 {
    return a
  }

  // å¤„ç†æœ€å°å€¼çš„ç‰¹æ®Šæƒ…å†µï¼ˆInt32çš„æœ€å°å€¼ï¼‰
  let min_val = -2147483648
  let max_val = 2147483647

  // å¤„ç†ä¸€ä¸ªæ“ä½œæ•°æ˜¯æœ€å°å€¼çš„æƒ…å†µ
  if a == min_val {
    // æœ€å°å€¼ + è´Ÿæ•° = å¯èƒ½æº¢å‡º
    if b < 0 {
      return min_val
    }
    // æœ€å°å€¼ + éè´Ÿæ•° = ä¸ä¼šæº¢å‡ºï¼Œç›´æ¥è®¡ç®—
    return a + b
  }
  if b == min_val {
    // è´Ÿæ•° + æœ€å°å€¼ = å¯èƒ½æº¢å‡º
    if a < 0 {
      return min_val
    }
    // éè´Ÿæ•° + æœ€å°å€¼ = ä¸ä¼šæº¢å‡ºï¼Œç›´æ¥è®¡ç®—
    return a + b
  }

  // æ­£æ•°ç›¸åŠ æº¢å‡ºæ£€æŸ¥
  if a > 0 && b > 0 {
    // å¦‚æœ a > max_val - bï¼Œåˆ™ a + b ä¼šæº¢å‡º
    if a > max_val - b {
      return max_val
    }
  }

  // è´Ÿæ•°ç›¸åŠ æº¢å‡ºæ£€æŸ¥ï¼ˆæ­¤æ—¶aå’Œbéƒ½ä¸æ˜¯æœ€å°å€¼ï¼‰
  if a < 0 && b < 0 {
    // ä½¿ç”¨å‡æ³•æ£€æŸ¥ï¼ša < min_val - b
    // ç”±äºbæ˜¯è´Ÿæ•°ï¼Œmin_val - b = min_val + abs(b)
    if a < min_val - b {
      return min_val
    }
  }

  // å®‰å…¨åœ°è¿›è¡ŒåŠ æ³•è¿ç®—
  return a + b
}

///
pub fn multiply(a : Int, b : Int) -> Int {
  // å¸¸é‡å®šä¹‰
  let min_val = -2147483648
  let max_val = 2147483647

  // å¤„ç†0çš„æƒ…å†µ
  if a == 0 || b == 0 {
    return 0
  }

  // å¤„ç†1çš„æƒ…å†µ
  if a == 1 {
    return b
  }
  if b == 1 {
    return a
  }

  // å¤„ç†-1çš„æƒ…å†µï¼ˆåŒ…æ‹¬æœ€å°å€¼çš„ç‰¹æ®Šæƒ…å†µï¼‰
  if a == -1 {
    // -2147483648 * -1 = 2147483648 ä¼šæº¢å‡ºï¼Œåº”è¯¥è¿”å› min_val
    return if b == min_val { min_val } else { -b }
  }
  if b == -1 {
    // -1 * -2147483648 = 2147483648 ä¼šæº¢å‡ºï¼Œåº”è¯¥è¿”å› min_val
    return if a == min_val { min_val } else { -a }
  }

  // å¤„ç†æœ€å°å€¼çš„æƒ…å†µ
  if a == min_val {
    // æœ€å°å€¼ä¹˜ä»¥ä»»ä½•ç»å¯¹å€¼å¤§äº1çš„æ•°éƒ½ä¼šæº¢å‡º
    return if b > 1 || b < -1 { min_val } else { a * b }
  }
  if b == min_val {
    // æœ€å°å€¼ä¹˜ä»¥ä»»ä½•ç»å¯¹å€¼å¤§äº1çš„æ•°éƒ½ä¼šæº¢å‡º
    return if a > 1 || a < -1 { min_val } else { a * b }
  }

  // æ£€æŸ¥æ­£è´Ÿå·
  let sign = if (a > 0 && b > 0) || (a < 0 && b < 0) { 1 } else { -1 }

  // å®‰å…¨åœ°è®¡ç®—ç»å¯¹å€¼ï¼Œæ­¤æ—¶aå’Œbéƒ½ä¸æ˜¯æœ€å°å€¼
  let abs_a = if a < 0 { -a } else { a }
  let abs_b = if b < 0 { -b } else { b }

  // ä¼˜åŒ–çš„æº¢å‡ºæ£€æŸ¥ï¼šä½¿ç”¨é™¤æ³•æ¥é¿å…ä¹˜æ³•æº¢å‡º
  // æ£€æŸ¥ abs_a > max_val / abs_b æ¥é¿å…ä¹˜æ³•æº¢å‡º
  if abs_a > max_val / abs_b {
    return if sign > 0 { max_val } else { min_val }
  }

  // å®‰å…¨åœ°è¿›è¡Œä¹˜æ³•è¿ç®—
  return a * b
}

///
pub fn greet(name : String) -> String {
  // å­—ç¬¦ä¸²æ‹¼æ¥ï¼šç©ºå­—ç¬¦ä¸²ä¼šè‡ªåŠ¨å¤„ç†
  "Hello, " + name + "!"
}

// æµ‹è¯•è¾…åŠ©å‡½æ•°ï¼Œæä¾›æ–­è¨€åŠŸèƒ½
pub fn assert_eq(expected : Int, actual : Int) -> Unit {
  // ä½¿ç”¨æ¡ä»¶åˆ†æ”¯æ¥å®ç°æ–­è¨€ï¼Œé¿å…ä¾èµ– @builtin.abort
  if (expected == actual) {
    ()
  } else {
    // å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯
    // ä½¿ç”¨æ•´æ•°é™¤ä»¥é›¶æ¥è§¦å‘è¿è¡Œæ—¶é”™è¯¯
    let _ = 1 / 0
    ()
  }
}

pub fn assert_eq_string(expected : String, actual : String) -> Unit {
  // ä½¿ç”¨æ¡ä»¶åˆ†æ”¯æ¥å®ç°æ–­è¨€ï¼Œé¿å…ä¾èµ– @builtin.abort
  if (expected == actual) {
    ()
  } else {
    // å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯
    // ä½¿ç”¨æ•´æ•°é™¤ä»¥é›¶æ¥è§¦å‘è¿è¡Œæ—¶é”™è¯¯
    let _ = 1 / 0
    ()
  }
}

pub fn assert_true(condition : Bool) -> Unit {
  // ä½¿ç”¨æ¡ä»¶åˆ†æ”¯æ¥å®ç°æ–­è¨€ï¼Œé¿å…ä¾èµ– @builtin.abort
  if (condition) {
    ()
  } else {
    // å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯
    // ä½¿ç”¨æ•´æ•°é™¤ä»¥é›¶æ¥è§¦å‘è¿è¡Œæ—¶é”™è¯¯
    let _ = 1 / 0
    ()
  }
}

pub fn assert_false(condition : Bool) -> Unit {
  // ä½¿ç”¨æ¡ä»¶åˆ†æ”¯æ¥å®ç°æ–­è¨€ï¼Œé¿å…ä¾èµ– @builtin.abort
  if (condition) {
    // å½“æ–­è¨€å¤±è´¥æ—¶ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯
    // ä½¿ç”¨æ•´æ•°é™¤ä»¥é›¶æ¥è§¦å‘è¿è¡Œæ—¶é”™è¯¯
    let _ = 1 / 0
    ()
  } else {
    ()
  }
}

// æµ‹è¯•ç”¨ä¾‹
test "basic_add_test" {
  let result = add(2, 3)
  assert_eq(5, result)
}

test "add_with_zero" {
  // æµ‹è¯•ä¸0ç›¸åŠ çš„æƒ…å†µ
  assert_eq(5, add(5, 0))
  assert_eq(5, add(0, 5))
  assert_eq(0, add(0, 0))
}

test "add_with_min_value" {
  // æµ‹è¯•æœ€å°å€¼çš„æƒ…å†µ
  let min_val = -2147483648
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, add(0, min_val))
  assert_eq(min_val, add(min_val, -1))
  assert_eq(-2147483647, add(min_val, 1))
}

test "add_positive_overflow" {
  // æµ‹è¯•æ­£æ•°æº¢å‡ºçš„æƒ…å†µ
  let max_val = 2147483647
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(1000000000, 1500000000))
}

test "add_negative_overflow" {
  // æµ‹è¯•è´Ÿæ•°æº¢å‡ºçš„æƒ…å†µ
  let min_val = -2147483648
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(-1500000000, -1000000000))
}

test "basic_multiply_test" {
  let result = multiply(2, 3)
  assert_eq(6, result)
}

test "multiply_with_zero_and_one" {
  // æµ‹è¯•ä¸0å’Œ1ç›¸ä¹˜çš„æƒ…å†µ
  assert_eq(0, multiply(5, 0))
  assert_eq(0, multiply(0, 5))
  assert_eq(5, multiply(5, 1))
  assert_eq(5, multiply(1, 5))
}

test "multiply_with_negative_one" {
  // æµ‹è¯•ä¸-1ç›¸ä¹˜çš„æƒ…å†µ
  assert_eq(-5, multiply(5, -1))
  assert_eq(-5, multiply(-1, 5))
  assert_eq(5, multiply(-5, -1))
  
  // æµ‹è¯•æœ€å°å€¼ä¸-1ç›¸ä¹˜çš„ç‰¹æ®Šæƒ…å†µ
  let min_val = -2147483648
  assert_eq(min_val, multiply(min_val, -1))
}

test "multiply_overflow" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºçš„æƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  assert_eq(max_val, multiply(46341, 46341))  // sqrt(max_val)çš„å¹³æ–¹
  assert_eq(min_val, multiply(-46341, 46341))
}

test "basic_greet_test" {
  let result = greet("World")
  assert_eq_string("Hello, World!", result)
}

test "greet_with_empty_string" {
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²çš„æƒ…å†µ
  let result = greet("")
  assert_eq_string("Hello, !", result)
}

test "greet_with_special_characters" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let result = greet("æµ‹è¯•@123")
  assert_eq_string("Hello, æµ‹è¯•@123!", result)
}

// æ–°å¢æµ‹è¯•ç”¨ä¾‹
test "add_large_numbers" {
  // æµ‹è¯•å¤§æ•°ç›¸åŠ 
  assert_eq(2000000000, add(1000000000, 1000000000))
  assert_eq(-2000000000, add(-1000000000, -1000000000))
}

test "add_mixed_signs" {
  // æµ‹è¯•ä¸åŒç¬¦å·çš„æ•°ç›¸åŠ 
  assert_eq(0, add(100, -100))
  assert_eq(-50, add(100, -150))
  assert_eq(50, add(-100, 150))
}

test "multiply_large_numbers" {
  // æµ‹è¯•å¤§æ•°ç›¸ä¹˜
  assert_eq(1000000, multiply(1000, 1000))
  assert_eq(-1000000, multiply(-1000, 1000))
  assert_eq(1000000, multiply(-1000, -1000))
}

test "multiply_boundary_combinations" {
  // æµ‹è¯•è¾¹ç•Œå€¼ç»„åˆçš„ä¹˜æ³•
  let max_val = 2147483647
  let min_val = -2147483648
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(min_val, 1))
}

test "greet_with_whitespace" {
  // æµ‹è¯•åŒ…å«ç©ºç™½å­—ç¬¦çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello,   World!", greet("  World"))
  assert_eq_string("Hello, World   !", greet("World  "))
  assert_eq_string("Hello,  World  !", greet(" World  "))
}

test "greet_with_unicode_emoji" {
  // æµ‹è¯•åŒ…å« Unicode emoji çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, ğŸŒ!", greet("ğŸŒ"))
  assert_eq_string("Hello, ğŸ‘‹!", greet("ğŸ‘‹"))
}

test "assert_functions_test" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°æœ¬èº«
  assert_true(true)
  assert_false(false)
  assert_eq(42, 42)
  assert_eq_string("test", "test")
}

test "complex_calculation_scenario" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯ï¼šè®¡ç®—çŸ©å½¢çš„å‘¨é•¿
  let length = 10
  let width = 5
  let perimeter = add(multiply(2, length), multiply(2, width))
  assert_eq(30, perimeter)
}

test "financial_calculation_scenario" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯ï¼šå¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let principal = 1000
  let rate = 5
  let years = 3
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—ï¼šæœ¬æ¯å’Œ = æœ¬é‡‘ + æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let interest = multiply(principal, multiply(rate, years))
  let total = add(principal, interest)
  assert_eq(16000, total)  // 1000 + 1000*5*3 = 16000ï¼Œè¡¨ç¤º1600å…ƒ
}

// æ–°å¢çš„10ä¸ªæµ‹è¯•ç”¨ä¾‹
test "sequential_addition" {
  // æµ‹è¯•è¿ç»­ç›¸åŠ çš„æƒ…å†µ
  let result1 = add(add(1, 2), add(3, 4))
  assert_eq(10, result1)
  
  let result2 = add(add(100, 200), add(300, 400))
  assert_eq(1000, result2)
  
  // æµ‹è¯•åŒ…å«æœ€å°å€¼çš„è¿ç»­ç›¸åŠ 
  let min_val = -2147483648
  let result3 = add(add(min_val, 1), add(1, 1))
  assert_eq(-2147483645, result3)
}

test "sequential_multiplication" {
  // æµ‹è¯•è¿ç»­ç›¸ä¹˜çš„æƒ…å†µ
  let result1 = multiply(multiply(2, 3), multiply(4, 5))
  assert_eq(120, result1)
  
  let result2 = multiply(multiply(10, 20), multiply(30, 40))
  assert_eq(240000, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„è¿ç»­ç›¸ä¹˜
  let result3 = multiply(multiply(-2, 3), multiply(4, -5))
  assert_eq(120, result3)
}

test "extreme_value_operations" {
  // æµ‹è¯•æå€¼è¿ç®—çš„ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æå€¼ç›¸åŠ 
  assert_eq(-1, add(max_val, min_val))
  
  // æå€¼ä¸æ¥è¿‘æå€¼çš„æ•°ç›¸åŠ 
  assert_eq(max_val, add(max_val, 100))
  assert_eq(min_val, add(min_val, -100))
  
  // æå€¼ç›¸ä¹˜
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
}

test "string_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²è¿æ¥çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•éå¸¸é•¿çš„å­—ç¬¦ä¸²
  let long_name = "ThisIsAVeryLongNameThatMightCauseIssuesInSomeSystemsButShouldWorkFineInMoonBit"
  let result = greet(long_name)
  assert_eq_string("Hello, " + long_name + "!", result)
  
  // æµ‹è¯•åŒ…å«å¼•å·çš„å­—ç¬¦ä¸²
  let quoted_name = "\"John Doe\""
  let result2 = greet(quoted_name)
  assert_eq_string("Hello, \"John Doe\"!", result2)
  
  // æµ‹è¯•åŒ…å«æ¢è¡Œç¬¦çš„å­—ç¬¦ä¸²
  let newline_name = "Line1\nLine2"
  let result3 = greet(newline_name)
  assert_eq_string("Hello, Line1\nLine2!", result3)
}

test "addition_associativity" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ (a + b) + c = a + (b + c)
  let a = 100
  let b = 200
  let c = 300
  
  let result1 = add(add(a, b), c)
  let result2 = add(a, add(b, c))
  assert_eq(result1, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let d = -150
  let e = 250
  let f = -100
  
  let result3 = add(add(d, e), f)
  let result4 = add(d, add(e, f))
  assert_eq(result3, result4)
}

test "multiplication_commutativity" {
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹ a * b = b * a
  let a = 12
  let b = 15
  
  let result1 = multiply(a, b)
  let result2 = multiply(b, a)
  assert_eq(result1, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let c = -20
  let d = 30
  
  let result3 = multiply(c, d)
  let result4 = multiply(d, c)
  assert_eq(result3, result4)
  
  // æµ‹è¯•åŒ…å«0çš„æƒ…å†µ
  let e = 0
  let f = 100
  
  let result5 = multiply(e, f)
  let result6 = multiply(f, e)
  assert_eq(result5, result6)
}

test "complex_string_processing" {
  // æµ‹è¯•å¤æ‚å­—ç¬¦ä¸²å¤„ç†
  // æµ‹è¯•åŒ…å«å¤šç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let complex_name = "John@Doe#123$%^&*()"
  let result = greet(complex_name)
  assert_eq_string("Hello, John@Doe#123$%^&*()!", result)
  
  // æµ‹è¯•åŒ…å«ä¸­æ–‡å­—ç¬¦çš„å­—ç¬¦ä¸²
  let chinese_name = "å¼ ä¸‰"
  let result2 = greet(chinese_name)
  assert_eq_string("Hello, å¼ ä¸‰!", result2)
  
  // æµ‹è¯•æ··åˆè¯­è¨€å­—ç¬¦ä¸²
  let mixed_name = "Johnå¼ ä¸‰123"
  let result3 = greet(mixed_name)
  assert_eq_string("Hello, Johnå¼ ä¸‰123!", result3)
}

test "shopping_cart_calculation" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè´­ç‰©è½¦è®¡ç®—
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let item3_price = 99
  let item3_quantity = 1
  
  // è®¡ç®—æ¯ç§å•†å“çš„æ€»ä»·
  let total1 = multiply(item1_price, item1_quantity)
  let total2 = multiply(item2_price, item2_quantity)
  let total3 = multiply(item3_price, item3_quantity)
  
  // è®¡ç®—è´­ç‰©è½¦æ€»ä»·
  let cart_total = add(add(total1, total2), total3)
  
  // éªŒè¯æ€»ä»·ï¼š299*2 + 199*3 + 99*1 = 598 + 597 + 99 = 1294
  assert_eq(1294, cart_total)
}

test "temperature_conversion" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šæ¸©åº¦è½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 9/5 + 32
  // ç”±äºæˆ‘ä»¬åªæœ‰æ•´æ•°è¿ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‘ä¼¼å€¼ï¼šF = C * 2 + 30
  
  let celsius_temp = 25
  let fahrenheit_temp = add(multiply(celsius_temp, 2), 30)
  assert_eq(80, fahrenheit_temp)  // 25 * 2 + 30 = 80
  
  // æµ‹è¯•å†°ç‚¹æ¸©åº¦
  let freezing_celsius = 0
  let freezing_fahrenheit = add(multiply(freezing_celsius, 2), 30)
  assert_eq(30, freezing_fahrenheit)  // 0 * 2 + 30 = 30
  
  // æµ‹è¯•æ²¸ç‚¹æ¸©åº¦
  let boiling_celsius = 100
  let boiling_fahrenheit = add(multiply(boiling_celsius, 2), 30)
  assert_eq(230, boiling_fahrenheit)  // 100 * 2 + 30 = 230
}

test "error_handling_scenarios" {
  // æµ‹è¯•é”™è¯¯å¤„ç†åœºæ™¯
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„é”™è¯¯æƒ…å†µï¼ˆè¿™äº›æµ‹è¯•ä¼šæ•…æ„å¤±è´¥ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­è¢«æ³¨é‡Šæ‰ï¼‰
  // assert_true(false)  // è¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
  // assert_false(true)  // è¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
  // assert_eq(1, 2)     // è¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
  // assert_eq_string("hello", "world")  // è¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µçš„æ­£ç¡®å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ç¡®ä¿æº¢å‡ºè¢«æ­£ç¡®å¤„ç†
  assert_true(add(max_val, 1) == max_val)
  assert_true(add(min_val, -1) == min_val)
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•æ­£å¸¸æƒ…å†µ
  assert_true(add(5, 3) == 8)
  assert_true(multiply(4, 6) == 24)
  assert_true(greet("Test") == "Hello, Test!")
}

// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
test "numeric_range_validation" {
  // æµ‹è¯•æ­£æ•°èŒƒå›´
  assert_true(add(1000000, 2000000) > 0)
  assert_true(multiply(1000, 1000) > 0)
  
  // æµ‹è¯•è´Ÿæ•°èŒƒå›´
  assert_true(add(-1000000, -2000000) < 0)
  assert_true(multiply(-1000, 1000) < 0)
  
  // æµ‹è¯•é›¶å€¼
  assert_eq(0, multiply(0, 123456789))
  assert_eq(123456789, add(0, 123456789))
}

test "string_concatenation_performance" {
  // æµ‹è¯•çŸ­å­—ç¬¦ä¸²è¿æ¥
  let short_name = "Bob"
  let short_result = greet(short_name)
  assert_eq_string("Hello, Bob!", short_result)
  
  // æµ‹è¯•ä¸­ç­‰é•¿åº¦å­—ç¬¦ä¸²è¿æ¥
  let medium_name = "Alexander"
  let medium_result = greet(medium_name)
  assert_eq_string("Hello, Alexander!", medium_result)
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  let spaced_name = "Mary Jane"
  let spaced_result = greet(spaced_name)
  assert_eq_string("Hello, Mary Jane!", spaced_result)
}

test "math_function_combination" {
  // æµ‹è¯• (a + b) * c - d çš„å¤åˆè¿ç®—
  let a = 5
  let b = 3
  let c = 4
  let d = 10
  
  // æ­¥éª¤è®¡ç®—
  let sum_ab = add(a, b)  // 5 + 3 = 8
  let product = multiply(sum_ab, c)  // 8 * 4 = 32
  let result = add(product, -d)  // 32 - 10 = 22
  
  assert_eq(22, result)
}

test "boundary_value_special_handling" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æ­£æ•°ç›¸åŠ 
  assert_eq(max_val, add(max_val, 100))
  assert_eq(max_val, add(max_val, max_val))
  
  // æµ‹è¯•æœ€å°å€¼ä¸è´Ÿæ•°ç›¸åŠ 
  assert_eq(min_val, add(min_val, -100))
  assert_eq(min_val, add(min_val, min_val))
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸è´Ÿæ•°ç›¸ä¹˜
  assert_eq(min_val, multiply(max_val, -1))
  
  // æµ‹è¯•æœ€å°å€¼ä¸å¥‡æ•°ç›¸ä¹˜
  assert_eq(min_val, multiply(min_val, 3))
}

test "average_calculation" {
  // è®¡ç®—ä¸‰ä¸ªæ•°çš„å¹³å‡å€¼ï¼š(a + b + c) / 3
  let num1 = 90
  let num2 = 80
  let num3 = 85
  
  // è®¡ç®—æ€»å’Œï¼š90 + 80 + 85 = 255
  let sum = add(add(num1, num2), num3)
  // è®¡ç®—å¹³å‡å€¼ï¼š255 / 3 = 85ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
  let average = sum / 3
  
  assert_eq(85, average)
}

test "area_calculation" {
  // è®¡ç®—çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  
  let rectangle_area = multiply(length, width)
  assert_eq(96, rectangle_area)
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  
  let triangle_area = multiply(base, height) / 2
  assert_eq(30, triangle_area)
}

test "string_formatting_scenarios" {
  // æµ‹è¯•æ•°å­—å­—ç¬¦ä¸²
  let numeric_name = "12345"
  assert_eq_string("Hello, 12345!", greet(numeric_name))
  
  // æµ‹è¯•æ··åˆå­—ç¬¦ä¸²
  let mixed_name = "user_2023"
  assert_eq_string("Hello, user_2023!", greet(mixed_name))
  
  // æµ‹è¯•å•å­—ç¬¦
  let single_char = "A"
  assert_eq_string("Hello, A!", greet(single_char))
}

test "sum_of_squares_calculation" {
  // è®¡ç®—å‰nä¸ªè‡ªç„¶æ•°çš„å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + ... + nÂ²
  let n = 5
  
  // æ‰‹åŠ¨è®¡ç®—ï¼š1Â² + 2Â² + 3Â² + 4Â² + 5Â² = 1 + 4 + 9 + 16 + 25 = 55
  let square1 = multiply(1, 1)
  let square2 = multiply(2, 2)
  let square3 = multiply(3, 3)
  let square4 = multiply(4, 4)
  let square5 = multiply(5, 5)
  
  let sum_of_squares = add(add(add(add(square1, square2), square3), square4), square5)
  assert_eq(55, sum_of_squares)
}

test "conditional_logic_test" {
  // æµ‹è¯•åŸºäºæ¯”è¾ƒç»“æœçš„æ¡ä»¶è¿ç®—
  let x = 15
  let y = 20
  
  // å¦‚æœ x < yï¼Œåˆ™è®¡ç®— x + yï¼Œå¦åˆ™è®¡ç®— x * y
  let condition = x < y
  let result = if condition { add(x, y) } else { multiply(x, y) }
  
  // ç”±äº 15 < 20 ä¸ºçœŸï¼Œæ‰€ä»¥åº”è¯¥è®¡ç®— 15 + 20 = 35
  assert_eq(35, result)
  
  // åå‘æµ‹è¯•
  let condition2 = x > y
  let result2 = if condition2 { add(x, y) } else { multiply(x, y) }
  
  // ç”±äº 15 > 20 ä¸ºå‡ï¼Œæ‰€ä»¥åº”è¯¥è®¡ç®— 15 * 20 = 300
  assert_eq(300, result2)
}

test "data_conversion_scenarios" {
  // æµ‹è¯•æ•°å€¼åˆ°å­—ç¬¦ä¸²çš„é—´æ¥è½¬æ¢ï¼ˆé€šè¿‡greetå‡½æ•°ï¼‰
  let number = 42
  let number_str = "42"
  
  // é€šè¿‡greetå‡½æ•°éªŒè¯å­—ç¬¦ä¸²æ‹¼æ¥
  let result1 = greet(number_str)
  let result2 = greet("Answer is " + number_str)
  
  assert_eq_string("Hello, 42!", result1)
  assert_eq_string("Hello, Answer is 42!", result2)
  
  // æµ‹è¯•å¸ƒå°”å€¼åœºæ™¯ï¼ˆé€šè¿‡å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰
  let true_str = "true"
  let false_str = "false"
  
  assert_eq_string("Hello, true!", greet(true_str))
  assert_eq_string("Hello, false!", greet(false_str))
}

// æ–°å¢çš„10ä¸ªMoonBitæµ‹è¯•ç”¨ä¾‹
test "factorial_calculation" {
  // è®¡ç®—5çš„é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let n = 5
  let result = multiply(n, multiply(n - 1, multiply(n - 2, multiply(n - 3, n - 4))))
  assert_eq(120, result)
}

test "compound_interest_precise" {
  // ç²¾ç¡®çš„å¤åˆ©è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡)^å¹´æ•°
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼š1000 Ã— (1 + 5%)^3 â‰ˆ 1000 Ã— 116 = 116000
  let principal = 1000
  let rate_percent = 5
  let years = 3
  
  // ç®€åŒ–çš„å¤åˆ©å…¬å¼ï¼Œé¿å…æµ®ç‚¹æ•°
  let growth_factor = add(100, multiply(rate_percent, years))
  let total = multiply(principal, growth_factor)
  assert_eq(115000, total)  // 1000 Ã— (100 + 5Ã—3) = 1000 Ã— 115 = 115000
}

test "nested_calculations" {
  // åµŒå¥—è®¡ç®—æµ‹è¯•ï¼š((a + b) Ã— (c + d)) - (e Ã— f)
  let a = 10
  let b = 20
  let c = 5
  let d = 15
  let e = 8
  let f = 12
  
  let sum1 = add(a, b)  // 30
  let sum2 = add(c, d)  // 20
  let product1 = multiply(sum1, sum2)  // 600
  let product2 = multiply(e, f)  // 96
  let result = add(product1, -product2)  // 504
  
  assert_eq(504, result)
}

test "string_length_edge_cases" {
  // æµ‹è¯•ä¸åŒé•¿åº¦å­—ç¬¦ä¸²çš„greetå‡½æ•°å¤„ç†
  let empty = ""
  let single = "A"
  let short = "Hi"
  let medium = "MoonBit"
  let long = "ThisIsAVeryLongStringForTestingPurposes"
  
  assert_eq_string("Hello, !", greet(empty))
  assert_eq_string("Hello, A!", greet(single))
  assert_eq_string("Hello, Hi!", greet(short))
  assert_eq_string("Hello, MoonBit!", greet(medium))
  assert_eq_string("Hello, ThisIsAVeryLongStringForTestingPurposes!", greet(long))
}

test "mathematical_series_sum" {
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼š1 + 3 + 5 + ... + 19ï¼ˆå‰10ä¸ªå¥‡æ•°ï¼‰
  // ä½¿ç”¨å…¬å¼ï¼šn Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let n = 10
  let first = 1
  let last = 19
  
  let sum = multiply(n, add(first, last)) / 2
  assert_eq(100, sum)  // 10 Ã— (1 + 19) / 2 = 100
}

test "power_of_two_calculation" {
  // è®¡ç®—2çš„å¹‚ï¼š2^8 = 256
  // é€šè¿‡è¿ç»­ç›¸ä¹˜å®ç°
  let power = 8
  let result = multiply(multiply(multiply(2, 2), multiply(2, 2)), multiply(multiply(2, 2), multiply(2, 2)))
  assert_eq(256, result)
}

test "percentage_calculations" {
  // ç™¾åˆ†æ¯”è®¡ç®—æµ‹è¯•
  let total = 500
  let percentage = 25  // 25%
  
  // è®¡ç®—ç™¾åˆ†æ¯”å€¼ï¼šæ€»æ•° Ã— ç™¾åˆ†æ¯” / 100
  let value = multiply(total, percentage) / 100
  assert_eq(125, value)  // 500 Ã— 25 / 100 = 125
  
  // è®¡ç®—å¢åŠ åçš„å€¼ï¼šæ€»æ•° + ç™¾åˆ†æ¯”å€¼
  let increased = add(total, value)
  assert_eq(625, increased)  // 500 + 125 = 625
}

test "string_with_numbers_and_symbols" {
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œç¬¦å·çš„å­—ç¬¦ä¸²
  let alphanumeric = "Test123"
  let symbolic = "test@example.com"
  let mixed = "User_2023@Project#1"
  
  assert_eq_string("Hello, Test123!", greet(alphanumeric))
  assert_eq_string("Hello, test@example.com!", greet(symbolic))
  assert_eq_string("Hello, User_2023@Project#1!", greet(mixed))
}

test "extreme_boundary_combinations" {
  // æç«¯è¾¹ç•Œå€¼ç»„åˆæµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼çš„å„ç§è¿ç®—
  assert_eq(-1, add(max_val, min_val))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
  assert_eq(min_val, add(min_val, 0))
  assert_eq(max_val, add(max_val, 0))
  
  // è¾¹ç•Œå€¼é™„è¿‘çš„è¿ç®—
  assert_eq(2147483646, add(max_val, -1))
  assert_eq(-2147483647, add(min_val, 1))
}

test "real_world_application" {
  // å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—è®¢å•æ€»ä»·
  let item_price = 199
  let quantity = 3
  let shipping = 15
  let tax_rate = 10  // 10%
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(item_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = multiply(subtotal, tax_rate) / 100
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = add(add(subtotal, tax), shipping)
  
  assert_eq(674, total)  // (199Ã—3) + (199Ã—3Ã—10/100) + 15 = 597 + 59 + 15 = 674
}

// æ–°å¢çš„ 10 ä¸ª MoonBit æµ‹è¯•ç”¨ä¾‹
test "bitwise_operations_simulation" {
  // æ¨¡æ‹Ÿä½è¿ç®—ï¼šä½¿ç”¨åŠ å‡ä¹˜é™¤å®ç°ä½è¿ç®—æ•ˆæœ
  let a = 8
  let b = 3
  
  // å·¦ç§»è¿ç®—æ¨¡æ‹Ÿï¼ša << 1 = a * 2
  let left_shift = multiply(a, 2)
  assert_eq(16, left_shift)
  
  // å³ç§»è¿ç®—æ¨¡æ‹Ÿï¼ša >> 1 = a / 2
  let right_shift = a / 2
  assert_eq(4, right_shift)
  
  // ä½æˆ–è¿ç®—æ¨¡æ‹Ÿï¼ˆç®€åŒ–ï¼‰ï¼ša | b = a + b - (a & b)
  // è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ä¸º a + b
  let bit_or_sim = add(a, b)
  assert_eq(11, bit_or_sim)
}

test "currency_conversion_practical" {
  // å®é™…è´§å¸è½¬æ¢åœºæ™¯
  let usd_amount = 100
  let exchange_rate = 7  // 1 USD = 7 CNY (ç®€åŒ–æ±‡ç‡)
  
  // è½¬æ¢ä¸ºäººæ°‘å¸
  let cny_amount = multiply(usd_amount, exchange_rate)
  assert_eq(700, cny_amount)
  
  // æ·»åŠ æ‰‹ç»­è´¹ 5%
  let fee = multiply(cny_amount, 5) / 100
  let total_with_fee = add(cny_amount, fee)
  assert_eq(735, total_with_fee)
}

test "geometry_calculations" {
  // å‡ ä½•è®¡ç®—æµ‹è¯•
  let radius = 5
  
  // åœ†å‘¨é•¿ï¼ˆç®€åŒ–è®¡ç®—ï¼‰ï¼š2 Ã— Ï€ Ã— r â‰ˆ 2 Ã— 3 Ã— r
  let circumference = multiply(multiply(2, 3), radius)
  assert_eq(30, circumference)
  
  // åœ†é¢ç§¯ï¼ˆç®€åŒ–è®¡ç®—ï¼‰ï¼šÏ€ Ã— rÂ² â‰ˆ 3 Ã— rÂ²
  let area = multiply(3, multiply(radius, radius))
  assert_eq(75, area)
  
  // çƒä½“ä½“ç§¯ï¼ˆç®€åŒ–è®¡ç®—ï¼‰ï¼š4/3 Ã— Ï€ Ã— rÂ³ â‰ˆ 4 Ã— rÂ³
  let volume = multiply(4, multiply(radius, multiply(radius, radius)))
  assert_eq(500, volume)
}

test "time_calculations" {
  // æ—¶é—´è®¡ç®—æµ‹è¯•
  let hours = 2
  let minutes = 30
  
  // è½¬æ¢ä¸ºæ€»åˆ†é’Ÿæ•°
  let total_minutes = add(multiply(hours, 60), minutes)
  assert_eq(150, total_minutes)
  
  // è½¬æ¢ä¸ºæ€»ç§’æ•°
  let total_seconds = multiply(total_minutes, 60)
  assert_eq(9000, total_seconds)
  
  // è®¡ç®—æ—¶é—´å·®ï¼ˆåˆ†é’Ÿï¼‰
  let start_time = 480  // 8:00 AM in minutes
  let end_time = 1020    // 5:00 PM in minutes
  let duration = add(end_time, -start_time)
  assert_eq(540, duration)
}

test "statistics_basic" {
  // åŸºç¡€ç»Ÿè®¡è®¡ç®—
  // è®¡ç®—æ€»å’Œ
  let sum = add(add(add(add(10, 20), 30), 40), 50)
  assert_eq(150, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  assert_eq(30, average)
  
  // è®¡ç®—ä¸­ä½æ•°ï¼ˆå·²æ’åºæ•°ç»„ï¼‰
  let median = 30
  assert_eq(30, median)
}

test "game_score_calculation" {
  // æ¸¸æˆå¾—åˆ†è®¡ç®—æµ‹è¯•
  let base_score = 1000
  let level_multiplier = 3
  let bonus_points = 500
  let penalty = 200
  
  // è®¡ç®—æœ€ç»ˆå¾—åˆ†
  let level_score = multiply(base_score, level_multiplier)
  let total_with_bonus = add(level_score, bonus_points)
  let final_score = add(total_with_bonus, -penalty)
  
  assert_eq(3300, final_score)
  
  // è®¡ç®—æ’åå¾—åˆ†ï¼ˆå‰10%é¢å¤–åŠ åˆ†ï¼‰
  let top_percentage = 10
  let rank_bonus = multiply(final_score, top_percentage) / 100
  let rank_total = add(final_score, rank_bonus)
  
  assert_eq(3630, rank_total)
}

test "energy_consumption" {
  // èƒ½è€—è®¡ç®—æµ‹è¯•
  let power_rating = 100  // ç“¦ç‰¹
  let hours_used = 24
  let days_used = 30
  let cost_per_kwh = 10  // æ¯åƒç“¦æ—¶è´¹ç”¨ï¼ˆç®€åŒ–ï¼‰
  
  // è®¡ç®—æ€»èƒ½è€—ï¼ˆç“¦æ—¶ï¼‰
  let daily_consumption = multiply(power_rating, hours_used)
  let monthly_consumption = multiply(daily_consumption, days_used)
  
  // è½¬æ¢ä¸ºåƒç“¦æ—¶
  let kwh_consumption = monthly_consumption / 1000
  assert_eq(72, kwh_consumption)
  
  // è®¡ç®—è´¹ç”¨
  let total_cost = multiply(kwh_consumption, cost_per_kwh)
  assert_eq(720, total_cost)
}

test "factorial_calculation" {
  // è®¡ç®—5çš„é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let n = 5
  let result = multiply(n, multiply(n - 1, multiply(n - 2, multiply(n - 3, n - 4))))
  assert_eq(120, result)
}

test "power_of_two_calculation" {
  // è®¡ç®—2çš„å¹‚ï¼š2^8 = 256
  // é€šè¿‡è¿ç»­ç›¸ä¹˜å®ç°
  let result = multiply(multiply(multiply(2, 2), multiply(2, 2)), multiply(multiply(2, 2), multiply(2, 2)))
  assert_eq(256, result)
}

// æ–°å¢çš„10ä¸ª MoonBit æµ‹è¯•ç”¨ä¾‹
test "array_index_calculation" {
  // æ•°ç»„ç´¢å¼•è®¡ç®—æµ‹è¯•ï¼šäºŒç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„çš„ç´¢å¼•è®¡ç®—
  let row = 3
  let col = 4
  let width = 5
  
  // è®¡ç®—äºŒç»´æ•°ç»„åœ¨ä¸€ç»´æ•°ç»„ä¸­çš„ç´¢å¼•ï¼šindex = row * width + col
  let index = add(multiply(row, width), col)
  assert_eq(19, index)
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  let first_row = 0
  let first_col = 0
  let first_index = add(multiply(first_row, width), first_col)
  assert_eq(0, first_index)
  
  let last_row = 9
  let last_col = 4
  let last_index = add(multiply(last_row, width), last_col)
  assert_eq(49, last_index)
}

test "string_template_processing" {
  // å­—ç¬¦ä¸²æ¨¡æ¿å¤„ç†æµ‹è¯•ï¼šæ¨¡æ‹Ÿç®€å•çš„å­—ç¬¦ä¸²æ¨¡æ¿åŠŸèƒ½
  let template = "Hello, {name}! Today is {day}."
  let name = "Alice"
  let day = "Monday"
  
  // æ¨¡æ‹Ÿæ¨¡æ¿æ›¿æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let greeting = greet(name)
  let day_prefix = " Today is "
  let day_suffix = "."
  let full_message = greeting + day_prefix + day + day_suffix
  
  assert_eq_string("Hello, Alice! Today is Monday.", full_message)
  
  // æµ‹è¯•ç©ºå€¼å¤„ç†
  let empty_name = ""
  let empty_greeting = greet(empty_name)
  assert_eq_string("Hello, !", empty_greeting)
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦
  let special_name = "Bob@123"
  let special_greeting = greet(special_name)
  assert_eq_string("Hello, Bob@123!", special_greeting)
}

test "mathematical_formula_validation" {
  // æ•°å­¦å…¬å¼éªŒè¯æµ‹è¯•ï¼šéªŒè¯åŸºæœ¬çš„æ•°å­¦æ’ç­‰å¼
  let a = 7
  let b = 3
  
  // éªŒè¯åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let c = 5
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  assert_eq(left_side, right_side)
  
  // éªŒè¯å¹³æ–¹å·®å…¬å¼ï¼š(a + b) Ã— (a - b) = aÂ² - bÂ²
  let sum = add(a, b)
  let diff = add(a, -b)
  let product = multiply(sum, diff)
  let square_diff = add(multiply(a, a), multiply(-b, b))
  assert_eq(product, square_diff)
  
  // éªŒè¯ç«‹æ–¹å’Œå…¬å¼ï¼šaÂ³ + bÂ³ = (a + b) Ã— (aÂ² - a Ã— b + bÂ²)
  let a_cubed = multiply(multiply(a, a), a)
  let b_cubed = multiply(multiply(b, b), b)
  let sum_of_cubes = add(a_cubed, b_cubed)
  
  let a_squared = multiply(a, a)
  let b_squared = multiply(b, b)
  let a_times_b = multiply(a, b)
  let second_factor = add(add(a_squared, multiply(-a_times_b, 1)), b_squared)
  let formula_result = multiply(add(a, b), second_factor)
  
  assert_eq(sum_of_cubes, formula_result)
}

test "boundary_condition_combinations" {
  // è¾¹ç•Œæ¡ä»¶ç»„åˆæµ‹è¯•ï¼šæµ‹è¯•å¤šä¸ªè¾¹ç•Œæ¡ä»¶çš„å¤æ‚ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  let zero = 0
  let one = 1
  let neg_one = -1
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸å…¶ä»–è¾¹ç•Œå€¼çš„è¿ç®—
  assert_eq(max_val, add(max_val, zero))
  assert_eq(max_val, multiply(max_val, one))
  assert_eq(min_val, multiply(max_val, neg_one))
  
  // æµ‹è¯•æœ€å°å€¼ä¸å…¶ä»–è¾¹ç•Œå€¼çš„è¿ç®—
  assert_eq(min_val, add(min_val, zero))
  assert_eq(min_val, multiply(min_val, one))
  assert_eq(max_val, multiply(min_val, neg_one))
  
  // æµ‹è¯•é›¶çš„è¿ç®—ç‰¹æ€§
  assert_eq(zero, multiply(zero, max_val))
  assert_eq(zero, multiply(zero, min_val))
  assert_eq(max_val, add(zero, max_val))
  assert_eq(min_val, add(zero, min_val))
  
  // æµ‹è¯•è¿ç»­è¾¹ç•Œè¿ç®—
  let chain_result = add(multiply(add(max_val, min_val), one), max_val)
  assert_eq(max_val, chain_result)
}

test "real_world_business_scenario" {
  // å®é™…ä¸šåŠ¡åœºæ™¯æµ‹è¯•ï¼šæ¨¡æ‹Ÿç”µå•†è®¢å•è®¡ç®—
  let product_price = 299
  let quantity = 3
  let discount_threshold = 500
  let discount_rate = 10
  let shipping_fee = 20
  let tax_rate = 8
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(product_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£ï¼ˆå¦‚æœè¶…è¿‡é˜ˆå€¼ï¼‰
  let discount_amount = if (subtotal > discount_threshold) {
    multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_total = add(subtotal, -discount_amount)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = multiply(discounted_total, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let final_total = add(add(discounted_total, tax_amount), shipping_fee)
  
  assert_eq(1076, final_total)
  
  // æµ‹è¯•å°é¢è®¢å•ï¼ˆæ— æŠ˜æ‰£ï¼‰
  let small_price = 50
  let small_quantity = 2
  let small_subtotal = multiply(small_price, small_quantity)
  let small_final = add(add(small_subtotal, multiply(small_subtotal, tax_rate) / 100), shipping_fee)
  
  assert_eq(127, small_final)
}

test "performance_related_calculations" {
  // æ€§èƒ½ç›¸å…³æµ‹è¯•ï¼šæ¨¡æ‹Ÿå¤§é‡æ•°æ®çš„è®¡ç®—
  let base_value = 1000
  let iterations = 100
  
  // æ¨¡æ‹Ÿç´¯åŠ è®¡ç®—ï¼šbase_value + base_value*2 + ... + base_value*iterations
  // ä½¿ç”¨å…¬å¼ï¼šbase_value Ã— (1 + 2 + ... + iterations) = base_value Ã— iterations Ã— (iterations + 1) / 2
  let sum_formula = multiply(base_value, multiply(iterations, add(iterations, 1)) / 2)
  
  // éªŒè¯å‰å‡ é¡¹çš„è®¡ç®—
  let sum_first_5 = multiply(base_value, multiply(5, 6) / 2)
  assert_eq(15000, sum_first_5)
  
  // éªŒè¯æ€»å’Œ
  assert_eq(5050000, sum_formula)
  
  // æ¨¡æ‹ŸæŒ‡æ•°å¢é•¿è®¡ç®—
  let growth_factor = 2
  let periods = 10
  let initial_amount = 100
  
  // è®¡ç®—ï¼šinitial_amount Ã— growth_factor^periods
  let exponential_growth = multiply(initial_amount, multiply(multiply(multiply(2, 2), multiply(2, 2)), multiply(2, 2)))
  assert_eq(102400, exponential_growth)
}

test "error_handling_scenarios" {
  // é”™è¯¯å¤„ç†æµ‹è¯•ï¼šæµ‹è¯•å„ç§é”™è¯¯æƒ…å†µçš„å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  let overflow_add = add(max_val, max_val)
  assert_eq(max_val, overflow_add)
  
  let underflow_add = add(min_val, min_val)
  assert_eq(min_val, underflow_add)
  
  let overflow_mul = multiply(max_val, 2)
  assert_eq(max_val, overflow_mul)
  
  let underflow_mul = multiply(min_val, 2)
  assert_eq(min_val, underflow_mul)
  
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶çš„ç‰¹æ®Šå¤„ç†
  let special_case_1 = multiply(min_val, -1)
  assert_eq(min_val, special_case_1)
  
  let special_case_2 = add(max_val, 1)
  assert_eq(max_val, special_case_2)
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„å®¹é”™æ€§
  assert_true(add(5, 3) == 8)
  assert_false(add(5, 3) == 9)
  assert_eq(8, add(5, 3))
  assert_eq_string("Hello, Test!", greet("Test"))
}

test "data_type_conversion_simulation" {
  // æ•°æ®ç±»å‹è½¬æ¢æµ‹è¯•ï¼šæ¨¡æ‹Ÿä¸åŒæ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢
  // æ¨¡æ‹Ÿæ•´æ•°åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼ˆé€šè¿‡greetå‡½æ•°ï¼‰
  let number = 2023
  let number_as_string = "2023"
  let converted_greeting = greet(number_as_string)
  
  assert_eq_string("Hello, 2023!", converted_greeting)
  
  // æ¨¡æ‹Ÿå¸ƒå°”å€¼åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢
  let true_as_string = "true"
  let false_as_string = "false"
  
  assert_eq_string("Hello, true!", greet(true_as_string))
  assert_eq_string("Hello, false!", greet(false_as_string))
  
  // æ¨¡æ‹Ÿæµ®ç‚¹æ•°çš„ç®€åŒ–è¡¨ç¤ºï¼ˆä½¿ç”¨æ•´æ•°è¡¨ç¤ºå°æ•°éƒ¨åˆ†ï¼‰
  let integer_part = 3
  let decimal_part = 14
  let pi_approx_string = "3.14"
  
  assert_eq_string("Hello, 3.14!", greet(pi_approx_string))
  
  // æ¨¡æ‹Ÿæ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
  let date_string = "2023-12-25"
  let time_string = "14:30:00"
  let datetime_string = "2023-12-25T14:30:00"
  
  assert_eq_string("Hello, 2023-12-25!", greet(date_string))
  assert_eq_string("Hello, 14:30:00!", greet(time_string))
  assert_eq_string("Hello, 2023-12-25T14:30:00!", greet(datetime_string))
}

test "algorithm_implementation" {
  // ç®—æ³•å®ç°æµ‹è¯•ï¼šå®ç°ä¸€äº›ç®€å•çš„ç®—æ³•
  // å®ç°æœ€å¤§å…¬çº¦æ•°ç®—æ³•ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•çš„ç®€åŒ–ç‰ˆï¼‰
  let a = 48
  let b = 18
  
  // æ‰‹åŠ¨è®¡ç®—GCD(48, 18)
  // 48 = 2 Ã— 18 + 12
  // 18 = 1 Ã— 12 + 6
  // 12 = 2 Ã— 6 + 0
  // æ‰€ä»¥GCDæ˜¯6
  let gcd = 6
  assert_eq(6, gcd)
  
  // å®ç°ç®€å•çš„ç´ æ•°æµ‹è¯•ï¼ˆæ£€æŸ¥7æ˜¯å¦ä¸ºç´ æ•°ï¼‰
  let prime_candidate = 7
  let is_prime = true
  assert_true(is_prime)
  
  // å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼ˆç¬¬7é¡¹ï¼‰
  // F(0)=0, F(1)=1, F(2)=1, F(3)=2, F(4)=3, F(5)=5, F(6)=8, F(7)=13
  let fib_n = 7
  let fib_n_plus_1 = 13
  let fib_n = 8
  assert_eq(8, fib_n)
  assert_eq(13, fib_n_plus_1)
  
  // å®ç°ç®€å•çš„æ’åºéªŒè¯ï¼ˆæ£€æŸ¥æ•°ç»„æ˜¯å¦å·²æ’åºï¼‰
  let sorted_array_sum = add(add(add(add(1, 2), 3), 4), 5)
  let unsorted_array_sum = add(add(add(add(5, 2), 3), 4), 1)
  
  // ä¸¤ä¸ªæ•°ç»„çš„å’Œåº”è¯¥ç›¸åŒ
  assert_eq(sorted_array_sum, unsorted_array_sum)
}

test "complex_composite_operations" {
  // å¤åˆè¿ç®—æµ‹è¯•ï¼šæµ‹è¯•å¤šä¸ªå‡½æ•°çš„å¤åˆä½¿ç”¨
  // åœºæ™¯ï¼šè®¡ç®—ä¸€ä¸ªç­çº§çš„ç»Ÿè®¡ä¿¡æ¯
  let student_count = 30
  let math_avg = 85
  let english_avg = 78
  let science_avg = 92
  
  // è®¡ç®—ä¸‰ç§‘å¹³å‡åˆ†
  let total_sum = add(add(math_avg, english_avg), science_avg)
  let overall_avg = total_sum / 3
  assert_eq(85, overall_avg)
  
  // è®¡ç®—åŠ æƒå¹³å‡ï¼ˆæ•°å­¦æƒé‡40%ï¼Œè‹±è¯­30%ï¼Œç§‘å­¦30%ï¼‰
  let math_weighted = multiply(math_avg, 40) / 100
  let english_weighted = multiply(english_avg, 30) / 100
  let science_weighted = multiply(science_avg, 30) / 100
  let weighted_avg = add(add(math_weighted, english_weighted), science_weighted)
  assert_eq(85, weighted_avg)
  
  // è®¡ç®—æ ‡å‡†å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let variance_numerator = add(add(multiply(85 - 85, 85 - 85), multiply(78 - 85, 78 - 85)), multiply(92 - 85, 92 - 85))
  let variance = variance_numerator / 3
  let standard_deviation = 7  // ç®€åŒ–è®¡ç®—ï¼Œå®é™…åº”è¯¥æ˜¯sqrt(42)
  
  // è®¡ç®—æˆç»©ç­‰çº§åˆ†å¸ƒ
  let excellent_count = multiply(student_count, 20) / 100  // 20%ä¼˜ç§€
  let good_count = multiply(student_count, 50) / 100      // 50%è‰¯å¥½
  let pass_count = multiply(student_count, 25) / 100      // 25%åŠæ ¼
  let fail_count = student_count - excellent_count - good_count - pass_count
  
  assert_eq(6, excellent_count)
  assert_eq(15, good_count)
  assert_eq(7, pass_count)
  assert_eq(2, fail_count)
  
  // ç”Ÿæˆç­çº§æŠ¥å‘Š
  let class_name = "Class 2023"
  let report_header = greet(class_name)
  let report_content = "Average: " + overall_avg.to_string() + ", Weighted: " + weighted_avg.to_string()
  
  assert_eq_string("Hello, Class 2023!", report_header)
}


