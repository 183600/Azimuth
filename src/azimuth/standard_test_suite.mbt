// æ ‡å‡† MoonBit æµ‹è¯•å¥—ä»¶
// åŒ…å«10ä¸ªæ ‡å‡†æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–å„ç§åœºæ™¯

// æµ‹è¯•ç”¨ä¾‹1: è¾¹ç•Œå€¼ç»„åˆæµ‹è¯•
test "boundary_value_combinations" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„è¿ç®—
  assert_eq(max_val, azimuth_lib::add(max_val, 0))
  assert_eq(max_val, azimuth_lib::multiply(max_val, 1))
  
  // æµ‹è¯•æœ€å°å€¼çš„è¿ç®—
  assert_eq(min_val, azimuth_lib::add(min_val, 0))
  assert_eq(min_val, azimuth_lib::multiply(min_val, 1))
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  assert_eq(max_val, azimuth_lib::add(max_val, 1))
  assert_eq(min_val, azimuth_lib::add(min_val, -1))
  assert_eq(max_val, azimuth_lib::multiply(max_val, 2))
  assert_eq(min_val, azimuth_lib::multiply(min_val, -1))
}

// æµ‹è¯•ç”¨ä¾‹2: å­—ç¬¦ä¸²å¤„ç†è¾¹ç•Œæµ‹è¯•
test "string_boundary_tests" {
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  assert_eq_string("Hello, !", azimuth_lib::greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦å­—ç¬¦ä¸²
  assert_eq_string("Hello, A!", azimuth_lib::greet("A"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, ğŸŒ!", azimuth_lib::greet("ğŸŒ"))
  assert_eq_string("Hello, \n\t!", azimuth_lib::greet("\n\t"))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_string = "ThisIsAVeryLongStringThatTestsTheBoundaryOfStringProcessingInMoonBit"
  assert_eq_string("Hello, " + long_string + "!", azimuth_lib::greet(long_string))
}

// æµ‹è¯•ç”¨ä¾‹3: æ•°å­¦è¿ç®—æ€§è´¨éªŒè¯
test "mathematical_properties" {
  let a = 12345
  let b = 67890
  let c = 11111
  
  // åŠ æ³•äº¤æ¢å¾‹
  assert_eq(azimuth_lib::add(a, b), azimuth_lib::add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  assert_eq(azimuth_lib::multiply(a, b), azimuth_lib::multiply(b, a))
  
  // åˆ†é…å¾‹
  let left = azimuth_lib::multiply(a, azimuth_lib::add(b, c))
  let right = azimuth_lib::add(azimuth_lib::multiply(a, b), azimuth_lib::multiply(a, c))
  assert_eq(left, right)
  
  // ç»“åˆå¾‹
  let add_assoc1 = azimuth_lib::add(azimuth_lib::add(a, b), c)
  let add_assoc2 = azimuth_lib::add(a, azimuth_lib::add(b, c))
  assert_eq(add_assoc1, add_assoc2)
  
  let mul_assoc1 = azimuth_lib::multiply(azimuth_lib::multiply(a, b), c)
  let mul_assoc2 = azimuth_lib::multiply(a, azimuth_lib::multiply(b, c))
  assert_eq(mul_assoc1, mul_assoc2)
}

// æµ‹è¯•ç”¨ä¾‹4: å®é™…åº”ç”¨åœºæ™¯ - è´­ç‰©è½¦è®¡ç®—
test "shopping_cart_calculations" {
  // å•†å“ä»·æ ¼å’Œæ•°é‡
  let item1_price = 299
  let item1_qty = 2
  let item2_price = 199
  let item2_qty = 3
  let item3_price = 99
  let item3_qty = 1
  
  // è®¡ç®—æ¯ç§å•†å“æ€»ä»·
  let total1 = azimuth_lib::multiply(item1_price, item1_qty)
  let total2 = azimuth_lib::multiply(item2_price, item2_qty)
  let total3 = azimuth_lib::multiply(item3_price, item3_qty)
  
  // è®¡ç®—è´­ç‰©è½¦æ€»ä»·
  let cart_total = azimuth_lib::add(azimuth_lib::add(total1, total2), total3)
  
  // éªŒè¯ç»“æœ: 299*2 + 199*3 + 99*1 = 598 + 597 + 99 = 1294
  assert_eq(1294, cart_total)
  
  // è®¡ç®—æŠ˜æ‰£åä»·æ ¼ï¼ˆå‡è®¾9æŠ˜ï¼‰
  let discount_rate = 10
  let discount_amount = azimuth_lib::multiply(cart_total, discount_rate) / 100
  let discounted_total = azimuth_lib::add(cart_total, -discount_amount)
  
  // éªŒè¯æŠ˜æ‰£ä»·æ ¼: 1294 - 129 = 1165
  assert_eq(1165, discounted_total)
}

// æµ‹è¯•ç”¨ä¾‹5: å®é™…åº”ç”¨åœºæ™¯ - æ¸©åº¦è½¬æ¢
test "temperature_conversion" {
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆ: F = C Ã— 2 + 30ï¼‰
  let celsius_temps = [0, 10, 20, 30, 40]
  let expected_fahrenheit = [30, 50, 70, 90, 110]
  
  // æµ‹è¯•å†°ç‚¹
  let freezing_c = 0
  let freezing_f = azimuth_lib::add(azimuth_lib::multiply(freezing_c, 2), 30)
  assert_eq(30, freezing_f)
  
  // æµ‹è¯•æ²¸ç‚¹
  let boiling_c = 100
  let boiling_f = azimuth_lib::add(azimuth_lib::multiply(boiling_c, 2), 30)
  assert_eq(230, boiling_f)
  
  // æµ‹è¯•å®¤æ¸©
  let room_c = 25
  let room_f = azimuth_lib::add(azimuth_lib::multiply(room_c, 2), 30)
  assert_eq(80, room_f)
}

// æµ‹è¯•ç”¨ä¾‹6: æ€§èƒ½ç›¸å…³æµ‹è¯• - å¤§æ•°è¿ç®—
test "large_number_operations" {
  // æµ‹è¯•å¤§æ•°è¿ç®—æ€§èƒ½
  let large_num1 = 1000000
  let large_num2 = 2000000
  let large_num3 = 3000000
  
  // å¤§æ•°åŠ æ³•
  let sum_result = azimuth_lib::add(azimuth_lib::add(large_num1, large_num2), large_num3)
  assert_eq(6000000, sum_result)
  
  // å¤§æ•°ä¹˜æ³•
  let product_result = azimuth_lib::multiply(large_num1, 3)
  assert_eq(3000000, product_result)
  
  // å¤åˆè¿ç®—
  let complex_result = azimuth_lib::multiply(
    azimuth_lib::add(large_num1, large_num2),
    azimuth_lib::add(large_num3, -large_num1)
  )
  // (1000000 + 2000000) Ã— (3000000 - 1000000) = 3000000 Ã— 2000000 = 6000000000000
  assert_eq(2147483647, complex_result) // æº¢å‡ºä¿æŠ¤
}

// æµ‹è¯•ç”¨ä¾‹7: é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
test "error_handling_and_edge_cases" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  azimuth_lib::assert_true(true)
  azimuth_lib::assert_false(false)
  azimuth_lib::assert_eq(42, 42)
  azimuth_lib::assert_eq_string("test", "test")
  
  // æµ‹è¯•é™¤é›¶ä¿æŠ¤ï¼ˆé€šè¿‡ä¹˜æ³•æ¨¡æ‹Ÿï¼‰
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ç¡®ä¿æº¢å‡ºè¢«æ­£ç¡®å¤„ç†
  azimuth_lib::assert_true(azimuth_lib::add(max_val, 1) == max_val)
  azimuth_lib::assert_true(azimuth_lib::add(min_val, -1) == min_val)
  azimuth_lib::assert_true(azimuth_lib::multiply(max_val, 2) == max_val)
  azimuth_lib::assert_true(azimuth_lib::multiply(min_val, -1) == min_val)
}

// æµ‹è¯•ç”¨ä¾‹8: æ•°åˆ—å’Œçº§æ•°è®¡ç®—
test "series_and_progressions" {
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œ: 1 + 3 + 5 + ... + 19 (å‰10ä¸ªå¥‡æ•°)
  let n = 10
  let first_term = 1
  let last_term = 19
  
  // ä½¿ç”¨å…¬å¼: n Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let arithmetic_sum = azimuth_lib::multiply(n, azimuth_lib::add(first_term, last_term)) / 2
  assert_eq(100, arithmetic_sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œ: 2 + 4 + 8 + 16 + 32 (å‰5é¡¹)
  let geo_sum = azimuth_lib::add(azimuth_lib::add(azimuth_lib::add(azimuth_lib::add(2, 4), 8), 16), 32)
  assert_eq(62, geo_sum)
  
  // è®¡ç®—å¹³æ–¹å’Œ: 1Â² + 2Â² + 3Â² + 4Â² + 5Â²
  let square_sum = azimuth_lib::add(azimuth_lib::add(azimuth_lib::add(azimuth_lib::add(
    azimuth_lib::multiply(1, 1),
    azimuth_lib::multiply(2, 2)
  ), azimuth_lib::multiply(3, 3)), azimuth_lib::multiply(4, 4)), azimuth_lib::multiply(5, 5))
  assert_eq(55, square_sum)
}

// æµ‹è¯•ç”¨ä¾‹9: å®é™…åº”ç”¨åœºæ™¯ - è´·æ¬¾è®¡ç®—
test "loan_calculation" {
  // è´·æ¬¾è®¡ç®—: æœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let principal = 100000  // 10ä¸‡å…ƒ
  let annual_rate = 6     // 6%å¹´åˆ©ç‡
  let years = 3           // 3å¹´
  
  // è®¡ç®—æ€»åˆ©æ¯
  let total_interest = azimuth_lib::multiply(principal, azimuth_lib::multiply(annual_rate, years))
  
  // è®¡ç®—æ€»è¿˜æ¬¾é¢
  let total_payment = azimuth_lib::add(principal, total_interest)
  
  // éªŒè¯ç»“æœ: 100000 + 100000 Ã— 6 Ã— 3 = 100000 + 1800000 = 1900000
  assert_eq(1900000, total_payment)
  
  // è®¡ç®—æœˆä¾›ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let monthly_payment = total_payment / azimuth_lib::multiply(years, 12)
  assert_eq(52777, monthly_payment) // æ•´æ•°é™¤æ³•
}

// æµ‹è¯•ç”¨ä¾‹10: ç»¼åˆåº”ç”¨åœºæ™¯
test "comprehensive_application" {
  // å¤æ‚åº”ç”¨åœºæ™¯: è®¡ç®—è®¢å•æ€»ä»·ï¼ŒåŒ…å«å•†å“ã€ç¨è´¹ã€è¿è´¹å’ŒæŠ˜æ‰£
  
  // å•†å“ä¿¡æ¯
  let products = [(100, 2), (200, 3), (50, 1)] // (ä»·æ ¼, æ•°é‡)
  
  // è®¡ç®—å•†å“æ€»ä»·
  let product1_total = azimuth_lib::multiply(100, 2)  // 200
  let product2_total = azimuth_lib::multiply(200, 3)  // 600
  let product3_total = azimuth_lib::multiply(50, 1)   // 50
  let subtotal = azimuth_lib::add(azimuth_lib::add(product1_total, product2_total), product3_total)
  
  assert_eq(850, subtotal)
  
  // è®¡ç®—æŠ˜æ‰£ï¼ˆæ»¡500å‡50ï¼‰
  let discount = if subtotal > 500 { 50 } else { 0 }
  let discounted_total = azimuth_lib::add(subtotal, -discount)
  
  assert_eq(800, discounted_total)
  
  // è®¡ç®—ç¨è´¹ï¼ˆ8%ï¼‰
  let tax_rate = 8
  let tax_amount = azimuth_lib::multiply(discounted_total, tax_rate) / 100
  let total_with_tax = azimuth_lib::add(discounted_total, tax_amount)
  
  assert_eq(864, total_with_tax)
  
  // åŠ è¿è´¹
  let shipping = 20
  let final_total = azimuth_lib::add(total_with_tax, shipping)
  
  assert_eq(884, final_total)
  
  // ç”Ÿæˆè®¢å•æ‘˜è¦
  let order_summary = azimuth_lib::greet("Order #12345")
  assert_eq_string("Hello, Order #12345!", order_summary)
}