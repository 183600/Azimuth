// æ–°å¢çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“çš„å¢å¼ºæµ‹è¯•
// åŒ…å«è¾¹ç•Œæƒ…å†µã€é”™è¯¯å¤„ç†å’Œå®é™…åº”ç”¨åœºæ™¯

test "extreme_boundary_values_addition" {
  // æµ‹è¯•åŠ æ³•çš„æç«¯è¾¹ç•Œå€¼
  assert_eq(0, add(2147483647, -2147483647))  // æœ€å¤§å€¼ä¸æœ€å°å€¼+1ç›¸åŠ 
  assert_eq(-2147483647, add(-2147483648, 1))  // æœ€å°å€¼åŠ 1
  assert_eq(2147483646, add(2147483647, -1))   // æœ€å¤§å€¼å‡1
  assert_eq(1, add(-2147483647, 2147483648))    // æ¥è¿‘è¾¹ç•Œçš„è´Ÿæ•°åŠ æ­£æ•°
}

test "extreme_boundary_values_multiplication" {
  // æµ‹è¯•ä¹˜æ³•çš„æç«¯è¾¹ç•Œå€¼
  assert_eq(0, multiply(2147483647, 0))         // æœ€å¤§å€¼ä¹˜ä»¥0
  assert_eq(0, multiply(-2147483648, 0))        // æœ€å°å€¼ä¹˜ä»¥0
  assert_eq(2147483647, multiply(2147483647, 1)) // æœ€å¤§å€¼ä¹˜ä»¥1
  assert_eq(-2147483648, multiply(-2147483648, 1)) // æœ€å°å€¼ä¹˜ä»¥1
}

test "divide_with_ceil_comprehensive_edge_cases" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 1))          // 0é™¤ä»¥ä»»ä½•æ•°
  assert_eq(0, divide_with_ceil(0, -1))         // 0é™¤ä»¥è´Ÿæ•°
  assert_eq(0, divide_with_ceil(0, 2147483647)) // 0é™¤ä»¥æœ€å¤§å€¼
  assert_eq(1, divide_with_ceil(1, 1))          // 1é™¤ä»¥1
  assert_eq(-1, divide_with_ceil(-1, 1))        // -1é™¤ä»¥1
  assert_eq(1, divide_with_ceil(-1, -1))        // -1é™¤ä»¥-1
}

test "complex_financial_calculations" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯ï¼šå¤åˆ©è®¡ç®—
  let principal = 10000
  let rate1 = 5  // ç¬¬ä¸€å¹´åˆ©ç‡
  let rate2 = 6  // ç¬¬äºŒå¹´åˆ©ç‡
  let rate3 = 7  // ç¬¬ä¸‰å¹´åˆ©ç‡
  
  // è®¡ç®—ä¸‰å¹´å¤åˆ©
  let year1 = add(principal, divide_with_ceil(multiply(principal, rate1), 100))
  let year2 = add(year1, divide_with_ceil(multiply(year1, rate2), 100))
  let year3 = add(year2, divide_with_ceil(multiply(year2, rate3), 100))
  
  assert_eq(10500, year1)  // 10000 + 5% = 10500
  assert_eq(11130, year2)  // 10500 + 6% = 11130
  assert_eq(11909, year3)  // 11130 + 7% = 11909
}

test "advanced_string_processing_scenarios" {
  // é«˜çº§å­—ç¬¦ä¸²å¤„ç†åœºæ™¯
  assert_eq_string("Hello, ğŸŒŸğŸš€!", greet("ğŸŒŸğŸš€"))           // å¤šä¸ªè¡¨æƒ…ç¬¦å·
  assert_eq_string("Hello, line1\nline2!", greet("line1\nline2")) // æ¢è¡Œç¬¦
  assert_eq_string("Hello, \"quoted\"!", greet("\"quoted\""))   // å¼•å·
  assert_eq_string("Hello, space separated!", greet("space separated")) // ç©ºæ ¼åˆ†éš”
}

test "mathematical_sequence_calculations" {
  // æ•°åˆ—è®¡ç®—åœºæ™¯
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼š1 + 3 + 5 + ... + (2n-1) = nÂ²
  let n = 10
  let arithmetic_sum = multiply(n, n)
  assert_eq(100, arithmetic_sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼š2 + 4 + 8 + ... + 2^n = 2^(n+1) - 2
  let geometric_sum = add(multiply(2, 1024), -2)  // 2^11 - 2 = 2048 - 2 = 2046
  assert_eq(2046, geometric_sum)
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜
  let total_budget = 5000
  let project_a_cost = 1200
  let project_b_cost = 800
  let project_c_cost = 1500
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let allocated = add(add(project_a_cost, project_b_cost), project_c_cost)
  let remaining = add(total_budget, -allocated)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡ï¼ˆæ¯ä¸ª300ï¼‰
  let small_projects = divide_with_ceil(remaining, 300)
  
  assert_eq(3500, allocated)
  assert_eq(1500, remaining)
  assert_eq(5, small_projects)
}

test "time_and_scheduling_calculations" {
  // æ—¶é—´è°ƒåº¦è®¡ç®—
  let total_tasks = 87
  let tasks_per_day = 8
  let work_days_per_week = 5
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œæ—¥
  let work_days_needed = divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(work_days_needed, work_days_per_week)
  
  // è®¡ç®—æ€»å·¥ä½œå°æ—¶æ•°ï¼ˆæ¯å¤©8å°æ—¶ï¼‰
  let total_hours = multiply(work_days_needed, 8)
  
  assert_eq(11, work_days_needed)  // ceil(87/8) = 11
  assert_eq(3, weeks_needed)       // ceil(11/5) = 3
  assert_eq(88, total_hours)       // 11 * 8 = 88
}

test "error_handling_and_robustness" {
  // é”™è¯¯å¤„ç†å’Œå¥å£®æ€§æµ‹è¯•
  // æµ‹è¯•å„ç§è¾¹ç•Œå’Œå¼‚å¸¸æƒ…å†µ
  
  // é™¤æ•°ä¸ºé›¶çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, divide_with_ceil(2147483647, 0))
  assert_eq(0, divide_with_ceil(-2147483648, 0))
  
  // æå¤§æ•°è¿ç®—
  let large_num = 1000000
  assert_eq(2000000, add(large_num, large_num))
  assert_eq(1000000000000, multiply(large_num, large_num))
}

test "internationalization_and_localization" {
  // å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æµ‹è¯•
  // æµ‹è¯•å„ç§è¯­è¨€çš„é—®å€™
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ĞœĞ¸Ñ€!", greet("ĞœĞ¸Ñ€"))
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸŒ!", greet("ğŸŒ"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, naÃ¯ve!", greet("naÃ¯ve"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, åŒ—äº¬!", greet("åŒ—äº¬"))
  assert_eq_string("Hello, SÃ£o Paulo!", greet("SÃ£o Paulo"))
  assert_eq_string("Hello, ZÃ¼rich!", greet("ZÃ¼rich"))
}

test "comprehensive_business_workflow" {
  // ç»¼åˆä¸šåŠ¡å·¥ä½œæµæµ‹è¯•
  // æ¨¡æ‹Ÿå®Œæ•´çš„ç”µå•†è®¢å•å¤„ç†æµç¨‹
  
  let product_price = 299
  let quantity = 3
  let tax_rate = 8
  let shipping_per_item = 15
  let discount_threshold = 800
  let discount_amount = 50
  let loyalty_points = 120
  
  // æ­¥éª¤1ï¼šè®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(product_price, quantity)
  
  // æ­¥éª¤2ï¼šè®¡ç®—è¿è´¹
  let total_shipping = multiply(shipping_per_item, quantity)
  
  // æ­¥éª¤3ï¼šè®¡ç®—ç¨è´¹
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  
  // æ­¥éª¤4ï¼šè®¡ç®—æŠ˜æ‰£å‰æ€»ä»·
  let pre_discount_total = add(add(subtotal, total_shipping), tax_amount)
  
  // æ­¥éª¤5ï¼šåº”ç”¨æŠ˜æ‰£ï¼ˆå¦‚æœæ»¡è¶³æ¡ä»¶ï¼‰
  let after_discount = if pre_discount_total > discount_threshold {
    add(pre_discount_total, -discount_amount)
  } else {
    pre_discount_total
  }
  
  // æ­¥éª¤6ï¼šåº”ç”¨ç§¯åˆ†æŠµæ‰£
  let points_discount = divide_with_ceil(loyalty_points, 10)  // 10ç§¯åˆ†=1å…ƒ
  let final_total = add(after_discount, -points_discount)
  
  // éªŒè¯è®¡ç®—ç»“æœ
  assert_eq(897, subtotal)           // 299 * 3 = 897
  assert_eq(45, total_shipping)      // 15 * 3 = 45
  assert_eq(72, tax_amount)          // ceil(897 * 8 / 100) = ceil(71.76) = 72
  assert_eq(1014, pre_discount_total) // 897 + 45 + 72 = 1014
  assert_eq(964, after_discount)     // 1014 - 50 = 964
  assert_eq(12, points_discount)     // ceil(120 / 10) = 12
  assert_eq(952, final_total)        // 964 - 12 = 952
}