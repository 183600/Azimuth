// Enhanced Standard MoonBit Tests for Azimuth Library
// é«˜è´¨é‡æ ‡å‡†æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ ¸å¿ƒåŠŸèƒ½å’Œå®é™…åº”ç”¨åœºæ™¯

test "mathematical_properties_commutative" {
  // æµ‹è¯•æ•°å­¦äº¤æ¢å¾‹æ€§è´¨
  let a = 12
  let b = 8
  assert_eq(add(a, b), add(b, a))  // åŠ æ³•äº¤æ¢å¾‹
  assert_eq(multiply(a, b), multiply(b, a))  // ä¹˜æ³•äº¤æ¢å¾‹
}

test "divide_with_ceil_precision_handling" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„ç²¾åº¦å¤„ç†
  assert_eq(4, divide_with_ceil(11, 3))   // 11/3 = 3.666... -> 4
  assert_eq(7, divide_with_ceil(20, 3))   // 20/3 = 6.666... -> 7
  assert_eq(-3, divide_with_ceil(-8, 3))  // -8/3 = -2.666... -> -2
  assert_eq(0, divide_with_ceil(0, 5))    // 0 é™¤ä»¥ä»»ä½•æ•°
  assert_eq(0, divide_with_ceil(10, 0))   // é™¤æ•°ä¸ºé›¶çš„å®‰å…¨å¤„ç†
}

test "complex_business_calculation" {
  // å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¢å•æ€»ä»·è®¡ç®—
  let unit_price = 45
  let quantity = 6
  let tax_rate = 8  // 8%
  let shipping = 12
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  // è®¡ç®—ç¨è´¹ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let tax = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  // è®¡ç®—æ€»ä»·
  let total = add(add(subtotal, tax), shipping)
  
  assert_eq(270, subtotal)  // 45 * 6
  assert_eq(22, tax)        // ceil(270 * 8 / 100) = ceil(21.6) = 22
  assert_eq(304, total)     // 270 + 22 + 12
}

test "greet_function_unicode_support" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ Unicode æ”¯æŒ
  assert_eq_string("Hello, ä¸­æ–‡!", greet("ä¸­æ–‡"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  assert_eq_string("Hello, !", greet(""))
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–æµ‹è¯•
  let total_resources = 100
  let project_a_needs = 35
  let project_b_needs = 28
  let project_c_needs = 22
  
  // åˆ†é…èµ„æº
  let allocated_a = multiply(project_a_needs, 1)
  let allocated_b = multiply(project_b_needs, 1)
  let allocated_c = multiply(project_c_needs, 1)
  
  // è®¡ç®—æ€»åˆ†é…å’Œå‰©ä½™èµ„æº
  let total_allocated = add(add(allocated_a, allocated_b), allocated_c)
  let remaining = add(total_resources, -total_allocated)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡
  let small_projects = divide_with_ceil(remaining, 8)
  
  assert_eq(85, total_allocated)  // 35 + 28 + 22
  assert_eq(15, remaining)        // 100 - 85
  assert_eq(2, small_projects)    // ceil(15 / 8) = 2
}

test "time_management_calculations" {
  // æ—¶é—´ç®¡ç†è®¡ç®—æµ‹è¯•
  let daily_work_hours = 8
  let total_tasks = 55
  let tasks_per_hour = 3
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œå¤©æ•°
  let total_hours_needed = divide_with_ceil(total_tasks, tasks_per_hour)
  let work_days_needed = divide_with_ceil(total_hours_needed, daily_work_hours)
  
  // è®¡ç®—å®é™…å·¥ä½œæ—¶é—´
  let actual_work_hours = multiply(work_days_needed, daily_work_hours)
  
  assert_eq(19, total_hours_needed)  // ceil(55 / 3) = 19
  assert_eq(3, work_days_needed)     // ceil(19 / 8) = 3
  assert_eq(24, actual_work_hours)   // 3 * 8
}

test "financial_compound_interest" {
  // é‡‘èå¤åˆ©è®¡ç®—æµ‹è¯•
  let principal = 1000
  let interest_rate = 5  // 5%
  let years = 3
  
  // ç¬¬ä¸€å¹´
  let year1 = add(principal, divide_with_ceil(multiply(principal, interest_rate), 100))
  // ç¬¬äºŒå¹´
  let year2 = add(year1, divide_with_ceil(multiply(year1, interest_rate), 100))
  // ç¬¬ä¸‰å¹´
  let year3 = add(year2, divide_with_ceil(multiply(year2, interest_rate), 100))
  
  assert_eq(1050, year1)  // 1000 + ceil(1000 * 5 / 100) = 1000 + 50
  assert_eq(1103, year2)  // 1050 + ceil(1050 * 5 / 100) = 1050 + 53
  assert_eq(1158, year3)  // 1103 + ceil(1103 * 5 / 100) = 1103 + 55
}

test "edge_cases_boundary_values" {
  // è¾¹ç•Œå€¼å’Œæç«¯æƒ…å†µæµ‹è¯•
  // æµ‹è¯•å¤§æ•°è¿ç®—
  assert_eq(2000000, add(1000000, 1000000))
  assert_eq(1000000, multiply(1000, 1000))
  
  // æµ‹è¯•è´Ÿæ•°è¿ç®—
  assert_eq(-10, add(-3, -7))
  assert_eq(15, multiply(-3, -5))
  assert_eq(-4, divide_with_ceil(-11, 3))
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  assert_eq(0, multiply(0, 12345))
  assert_eq(0, add(0, 0))
  assert_eq(0, divide_with_ceil(0, 100))
}