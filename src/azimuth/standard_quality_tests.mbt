// æ ‡å‡† MoonBit è´¨é‡æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“æ ¸å¿ƒåŠŸèƒ½çš„å…¨é¢è´¨é‡æµ‹è¯•

test "addition_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 42
  let b = 17
  assert_eq(add(a, b), add(b, a))
  assert_eq(59, add(42, 17))
  assert_eq(59, add(17, 42))
}

test "multiplication_identity_element" {
  // æµ‹è¯•ä¹˜æ³•å•ä½å…ƒï¼ša * 1 = a
  let values = [0, 1, -1, 5, 10, -15]
  assert_eq(0, multiply(0, 1))
  assert_eq(1, multiply(1, 1))
  assert_eq(-1, multiply(-1, 1))
  assert_eq(5, multiply(5, 1))
  assert_eq(10, multiply(10, 1))
  assert_eq(-15, multiply(-15, 1))
}

test "divide_with_ceil_fractional_handling" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å°æ•°å¤„ç†
  assert_eq(2, divide_with_ceil(3, 2))    // 1.5 -> 2
  assert_eq(4, divide_with_ceil(11, 3))   // 3.666... -> 4
  assert_eq(7, divide_with_ceil(13, 2))   // 6.5 -> 7
  assert_eq(1, divide_with_ceil(1, 1000)) // 0.001 -> 1
}

test "greet_function_unicode_comprehensive" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ Unicode å­—ç¬¦æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
  assert_eq_string("Hello, Î±Î²Î³Î´Îµ!", greet("Î±Î²Î³Î´Îµ"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  assert_eq_string("Hello, ğŸš€ğŸŒ!", greet("ğŸš€ğŸŒ"))
}

test "complex_business_calculation" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¢å•æ€»ä»·è®¡ç®—
  let unit_price = 89
  let quantity = 6
  let tax_rate = 8
  let discount = 45
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  // è®¡ç®—æœ€ç»ˆä»·æ ¼
  let final_price = add(add(subtotal, tax), -discount)
  
  assert_eq(534, subtotal)
  assert_eq(43, tax)
  assert_eq(532, final_price)
}

test "negative_number_division_precision" {
  // æµ‹è¯•è´Ÿæ•°é™¤æ³•çš„ç²¾åº¦å¤„ç†
  assert_eq(-2, divide_with_ceil(-4, 2))   // -4/2 = -2 -> -2
  assert_eq(-1, divide_with_ceil(-3, 2))   // -3/2 = -1.5 -> -1
  assert_eq(-3, divide_with_ceil(-7, 2))   // -7/2 = -3.5 -> -3
  assert_eq(3, divide_with_ceil(-7, -2))   // -7/-2 = 3.5 -> 4
  assert_eq(0, divide_with_ceil(-1, 100))  // -1/100 = -0.01 -> 0
}

test "packaging_optimization_problem" {
  // æµ‹è¯•åŒ…è£…ä¼˜åŒ–é—®é¢˜
  let total_items = 127
  let box_capacity = 15
  let boxes_needed = divide_with_ceil(total_items, box_capacity)
  
  // è®¡ç®—å‰©ä½™ç©ºé—´
  let total_capacity = multiply(boxes_needed, box_capacity)
  let empty_spaces = add(total_capacity, -total_items)
  
  assert_eq(9, boxes_needed)        // ceil(127/15) = 9
  assert_eq(135, total_capacity)    // 9 * 15 = 135
  assert_eq(8, empty_spaces)        // 135 - 127 = 8
}

test "mathematical_series_summation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°æ±‚å’Œï¼šç­‰å·®æ•°åˆ— 1+3+5+...+19
  let first_term = 1
  let common_difference = 2
  let number_of_terms = 10
  
  // ä½¿ç”¨å…¬å¼ï¼šS = n/2 * (2a + (n-1)d)
  let series_sum = divide_with_ceil(
    multiply(number_of_terms, add(multiply(2, first_term), multiply(number_of_terms - 1, common_difference))),
    2
  )
  
  assert_eq(100, series_sum)  // 10/2 * (2 + 18) = 5 * 20 = 100
}

test "string_concatenation_with_greet" {
  // æµ‹è¯•å­—ç¬¦ä¸²è¿æ¥ä¸é—®å€™å‡½æ•°çš„ç»„åˆä½¿ç”¨
  let prefix = "Dr."
  let first_name = "Alice"
  let last_name = "Smith"
  
  // æ„å»ºå®Œæ•´å§“å
  let full_name = prefix + " " + first_name + " " + last_name
  let formal_greeting = greet(full_name)
  
  assert_eq_string("Hello, Dr. Alice Smith!", formal_greeting)
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦ç»„åˆ
  let special_chars = "@" + "test" + "." + "com"
  let email_greeting = greet(special_chars)
  assert_eq_string("Hello, @test.com!", email_greeting)
}

test "resource_allocation_optimization" {
  // æµ‹è¯•èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜
  let total_budget = 5000
  let project_a_cost = 1200
  let project_b_cost = 1800
  let project_c_cost = 900
  
  // è®¡ç®—å·²åˆ†é…é¢„ç®—
  let allocated_budget = add(add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining_budget = add(total_budget, -allocated_budget)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡ï¼ˆæ¯ä¸ªå°é¡¹ç›®æˆæœ¬250ï¼‰
  let small_projects_count = divide_with_ceil(remaining_budget, 250)
  
  assert_eq(3900, allocated_budget)
  assert_eq(1100, remaining_budget)
  assert_eq(5, small_projects_count)  // ceil(1100/250) = 5
}