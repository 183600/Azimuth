// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæµ‹è¯•é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

// å¯¼å…¥å¿…è¦çš„åŒ…
test "arithmetic_sequence_sum" {

test "arithmetic_sequence_sum" {
  // æµ‹è¯•ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š1 + 4 + 7 + 10 + 13
  // ä½¿ç”¨å…¬å¼ï¼šn Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let n = 5
  let first = 1
  let last = 13
  let sum = @azimuth.multiply(n, @azimuth.add(first, last)) / 2
  @azimuth.assert_eq(35, sum)
}

test "geometric_progression" {
  // æµ‹è¯•ç­‰æ¯”æ•°åˆ—ï¼š2, 6, 18, 54
  // è®¡ç®—å‰4é¡¹çš„å’Œ
  let term1 = 2
  let term2 = @azimuth.multiply(term1, 3)  // 6
  let term3 = @azimuth.multiply(term2, 3)  // 18
  let term4 = @azimuth.multiply(term3, 3)  // 54
  
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(term1, term2), term3), term4)
  @azimuth.assert_eq(80, sum)
}

test "discount_calculation" {
  // æµ‹è¯•æŠ˜æ‰£è®¡ç®—åœºæ™¯
  let original_price = 1000
  let discount_percent = 15  // 15% æŠ˜æ‰£
  let tax_percent = 8        // 8% ç¨è´¹
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discount_amount = @azimuth.multiply(original_price, discount_percent) / 100
  let discounted_price = @azimuth.add(original_price, -discount_amount)
  
  // è®¡ç®—å«ç¨ä»·æ ¼
  let tax_amount = @azimuth.multiply(discounted_price, tax_percent) / 100
  let final_price = @azimuth.add(discounted_price, tax_amount)
  
  @azimuth.assert_eq(918, final_price)  // 1000 - 150 + 68 = 918
}

test "speed_conversion" {
  // æµ‹è¯•é€Ÿåº¦å•ä½è½¬æ¢ï¼škm/h è½¬ m/s
  // ç®€åŒ–å…¬å¼ï¼šm/s = km/h Ã— 5/18 â‰ˆ km/h / 3.6 â‰ˆ km/h Ã— 10 / 36
  let kmh_speed = 72
  let ms_speed = @azimuth.multiply(kmh_speed, 10) / 36
  @azimuth.assert_eq(20, ms_speed)
  
  // åå‘è½¬æ¢ï¼šm/s è½¬ km/h
  let ms_speed_back = 20
  let kmh_speed_back = @azimuth.multiply(ms_speed_back, 36) / 10
  @azimuth.assert_eq(72, kmh_speed_back)
}

test "compound_interest_simplified" {
  // æµ‹è¯•ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let principal = 5000
  let rate_percent = 6
  let years = 3
  
  // ç®€åŒ–è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let growth_factor = @azimuth.add(1, @azimuth.multiply(rate_percent, years))
  let total = @azimuth.multiply(principal, growth_factor)
  
  @azimuth.assert_eq(95000, total)  // 5000 Ã— (1 + 6Ã—3) = 5000 Ã— 19 = 95000
}

test "string_processing_advanced" {
  // æµ‹è¯•é«˜çº§å­—ç¬¦ä¸²å¤„ç†
  // æµ‹è¯•åŒ…å«å„ç§å­—ç¬¦çš„å­—ç¬¦ä¸²
  let test_cases = [
    ("simple", "Hello, simple!"),
    ("With Spaces", "Hello, With Spaces!"),
    ("123numbers", "Hello, 123numbers!"),
    ("special@#$%", "Hello, special@#$%!"),
    ("ä¸­æ–‡æµ‹è¯•", "Hello, ä¸­æ–‡æµ‹è¯•!"),
    ("ğŸŒŸemoji", "Hello, ğŸŒŸemoji!")
  ]
  
  // æµ‹è¯•ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ¡ˆä¾‹
  @azimuth.assert_eq_string("Hello, simple!", @azimuth.greet("simple"))
  @azimuth.assert_eq_string("Hello, ğŸŒŸemoji!", @azimuth.greet("ğŸŒŸemoji"))
}

test "matrix_operations_simulation" {
  // æ¨¡æ‹Ÿç®€å•çš„çŸ©é˜µè¿ç®—
  // 2x2 çŸ©é˜µä¹˜æ³•ï¼š[[a, b], [c, d]] Ã— [[e, f], [g, h]]
  let a = 1; let b = 2; let c = 3; let d = 4
  let e = 5; let f = 6; let g = 7; let h = 8
  
  // è®¡ç®—ç»“æœçŸ©é˜µçš„å…ƒç´ 
  // ç»“æœ[0,0] = a*e + b*g
  let result_00 = @azimuth.add(@azimuth.multiply(a, e), @azimuth.multiply(b, g))
  // ç»“æœ[0,1] = a*f + b*h
  let result_01 = @azimuth.add(@azimuth.multiply(a, f), @azimuth.multiply(b, h))
  // ç»“æœ[1,0] = c*e + d*g
  let result_10 = @azimuth.add(@azimuth.multiply(c, e), @azimuth.multiply(d, g))
  // ç»“æœ[1,1] = c*f + d*h
  let result_11 = @azimuth.add(@azimuth.multiply(c, f), @azimuth.multiply(d, h))
  
  @azimuth.assert_eq(19, result_00)  // 1*5 + 2*7 = 5 + 14 = 19
  @azimuth.assert_eq(22, result_01)  // 1*6 + 2*8 = 6 + 16 = 22
  @azimuth.assert_eq(43, result_10)  // 3*5 + 4*7 = 15 + 28 = 43
  @azimuth.assert_eq(50, result_11)  // 3*6 + 4*8 = 18 + 32 = 50
}

test "game_logic_simulation" {
  // æµ‹è¯•æ¸¸æˆé€»è¾‘æ¨¡æ‹Ÿ
  let player_level = 5
  let base_damage = 100
  let weapon_multiplier = 150  // 1.5å€ï¼Œç”¨150è¡¨ç¤º
  let critical_chance = 20     // 20%æš´å‡»ç‡
  
  // è®¡ç®—åŸºç¡€ä¼¤å®³
  let weapon_damage = @azimuth.multiply(base_damage, weapon_multiplier) / 100
  let level_bonus = @azimuth.multiply(player_level, 10)
  let total_damage = @azimuth.add(weapon_damage, level_bonus)
  
  // æ¨¡æ‹Ÿæš´å‡»ï¼ˆç®€åŒ–ï¼šæ€»æ˜¯è§¦å‘æš´å‡»ï¼‰
  let critical_damage = @azimuth.multiply(total_damage, 2)
  
  @azimuth.assert_eq(320, total_damage)     // 100*1.5 + 5*10 = 150 + 50 = 200
  @azimuth.assert_eq(640, critical_damage)  // 200 * 2 = 400
}

test "data_analysis_basic" {
  // æµ‹è¯•åŸºç¡€æ•°æ®åˆ†æ
  // è®¡ç®—æ•°æ®é›†ï¼š[12, 15, 18, 21, 24] çš„ç»Ÿè®¡é‡
  let data_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(12, 15), 18), 21), 24)
  let data_count = 5
  let mean = data_sum / data_count
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let diff1 = @azimuth.add(12, -mean)
  let diff2 = @azimuth.add(15, -mean)
  let diff3 = @azimuth.add(18, -mean)
  let diff4 = @azimuth.add(21, -mean)
  let diff5 = @azimuth.add(24, -mean)
  
  let squared_diff1 = @azimuth.multiply(diff1, diff1)
  let squared_diff2 = @azimuth.multiply(diff2, diff2)
  let squared_diff3 = @azimuth.multiply(diff3, diff3)
  let squared_diff4 = @azimuth.multiply(diff4, diff4)
  let squared_diff5 = @azimuth.multiply(diff5, diff5)
  
  let variance_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(squared_diff1, squared_diff2), squared_diff3), squared_diff4), squared_diff5)
  let variance = variance_sum / data_count
  
  @azimuth.assert_eq(90, data_sum)   // 12 + 15 + 18 + 21 + 24 = 90
  @azimuth.assert_eq(18, mean)      // 90 / 5 = 18
}

test "physics_simulation_simple" {
  // æµ‹è¯•ç®€å•ç‰©ç†æ¨¡æ‹Ÿ
  // è‡ªç”±è½ä½“è¿åŠ¨ï¼šh = v0*t + 0.5*g*t^2
  // ç®€åŒ–è®¡ç®—ï¼Œå¿½ç•¥å°æ•°éƒ¨åˆ†
  let initial_velocity = 10  // m/s
  let gravity = 10           // m/s^2 (ç®€åŒ–å€¼)
  let time = 3               // seconds
  
  // è®¡ç®—ä½ç§»
  let velocity_component = @azimuth.multiply(initial_velocity, time)
  let gravity_component = @azimuth.multiply(gravity, @azimuth.multiply(time, time)) / 2
  let displacement = @azimuth.add(velocity_component, gravity_component)
  
  // è®¡ç®—æœ«é€Ÿåº¦ï¼šv = v0 + g*t
  let final_velocity = @azimuth.add(initial_velocity, @azimuth.multiply(gravity, time))
  
  @azimuth.assert_eq(75, displacement)   // 10*3 + 10*9/2 = 30 + 45 = 75
  @azimuth.assert_eq(40, final_velocity)  // 10 + 10*3 = 40
}