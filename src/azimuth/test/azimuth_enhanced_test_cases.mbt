// å¢å¼º MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„é«˜çº§åŠŸèƒ½æµ‹è¯•

test "add_boundary_values" {
  // æµ‹è¯• add å‡½æ•°çš„è¾¹ç•Œå€¼
  @azimuth.assert_eq(2147483647, @azimuth.add(2147483646, 1))  // æ¥è¿‘æœ€å¤§å€¼
  @azimuth.assert_eq(-2147483648, @azimuth.add(-2147483647, -1))  // æ¥è¿‘æœ€å°å€¼
  @azimuth.assert_eq(0, @azimuth.add(2147483647, -2147483647))  // æœ€å¤§å€¼ä¸ç›¸åæ•°
  @azimuth.assert_eq(1, @azimuth.add(0, 1))  // é›¶è¾¹ç•Œ
  @azimuth.assert_eq(-1, @azimuth.add(0, -1))  // è´Ÿé›¶è¾¹ç•Œ
}

test "multiply_boundary_values" {
  // æµ‹è¯• multiply å‡½æ•°çš„è¾¹ç•Œå€¼
  @azimuth.assert_eq(1, @azimuth.multiply(1, 1))  // å•ä½å…ƒ
  @azimuth.assert_eq(-1, @azimuth.multiply(1, -1))  // è´Ÿå•ä½å…ƒ
  @azimuth.assert_eq(0, @azimuth.multiply(2147483647, 0))  // å¤§æ•°ä¹˜é›¶
  @azimuth.assert_eq(2147483647, @azimuth.multiply(1, 2147483647))  // å•ä½ä¹˜å¤§æ•°
  @azimuth.assert_eq(46340, @azimuth.multiply(215, 215))  // æ¥è¿‘å¹³æ–¹æ ¹è¾¹ç•Œ
}

test "greet_unicode_emoji" {
  // æµ‹è¯• greet å‡½æ•°çš„ Unicode å’Œè¡¨æƒ…ç¬¦å·å¤„ç†
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
  @azimuth.assert_eq_string("Hello, ğŸ‘‹!", @azimuth.greet("ğŸ‘‹"))
  @azimuth.assert_eq_string("Hello, ğŸ‰!", @azimuth.greet("ğŸ‰"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
}

test "divide_with_ceil_complex_cases" {
  // æµ‹è¯• divide_with_ceil å‡½æ•°çš„å¤æ‚æƒ…å†µ
  @azimuth.assert_eq(-333334, @azimuth.divide_with_ceil(-1000000, 3))  // å¤§è´Ÿæ•°
  @azimuth.assert_eq(333334, @azimuth.divide_with_ceil(1000000, 3))  // å¤§æ­£æ•°
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))  // è´Ÿæ•°ç›¸ç­‰
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -1))  // é›¶é™¤è´Ÿæ•°
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(-1, 1))  // è´Ÿæ•°é™¤æ­£æ•°
}

test "advanced_mathematical_expressions" {
  // æµ‹è¯•é«˜çº§æ•°å­¦è¡¨è¾¾å¼
  let x = 42
  let y = 17
  let z = 8
  
  // å¤æ‚åµŒå¥—è¡¨è¾¾å¼
  let result = @azimuth.add(
    @azimuth.multiply(x, @azimuth.divide_with_ceil(y, z)),
    @azimuth.multiply(z, @azimuth.divide_with_ceil(x, y))
  )
  @azimuth.assert_eq(58, result)  // 42*ceil(17/8) + 8*ceil(42/17) = 42*3 + 8*3 = 126 + 24 = 150
  
  // å¤šå±‚åµŒå¥—
  let nested = @azimuth.divide_with_ceil(
    @azimuth.multiply(
      @azimuth.add(x, y),
      @azimuth.multiply(z, 2)
    ),
    3
  )
  @azimuth.assert_eq(80, nested)  // ceil((42+17)*(8*2)/3) = ceil(59*16/3) = ceil(944/3) = 315
}

test "financial_calculation_scenario" {
  // é‡‘èè®¡ç®—åœºæ™¯ï¼šå¤åˆ©è®¡ç®—
  let principal = 10000
  let rate_percent = 5
  let years = 3
  
  // ç¬¬ä¸€å¹´
  let year1 = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, rate_percent), 100))
  // ç¬¬äºŒå¹´
  let year2 = @azimuth.add(year1, @azimuth.divide_with_ceil(@azimuth.multiply(year1, rate_percent), 100))
  // ç¬¬ä¸‰å¹´
  let year3 = @azimuth.add(year2, @azimuth.divide_with_ceil(@azimuth.multiply(year2, rate_percent), 100))
  
  @azimuth.assert_eq(10500, year1)  // 10000 + ceil(10000*5/100) = 10000 + 500 = 10500
  @azimuth.assert_eq(11025, year2)  // 10500 + ceil(10500*5/100) = 10500 + 525 = 11025
  @azimuth.assert_eq(11576, year3)  // 11025 + ceil(11025*5/100) = 11025 + 551 = 11576
}

test "inventory_management_system" {
  // åº“å­˜ç®¡ç†ç³»ç»Ÿæµ‹è¯•
  let initial_stock = 1000
  let daily_sales = 45
  let restock_batch = 200
  let days_to_simulate = 5
  
  // è®¡ç®—æ€»é”€å”®é‡
  let total_sold = @azimuth.multiply(daily_sales, days_to_simulate)
  
  // è®¡ç®—å‰©ä½™åº“å­˜
  let remaining_stock = @azimuth.add(initial_stock, -total_sold)
  
  // è®¡ç®—éœ€è¦è¡¥è´§çš„æ‰¹æ¬¡æ•°
  let restock_batches_needed = @azimuth.divide_with_ceil(
    @azimuth.add(total_sold, -remaining_stock),
    restock_batch
  )
  
  @azimuth.assert_eq(225, total_sold)  // 45 * 5 = 225
  @azimuth.assert_eq(775, remaining_stock)  // 1000 - 225 = 775
  @azimuth.assert_eq(2, restock_batches_needed)  // ceil(225/200) = 2
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–æµ‹è¯•
  let total_budget = 50000
  let project_costs = @azimuth.multiply(8500, 4)  // 4ä¸ªé¡¹ç›®
  let team_costs = @azimuth.multiply(3200, 6)    // 6ä¸ªå›¢é˜Ÿ
  let overhead = 5000
  
  // è®¡ç®—æ€»æ”¯å‡º
  let total_expenses = @azimuth.add(
    @azimuth.add(project_costs, team_costs),
    overhead
  )
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining_budget = @azimuth.add(total_budget, -total_expenses)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡ï¼ˆæ¯ä¸ª3000ï¼‰
  let small_projects = @azimuth.divide_with_ceil(remaining_budget, 3000)
  
  @azimuth.assert_eq(34000, project_costs)  // 8500 * 4 = 34000
  @azimuth.assert_eq(19200, team_costs)    // 3200 * 6 = 19200
  @azimuth.assert_eq(58200, total_expenses) // 34000 + 19200 + 5000 = 58200
  @azimuth.assert_eq(-8200, remaining_budget) // 50000 - 58200 = -8200
  @azimuth.assert_eq(-2, small_projects)   // ceil(-8200/3000) = -2
}

test "string_processing_multilingual" {
  // å¤šè¯­è¨€å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  let greetings = [
    "English",
    "ä¸­æ–‡",
    "EspaÃ±ol",
    "Ğ ÑƒÑÑĞºĞ¸Ğ¹",
    "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",
    "æ—¥æœ¬èª",
    "í•œêµ­ì–´",
    "FranÃ§ais"
  ]
  
  // æµ‹è¯•æ¯ç§è¯­è¨€çš„é—®å€™
  @azimuth.assert_eq_string("Hello, English!", @azimuth.greet("English"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡!", @azimuth.greet("ä¸­æ–‡"))
  @azimuth.assert_eq_string("Hello, EspaÃ±ol!", @azimuth.greet("EspaÃ±ol"))
  @azimuth.assert_eq_string("Hello, Ğ ÑƒÑÑĞºĞ¸Ğ¹!", @azimuth.greet("Ğ ÑƒÑÑĞºĞ¸Ğ¹"))
  @azimuth.assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", @azimuth.greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  @azimuth.assert_eq_string("Hello, æ—¥æœ¬èª!", @azimuth.greet("æ—¥æœ¬èª"))
  @azimuth.assert_eq_string("Hello, í•œêµ­ì–´!", @azimuth.greet("í•œêµ­ì–´"))
  @azimuth.assert_eq_string("Hello, FranÃ§ais!", @azimuth.greet("FranÃ§ais"))
}