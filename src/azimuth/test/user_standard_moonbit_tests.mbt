// ç”¨æˆ·è¯·æ±‚çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "statistical_calculations" {
  // ç»Ÿè®¡è®¡ç®—æµ‹è¯•ï¼šè®¡ç®—å¹³å‡å€¼ã€ä¸­ä½æ•°ã€ä¼—æ•°
  // è®¡ç®—äº”ä¸ªæ•°çš„å¹³å‡å€¼
  let numbers_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)
  let average = numbers_sum / 5
  @azimuth.assert_eq(30, average)
  
  // è®¡ç®—åŠ æƒå¹³å‡ï¼š(10*2 + 20*3 + 30*5) / (2+3+5)
  let weighted_sum = @azimuth.add(@azimuth.add(@azimuth.multiply(10, 2), @azimuth.multiply(20, 3)), @azimuth.multiply(30, 5))
  let total_weight = @azimuth.add(@azimuth.add(2, 3), 5)
  let weighted_average = weighted_sum / total_weight
  @azimuth.assert_eq(23, weighted_average)
}

test "geometric_calculations" {
  // å‡ ä½•è®¡ç®—æµ‹è¯•ï¼šé¢ç§¯ã€å‘¨é•¿ã€ä½“ç§¯
  // çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  let rectangle_area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, rectangle_area)
  
  // ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = @azimuth.multiply(base, height) / 2
  @azimuth.assert_eq(30, triangle_area)
  
  // æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 5
  let bottom_base = 15
  let trapezoid_height = 8
  let trapezoid_area = @azimuth.multiply(@azimuth.add(top_base, bottom_base), trapezoid_height) / 2
  @azimuth.assert_eq(80, trapezoid_area)
}

test "financial_calculations" {
  // é‡‘èè®¡ç®—æµ‹è¯•ï¼šåˆ©æ¯ã€æŠ˜æ‰£ã€ç¨æ”¶
  // ç®€å•åˆ©æ¯ï¼šæœ¬é‡‘ Ã— åˆ©ç‡ Ã— æ—¶é—´
  let principal = 10000
  let rate = 5  // 5%
  let time = 3  // 3å¹´
  let interest = @azimuth.multiply(@azimuth.multiply(principal, rate), time) / 100
  @azimuth.assert_eq(1500, interest)
  
  // æŠ˜æ‰£è®¡ç®—ï¼šåŸä»· Ã— æŠ˜æ‰£ç‡
  let original_price = 500
  let discount_rate = 20  // 20%
  let discount_amount = @azimuth.multiply(original_price, discount_rate) / 100
  let final_price = @azimuth.add(original_price, -discount_amount)
  @azimuth.assert_eq(400, final_price)
  
  // å¤åˆç¨æ”¶ï¼šåŸºç¡€ç¨ + é¢å¤–ç¨
  let base_amount = 1000
  let base_tax_rate = 10  // 10%
  let additional_tax_rate = 5  // 5%
  let base_tax = @azimuth.multiply(base_amount, base_tax_rate) / 100
  let additional_tax = @azimuth.multiply(base_amount, additional_tax_rate) / 100
  let total_tax = @azimuth.add(base_tax, additional_tax)
  @azimuth.assert_eq(150, total_tax)
}

test "physics_calculations" {
  // ç‰©ç†è®¡ç®—æµ‹è¯•ï¼šé€Ÿåº¦ã€åŠ é€Ÿåº¦ã€èƒ½é‡
  // å¹³å‡é€Ÿåº¦ï¼šè·ç¦» Ã· æ—¶é—´
  let distance = 300
  let time = 5
  let average_speed = distance / time
  @azimuth.assert_eq(60, average_speed)
  
  // åŠ é€Ÿåº¦ï¼š(æœ«é€Ÿåº¦ - åˆé€Ÿåº¦) Ã· æ—¶é—´
  let final_velocity = 80
  let initial_velocity = 20
  let acceleration_time = 3
  let acceleration = @azimuth.add(final_velocity, -initial_velocity) / acceleration_time
  @azimuth.assert_eq(20, acceleration)
  
  // åŠ¨èƒ½ï¼šè´¨é‡ Ã— é€Ÿåº¦Â² Ã· 2
  let mass = 10
  let velocity = 15
  let kinetic_energy = @azimuth.multiply(@azimuth.multiply(mass, velocity), velocity) / 2
  @azimuth.assert_eq(1125, kinetic_energy)
}

test "temperature_conversion" {
  // æ¸©åº¦è½¬æ¢æµ‹è¯•ï¼šæ‘„æ°åº¦ã€åæ°åº¦ã€å¼€å°”æ–‡
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šF = C Ã— 2 + 30
  let celsius = 25
  let fahrenheit = @azimuth.add(@azimuth.multiply(celsius, 2), 30)
  @azimuth.assert_eq(80, fahrenheit)
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šC = (F - 30) Ã· 2
  let fahrenheit_temp = 100
  let celsius_temp = @azimuth.add(fahrenheit_temp, -30) / 2
  @azimuth.assert_eq(35, celsius_temp)
  
  // å¼€å°”æ–‡è½¬æ‘„æ°åº¦ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šK = C + 273
  let celsius_for_kelvin = 20
  let kelvin = @azimuth.add(celsius_for_kelvin, 273)
  @azimuth.assert_eq(293, kelvin)
}

test "data_structure_operations" {
  // æ•°æ®ç»“æ„æ“ä½œæµ‹è¯•ï¼šæ•°ç»„ç´¢å¼•ã€æ ˆæ“ä½œã€é˜Ÿåˆ—æ“ä½œ
  // äºŒç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„ç´¢å¼•è®¡ç®—
  let row = 3
  let col = 4
  let width = 5
  let index = @azimuth.add(@azimuth.multiply(row, width), col)
  @azimuth.assert_eq(19, index)
  
  // æ ˆæ“ä½œæ¨¡æ‹Ÿï¼špush + pop
  let stack_size = 0
  let push_operations = 5
  let pop_operations = 2
  let final_stack_size = @azimuth.add(@azimuth.multiply(1, push_operations), @azimuth.multiply(-1, pop_operations))
  @azimuth.assert_eq(3, final_stack_size)
  
  // å¾ªç¯é˜Ÿåˆ—ç´¢å¼•è®¡ç®—
  let queue_size = 10
  let current_index = 8
  let enqueue_count = 5
  let new_index = @azimuth.add(current_index, enqueue_count) % queue_size
  @azimuth.assert_eq(3, new_index)
}

test "algorithm_complexity" {
  // ç®—æ³•å¤æ‚åº¦æµ‹è¯•ï¼šçº¿æ€§ã€äºŒæ¬¡ã€å¯¹æ•°
  // çº¿æ€§å¤æ‚åº¦ï¼šO(n)
  let n = 100
  let linear_operations = @azimuth.multiply(n, 1)
  @azimuth.assert_eq(100, linear_operations)
  
  // äºŒæ¬¡å¤æ‚åº¦ï¼šO(nÂ²)
  let quadratic_operations = @azimuth.multiply(n, n)
  @azimuth.assert_eq(10000, quadratic_operations)
  
  // å¯¹æ•°å¤æ‚åº¦æ¨¡æ‹Ÿï¼ˆç®€åŒ–ï¼‰ï¼šO(log n)
  // ä½¿ç”¨æ•´æ•°é™¤æ³•æ¨¡æ‹Ÿå¯¹æ•°è¿ç®—
  let log_operations = 0
  let temp_n = n
  let log_approx = 0
  // ç®€åŒ–çš„å¯¹æ•°è®¡ç®—ï¼š100 -> 50 -> 25 -> 12 -> 6 -> 3 -> 1 (çº¦7æ¬¡)
  @azimuth.assert_eq(7, log_approx)
}

test "string_encoding_processing" {
  // å­—ç¬¦ä¸²ç¼–ç å¤„ç†æµ‹è¯•
  // æµ‹è¯•ä¸åŒå­—ç¬¦ç¼–ç çš„å­—ç¬¦ä¸²
  let ascii_string = "Hello"
  @azimuth.assert_eq_string("Hello, Hello!", @azimuth.greet(ascii_string))
  
  let unicode_string = "ä½ å¥½"
  @azimuth.assert_eq_string("Hello, ä½ å¥½!", @azimuth.greet(unicode_string))
  
  let emoji_string = "ğŸŒŸ"
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet(emoji_string))
  
  let mixed_string = "Test123æµ‹è¯•!@#"
  @azimuth.assert_eq_string("Hello, Test123æµ‹è¯•!@#!", @azimuth.greet(mixed_string))
}

test "number_system_conversions" {
  // æ•°å­—ç³»ç»Ÿè½¬æ¢æµ‹è¯•
  // åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ï¼ˆæ¨¡æ‹Ÿï¼‰
  let decimal = 13
  // 13 = 8 + 4 + 1 = 1101(äºŒè¿›åˆ¶)
  let binary_8 = @azimuth.multiply(1, 8)
  let binary_4 = @azimuth.multiply(1, 4)
  let binary_1 = @azimuth.multiply(1, 1)
  let binary_sum = @azimuth.add(@azimuth.add(binary_8, binary_4), binary_1)
  @azimuth.assert_eq(13, binary_sum)
  
  // åè¿›åˆ¶è½¬å…«è¿›åˆ¶ï¼ˆæ¨¡æ‹Ÿï¼‰
  // 13 = 1*8 + 5 = 15(å…«è¿›åˆ¶)
  let octal_8 = @azimuth.multiply(1, 8)
  let octal_5 = @azimuth.multiply(5, 1)
  let octal_sum = @azimuth.add(octal_8, octal_5)
  @azimuth.assert_eq(13, octal_sum)
  
  // åè¿›åˆ¶è½¬åå…­è¿›åˆ¶ï¼ˆæ¨¡æ‹Ÿï¼‰
  // 13 = D(åå…­è¿›åˆ¶)
  let hex_10 = @azimuth.multiply(0, 16)
  let hex_3 = @azimuth.multiply(13, 1)
  let hex_sum = @azimuth.add(hex_10, hex_3)
  @azimuth.assert_eq(13, hex_sum)
}

test "combinatorial_calculations" {
  // ç»„åˆæ•°å­¦è®¡ç®—æµ‹è¯•
  // æ’åˆ—æ•°ï¼ˆç®€åŒ–ï¼‰ï¼šP(n,k) = n! / (n-k)!
  // è®¡ç®— P(5,2) = 5! / 3! = 120 / 6 = 20
  let n = 5
  let k = 2
  let n_factorial = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(@azimuth.multiply(5, 4), 3), 2), 1)
  let n_minus_k_factorial = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(3, 2), 1), 1)
  let permutation = n_factorial / n_minus_k_factorial
  @azimuth.assert_eq(20, permutation)
  
  // ç»„åˆæ•°ï¼ˆç®€åŒ–ï¼‰ï¼šC(n,k) = n! / (k! * (n-k)!)
  // è®¡ç®— C(5,2) = 5! / (2! * 3!) = 120 / (2 * 6) = 10
  let k_factorial = @azimuth.multiply(@azimuth.multiply(2, 1), 1)
  let combination = n_factorial / @azimuth.multiply(k_factorial, n_minus_k_factorial)
  @azimuth.assert_eq(10, combination)
  
  // æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆå‰10é¡¹å’Œï¼‰
  // 1, 1, 2, 3, 5, 8, 13, 21, 34, 55
  let fib_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(1, 1), 2), 3), 5), 8), 13), 21), 34), 55)
  @azimuth.assert_eq(143, fib_sum)
}