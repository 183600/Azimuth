// Azimuth é¡¹ç›®æ–°å¢žç»¼åˆæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œè¦†ç›–æ–°çš„æµ‹è¯•åœºæ™¯

test "advanced_arithmetic_properties" {
  // æµ‹è¯•é«˜çº§ç®—æœ¯æ€§è´¨
  
  // é›¶å…ƒç´ æ€§è´¨
  @azimuth.assert_eq(42, @azimuth.add(42, 0))
  @azimuth.assert_eq(42, @azimuth.add(0, 42))
  @azimuth.assert_eq(0, @azimuth.multiply(42, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, 42))
  
  // å•ä½å…ƒç´ æ€§è´¨
  @azimuth.assert_eq(42, @azimuth.multiply(42, 1))
  @azimuth.assert_eq(42, @azimuth.multiply(1, 42))
  
  // è´Ÿæ•°æ€§è´¨
  @azimuth.assert_eq(0, @azimuth.add(42, -42))
  @azimuth.assert_eq(-42, @azimuth.multiply(42, -1))
  @azimuth.assert_eq(42, @azimuth.multiply(-42, -1))
}

test "scientific_notation_calculations" {
  // æµ‹è¯•ç§‘å­¦è®¡æ•°æ³•ç›¸å…³çš„è®¡ç®—
  
  // è®¡ç®— 2^10 = 1024 (é€šè¿‡è¿žä¹˜æ¨¡æ‹Ÿ)
  let power_of_2 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), 2), 2), @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), 2), 2))
  @azimuth.assert_eq(1024, power_of_2)
  
  // è®¡ç®— 5! = 120 (é˜¶ä¹˜)
  let factorial_5 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(@azimuth.multiply(1, 2), 3), 4), 5)
  @azimuth.assert_eq(120, factorial_5)
  
  // è®¡ç®— 3^4 = 81
  let power_of_3 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(3, 3), 3), 3)
  @azimuth.assert_eq(81, power_of_3)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  
  // è®¡ç®—å¹³å‡å€¼: (10 + 20 + 30 + 40 + 50) / 5 = 30
  let numbers_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)
  let count = 5
  let average = numbers_sum / count
  @azimuth.assert_eq(30, average)
  
  // è®¡ç®—åŠ æƒå¹³å‡: (10*2 + 20*3 + 30*5) / (2+3+5) = 23
  let weighted_sum = @azimuth.add(@azimuth.add(@azimuth.multiply(10, 2), @azimuth.multiply(20, 3)), @azimuth.multiply(30, 5))
  let total_weight = @azimuth.add(@azimuth.add(2, 3), 5)
  let weighted_average = weighted_sum / total_weight
  @azimuth.assert_eq(23, weighted_average)
  
  // è®¡ç®—æ–¹å·®ç®€åŒ–ç‰ˆ: (1-3)^2 + (2-3)^2 + (3-3)^2 + (4-3)^2 + (5-3)^2 = 10
  let variance_sum = 10  // ç›´æŽ¥ä½¿ç”¨é¢„è®¡ç®—çš„ç»“æžœ
  @azimuth.assert_eq(10, variance_sum)
}

test "physics_simulations" {
  // æµ‹è¯•ç‰©ç†æ¨¡æ‹Ÿè®¡ç®—
  
  // è®¡ç®—åŠ¨èƒ½: KE = 1/2 * m * v^2
  let mass = 10
  let velocity = 5
  let kinetic_energy = @azimuth.multiply(@azimuth.multiply(mass, velocity), velocity) / 2
  @azimuth.assert_eq(125, kinetic_energy)
  
  // è®¡ç®—åŠ¿èƒ½: PE = m * g * h
  let height = 20
  let gravity = 10  // ç®€åŒ–é‡åŠ›åŠ é€Ÿåº¦
  let potential_energy = @azimuth.multiply(@azimuth.multiply(mass, gravity), height)
  @azimuth.assert_eq(2000, potential_energy)
  
  // è®¡ç®—æ€»æœºæ¢°èƒ½
  let total_energy = @azimuth.add(kinetic_energy, potential_energy)
  @azimuth.assert_eq(2125, total_energy)
}

test "cryptography_simulations" {
  // æµ‹è¯•å¯†ç å­¦æ¨¡æ‹Ÿè®¡ç®—
  
  // ç®€å•çš„å‡¯æ’’å¯†ç æ¨¡æ‹Ÿï¼ˆæ•°å­—ç‰ˆæœ¬ï¼‰
  let original_number = 123
  let shift_key = 5
  let encrypted = @azimuth.add(original_number, shift_key)
  let decrypted = @azimuth.add(encrypted, -shift_key)
  @azimuth.assert_eq(123, decrypted)
  
  // ç®€å•çš„æ ¡éªŒå’Œè®¡ç®—
  let data_block1 = 100
  let data_block2 = 200
  let data_block3 = 300
  let checksum = @azimuth.add(@azimuth.add(data_block1, data_block2), data_block3) / 3
  @azimuth.assert_eq(200, checksum)
  
  // ç®€å•çš„å“ˆå¸Œæ¨¡æ‹Ÿ
  let input_value = 42
  let hash_result = @azimuth.multiply(@azimuth.add(input_value, 17), 31)
  @azimuth.assert_eq(1829, hash_result)
}

test "string_formatting_validation" {
  // æµ‹è¯•å­—ç¬¦ä¸²æ ¼å¼åŒ–å’ŒéªŒè¯
  
  // æµ‹è¯•ä¸åŒè¯­è¨€çš„é—®å€™
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ðŸŒŸ!", @azimuth.greet("ðŸŒŸ"))
  @azimuth.assert_eq_string("Hello, a1b2c3!", @azimuth.greet("a1b2c3"))
  
  // æµ‹è¯•ç‰¹æ®Šæ ¼å¼å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, [Test]!", @azimuth.greet("[Test]"))
  @azimuth.assert_eq_string("Hello, (Test)!", @azimuth.greet("(Test)"))
  @azimuth.assert_eq_string("Hello, {Test}!", @azimuth.greet("{Test}"))
  
  // æµ‹è¯•åŒ…å«å¼•å·çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, \"Test\"!", @azimuth.greet("\"Test\""))
  @azimuth.assert_eq_string("Hello, 'Test'!", @azimuth.greet("'Test'"))
}

test "algorithm_complexity_tests" {
  // æµ‹è¯•ç®—æ³•å¤æ‚åº¦ç›¸å…³çš„è®¡ç®—
  
  // O(n) çº¿æ€§æ—¶é—´å¤æ‚åº¦æ¨¡æ‹Ÿ - æ±‚å’Œ
  let n = 100
  let linear_sum = @azimuth.multiply(@azimuth.add(n, 1), n) / 2  // 1+2+...+100 = 5050
  @azimuth.assert_eq(5050, linear_sum)
  
  // O(nÂ²) å¹³æ–¹æ—¶é—´å¤æ‚åº¦æ¨¡æ‹Ÿ - åµŒå¥—å¾ªçŽ¯å’Œ
  let nested_sum = @azimuth.multiply(n, @azimuth.add(n, 1))  // ç®€åŒ–çš„åŒé‡å¾ªçŽ¯
  @azimuth.assert_eq(10100, nested_sum)
  
  // O(log n) å¯¹æ•°æ—¶é—´å¤æ‚åº¦æ¨¡æ‹Ÿ - äºŒåˆ†æŸ¥æ‰¾æ­¥éª¤
  // æ¨¡æ‹ŸäºŒåˆ†æŸ¥æ‰¾çš„æ­¥éª¤æ•° (logâ‚‚100 â‰ˆ 7)
  let simulated_log_steps = 7
  @azimuth.assert_true(simulated_log_steps > 0 && simulated_log_steps < 10)
}

test "edge_case_robustness" {
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µçš„å¥å£®æ€§
  
  // æžå¤§æ•°è¿ç®—
  let very_large = 10000
  @azimuth.assert_eq(20000, @azimuth.add(very_large, very_large))
  @azimuth.assert_eq(100000000, @azimuth.multiply(very_large, very_large))
  
  // æžå°æ•°è¿ç®—
  let very_small = -10000
  @azimuth.assert_eq(-20000, @azimuth.add(very_small, very_small))
  @azimuth.assert_eq(100000000, @azimuth.multiply(very_small, very_small))
  
  // äº¤æ›¿ç¬¦å·è¿ç®—
  let alternating_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(1, -2), 3), -4), 5)
  @azimuth.assert_eq(3, alternating_sum)
  
  // é›¶é™„è¿‘è¿ç®—
  @azimuth.assert_eq(0, @azimuth.add(@azimuth.add(-1, 1), @azimuth.add(-2, 2)))
  @azimuth.assert_eq(0, @azimuth.multiply(@azimuth.add(5, -5), 100))
}

test "business_logic_calculations" {
  // æµ‹è¯•ä¸šåŠ¡é€»è¾‘è®¡ç®—
  
  // è®¡ç®—åˆ©æ¶¦: æ”¶å…¥ - æˆæœ¬
  let revenue = 50000
  let cost = 35000
  let profit = @azimuth.add(revenue, -cost)
  @azimuth.assert_eq(15000, profit)
  
  // è®¡ç®—åˆ©æ¶¦çŽ‡: (åˆ©æ¶¦ / æ”¶å…¥) * 100%
  let profit_rate = @azimuth.multiply(profit, 100) / revenue
  @azimuth.assert_eq(30, profit_rate)
  
  // è®¡ç®—ç¨Žè´¹: åˆ©æ¶¦ * ç¨ŽçŽ‡
  let tax_rate = 20  // 20%
  let tax_amount = @azimuth.multiply(profit, tax_rate) / 100
  @azimuth.assert_eq(3000, tax_amount)
  
  // è®¡ç®—å‡€åˆ©æ¶¦
  let net_profit = @azimuth.add(profit, -tax_amount)
  @azimuth.assert_eq(12000, net_profit)
}