// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¦†ç›–å„ç§è¾¹ç•Œæƒ…å†µå’Œå®é™…åº”ç”¨åœºæ™¯

test "arithmetics_associative_properties" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let a = 15
  let b = 25
  let c = 35
  
  let result1 = @azimuth.add(@azimuth.add(a, b), c)
  let result2 = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let d = -10
  let e = 20
  let f = -5
  
  let result3 = @azimuth.add(@azimuth.add(d, e), f)
  let result4 = @azimuth.add(d, @azimuth.add(e, f))
  @azimuth.assert_eq(result3, result4)
}

test "arithmetics_commutative_properties" {
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹ï¼ša * b = b * a
  let a = 12
  let b = 17
  
  let result1 = @azimuth.multiply(a, b)
  let result2 = @azimuth.multiply(b, a)
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let c = -8
  let d = 13
  
  let result3 = @azimuth.multiply(c, d)
  let result4 = @azimuth.multiply(d, c)
  @azimuth.assert_eq(result3, result4)
}

test "extreme_boundary_conditions" {
  // æµ‹è¯•æç«¯è¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æ¥è¿‘æœ€å¤§å€¼çš„æ•°ç›¸åŠ 
  @azimuth.assert_eq(@azimuth.add(max_val, max_val), max_val)
  @azimuth.assert_eq(@azimuth.add(max_val, max_val - 1), max_val)
  
  // æµ‹è¯•æœ€å°å€¼ä¸æ¥è¿‘æœ€å°å€¼çš„æ•°ç›¸åŠ 
  @azimuth.assert_eq(@azimuth.add(min_val, min_val), min_val)
  @azimuth.assert_eq(@azimuth.add(min_val, min_val + 1), min_val)
  
  // æµ‹è¯•å¤§æ•°ç›¸ä¹˜çš„æº¢å‡ºå¤„ç†
  @azimuth.assert_eq(@azimuth.multiply(46341, 46341), max_val)
  @azimuth.assert_eq(@azimuth.multiply(-46341, 46341), min_val)
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string(@azimuth.greet("\"Quoted\""), "Hello, \"Quoted\"!")
  @azimuth.assert_eq_string(@azimuth.greet("Line1\nLine2"), "Hello, Line1\nLine2!")
  @azimuth.assert_eq_string(@azimuth.greet("Tab\tSeparated"), "Hello, Tab\tSeparated!")
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string(@azimuth.greet("ğŸŒWorld"), "Hello, ğŸŒWorld!")
  @azimuth.assert_eq_string(@azimuth.greet("ä¸­æ–‡æµ‹è¯•"), "Hello, ä¸­æ–‡æµ‹è¯•!")
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string(@azimuth.greet("User123"), "Hello, User123!")
  @azimuth.assert_eq_string(@azimuth.greet("Test_456"), "Hello, Test_456!")
}

test "real_world_financial_calculations" {
  // æµ‹è¯•çœŸå®ä¸–ç•Œé‡‘èè®¡ç®—åœºæ™¯
  // è®¡ç®—æŠ˜æ‰£ä»·æ ¼ï¼šåŸä»· * (1 - æŠ˜æ‰£ç‡)
  let original_price = 1000
  let discount_rate = 20  // 20%æŠ˜æ‰£
  let discount_amount = @azimuth.multiply(original_price, discount_rate)
  let discounted_price = @azimuth.add(original_price, -discount_amount)
  
  @azimuth.assert_eq(discounted_price, 800)  // 1000 - 1000*20/100 = 800
  
  // è®¡ç®—å¤åˆ©ï¼šæœ¬é‡‘ + æœ¬é‡‘ * åˆ©ç‡ * æ—¶é—´
  let principal = 5000
  let interest_rate = 5
  let time_years = 3
  let interest = @azimuth.multiply(principal, @azimuth.multiply(interest_rate, time_years))
  let total_amount = @azimuth.add(principal, interest)
  
  @azimuth.assert_eq(total_amount, 80000)  // 5000 + 5000*5*3 = 80000ï¼Œè¡¨ç¤º8000å…ƒ
}

test "geometric_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—åœºæ™¯
  // è®¡ç®—æ­£æ–¹å½¢é¢ç§¯ï¼šè¾¹é•¿ * è¾¹é•¿
  let side_length = 7
  let square_area = @azimuth.multiply(side_length, side_length)
  @azimuth.assert_eq(square_area, 49)
  
  // è®¡ç®—é•¿æ–¹å½¢å‘¨é•¿ï¼š2 * (é•¿ + å®½)
  let length = 12
  let width = 8
  let perimeter = @azimuth.multiply(2, @azimuth.add(length, width))
  @azimuth.assert_eq(perimeter, 40)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) * é«˜ / 2
  let top_base = 5
  let bottom_base = 9
  let height = 4
  let trapezoid_area = @azimuth.multiply(@azimuth.add(top_base, bottom_base), height) / 2
  @azimuth.assert_eq(trapezoid_area, 28)
}

test "temperature_conversion_calculations" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢è®¡ç®—
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šF = C * 9/5 + 32 â‰ˆ C * 2 + 30
  let celsius_temp = 20
  let fahrenheit_temp = @azimuth.add(@azimuth.multiply(celsius_temp, 2), 30)
  @azimuth.assert_eq(fahrenheit_temp, 70)  // 20 * 2 + 30 = 70
  
  // æµ‹è¯•æç«¯æ¸©åº¦
  let extreme_celsius = -40
  let extreme_fahrenheit = @azimuth.add(@azimuth.multiply(extreme_celsius, 2), 30)
  @azimuth.assert_eq(extreme_fahrenheit, -50)  // -40 * 2 + 30 = -50
  
  // æµ‹è¯•é«˜æ¸©
  let high_celsius = 100
  let high_fahrenheit = @azimuth.add(@azimuth.multiply(high_celsius, 2), 30)
  @azimuth.assert_eq(high_fahrenheit, 230)  // 100 * 2 + 30 = 230
}

test "series_calculations" {
  // æµ‹è¯•æ•°åˆ—è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šn/2 * (2a + (n-1)d)
  // è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ä¸ºï¼ša + (a+d) + (a+2d) + ... + (a+(n-1)d)
  let first_term = 3
  let common_diff = 2
  let num_terms = 5
  
  // æ‰‹åŠ¨è®¡ç®—ï¼š3 + 5 + 7 + 9 + 11 = 35
  let term1 = first_term
  let term2 = @azimuth.add(term1, common_diff)
  let term3 = @azimuth.add(term2, common_diff)
  let term4 = @azimuth.add(term3, common_diff)
  let term5 = @azimuth.add(term4, common_diff)
  
  let series_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(term1, term2), term3), term4), term5)
  @azimuth.assert_eq(series_sum, 35)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼ša + ar + arÂ² + ...
  let geo_first = 2
  let ratio = 3
  let geo_terms = 4
  
  // æ‰‹åŠ¨è®¡ç®—ï¼š2 + 6 + 18 + 54 = 80
  let geo_term1 = geo_first
  let geo_term2 = @azimuth.multiply(geo_term1, ratio)
  let geo_term3 = @azimuth.multiply(geo_term2, ratio)
  let geo_term4 = @azimuth.multiply(geo_term3, ratio)
  
  let geo_sum = @azimuth.add(@azimuth.add(@azimuth.add(geo_term1, geo_term2), geo_term3), geo_term4)
  @azimuth.assert_eq(geo_sum, 80)
}

test "error_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„æ­£ç¡®æ€§
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_true(@azimuth.multiply(4, 6) == 24)
  @azimuth.assert_true(@azimuth.greet("Test") == "Hello, Test!")
  
  @azimuth.assert_false(@azimuth.add(5, 3) == 9)
  @azimuth.assert_false(@azimuth.multiply(4, 6) == 25)
  @azimuth.assert_false(@azimuth.greet("Test") == "Hi, Test!")
  
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶çš„æ­£ç¡®å¤„ç†
  @azimuth.assert_true(@azimuth.add(max_val, 1) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -1) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, -1) == min_val)
}

test "complex_business_logic" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡é€»è¾‘åœºæ™¯
  // åœºæ™¯ï¼šè®¡ç®—è®¢å•æ€»ä»·ï¼ŒåŒ…æ‹¬å•†å“ä»·æ ¼ã€æ•°é‡ã€ç¨è´¹å’ŒæŠ˜æ‰£
  
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 1
  let item3_price = 99
  let item3_quantity = 3
  
  // è®¡ç®—å„é¡¹å•†å“æ€»ä»·
  let item1_total = @azimuth.multiply(item1_price, item1_quantity)
  let item2_total = @azimuth.multiply(item2_price, item2_quantity)
  let item3_total = @azimuth.multiply(item3_price, item3_quantity)
  
  // è®¡ç®—å°è®¡
  let subtotal = @azimuth.add(@azimuth.add(item1_total, item2_total), item3_total)
  
  // è®¡ç®—ç¨è´¹ï¼ˆå‡è®¾10%ï¼‰
  let tax_rate = 10
  let tax_amount = @azimuth.multiply(subtotal, tax_rate) / 100
  
  // è®¡ç®—æŠ˜æ‰£ï¼ˆæ»¡1000å‡100ï¼‰
  let discount_threshold = 1000
  let discount_amount = if (subtotal >= discount_threshold) { 100 } else { 0 }
  
  // è®¡ç®—æ€»ä»·
  let total_with_tax = @azimuth.add(subtotal, tax_amount)
  let final_total = @azimuth.add(total_with_tax, -discount_amount)
  
  // éªŒè¯ç»“æœï¼š
  // å°è®¡ï¼š299*2 + 199*1 + 99*3 = 598 + 199 + 297 = 1094
  // ç¨è´¹ï¼š1094 * 10% = 109.4 â‰ˆ 109ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
  // æŠ˜æ‰£ï¼š100ï¼ˆå› ä¸ºå°è®¡è¶…è¿‡1000ï¼‰
  // æ€»ä»·ï¼š1094 + 109 - 100 = 1103
  @azimuth.assert_eq(1103, final_total)
}