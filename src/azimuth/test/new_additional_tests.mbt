// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•

test "arithmetic_sequence_calculation" {
  // ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š1 + 3 + 5 + ... + 19ï¼ˆå‰10ä¸ªå¥‡æ•°ï¼‰
  // å…¬å¼ï¼šn Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let n = 10
  let first = 1
  let last = 19
  let sum = @azimuth.multiply(n, @azimuth.add(first, last)) / 2
  @azimuth.assert_eq(100, sum)
}

test "geometry_perimeter_calculation" {
  // è®¡ç®—ä¸‰è§’å½¢å‘¨é•¿
  let side_a = 7
  let side_b = 8
  let side_c = 9
  let perimeter = @azimuth.add(@azimuth.add(side_a, side_b), side_c)
  @azimuth.assert_eq(24, perimeter)
}

test "discount_price_calculation" {
  // å•†å“æŠ˜æ‰£è®¡ç®—
  let original_price = 299
  let discount_rate = 20  // 20% æŠ˜æ‰£
  let discounted_price = original_price - @azimuth.multiply(original_price, discount_rate) / 100
  @azimuth.assert_eq(239, discounted_price)
}

test "temperature_conversion_fahrenheit_to_celsius" {
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼šC = (F - 32) Ã— 5/9
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šC = (F - 32) Ã— 5 / 9
  let fahrenheit = 77
  let celsius = @azimuth.multiply(fahrenheit - 32, 5) / 9
  @azimuth.assert_eq(25, celsius)
}

test "compound_interest_simple" {
  // ç®€å•å¤åˆ©è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let principal = 5000
  let rate = 6  // 6%
  let years = 4
  let total = @azimuth.multiply(principal, @azimuth.add(1, @azimuth.multiply(rate, years)))
  @azimuth.assert_eq(125000, total)
}

test "string_greeting_with_special_cases" {
  // æµ‹è¯•å„ç§ç‰¹æ®Šæƒ…å†µçš„å­—ç¬¦ä¸²é—®å€™
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  @azimuth.assert_eq_string("Hello, 12345!", @azimuth.greet("12345"))
  @azimuth.assert_eq_string("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
}

test "area_calculation_composite_shape" {
  // ç»„åˆå›¾å½¢é¢ç§¯è®¡ç®—ï¼šçŸ©å½¢ + åŠåœ†
  // çŸ©å½¢ï¼šé•¿ Ã— å®½
  let rect_length = 10
  let rect_width = 6
  let rect_area = @azimuth.multiply(rect_length, rect_width)
  
  // åŠåœ†é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šÏ€ Ã— rÂ² / 2 â‰ˆ 3 Ã— rÂ² / 2
  let radius = 3
  let circle_area = @azimuth.multiply(3, @azimuth.multiply(radius, radius)) / 2
  
  let total_area = @azimuth.add(rect_area, circle_area)
  @azimuth.assert_eq(73, total_area)  // 60 + 13 = 73
}

test "speed_distance_time_calculation" {
  // é€Ÿåº¦ã€è·ç¦»ã€æ—¶é—´è®¡ç®—
  let distance = 300  // å…¬é‡Œ
  let time_hours = 4
  let time_minutes = 30  // 0.5å°æ—¶
  
  // è®¡ç®—æ€»æ—¶é—´ï¼ˆå°æ—¶ï¼‰
  let total_time = time_hours + time_minutes / 60
  
  // è®¡ç®—é€Ÿåº¦ï¼šè·ç¦» / æ—¶é—´
  let speed = distance / total_time
  @azimuth.assert_eq(66, speed)  // 300 / 4.5 â‰ˆ 66.67ï¼Œæ•´æ•°é™¤æ³•ä¸º66
}

test "array_index_2d_to_1d" {
  // äºŒç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„çš„ç´¢å¼•è®¡ç®—
  let row = 2
  let col = 3
  let width = 5
  let index = @azimuth.add(@azimuth.multiply(row, width), col)
  @azimuth.assert_eq(13, index)
}

test "shopping_cart_with_tax_and_shipping" {
  // è´­ç‰©è½¦è®¡ç®—ï¼ˆå«ç¨è´¹å’Œè¿è´¹ï¼‰
  let item_price = 159
  let quantity = 2
  let tax_rate = 8  // 8%
  let shipping = 15
  
  // å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(item_price, quantity)
  // ç¨è´¹
  let tax = @azimuth.multiply(subtotal, tax_rate) / 100
  // æœ€ç»ˆæ€»ä»·
  let total = @azimuth.add(@azimuth.add(subtotal, tax), shipping)
  
  @azimuth.assert_eq(349, total)  // 318 + 25 + 15 = 358ï¼Œä½†318*8/100=25.44ï¼Œæ•´æ•°é™¤æ³•ä¸º25ï¼Œæ‰€ä»¥318+25+15=358
  // ä¿®æ­£ï¼š159*2=318, 318*8/100=25(æ•´æ•°é™¤æ³•), 318+25+15=358
  @azimuth.assert_eq(358, total)
}