// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¦†ç›–å„ç§è¾¹ç•Œæ¡ä»¶ã€å®é™…åº”ç”¨åœºæ™¯å’Œå¤æ‚è®¡ç®—

test "extreme_boundary_addition" {
  // æµ‹è¯•æå€¼åŠ æ³•è¿ç®—
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æœ€å°å€¼ç›¸åŠ 
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  
  // æµ‹è¯•æœ€å¤§å€¼æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // æµ‹è¯•æœ€å°å€¼æº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
}

test "complex_financial_calculation" {
  // æµ‹è¯•å¤æ‚è´¢åŠ¡è®¡ç®—ï¼šè´·æ¬¾åˆ†æœŸä»˜æ¬¾
  let principal = 100000  // æœ¬é‡‘
  let annual_rate = 6     // å¹´åˆ©ç‡6%
  let years = 30          // è´·æ¬¾å¹´é™
  let months = years * 12 // æ€»æœˆæ•°
  
  // ç®€åŒ–çš„æœˆä¾›è®¡ç®—ï¼šæœ¬é‡‘ + æ€»åˆ©æ¯
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years)) / 100
  let total_payment = @azimuth.add(principal, total_interest)
  let monthly_payment = total_payment / months
  
  @azimuth.assert_eq(555, monthly_payment)  // ç®€åŒ–è®¡ç®—ç»“æœ
}

test "geometry_volume_calculations" {
  // æµ‹è¯•å‡ ä½•ä½“ç§¯è®¡ç®—
  let radius = 5
  
  // çƒä½“ä½“ç§¯ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼š4/3 * Ï€ * rÂ³ â‰ˆ 4 * rÂ³
  let sphere_volume = @azimuth.multiply(4, @azimuth.multiply(radius, @azimuth.multiply(radius, radius)))
  @azimuth.assert_eq(500, sphere_volume)
  
  // åœ†æŸ±ä½“ä½“ç§¯ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šÏ€ * rÂ² * h â‰ˆ 3 * rÂ² * h
  let height = 10
  let cylinder_volume = @azimuth.multiply(3, @azimuth.multiply(@azimuth.multiply(radius, radius), height))
  @azimuth.assert_eq(750, cylinder_volume)
  
  // åœ†é”¥ä½“ä½“ç§¯ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼š1/3 * Ï€ * rÂ² * h â‰ˆ rÂ² * h
  let cone_volume = @azimuth.multiply(@azimuth.multiply(radius, radius), height)
  @azimuth.assert_eq(250, cone_volume)
}

test "advanced_string_processing" {
  // æµ‹è¯•é«˜çº§å­—ç¬¦ä¸²å¤„ç†
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  @azimuth.assert_eq_string("Hello, !@#$%^&*()_+-=[]{}|;':\",./<>?!", @azimuth.greet(special_chars))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  let unicode_text = "Helloä¸–ç•ŒğŸŒ"
  @azimuth.assert_eq_string("Hello, Helloä¸–ç•ŒğŸŒ!", @azimuth.greet(unicode_text))
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  let alphanumeric = "User2023ProjectAlpha"
  @azimuth.assert_eq_string("Hello, User2023ProjectAlpha!", @azimuth.greet(alphanumeric))
}

test "physics_motion_calculations" {
  // æµ‹è¯•ç‰©ç†è¿åŠ¨è®¡ç®—
  let initial_velocity = 10  // åˆå§‹é€Ÿåº¦ m/s
  let acceleration = 2       // åŠ é€Ÿåº¦ m/sÂ²
  let time = 5               // æ—¶é—´ s
  
  // è®¡ç®—æœ€ç»ˆé€Ÿåº¦ï¼šv = u + at
  let final_velocity = @azimuth.add(initial_velocity, @azimuth.multiply(acceleration, time))
  @azimuth.assert_eq(20, final_velocity)
  
  // è®¡ç®—ä½ç§»ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šs = ut + 0.5atÂ² â‰ˆ ut + atÂ²/2
  let displacement = @azimuth.add(@azimuth.multiply(initial_velocity, time), 
                                 @azimuth.multiply(@azimuth.multiply(acceleration, time), time) / 2)
  @azimuth.assert_eq(75, displacement)
  
  // è®¡ç®—åŠ¨èƒ½ï¼ˆç®€åŒ–å…¬å¼ï¼‰ï¼šKE = 0.5 * m * vÂ² â‰ˆ m * vÂ²
  let mass = 10
  let kinetic_energy = @azimuth.multiply(mass, @azimuth.multiply(final_velocity, final_velocity))
  @azimuth.assert_eq(4000, kinetic_energy)
}

test "statistical_analysis" {
  // æµ‹è¯•ç»Ÿè®¡åˆ†æè®¡ç®—
  // æ•°æ®é›†ï¼š10, 20, 30, 40, 50
  let data1 = 10
  let data2 = 20
  let data3 = 30
  let data4 = 40
  let data5 = 50
  
  let sum1 = @azimuth.add(data1, data2)
  let sum2 = @azimuth.add(sum1, data3)
  let sum3 = @azimuth.add(sum2, data4)
  let data_sum = @azimuth.add(sum3, data5)
  
  @azimuth.assert_eq(150, data_sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let data_count = 5
  let mean = data_sum / data_count
  @azimuth.assert_eq(30, mean)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ï¼‰ï¼šå¹³æ–¹å’Œçš„å¹³å‡å€¼
  let diff1 = data1 - mean
  let diff2 = data2 - mean
  let diff3 = data3 - mean
  let diff4 = data4 - mean
  let diff5 = data5 - mean
  
  let sq1 = @azimuth.multiply(diff1, diff1)
  let sq2 = @azimuth.multiply(diff2, diff2)
  let sq3 = @azimuth.multiply(diff3, diff3)
  let sq4 = @azimuth.multiply(diff4, diff4)
  let sq5 = @azimuth.multiply(diff5, diff5)
  
  let sq_sum1 = @azimuth.add(sq1, sq2)
  let sq_sum2 = @azimuth.add(sq_sum1, sq3)
  let sq_sum3 = @azimuth.add(sq_sum2, sq4)
  let variance_sum = @azimuth.add(sq_sum3, sq5)
  
  let variance = variance_sum / data_count
  @azimuth.assert_eq(200, variance)
}

test "cryptography_simulation" {
  // æµ‹è¯•å¯†ç å­¦æ¨¡æ‹Ÿï¼ˆç®€åŒ–ç‰ˆï¼‰
  let plaintext = 1234
  let key = 5678
  
  // ç®€å•çš„åŠ å¯†æ“ä½œï¼šå¼‚æˆ–çš„ç®€åŒ–ç‰ˆæœ¬ï¼ˆä½¿ç”¨åŠ å‡æ³•æ¨¡æ‹Ÿï¼‰
  let encrypted = @azimuth.add(plaintext, key)
  @azimuth.assert_eq(6912, encrypted)
  
  // è§£å¯†æ“ä½œ
  let decrypted = @azimuth.add(encrypted, -key)
  @azimuth.assert_eq(plaintext, decrypted)
  
  // æµ‹è¯•å¯†é’¥å¼ºåº¦ï¼ˆç®€åŒ–ï¼šå¯†é’¥çš„å¹³æ–¹ï¼‰
  let key_strength = @azimuth.multiply(key, key)
  @azimuth.assert_eq(32239684, key_strength)
}

test "game_mechanics_calculation" {
  // æµ‹è¯•æ¸¸æˆæœºåˆ¶è®¡ç®—
  let base_damage = 100
  let weapon_multiplier = 2
  let critical_multiplier = 2
  
  // è®¡ç®—åŸºç¡€ä¼¤å®³
  let normal_damage = @azimuth.multiply(base_damage, weapon_multiplier)
  @azimuth.assert_eq(200, normal_damage)
  
  // è®¡ç®—æš´å‡»ä¼¤å®³
  let critical_damage = @azimuth.multiply(normal_damage, critical_multiplier)
  @azimuth.assert_eq(400, critical_damage)
  
  // è®¡ç®—æœŸæœ›ä¼¤å®³ï¼ˆç®€åŒ–ï¼‰ï¼šæ™®é€šä¼¤å®³ * 80% + æš´å‡»ä¼¤å®³ * 20%
  let normal_part = @azimuth.multiply(normal_damage, 80)
  let critical_part = @azimuth.multiply(critical_damage, 20)
  let total_parts = @azimuth.add(normal_part, critical_part)
  let expected_damage = total_parts / 100
  @azimuth.assert_eq(240, expected_damage)
}

test "data_structure_operations" {
  // æµ‹è¯•æ•°æ®ç»“æ„æ“ä½œï¼ˆæ¨¡æ‹Ÿï¼‰
  let array_size = 10
  let element_size = 4
  
  // è®¡ç®—æ•°ç»„æ€»å¤§å°
  let total_size = @azimuth.multiply(array_size, element_size)
  @azimuth.assert_eq(40, total_size)
  
  // è®¡ç®—äºŒç»´æ•°ç»„ç´¢å¼•ï¼ˆè¡Œä¸»åºï¼‰
  let row = 3
  let col = 2
  let width = 5
  let row_offset = @azimuth.multiply(row, width)
  let index = @azimuth.add(row_offset, col)
  @azimuth.assert_eq(17, index)
  
  // è®¡ç®—å“ˆå¸Œè¡¨å®¹é‡ï¼ˆç®€åŒ–ï¼šä¸‹ä¸€ä¸ª2çš„å¹‚ï¼‰
  let hash_capacity = 128  // ç®€åŒ–ä¸ºå›ºå®šçš„ä¸‹ä¸€ä¸ª2çš„å¹‚
  @azimuth.assert_eq(128, hash_capacity)
}

test "network_protocol_simulation" {
  // æµ‹è¯•ç½‘ç»œåè®®æ¨¡æ‹Ÿ
  let packet_size = 1024
  let header_size = 20
  let payload_size = @azimuth.add(packet_size, -header_size)
  @azimuth.assert_eq(1004, payload_size)
  
  // è®¡ç®—å¸¦å®½åˆ©ç”¨ç‡
  let transmission_time = @azimuth.multiply(packet_size, 8)  // è½¬æ¢ä¸ºä½
  @azimuth.assert_eq(8192, transmission_time)
  
  // è®¡ç®—å»¶è¿Ÿï¼ˆç®€åŒ–ï¼‰
  let propagation_delay = 50  // 50ms
  let transmission_delay = 10  // 10ms
  let total_delay = @azimuth.add(propagation_delay, transmission_delay)
  @azimuth.assert_eq(60, total_delay)
}