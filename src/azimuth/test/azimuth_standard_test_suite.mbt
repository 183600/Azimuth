// Azimuth é¡¹ç›®æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// åŒ…å«10ä¸ªé«˜è´¨é‡æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ ¸å¿ƒåŠŸèƒ½å’Œå®é™…åº”ç”¨åœºæ™¯

test "add_function_commutativity" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹
  let a = 42
  let b = 17
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  @azimuth.assert_eq(@azimuth.add(-5, 10), @azimuth.add(10, -5))
  @azimuth.assert_eq(@azimuth.add(0, 100), @azimuth.add(100, 0))
}

test "multiply_function_distributive" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let a = 3
  let b = 4
  let c = 5
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left_side, right_side)
}

test "divide_with_ceil_precision_test" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„ç²¾åº¦
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(3, 2))  // 1.5 -> 2
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(11, 3)) // 3.666... -> 4
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 100)) // 0.01 -> 1
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3)) // -3.333... -> -3
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(5, 0)) // é™¤æ•°ä¸º0çš„å®‰å…¨å¤„ç†
}

test "greet_function_unicode_support" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„Unicodeæ”¯æŒ
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
  @azimuth.assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", @azimuth.greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  @azimuth.assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", @azimuth.greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—ï¼šè´·æ¬¾åˆ©æ¯è®¡ç®—
  let principal = 10000
  let annual_rate = 5  // 5%
  let _years = 3
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let year1_interest = @azimuth.divide_with_ceil(@azimuth.multiply(principal, annual_rate), 100)
  let year2_interest = @azimuth.divide_with_ceil(@azimuth.multiply(@azimuth.add(principal, year1_interest), annual_rate), 100)
  let year3_interest = @azimuth.divide_with_ceil(@azimuth.multiply(@azimuth.add(@azimuth.add(principal, year1_interest), year2_interest), annual_rate), 100)
  
  let total_amount = @azimuth.add(@azimuth.add(@azimuth.add(principal, year1_interest), year2_interest), year3_interest)
  @azimuth.assert_eq(11576, total_amount)
}

test "inventory_management_system" {
  // åº“å­˜ç®¡ç†ç³»ç»Ÿæµ‹è¯•
  let initial_stock = 500
  let daily_sales = 25
  let restock_amount = 200
  let days = 7
  
  // è®¡ç®—ä¸€å‘¨åçš„åº“å­˜
  let total_sold = @azimuth.multiply(daily_sales, days)
  let stock_before_restock = @azimuth.add(initial_stock, -total_sold)
  let final_stock = @azimuth.add(stock_before_restock, restock_amount)
  
  @azimuth.assert_eq(525, final_stock)
}

test "project_resource_allocation" {
  // é¡¹ç›®èµ„æºåˆ†é…æµ‹è¯•
  let total_budget = 50000
  let team_members = 8
  let project_duration_days = 30
  
  // è®¡ç®—æ¯äººæ¯å¤©çš„é¢„ç®—
  let daily_budget = @azimuth.divide_with_ceil(total_budget, project_duration_days)
  let per_person_daily = @azimuth.divide_with_ceil(daily_budget, team_members)
  
  // éªŒè¯æ€»é¢„ç®—åˆ†é…
  let allocated_budget = @azimuth.multiply(@azimuth.multiply(per_person_daily, team_members), project_duration_days)
  @azimuth.assert_eq(50480, allocated_budget)
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—ï¼šç­‰å·®æ•°åˆ—æ±‚å’Œ
  let first_term = 5
  let common_difference = 3
  let terms_count = 10
  
  // ä½¿ç”¨å…¬å¼ S = n/2 * (2a + (n-1)d)
  let sum = @azimuth.divide_with_ceil(
    @azimuth.multiply(terms_count, @azimuth.add(@azimuth.multiply(2, first_term), @azimuth.multiply(terms_count - 1, common_difference))),
    2
  )
  
  @azimuth.assert_eq(185, sum)
}

test "shipping_cost_calculator" {
  // è¿è´¹è®¡ç®—å™¨æµ‹è¯•
  let base_rate = 10
  let weight_kg = 15
  let distance_km = 250
  let weight_threshold = 10
  
  // è®¡ç®—åŸºç¡€è¿è´¹
  let weight_surcharge = if weight_kg > weight_threshold {
    @azimuth.multiply(weight_kg - weight_threshold, 2)
  } else {
    0
  }
  
  let distance_cost = @azimuth.divide_with_ceil(@azimuth.multiply(distance_km, base_rate), 100)
  let total_shipping = @azimuth.add(@azimuth.add(base_rate, weight_surcharge), distance_cost)
  
  @azimuth.assert_eq(50, total_shipping)
}

test "data_processing_pipeline" {
  // æ•°æ®å¤„ç†ç®¡é“æµ‹è¯•
  let input_data = 1000
  let _processing_steps = 4
  let error_rate = 2  // 2%
  
  // æ¨¡æ‹Ÿæ•°æ®å¤„ç†æ­¥éª¤
  let step1_result = @azimuth.add(input_data, @azimuth.divide_with_ceil(@azimuth.multiply(input_data, 10), 100))
  let step2_result = @azimuth.add(step1_result, @azimuth.divide_with_ceil(@azimuth.multiply(step1_result, 15), 100))
  let step3_result = @azimuth.add(step2_result, @azimuth.divide_with_ceil(@azimuth.multiply(step2_result, 20), 100))
  let step4_result = @azimuth.add(step3_result, @azimuth.divide_with_ceil(@azimuth.multiply(step3_result, 25), 100))
  
  // è®¡ç®—é”™è¯¯æŸå¤±
  let error_loss = @azimuth.divide_with_ceil(@azimuth.multiply(step4_result, error_rate), 100)
  let final_result = @azimuth.add(step4_result, -error_loss)
  
  @azimuth.assert_eq(1983, final_result)
}