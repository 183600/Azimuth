// Azimuth é¡¹ç›®å¢å¼ºæµ‹è¯•å¥—ä»¶
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæä¾›é«˜è´¨é‡çš„ç»¼åˆæµ‹è¯•è¦†ç›–

test "add_function_comprehensive" {
  // å…¨é¢æµ‹è¯• add å‡½æ•°çš„å„ç§æƒ…å†µ
  // åŸºæœ¬åŠ æ³•
  @azimuth.assert_eq(10, @azimuth.add(3, 7))
  
  // ä¸0ç›¸åŠ 
  @azimuth.assert_eq(42, @azimuth.add(42, 0))
  @azimuth.assert_eq(42, @azimuth.add(0, 42))
  
  // è´Ÿæ•°åŠ æ³•
  @azimuth.assert_eq(0, @azimuth.add(5, -5))
  @azimuth.assert_eq(-10, @azimuth.add(-3, -7))
  
  // æ··åˆç¬¦å·åŠ æ³•
  @azimuth.assert_eq(3, @azimuth.add(10, -7))
  @azimuth.assert_eq(-3, @azimuth.add(-10, 7))
}

test "multiply_function_comprehensive" {
  // å…¨é¢æµ‹è¯• multiply å‡½æ•°çš„å„ç§æƒ…å†µ
  // åŸºæœ¬ä¹˜æ³•
  @azimuth.assert_eq(21, @azimuth.multiply(3, 7))
  
  // ä¸0å’Œ1ç›¸ä¹˜
  @azimuth.assert_eq(0, @azimuth.multiply(42, 0))
  @azimuth.assert_eq(42, @azimuth.multiply(42, 1))
  
  // è´Ÿæ•°ä¹˜æ³•
  @azimuth.assert_eq(21, @azimuth.multiply(-3, -7))
  @azimuth.assert_eq(-21, @azimuth.multiply(3, -7))
  @azimuth.assert_eq(-21, @azimuth.multiply(-3, 7))
  
  // å¤§æ•°ä¹˜æ³•
  @azimuth.assert_eq(1000000, @azimuth.multiply(1000, 1000))
}

test "greet_function_comprehensive" {
  // å…¨é¢æµ‹è¯• greet å‡½æ•°çš„å„ç§æƒ…å†µ
  // åŸºæœ¬é—®å€™
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  
  // ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // å•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // ç‰¹æ®Šå­—ç¬¦
  @azimuth.assert_eq_string("Hello, @#$%!", @azimuth.greet("@#$%"))
  
  // Unicodeå­—ç¬¦
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
}

test "mathematical_properties_validation" {
  // éªŒè¯åŸºæœ¬æ•°å­¦æ€§è´¨
  let a = 15
  let b = 7
  let c = 3
  
  // åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // åŠ æ³•ç»“åˆå¾‹
  @azimuth.assert_eq(
    @azimuth.add(@azimuth.add(a, b), c),
    @azimuth.add(a, @azimuth.add(b, c))
  )
  
  // ä¹˜æ³•ç»“åˆå¾‹
  @azimuth.assert_eq(
    @azimuth.multiply(@azimuth.multiply(a, b), c),
    @azimuth.multiply(a, @azimuth.multiply(b, c))
  )
  
  // åˆ†é…å¾‹
  @azimuth.assert_eq(
    @azimuth.multiply(a, @azimuth.add(b, c)),
    @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  )
}

test "boundary_values_extreme" {
  // æµ‹è¯•æç«¯è¾¹ç•Œå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼åŠ æ³•æµ‹è¯•
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1000000))
  
  // æœ€å°å€¼åŠ æ³•æµ‹è¯•
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1000000))
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼ç›¸åŠ 
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  
  // è¾¹ç•Œå€¼ä¹˜æ³•æµ‹è¯•
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "real_world_financial_calculations" {
  // å®é™…é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000  // æœ¬é‡‘
  let rate = 5          // å¹´åˆ©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let years = 3         // å¹´æ•°
  
  // ç®€å•åˆ©æ¯è®¡ç®—
  let interest = @azimuth.multiply(principal, @azimuth.multiply(rate, years))
  let total = @azimuth.add(principal, interest)
  @azimuth.assert_eq(160000, total)  // 10000 + 10000*5*3 = 160000
  
  // å¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let compound_total = @azimuth.multiply(principal, @azimuth.add(1, @azimuth.multiply(rate, years)))
  @azimuth.assert_eq(160000, compound_total)
  
  // è´·æ¬¾åˆ†æœŸè®¡ç®—ï¼ˆç®€åŒ–ï¼‰
  let loan_amount = 50000
  let monthly_payment = 2500
  let months = @azimuth.divide_with_ceil(loan_amount, monthly_payment)
  @azimuth.assert_eq(20, months)
}

test "geometry_and_physics_calculations" {
  // å‡ ä½•å’Œç‰©ç†è®¡ç®—
  // çŸ©å½¢è®¡ç®—
  let length = 12
  let width = 8
  let rectangle_area = @azimuth.multiply(length, width)
  let rectangle_perimeter = @azimuth.multiply(2, @azimuth.add(length, width))
  @azimuth.assert_eq(96, rectangle_area)
  @azimuth.assert_eq(40, rectangle_perimeter)
  
  // åœ†å½¢è®¡ç®—ï¼ˆç®€åŒ–ï¼šÏ€ â‰ˆ 3ï¼‰
  let radius = 5
  let circle_area = @azimuth.multiply(3, @azimuth.multiply(radius, radius))
  let circle_circumference = @azimuth.multiply(@azimuth.multiply(2, 3), radius)
  @azimuth.assert_eq(75, circle_area)
  @azimuth.assert_eq(30, circle_circumference)
  
  // é€Ÿåº¦è®¡ç®—ï¼ˆç®€åŒ–ï¼‰
  let distance = 120  // å…¬é‡Œ
  let time = 2        // å°æ—¶
  let speed = @azimuth.divide_with_ceil(distance, time)
  @azimuth.assert_eq(60, speed)
}

test "complex_business_logic" {
  // å¤æ‚ä¸šåŠ¡é€»è¾‘æµ‹è¯•
  // è´­ç‰©è½¦è®¡ç®—
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let discount_threshold = 1000
  let discount_rate = 10
  let shipping_fee = 20
  let tax_rate = 8
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.add(
    @azimuth.multiply(item1_price, item1_quantity),
    @azimuth.multiply(item2_price, item2_quantity)
  )
  
  // è®¡ç®—æŠ˜æ‰£
  let discount = if (subtotal > discount_threshold) {
    @azimuth.multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—æœ€ç»ˆä»·æ ¼
  let after_discount = @azimuth.add(subtotal, -discount)
  let tax = @azimuth.multiply(after_discount, tax_rate) / 100
  let final_total = @azimuth.add(@azimuth.add(after_discount, tax), shipping_fee)
  
  @azimuth.assert_eq(1294, subtotal)
  @azimuth.assert_eq(129, discount)
  @azimuth.assert_eq(1165, after_discount)
  @azimuth.assert_eq(93, tax)
  @azimuth.assert_eq(1278, final_total)
}

test "error_handling_and_edge_cases" {
  // é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  
  // æµ‹è¯•ç‰¹æ®Šä¹˜æ³•æƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "\"Hello\"\n\tWorld"
  @azimuth.assert_eq_string("Hello, \"Hello\"\n\tWorld!", @azimuth.greet(special_chars))
}

test "statistical_and_analytical_calculations" {
  // ç»Ÿè®¡åˆ†æè®¡ç®—
  // æ•°æ®é›†
  let data1 = 85
  let data2 = 90
  let data3 = 78
  let data4 = 92
  let data5 = 80
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(
    @azimuth.add(@azimuth.add(@azimuth.add(data1, data2), data3), data4),
    data5
  )
  @azimuth.assert_eq(425, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let mean = sum / 5
  @azimuth.assert_eq(85, mean)
  
  // è®¡ç®—æå·®
  let max_val = 92
  let min_val = 78
  let range = @azimuth.add(max_val, -min_val)
  @azimuth.assert_eq(14, range)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ï¼‰
  let diff1 = @azimuth.add(data1, -mean)
  let diff2 = @azimuth.add(data2, -mean)
  let diff3 = @azimuth.add(data3, -mean)
  let diff4 = @azimuth.add(data4, -mean)
  let diff5 = @azimuth.add(data5, -mean)
  
  let variance = @azimuth.add(
    @azimuth.add(@azimuth.add(
      @azimuth.multiply(diff1, diff1),
      @azimuth.multiply(diff2, diff2)
    ), @azimuth.add(
      @azimuth.multiply(diff3, diff3),
      @azimuth.multiply(diff4, diff4)
    )),
    @azimuth.multiply(diff5, diff5)
  ) / 5
  
  @azimuth.assert_eq(26, variance)
}
