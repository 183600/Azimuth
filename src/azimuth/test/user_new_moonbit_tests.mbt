// ç”¨æˆ·è‡ªå®šä¹‰çš„æ–° MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "add_sequence_operations" {
  // æµ‹è¯•åºåˆ—åŠ æ³•è¿ç®—
  let result1 = @azimuth.add(@azimuth.add(1, 2), @azimuth.add(3, 4))
  @azimuth.assert_eq(10, result1)
  
  let result2 = @azimuth.add(@azimuth.add(100, 200), @azimuth.add(300, 400))
  @azimuth.assert_eq(1000, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„åºåˆ—åŠ æ³•
  let result3 = @azimuth.add(@azimuth.add(-10, 20), @azimuth.add(30, -40))
  @azimuth.assert_eq(0, result3)
}

test "multiply_sequence_operations" {
  // æµ‹è¯•åºåˆ—ä¹˜æ³•è¿ç®—
  let result1 = @azimuth.multiply(@azimuth.multiply(2, 3), @azimuth.multiply(4, 5))
  @azimuth.assert_eq(120, result1)
  
  // æµ‹è¯•åŒ…å«é›¶çš„åºåˆ—ä¹˜æ³•
  let result2 = @azimuth.multiply(@azimuth.multiply(10, 0), @azimuth.multiply(5, 6))
  @azimuth.assert_eq(0, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„åºåˆ—ä¹˜æ³•
  let result3 = @azimuth.multiply(@azimuth.multiply(-2, 3), @azimuth.multiply(4, -5))
  @azimuth.assert_eq(120, result3)
}

test "mixed_arithmetic_operations" {
  // æµ‹è¯•æ··åˆç®—æœ¯è¿ç®—ï¼š(a + b) * c - d
  let a = 15
  let b = 25
  let c = 4
  let d = 20
  
  let sum = @azimuth.add(a, b)  // 40
  let product = @azimuth.multiply(sum, c)  // 160
  let result = @azimuth.add(product, -d)  // 140
  
  @azimuth.assert_eq(140, result)
}

test "string_formatting_variations" {
  // æµ‹è¯•å­—ç¬¦ä¸²æ ¼å¼åŒ–çš„å„ç§æƒ…å†µ
  @azimuth.assert_eq_string("Hello, John!", @azimuth.greet("John"))
  @azimuth.assert_eq_string("Hello, ç”¨æˆ·123!", @azimuth.greet("ç”¨æˆ·123"))
  @azimuth.assert_eq_string("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  @azimuth.assert_eq_string("Hello,   spaced   !", @azimuth.greet("  spaced  "))
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
}

test "boundary_value_combinations" {
  // æµ‹è¯•è¾¹ç•Œå€¼ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æ™®é€šå€¼çš„è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  
  // æœ€å°å€¼ä¸æ™®é€šå€¼çš„è¿ç®—
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 3))
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼š1 + 3 + 5 + ... + 19ï¼ˆå‰10ä¸ªå¥‡æ•°ï¼‰
  // ä½¿ç”¨å…¬å¼ï¼šn Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let n = 10
  let first = 1
  let last = 19
  
  let sum = @azimuth.multiply(n, @azimuth.add(first, last)) / 2
  @azimuth.assert_eq(100, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—çš„å’Œï¼š2 + 4 + 8 + 16ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
  let geo_sum = @azimuth.add(@azimuth.add(2, 4), @azimuth.add(8, 16))
  @azimuth.assert_eq(30, geo_sum)
}

test "practical_business_calculations" {
  // æµ‹è¯•å®é™…ä¸šåŠ¡è®¡ç®—åœºæ™¯
  // è®¡ç®—è®¢å•æ€»ä»·
  let unit_price = 199
  let quantity = 3
  let discount = 50
  let tax_rate = 8  // 8%
  let shipping = 15
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(unit_price, quantity)
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted = @azimuth.add(subtotal, -discount)
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(discounted, tax_rate) / 100
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = @azimuth.add(@azimuth.add(discounted, tax), shipping)
  
  @azimuth.assert_eq(606, total)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // è®¡ç®—ä¸€ç»„æ•°æ®çš„æ€»å’Œã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼
  let values = [12, 18, 24, 30, 36]
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(12, 18), 24), 30), 36)
  @azimuth.assert_eq(120, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  @azimuth.assert_eq(24, average)
  
  // éªŒè¯ä¸­ä½æ•°ï¼ˆå·²æ’åºæ•°ç»„ï¼‰
  @azimuth.assert_eq(24, 24)
}

test "time_based_calculations" {
  // æµ‹è¯•åŸºäºæ—¶é—´çš„è®¡ç®—
  // è®¡ç®—æ—¶é—´å·®å’ŒæŒç»­æ—¶é—´
  let start_hour = 9
  let start_minute = 30
  let end_hour = 17
  let end_minute = 45
  
  // è½¬æ¢ä¸ºåˆ†é’Ÿ
  let start_total = @azimuth.add(@azimuth.multiply(start_hour, 60), start_minute)
  let end_total = @azimuth.add(@azimuth.multiply(end_hour, 60), end_minute)
  
  // è®¡ç®—æ—¶é—´å·®ï¼ˆåˆ†é’Ÿï¼‰
  let duration = @azimuth.add(end_total, -start_total)
  @azimuth.assert_eq(495, duration)
  
  // è½¬æ¢ä¸ºå°æ—¶å’Œåˆ†é’Ÿ
  let hours = duration / 60
  let minutes = duration % 60
  @azimuth.assert_eq(8, hours)
  @azimuth.assert_eq(15, minutes)
}

test "algorithmic_pattern_testing" {
  // æµ‹è¯•ç®—æ³•æ¨¡å¼
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬né¡¹ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let n = 6
  // F(6) = F(5) + F(4) = 5 + 3 = 8
  let fib_1 = 1
  let fib_2 = 1
  let fib_3 = @azimuth.add(fib_1, fib_2)  // 2
  let fib_4 = @azimuth.add(fib_2, fib_3)  // 3
  let fib_5 = @azimuth.add(fib_3, fib_4)  // 5
  let fib_6 = @azimuth.add(fib_4, fib_5)  // 8
  
  @azimuth.assert_eq(8, fib_6)
  
  // è®¡ç®—é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let factorial_5 = @azimuth.multiply(5, @azimuth.multiply(4, @azimuth.multiply(3, @azimuth.multiply(2, 1))))
  @azimuth.assert_eq(120, factorial_5)
}