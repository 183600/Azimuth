// æ–°çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// å¯¼å…¥ azimuth åŒ…ä¸­çš„å‡½æ•°
use azimuth

test "add_function_basic_arithmetic" {
  // æµ‹è¯•åŸºæœ¬ç®—æœ¯è¿ç®—
  assert_eq(10, azimuth::add(3, 7))
  assert_eq(0, azimuth::add(-5, 5))
  assert_eq(-8, azimuth::add(-3, -5))
}

test "add_function_edge_cases" {
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºå¤„ç†
  assert_eq(max_val, azimuth::add(max_val, 1))
  assert_eq(min_val, azimuth::add(min_val, -1))
  assert_eq(-1, azimuth::add(max_val, min_val))
}

test "multiply_function_properties" {
  // æµ‹è¯•ä¹˜æ³•æ€§è´¨
  // äº¤æ¢å¾‹ï¼ša * b = b * a
  assert_eq(20, azimuth::multiply(4, 5))
  assert_eq(20, azimuth::multiply(5, 4))
  
  // ç»“åˆå¾‹æµ‹è¯•ï¼š(a * b) * c = a * (b * c)
  let a = 2, b = 3, c = 4
  assert_eq(azimuth::multiply(azimuth::multiply(a, b), c), 
            azimuth::multiply(a, azimuth::multiply(b, c)))
}

test "multiply_function_special_cases" {
  // æµ‹è¯•ç‰¹æ®Šæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // é›¶ä¹˜æ³•æ€§è´¨
  assert_eq(0, azimuth::multiply(0, 12345))
  assert_eq(0, azimuth::multiply(-6789, 0))
  
  // å•ä½å…ƒæ€§è´¨
  assert_eq(12345, azimuth::multiply(1, 12345))
  assert_eq(-6789, azimuth::multiply(-6789, 1))
  
  // è´Ÿä¸€ä¹˜æ³•
  assert_eq(-12345, azimuth::multiply(-1, 12345))
  assert_eq(6789, azimuth::multiply(-1, -6789))
  
  // æœ€å°å€¼ç‰¹æ®Šæƒ…å†µ
  assert_eq(min_val, azimuth::multiply(min_val, -1))
}

test "greet_function_various_inputs" {
  // æµ‹è¯•å„ç§è¾“å…¥æƒ…å†µ
  assert_eq_string("Hello, MoonBit!", azimuth::greet("MoonBit"))
  assert_eq_string("Hello, !", azimuth::greet(""))
  assert_eq_string("Hello, 123!", azimuth::greet("123"))
  assert_eq_string("Hello,   spaced   !", azimuth::greet("  spaced  "))
}

test "greet_function_unicode_support" {
  // æµ‹è¯•Unicodeæ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", azimuth::greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", azimuth::greet("ğŸš€"))
  assert_eq_string("Hello, CafÃ©!", azimuth::greet("CafÃ©"))
  assert_eq_string("Hello, Ã‘oÃ±o!", azimuth::greet("Ã‘oÃ±o"))
}

test "complex_calculation_scenarios" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  // åœ†çš„å‘¨é•¿è¿‘ä¼¼è®¡ç®—ï¼š2 * Ï€ * rï¼Œä½¿ç”¨Ï€â‰ˆ3
  let radius = 5
  let circumference = azimuth::multiply(2, azimuth::multiply(3, radius))
  assert_eq(30, circumference)
  
  // ç®€å•çš„åˆ©æ¶¦è®¡ç®—ï¼šæ”¶å…¥ - æˆæœ¬
  let revenue = 1000
  let cost = 600
  let profit = azimuth::add(revenue, -cost)
  assert_eq(400, profit)
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  // ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šn * (a1 + an) / 2
  let n = 10
  let a1 = 1
  let an = 10
  let sum = azimuth::multiply(n, azimuth::add(a1, an)) / 2
  assert_eq(55, sum)  // 10 * (1 + 10) / 2 = 55
  
  // ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ï¼‰ï¼ša1 * (1 - r^n) / (1 - r)ï¼Œè¿™é‡Œç”¨ç®€å•å€¼
  let a1_geo = 2
  let r = 3
  let n_geo = 4
  // æ‰‹åŠ¨è®¡ç®—ï¼š2 + 6 + 18 + 54 = 80
  let term1 = a1_geo
  let term2 = azimuth::multiply(term1, r)
  let term3 = azimuth::multiply(term2, r)
  let term4 = azimuth::multiply(term3, r)
  let geo_sum = azimuth::add(azimuth::add(azimuth::add(term1, term2), term3), term4)
  assert_eq(80, geo_sum)
}

test "real_world_application_scenarios" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯
  // è´­ç‰©æŠ˜æ‰£è®¡ç®—ï¼šåŸä»· * (1 - æŠ˜æ‰£ç‡)
  let original_price = 200
  let discount_rate = 20  // 20%æŠ˜æ‰£
  let final_price = azimuth::multiply(original_price, azimuth::add(100, -discount_rate)) / 100
  assert_eq(160, final_price)  // 200 * 0.8 = 160
  
  // ç¨æ”¶è®¡ç®—ï¼šä»·æ ¼ * ç¨ç‡
  let price = 500
  let tax_rate = 8  // 8%ç¨ç‡
  let tax = azimuth::multiply(price, tax_rate) / 100
  let total_price = azimuth::add(price, tax)
  assert_eq(540, total_price)  // 500 + 500*0.08 = 540
}

test "performance_and_stress_tests" {
  // æµ‹è¯•æ€§èƒ½å’Œå‹åŠ›åœºæ™¯
  // å¤§æ•°è¿ç®—
  let large_num1 = 1000000
  let large_num2 = 2000000
  assert_eq(3000000, azimuth::add(large_num1, large_num2))
  assert_eq(2000000000000, azimuth::multiply(large_num1, large_num2))
  
  // è¿ç»­è¿ç®—æµ‹è¯•
  let result = azimuth::add(
    azimuth::multiply(10, 20),
    azimuth::multiply(30, 40)
  )
  assert_eq(1400, result)  // 200 + 1200 = 1400
  
  // å­—ç¬¦ä¸²å¤„ç†æ€§èƒ½
  let long_string = "ThisIsAVeryLongStringForTestingPurposes"
  let greeting_result = azimuth::greet(long_string)
  assert_eq_string("Hello, " + long_string + "!", greeting_result)
}