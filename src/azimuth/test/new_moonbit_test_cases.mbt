// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "integer_overflow_protection" {
  // æµ‹è¯•æ•´æ•°æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æ•°æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // æµ‹è¯•è´Ÿæ•°æº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "string_unicode_handling" {
  // æµ‹è¯•å­—ç¬¦ä¸² Unicode å¤„ç†
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
  @azimuth.assert_eq_string("Hello, ğŸ‘‹!", @azimuth.greet("ğŸ‘‹"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡!", @azimuth.greet("ä¸­æ–‡"))
  @azimuth.assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", @azimuth.greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
}

test "mathematical_identities" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰å¼
  let a = 17
  let b = 23
  
  // åŠ æ³•æ’ç­‰å¼
  @azimuth.assert_eq(a, @azimuth.add(a, 0))
  @azimuth.assert_eq(a, @azimuth.add(0, a))
  
  // ä¹˜æ³•æ’ç­‰å¼
  @azimuth.assert_eq(a, @azimuth.multiply(a, 1))
  @azimuth.assert_eq(a, @azimuth.multiply(1, a))
  
  // ä¹˜æ³•é›¶å¾‹
  @azimuth.assert_eq(0, @azimuth.multiply(a, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, a))
  
  // è´Ÿä¸€ä¹˜æ³•
  @azimuth.assert_eq(-a, @azimuth.multiply(a, -1))
  @azimuth.assert_eq(-a, @azimuth.multiply(-1, a))
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000
  let rate = 5  // 5%
  let years = 3
  
  // ç®€å•åˆ©æ¯è®¡ç®—
  let interest = @azimuth.multiply(principal, @azimuth.multiply(rate, years))
  let total = @azimuth.add(principal, interest)
  @azimuth.assert_eq(160000, total)  // 10000 + 10000*5*3 = 160000
  
  // åˆ†æœŸä»˜æ¬¾è®¡ç®—
  let monthly_payment = total / (years * 12)
  @azimuth.assert_eq(4444, monthly_payment)  // 160000 / 36 = 4444 (æ•´æ•°é™¤æ³•)
}

test "temperature_conversion" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 2 + 30 (ç®€åŒ–ç‰ˆ)
  let celsius = 25
  let fahrenheit = @azimuth.add(@azimuth.multiply(celsius, 2), 30)
  @azimuth.assert_eq(80, fahrenheit)
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼šC = (F - 30) / 2 (ç®€åŒ–ç‰ˆ)
  let fahrenheit2 = 100
  let celsius2 = @azimuth.add(fahrenheit2, -30) / 2
  @azimuth.assert_eq(35, celsius2)
  
  // æµ‹è¯•å†°ç‚¹
  @azimuth.assert_eq(30, @azimuth.add(@azimuth.multiply(0, 2), 30))
  @azimuth.assert_eq(0, @azimuth.add(30, -30) / 2)
}

test "geometric_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  let radius = 7
  
  // åœ†å‘¨é•¿ï¼ˆç®€åŒ–ï¼‰ï¼šC = 2 Ã— 3 Ã— r
  let circumference = @azimuth.multiply(@azimuth.multiply(2, 3), radius)
  @azimuth.assert_eq(42, circumference)
  
  // åœ†é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šA = 3 Ã— rÂ²
  let area = @azimuth.multiply(3, @azimuth.multiply(radius, radius))
  @azimuth.assert_eq(147, area)
  
  // çƒä½“ä½“ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šV = 4 Ã— rÂ³
  let volume = @azimuth.multiply(4, @azimuth.multiply(radius, @azimuth.multiply(radius, radius)))
  @azimuth.assert_eq(1372, volume)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // æ•°æ®é›†ï¼š10, 20, 30, 40, 50
  let data_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)
  @azimuth.assert_eq(150, data_sum)
  
  // å¹³å‡å€¼
  let average = data_sum / 5
  @azimuth.assert_eq(30, average)
  
  // æ–¹å·®è®¡ç®—ï¼ˆç®€åŒ–ï¼‰
  let variance_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(
    @azimuth.multiply(10 - 30, 10 - 30),
    @azimuth.multiply(20 - 30, 20 - 30)),
    @azimuth.multiply(30 - 30, 30 - 30)),
    @azimuth.multiply(40 - 30, 40 - 30)),
    @azimuth.multiply(50 - 30, 50 - 30))
  let variance = variance_sum / 5
  @azimuth.assert_eq(200, variance)
}

test "time_calculations" {
  // æµ‹è¯•æ—¶é—´è®¡ç®—
  let hours = 2
  let minutes = 45
  let seconds = 30
  
  // è½¬æ¢ä¸ºæ€»ç§’æ•°
  let total_seconds = @azimuth.add(@azimuth.multiply(@azimuth.add(hours, 60), minutes), seconds)
  @azimuth.assert_eq(165, total_seconds)  // (2 + 60) * 45 + 30 = 165
  
  // è®¡ç®—æ—¶é—´å·®
  let start_hour = 8
  let end_hour = 17
  let lunch_break = 1
  
  let work_hours = @azimuth.add(end_hour, -start_hour)
  let actual_work_hours = @azimuth.add(work_hours, -lunch_break)
  @azimuth.assert_eq(8, actual_work_hours)
}

test "complex_business_logic" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡é€»è¾‘
  let base_price = 100
  let quantity = 5
  let discount_threshold = 400
  let discount_rate = 10
  let tax_rate = 8
  let shipping = 15
  
  // è®¡ç®—æ€»ä»·
  let subtotal = @azimuth.multiply(base_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£
  let discount = if (subtotal > discount_threshold) {
    @azimuth.multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_price = @azimuth.add(subtotal, -discount)
  
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(discounted_price, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆä»·æ ¼
  let final_price = @azimuth.add(@azimuth.add(discounted_price, tax), shipping)
  
  @azimuth.assert_eq(545, final_price)  // 500 - 50 + 36 + 15 = 501
}

test "error_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_eq(100, 100)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•è¾¹ç•Œå€¼è¿ç®—
  @azimuth.assert_true(@azimuth.add(max_val, 1) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -1) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•ç‰¹æ®Šå€¼è¿ç®—
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(0, @azimuth.multiply(0, max_val))
  @azimuth.assert_eq(0, @azimuth.multiply(0, min_val))
}