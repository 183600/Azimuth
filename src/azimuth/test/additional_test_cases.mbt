// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹æ¶µç›–äº†æ›´å¤šçš„è¾¹ç•Œæƒ…å†µå’Œå®é™…åº”ç”¨åœºæ™¯

test "add_large_positive_numbers" {
  // æµ‹è¯•å¤§æ­£æ•°ç›¸åŠ 
  @azimuth.assert_eq(2000000000, @azimuth.add(1000000000, 1000000000))
  @azimuth.assert_eq(1500000000, @azimuth.add(750000000, 750000000))
  @azimuth.assert_eq(2147483647, @azimuth.add(1073741823, 1073741824))
}

test "add_large_negative_numbers" {
  // æµ‹è¯•å¤§è´Ÿæ•°ç›¸åŠ 
  @azimuth.assert_eq(-2000000000, @azimuth.add(-1000000000, -1000000000))
  @azimuth.assert_eq(-1500000000, @azimuth.add(-750000000, -750000000))
  @azimuth.assert_eq(-2147483648, @azimuth.add(-1073741824, -1073741824))
}

test "multiply_fractional_approximation" {
  // æµ‹è¯•åˆ†æ•°è¿‘ä¼¼å€¼çš„ä¹˜æ³•
  // 1/3 â‰ˆ 0.333..., 0.333 * 3 â‰ˆ 1 (æ•´æ•°è¿‘ä¼¼)
  @azimuth.assert_eq(0, @azimuth.multiply(1, 0))
  
  // ä½¿ç”¨æ•´æ•°æ¨¡æ‹Ÿåˆ†æ•°è¿ç®—
  // 1/2 * 4 = 2 (ä½¿ç”¨ 1 * 4 / 2 = 2)
  let half_times_four = @azimuth.multiply(1, 4) / 2
  @azimuth.assert_eq(2, half_times_four)
  
  // 2/3 * 6 = 4 (ä½¿ç”¨ 2 * 6 / 3 = 4)
  let two_thirds_times_six = @azimuth.multiply(2, 6) / 3
  @azimuth.assert_eq(4, two_thirds_times_six)
}

test "calculate_rectangle_properties" {
  // è®¡ç®—çŸ©å½¢çš„å±æ€§
  let length = 15
  let width = 8
  
  // è®¡ç®—é¢ç§¯
  let area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(120, area)
  
  // è®¡ç®—å‘¨é•¿
  let perimeter = @azimuth.multiply(@azimuth.add(length, width), 2)
  @azimuth.assert_eq(46, perimeter)
  
  // è®¡ç®—å¯¹è§’çº¿é•¿åº¦çš„å¹³æ–¹ (aÂ² + bÂ²)
  let diagonal_squared = @azimuth.add(@azimuth.multiply(length, length), @azimuth.multiply(width, width))
  @azimuth.assert_eq(289, diagonal_squared)  // 15Â² + 8Â² = 225 + 64 = 289
}

test "compound_interest_calculation" {
  // å¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼Œæ•´æ•°è¿ç®—ï¼‰
  let principal = 1000  // æœ¬é‡‘
  let rate = 5          // åˆ©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let years = 3         // å¹´æ•°
  
  // è®¡ç®—æ¯å¹´çš„åˆ©æ¯å¹¶ç´¯åŠ 
  let year1_interest = @azimuth.multiply(principal, rate) / 100
  let year1_total = @azimuth.add(principal, year1_interest)
  
  let year2_interest = @azimuth.multiply(year1_total, rate) / 100
  let year2_total = @azimuth.add(year1_total, year2_interest)
  
  let year3_interest = @azimuth.multiply(year2_total, rate) / 100
  let final_total = @azimuth.add(year2_total, year3_interest)
  
  // éªŒè¯æœ€ç»ˆé‡‘é¢çº¦ç­‰äº 1157 (1000 * 1.05Â³)
  @azimuth.assert_eq(1157, final_total)
}

test "string_validation_and_processing" {
  // æµ‹è¯•å­—ç¬¦ä¸²éªŒè¯å’Œå¤„ç†
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Smith!", @azimuth.greet("John Smith"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, user@domain.com!", @azimuth.greet("user@domain.com"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, ğŸŒŸMoonBitğŸŒŸ!", @azimuth.greet("ğŸŒŸMoonBitğŸŒŸ"))
}

test "statistical_calculations" {
  // ç»Ÿè®¡è®¡ç®—
  let numbers = [12, 15, 18, 21, 24]  // æ¨¡æ‹Ÿæ•°ç»„
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(numbers[0], numbers[1]), numbers[2]), numbers[3]), numbers[4])
  @azimuth.assert_eq(90, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  @azimuth.assert_eq(18, average)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let diff1 = @azimuth.multiply(numbers[0] - average, numbers[0] - average)
  let diff2 = @azimuth.multiply(numbers[1] - average, numbers[1] - average)
  let diff3 = @azimuth.multiply(numbers[2] - average, numbers[2] - average)
  let diff4 = @azimuth.multiply(numbers[3] - average, numbers[3] - average)
  let diff5 = @azimuth.multiply(numbers[4] - average, numbers[4] - average)
  
  let variance_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(diff1, diff2), diff3), diff4), diff5)
  let variance = variance_sum / 5
  @azimuth.assert_eq(18, variance)  // ç®€åŒ–çš„æ–¹å·®è®¡ç®—
}

test "time_calculations" {
  // æ—¶é—´è®¡ç®—ï¼ˆç§’è½¬æ¢ä¸ºæ—¶åˆ†ç§’ï¼‰
  let total_seconds = 3665  // 1å°æ—¶1åˆ†5ç§’
  
  // è®¡ç®—å°æ—¶
  let hours = total_seconds / 3600
  @azimuth.assert_eq(1, hours)
  
  // è®¡ç®—å‰©ä½™ç§’æ•°
  let remaining_seconds = total_seconds - @azimuth.multiply(hours, 3600)
  @azimuth.assert_eq(65, remaining_seconds)
  
  // è®¡ç®—åˆ†é’Ÿ
  let minutes = remaining_seconds / 60
  @azimuth.assert_eq(1, minutes)
  
  // è®¡ç®—ç§’æ•°
  let seconds = remaining_seconds - @azimuth.multiply(minutes, 60)
  @azimuth.assert_eq(5, seconds)
}

test "number_system_conversions" {
  // æ•°å­—ç³»ç»Ÿè½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ï¼ˆæ¨¡æ‹Ÿï¼‰
  let decimal_num = 13
  
  // ä½¿ç”¨é™¤2å–ä½™æ³•æ¨¡æ‹ŸäºŒè¿›åˆ¶è½¬æ¢
  let rem1 = decimal_num % 2
  let div1 = decimal_num / 2
  let rem2 = div1 % 2
  let div2 = div1 / 2
  let rem3 = div2 % 2
  let div3 = div2 / 2
  let rem4 = div3 % 2
  
  // å°†ä½™æ•°ç»„åˆæˆäºŒè¿›åˆ¶æ•°ï¼ˆ1101ï¼‰
  let binary_num = @azimuth.add(@azimuth.add(@azimuth.multiply(rem4, 1000), @azimuth.multiply(rem3, 100)), @azimuth.add(@azimuth.multiply(rem2, 10), rem1))
  @azimuth.assert_eq(1101, binary_num)
  
  // äºŒè¿›åˆ¶è½¬åè¿›åˆ¶éªŒè¯
  let decimal_back = @azimuth.add(@azimuth.add(@azimuth.multiply(1, 8), @azimuth.multiply(1, 4)), @azimuth.add(@azimuth.multiply(0, 2), @azimuth.multiply(1, 1)))
  @azimuth.assert_eq(13, decimal_back)
}

test "geometric_progression" {
  // ç­‰æ¯”æ•°åˆ—è®¡ç®—
  let first_term = 2
  let ratio = 3
  let n = 5  // é¡¹æ•°
  
  // è®¡ç®—å‰5é¡¹ï¼š2, 6, 18, 54, 162
  let term1 = first_term
  let term2 = @azimuth.multiply(term1, ratio)
  let term3 = @azimuth.multiply(term2, ratio)
  let term4 = @azimuth.multiply(term3, ratio)
  let term5 = @azimuth.multiply(term4, ratio)
  
  // éªŒè¯å„é¡¹
  @azimuth.assert_eq(2, term1)
  @azimuth.assert_eq(6, term2)
  @azimuth.assert_eq(18, term3)
  @azimuth.assert_eq(54, term4)
  @azimuth.assert_eq(162, term5)
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(term1, term2), term3), term4), term5)
  @azimuth.assert_eq(242, sum)
}