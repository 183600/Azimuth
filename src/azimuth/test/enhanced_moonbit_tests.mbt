// å¢å¼ºçš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "enhanced_add_commutativity" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹çš„å¤šç§æƒ…å†µ
  let a = 12345
  let b = -6789
  
  // éªŒè¯äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // æµ‹è¯•åŒ…å«0çš„æƒ…å†µ
  @azimuth.assert_eq(@azimuth.add(a, 0), @azimuth.add(0, a))
  
  // æµ‹è¯•ä¸¤ä¸ªè´Ÿæ•°
  let x = -1000
  let y = -2000
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
}

test "enhanced_multiply_properties" {
  // æµ‹è¯•ä¹˜æ³•çš„æ•°å­¦æ€§è´¨
  let a = 15
  let b = 7
  let c = 3
  
  // æµ‹è¯•ç»“åˆå¾‹ (a * b) * c = a * (b * c)
  let result1 = @azimuth.multiply(@azimuth.multiply(a, b), c)
  let result2 = @azimuth.multiply(a, @azimuth.multiply(b, c))
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•åˆ†é…å¾‹ a * (b + c) = a * b + a * c
  let result3 = @azimuth.multiply(a, @azimuth.add(b, c))
  let result4 = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(result3, result4)
}

test "enhanced_string_scenarios" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„å„ç§åœºæ™¯
  // æµ‹è¯•åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, User123!", @azimuth.greet("User123"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, test@domain.com!", @azimuth.greet("test@domain.com"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Smith!", @azimuth.greet("John Smith"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  
  // æµ‹è¯•åŒ…å«åˆ¶è¡¨ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, Name\t!", @azimuth.greet("Name\t"))
}

test "enhanced_financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯
  // è®¡ç®—è´·æ¬¾æœˆä¾›ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let principal = 100000  // æœ¬é‡‘
  let annual_rate = 6     // å¹´åˆ©ç‡6%
  let years = 30          // è´·æ¬¾å¹´é™
  
  // ç®€åŒ–çš„æœˆä¾›è®¡ç®—ï¼šæœ¬é‡‘ + æœ¬é‡‘ Ã— å¹´åˆ©ç‡ Ã— å¹´æ•°
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years))
  let total_payment = @azimuth.add(principal, total_interest)
  
  @azimuth.assert_eq(1900000, total_payment)
  
  // è®¡ç®—æŠ•èµ„å›æŠ¥
  let investment = 50000
  let return_rate = 8     // 8%å¹´å›æŠ¥ç‡
  let investment_years = 5
  
  let returns = @azimuth.multiply(investment, @azimuth.multiply(return_rate, investment_years))
  let final_value = @azimuth.add(investment, returns)
  
  @azimuth.assert_eq(250000, final_value)
}

test "enhanced_temperature_conversions" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢åœºæ™¯
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼šF = C Ã— 2 + 30ï¼‰
  let celsius_temperatures = [0, 10, 20, 30, 40, 100]
  let expected_fahrenheit = [30, 50, 70, 90, 110, 230]
  
  @azimuth.assert_eq(30, @azimuth.add(@azimuth.multiply(0, 2), 30))
  @azimuth.assert_eq(50, @azimuth.add(@azimuth.multiply(10, 2), 30))
  @azimuth.assert_eq(70, @azimuth.add(@azimuth.multiply(20, 2), 30))
  @azimuth.assert_eq(90, @azimuth.add(@azimuth.multiply(30, 2), 30))
  @azimuth.assert_eq(110, @azimuth.add(@azimuth.multiply(40, 2), 30))
  @azimuth.assert_eq(230, @azimuth.add(@azimuth.multiply(100, 2), 30))
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼šC = (F - 30) Ã· 2ï¼‰
  @azimuth.assert_eq(0, @azimuth.add(@azimuth.multiply(30, -1), 30) / 2)
  @azimuth.assert_eq(20, @azimuth.add(@azimuth.multiply(70, -1), 30) / 2)
}

test "enhanced_geometry_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // è®¡ç®—çŸ©å½¢é¢ç§¯å’Œå‘¨é•¿
  let length = 12
  let width = 8
  
  let area = @azimuth.multiply(length, width)
  let perimeter = @azimuth.add(@azimuth.multiply(2, length), @azimuth.multiply(2, width))
  
  @azimuth.assert_eq(96, area)
  @azimuth.assert_eq(40, perimeter)
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼ˆåº•Ã—é«˜Ã·2ï¼‰
  let base = 10
  let height = 6
  let triangle_area = @azimuth.multiply(base, height) / 2
  
  @azimuth.assert_eq(30, triangle_area)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼ˆï¼ˆä¸Šåº•+ä¸‹åº•ï¼‰Ã—é«˜Ã·2ï¼‰
  let top_base = 6
  let bottom_base = 10
  let trapezoid_height = 4
  let trapezoid_area = @azimuth.multiply(@azimuth.add(top_base, bottom_base), trapezoid_height) / 2
  
  @azimuth.assert_eq(32, trapezoid_area)
}

test "enhanced_boundary_value_analysis" {
  // æµ‹è¯•è¾¹ç•Œå€¼åˆ†æ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„å„ç§è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(max_val, -1))
  
  // æµ‹è¯•æœ€å°å€¼çš„å„ç§è¿ç®—
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•æå€¼ä¹‹é—´çš„è¿ç®—
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
}

test "enhanced_statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // è®¡ç®—ä¸€ç»„æ•°æ®çš„æ€»å’Œã€å¹³å‡å€¼ã€æœ€å¤§å€¼ã€æœ€å°å€¼
  let data1 = 10
  let data2 = 20
  let data3 = 30
  let data4 = 40
  let data5 = 50
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(data1, data2), data3), data4), data5)
  @azimuth.assert_eq(150, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  @azimuth.assert_eq(30, average)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let diff1 = @azimuth.add(data1, -average)
  let diff2 = @azimuth.add(data2, -average)
  let diff3 = @azimuth.add(data3, -average)
  let diff4 = @azimuth.add(data4, -average)
  let diff5 = @azimuth.add(data5, -average)
  
  let variance = (@azimuth.multiply(diff1, diff1) + @azimuth.multiply(diff2, diff2) + 
                  @azimuth.multiply(diff3, diff3) + @azimuth.multiply(diff4, diff4) + 
                  @azimuth.multiply(diff5, diff5)) / 5
  
  @azimuth.assert_eq(200, variance)
}

test "enhanced_complex_expressions" {
  // æµ‹è¯•å¤æ‚è¡¨è¾¾å¼è®¡ç®—
  // è®¡ç®—ï¼š(a + b) * (c - d) + e * f
  let a = 10
  let b = 5
  let c = 20
  let d = 8
  let e = 3
  let f = 7
  
  let sum_ab = @azimuth.add(a, b)
  let diff_cd = @azimuth.add(c, -d)
  let product_ef = @azimuth.multiply(e, f)
  
  let result = @azimuth.add(@azimuth.multiply(sum_ab, diff_cd), product_ef)
  
  // (10 + 5) * (20 - 8) + 3 * 7 = 15 * 12 + 21 = 180 + 21 = 201
  @azimuth.assert_eq(201, result)
  
  // è®¡ç®—ï¼šaÂ² + bÂ² + 2*a*b (å®Œå…¨å¹³æ–¹å…¬å¼)
  let a_squared = @azimuth.multiply(a, a)
  let b_squared = @azimuth.multiply(b, b)
  let two_ab = @azimuth.multiply(2, @azimuth.multiply(a, b))
  
  let perfect_square = @azimuth.add(@azimuth.add(a_squared, b_squared), two_ab)
  
  // 10Â² + 5Â² + 2*10*5 = 100 + 25 + 100 = 225
  @azimuth.assert_eq(225, perfect_square)
}