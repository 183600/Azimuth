// Azimuth é¡¹ç›®é¢å¤–æµ‹è¯•ç”¨ä¾‹
// è¡¥å……è¾¹ç•Œå€¼ã€å­—ç¬¦ä¸²å¤„ç†ã€å¤åˆåŠŸèƒ½å’Œé”™è¯¯å¤„ç†æµ‹è¯•

test "multiply_boundary_values" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„è¾¹ç•Œå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼è¾¹ç•Œ
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.multiply(1, max_val))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, max_val))
  
  // æµ‹è¯•æœ€å°å€¼è¾¹ç•Œ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(1, min_val))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, min_val))
  
  // æµ‹è¯•-1çš„ä¹˜æ³•
  @azimuth.assert_eq(-max_val, @azimuth.multiply(max_val, -1))
  @azimuth.assert_eq(-max_val, @azimuth.multiply(-1, max_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(-1, min_val))
}

test "multiply_overflow_scenarios" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºåœºæ™¯
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ­£æ•°ä¹˜æ³•æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.multiply(46341, 46341))  // sqrt(max_val) â‰ˆ 46341
  @azimuth.assert_eq(max_val, @azimuth.multiply(100000, 30000))
  
  // è´Ÿæ•°ä¹˜æ³•æº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.multiply(-46341, 46341))
  @azimuth.assert_eq(min_val, @azimuth.multiply(46341, -46341))
  @azimuth.assert_eq(min_val, @azimuth.multiply(-100000, 30000))
  
  // æœ€å°å€¼ç‰¹æ®Šå¤„ç†
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(2, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(-2, min_val))
}

test "divide_with_ceil_comprehensive" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å„ç§æƒ…å†µ
  
  // æ­£æ•°é™¤æ³•
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(10, 3))   // 10/3 = 3.33 â†’ 4
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(6, 3))    // 6/3 = 2 â†’ 2
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 3))    // 1/3 = 0.33 â†’ 1
  
  // è´Ÿæ•°é™¤æ³•
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))  // -10/3 = -3.33 â†’ -3
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(10, -3))  // 10/-3 = -3.33 â†’ -3
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(-10, -3))  // -10/-3 = 3.33 â†’ 4
  
  // é›¶çš„æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 5))     // 0/5 = 0 â†’ 0
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -5))    // 0/-5 = 0 â†’ 0
  
  // æ•´é™¤æƒ…å†µ
  @azimuth.assert_eq(5, @azimuth.divide_with_ceil(15, 3))    // 15/3 = 5 â†’ 5
  @azimuth.assert_eq(-5, @azimuth.divide_with_ceil(-15, 3))  // -15/3 = -5 â†’ -5
  @azimuth.assert_eq(-5, @azimuth.divide_with_ceil(15, -3))  // 15/-3 = -5 â†’ -5
  @azimuth.assert_eq(5, @azimuth.divide_with_ceil(-15, -3))  // -15/-3 = 5 â†’ 5
}

test "string_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç¼˜æƒ…å†µ
  
  // ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // å•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  @azimuth.assert_eq_string("Hello, a!", @azimuth.greet("a"))
  @azimuth.assert_eq_string("Hello, 1!", @azimuth.greet("1"))
  
  // é•¿å­—ç¬¦ä¸²
  let long_name = "è¿™æ˜¯ä¸€ä¸ªéå¸¸éå¸¸é•¿çš„åå­—ç”¨æ¥æµ‹è¯•greetå‡½æ•°å¤„ç†é•¿å­—ç¬¦ä¸²çš„èƒ½åŠ›"
  let expected_long = "Hello, " + long_name + "!"
  @azimuth.assert_eq_string(expected_long, @azimuth.greet(long_name))
  
  // åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
  
  // ç‰¹æ®ŠUnicodeå­—ç¬¦
  @azimuth.assert_eq_string("Hello, ğŸ‘‹!", @azimuth.greet("ğŸ‘‹"))
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
  @azimuth.assert_eq_string("Hello, ğŸ‰!", @azimuth.greet("ğŸ‰"))
}

test "mathematical_series_calculations" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  
  // ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š1 + 2 + 3 + ... + 10 = 55
  let n = 10
  let sum_arithmetic = @azimuth.multiply(@azimuth.add(1, n), n) / 2
  @azimuth.assert_eq(55, sum_arithmetic)
  
  // ç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼š2 + 4 + 8 + 16 = 30
  let term1 = 2
  let ratio = 2
  let terms = 4
  let sum_geometric = @azimuth.multiply(term1, @azimuth.add(@azimuth.multiply(ratio, terms), -1)) / @azimuth.add(ratio, -1)
  @azimuth.assert_eq(30, sum_geometric)
  
  // å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + 4Â² + 5Â² = 55
  let square_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.multiply(1, 1), @azimuth.multiply(2, 2)), @azimuth.multiply(3, 3)), @azimuth.multiply(4, 4)), @azimuth.multiply(5, 5))
  @azimuth.assert_eq(55, square_sum)
}

test "combined_operations_complex" {
  // æµ‹è¯•å¤åˆè¿ç®—çš„å¤æ‚åœºæ™¯
  
  // åœºæ™¯ï¼šè®¡ç®— (a + b) * (c - d) + e / f
  let a = 12
  let b = 8
  let c = 20
  let d = 15
  let e = 100
  let f = 4
  
  let sum_ab = @azimuth.add(a, b)  // 20
  let diff_cd = @azimuth.add(c, -d)  // 5
  let product = @azimuth.multiply(sum_ab, diff_cd)  // 100
  let division = e / f  // 25
  let result = @azimuth.add(product, division)  // 125
  
  @azimuth.assert_eq(125, result)
  
  // åœºæ™¯ï¼šè®¡ç®—æŠ˜æ‰£åçš„æ€»ä»·
  let original_price = 1000
  let discount_rate = 15  // 15%æŠ˜æ‰£
  let tax_rate = 8       // 8%ç¨ç‡
  let quantity = 3
  
  let discounted_price = @azimuth.multiply(original_price, @azimuth.add(100, -discount_rate)) / 100  // 850
  let after_tax = @azimuth.multiply(discounted_price, @azimuth.add(100, tax_rate)) / 100  // 918
  let total = @azimuth.multiply(after_tax, quantity)  // 2754
  
  @azimuth.assert_eq(2754, total)
}

test "assertion_functions_test" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°æœ¬èº«
  
  // æµ‹è¯•assert_eqçš„å„ç§æƒ…å†µ
  @azimuth.assert_eq(0, 0)
  @azimuth.assert_eq(-1, -1)
  @azimuth.assert_eq(2147483647, 2147483647)
  @azimuth.assert_eq(-2147483648, -2147483648)
  
  // æµ‹è¯•assert_eq_stringçš„å„ç§æƒ…å†µ
  @azimuth.assert_eq_string("", "")
  @azimuth.assert_eq_string("a", "a")
  @azimuth.assert_eq_string("Hello, World!", "Hello, World!")
  @azimuth.assert_eq_string("ä¸­æ–‡æµ‹è¯•", "ä¸­æ–‡æµ‹è¯•")
  
  // æµ‹è¯•assert_true
  @azimuth.assert_true(true)
  @azimuth.assert_true(1 == 1)
  @azimuth.assert_true(0 < 1)
  @azimuth.assert_true(-1 < 0)
  
  // æµ‹è¯•assert_false
  @azimuth.assert_false(false)
  @azimuth.assert_false(1 == 0)
  @azimuth.assert_false(1 < 0)
  @azimuth.assert_false(-1 > 0)
}

test "algorithm_fibonacci_iterative" {
  // æµ‹è¯•æ–æ³¢é‚£å¥‘æ•°åˆ—çš„è¿­ä»£å®ç°
  // F(0) = 0, F(1) = 1, F(n) = F(n-1) + F(n-2)
  
  // è®¡ç®—å‰10ä¸ªæ–æ³¢é‚£å¥‘æ•°
  let f0 = 0
  let f1 = 1
  let f2 = @azimuth.add(f0, f1)  // 1
  let f3 = @azimuth.add(f1, f2)  // 2
  let f4 = @azimuth.add(f2, f3)  // 3
  let f5 = @azimuth.add(f3, f4)  // 5
  let f6 = @azimuth.add(f4, f5)  // 8
  let f7 = @azimuth.add(f5, f6)  // 13
  let f8 = @azimuth.add(f6, f7)  // 21
  let f9 = @azimuth.add(f7, f8)  // 34
  let f10 = @azimuth.add(f8, f9)  // 55
  
  @azimuth.assert_eq(0, f0)
  @azimuth.assert_eq(1, f1)
  @azimuth.assert_eq(1, f2)
  @azimuth.assert_eq(2, f3)
  @azimuth.assert_eq(3, f4)
  @azimuth.assert_eq(5, f5)
  @azimuth.assert_eq(8, f6)
  @azimuth.assert_eq(13, f7)
  @azimuth.assert_eq(21, f8)
  @azimuth.assert_eq(34, f9)
  @azimuth.assert_eq(55, f10)
  
  // éªŒè¯æ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ€§è´¨
  let sum_first_10 = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(f0, f1), f2), f3), @azimuth.add(f4, f5)), @azimuth.add(@azimuth.add(f6, f7), @azimuth.add(f8, f9)))
  @azimuth.assert_eq(88, sum_first_10)  // å‰10ä¸ªæ•°çš„å’Œåº”è¯¥æ˜¯88
}

test "number_theory_properties" {
  // æµ‹è¯•æ•°è®ºæ€§è´¨
  
  // æµ‹è¯•å¶æ•°å’Œå¥‡æ•°æ€§è´¨
  let even_num = 8
  let odd_num = 7
  
  @azimuth.assert_true(even_num % 2 == 0)
  @azimuth.assert_true(odd_num % 2 == 1)
  
  // æµ‹è¯•è´¨æ•°æ€§è´¨ï¼ˆç®€å•æµ‹è¯•ï¼‰
  let prime_2 = 2
  let prime_3 = 3
  let prime_5 = 5
  let prime_7 = 7
  let composite_4 = 4
  let composite_6 = 6
  let composite_8 = 8
  let composite_9 = 9
  
  // ç®€å•çš„è´¨æ•°æµ‹è¯•
  @azimuth.assert_true(prime_2 > 1)
  @azimuth.assert_true(prime_3 > 1)
  @azimuth.assert_true(prime_5 > 1)
  @azimuth.assert_true(prime_7 > 1)
  
  // æµ‹è¯•æ•°çš„å› å­
  @azimuth.assert_true(4 % 2 == 0)
  @azimuth.assert_true(6 % 2 == 0)
  @azimuth.assert_true(6 % 3 == 0)
  @azimuth.assert_true(8 % 2 == 0)
  @azimuth.assert_true(8 % 4 == 0)
  @azimuth.assert_true(9 % 3 == 0)
  
  // æµ‹è¯•å®Œå…¨æ•°ï¼š6 = 1 + 2 + 3
  let proper_divisors_sum_6 = @azimuth.add(@azimuth.add(1, 2), 3)
  @azimuth.assert_eq(6, proper_divisors_sum_6)
}