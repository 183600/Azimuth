// ç”¨æˆ·è‡ªå®šä¹‰çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½

test "add_edge_cases" {
  // æµ‹è¯•åŠ æ³•çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å¤§æ•°ç›¸åŠ 
  @azimuth.assert_eq(2000000000, @azimuth.add(1000000000, 1000000000))
  @azimuth.assert_eq(-2000000000, @azimuth.add(-1000000000, -1000000000))
  
  // æµ‹è¯•æ··åˆç¬¦å·ç›¸åŠ 
  @azimuth.assert_eq(0, @azimuth.add(100, -100))
  @azimuth.assert_eq(-50, @azimuth.add(100, -150))
}

test "multiply_edge_cases" {
  // æµ‹è¯•ä¹˜æ³•çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å¤§æ•°ç›¸ä¹˜
  @azimuth.assert_eq(1000000, @azimuth.multiply(1000, 1000))
  @azimuth.assert_eq(-1000000, @azimuth.multiply(-1000, 1000))
  @azimuth.assert_eq(1000000, @azimuth.multiply(-1000, -1000))
  
  // æµ‹è¯•ä¸-1ç›¸ä¹˜çš„ç‰¹æ®Šæƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "greet_unicode_handling" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„Unicodeå¤„ç†
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", @azimuth.greet("ä¸­æ–‡æµ‹è¯•"))
  @azimuth.assert_eq_string("Hello, Ã‘oÃ±o!", @azimuth.greet("Ã‘oÃ±o"))
}

test "complex_calculations" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  // è®¡ç®—å¤šé¡¹å¼å€¼ï¼š3xÂ² + 2x + 1ï¼Œå½“x=5æ—¶
  let x = 5
  let x_squared = @azimuth.multiply(x, x)
  let term1 = @azimuth.multiply(3, x_squared)
  let term2 = @azimuth.multiply(2, x)
  let polynomial_value = @azimuth.add(@azimuth.add(term1, term2), 1)
  @azimuth.assert_eq(86, polynomial_value)  // 3*25 + 2*5 + 1 = 75 + 10 + 1 = 86
  
  // è®¡ç®—é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1
  let factorial = @azimuth.multiply(5, @azimuth.multiply(4, @azimuth.multiply(3, @azimuth.multiply(2, 1))))
  @azimuth.assert_eq(120, factorial)
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000
  let rate = 5  // 5%
  let years = 3
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼šæœ¬é‡‘ + (æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°)
  let interest = @azimuth.multiply(principal, @azimuth.multiply(rate, years))
  let total = @azimuth.add(principal, interest)
  @azimuth.assert_eq(160000, total)  // 10000 + 10000*5*3 = 160000
  
  // å¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ï¼‰ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let growth_factor = @azimuth.add(1, @azimuth.multiply(rate, years))
  let compound_total = @azimuth.multiply(principal, growth_factor)
  @azimuth.assert_eq(160000, compound_total)
}

test "geometry_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  let radius = 7
  
  // åœ†å‘¨é•¿ï¼ˆç®€åŒ–ï¼‰ï¼š2 Ã— Ï€ Ã— r â‰ˆ 2 Ã— 3 Ã— r
  let circumference = @azimuth.multiply(@azimuth.multiply(2, 3), radius)
  @azimuth.assert_eq(42, circumference)
  
  // åœ†é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šÏ€ Ã— rÂ² â‰ˆ 3 Ã— rÂ²
  let area = @azimuth.multiply(3, @azimuth.multiply(radius, radius))
  @azimuth.assert_eq(147, area)
  
  // çƒä½“ä½“ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼š4/3 Ã— Ï€ Ã— rÂ³ â‰ˆ 4 Ã— rÂ³
  let volume = @azimuth.multiply(4, @azimuth.multiply(radius, @azimuth.multiply(radius, radius)))
  @azimuth.assert_eq(1372, volume)
}

test "time_calculations" {
  // æµ‹è¯•æ—¶é—´è®¡ç®—
  let hours = 2
  let minutes = 45
  
  // è½¬æ¢ä¸ºæ€»åˆ†é’Ÿæ•°
  let total_minutes = @azimuth.add(@azimuth.multiply(hours, 60), minutes)
  @azimuth.assert_eq(165, total_minutes)
  
  // è½¬æ¢ä¸ºæ€»ç§’æ•°
  let total_seconds = @azimuth.multiply(total_minutes, 60)
  @azimuth.assert_eq(9900, total_seconds)
  
  // è®¡ç®—æ—¶é—´å·®ï¼ˆåˆ†é’Ÿï¼‰
  let start_time = 480  // 8:00 AM
  let end_time = 1020    // 5:00 PM
  let duration = @azimuth.add(end_time, -start_time)
  @azimuth.assert_eq(540, duration)
}

test "shopping_cart_calculations" {
  // æµ‹è¯•è´­ç‰©è½¦è®¡ç®—
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let item3_price = 99
  let item3_quantity = 1
  let discount = 50
  let shipping = 15
  
  // è®¡ç®—æ¯ç§å•†å“çš„æ€»ä»·
  let total1 = @azimuth.multiply(item1_price, item1_quantity)
  let total2 = @azimuth.multiply(item2_price, item2_quantity)
  let total3 = @azimuth.multiply(item3_price, item3_quantity)
  
  // è®¡ç®—è´­ç‰©è½¦å°è®¡
  let subtotal = @azimuth.add(@azimuth.add(total1, total2), total3)
  
  // åº”ç”¨æŠ˜æ‰£å’Œè¿è´¹
  let final_total = @azimuth.add(@azimuth.add(subtotal, -discount), shipping)
  
  // éªŒè¯ç»“æœï¼š299*2 + 199*3 + 99*1 - 50 + 15 = 598 + 597 + 99 - 50 + 15 = 1259
  @azimuth.assert_eq(1259, final_total)
}

test "temperature_conversion" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32
  // ç®€åŒ–ä¸ºæ•´æ•°è¿ç®—ï¼šF = C Ã— 2 + 30
  
  let celsius_temp = 25
  let fahrenheit_temp = @azimuth.add(@azimuth.multiply(celsius_temp, 2), 30)
  @azimuth.assert_eq(80, fahrenheit_temp)  // 25 * 2 + 30 = 80
  
  // æµ‹è¯•å†°ç‚¹æ¸©åº¦
  let freezing_celsius = 0
  let freezing_fahrenheit = @azimuth.add(@azimuth.multiply(freezing_celsius, 2), 30)
  @azimuth.assert_eq(30, freezing_fahrenheit)
  
  // æµ‹è¯•æ²¸ç‚¹æ¸©åº¦
  let boiling_celsius = 100
  let boiling_fahrenheit = @azimuth.add(@azimuth.multiply(boiling_celsius, 2), 30)
  @azimuth.assert_eq(230, boiling_fahrenheit)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // è®¡ç®—ä¸€ç»„æ•°çš„æ€»å’Œã€å¹³å‡å€¼ã€ä¸­ä½æ•°
  let numbers = [@azimuth.add(10, 20), @azimuth.add(30, 40), @azimuth.add(50, 60)]
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(numbers[0], numbers[1]), numbers[2])
  @azimuth.assert_eq(210, sum)  // 30 + 70 + 110 = 210
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 3
  @azimuth.assert_eq(70, average)  // 210 / 3 = 70
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ï¼‰
  let diff1 = @azimuth.add(numbers[0], -70)
  let diff2 = @azimuth.add(numbers[1], -70)
  let diff3 = @azimuth.add(numbers[2], -70)
  let variance = @azimuth.add(@azimuth.add(@azimuth.multiply(diff1, diff1), @azimuth.multiply(diff2, diff2)), @azimuth.multiply(diff3, diff3)) / 3
  @azimuth.assert_eq(1333, variance)  // (1600 + 0 + 1600) / 3 = 3200 / 3 = 1066ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
}