// ç»¼åˆMoonBitæµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•azimuthæ¨¡å—çš„å„ç§åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "fibonacci_sequence_calculation" {
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å‰å‡ é¡¹
  // F(0) = 0, F(1) = 1, F(n) = F(n-1) + F(n-2)
  
  // æ‰‹åŠ¨è®¡ç®—å‰å‡ é¡¹
  let f0 = 0
  let f1 = 1
  let f2 = @azimuth.add(f0, f1)  // 1
  let f3 = @azimuth.add(f1, f2)  // 2
  let f4 = @azimuth.add(f2, f3)  // 3
  let f5 = @azimuth.add(f3, f4)  // 5
  let f6 = @azimuth.add(f4, f5)  // 8
  let f7 = @azimuth.add(f5, f6)  // 13
  let f8 = @azimuth.add(f6, f7)  // 21
  
  @azimuth.assert_eq(1, f2)
  @azimuth.assert_eq(2, f3)
  @azimuth.assert_eq(3, f4)
  @azimuth.assert_eq(5, f5)
  @azimuth.assert_eq(8, f6)
  @azimuth.assert_eq(13, f7)
  @azimuth.assert_eq(21, f8)
}

test "prime_number_validation" {
  // ç´ æ•°éªŒè¯æµ‹è¯•ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ£€æŸ¥ä¸€ä¸ªæ•°æ˜¯å¦ä¸ºç´ æ•°ï¼ˆé€šè¿‡æµ‹è¯•æ˜¯å¦èƒ½è¢«å°äºå®ƒçš„æ•°æ•´é™¤ï¼‰
  
  let is_prime_7 = {
    // 7ä¸èƒ½è¢«2,3,4,5,6æ•´é™¤
    let not_div_by_2 = (7 % 2 != 0)
    let not_div_by_3 = (7 % 3 != 0)
    let not_div_by_4 = (7 % 4 != 0)
    let not_div_by_5 = (7 % 5 != 0)
    let not_div_by_6 = (7 % 6 != 0)
    not_div_by_2 && not_div_by_3 && not_div_by_4 && not_div_by_5 && not_div_by_6
  }
  
  let is_prime_9 = {
    // 9èƒ½è¢«3æ•´é™¤
    (9 % 3 != 0)
  }
  
  @azimuth.assert_true(is_prime_7)
  @azimuth.assert_false(is_prime_9)
}

test "string_processing_advanced" {
  // é«˜çº§å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  
  let unicode_string = "Hello, ä¸–ç•Œ! ğŸŒ"
  let result1 = @azimuth.greet(unicode_string)
  @azimuth.assert_eq_string("Hello, Hello, ä¸–ç•Œ! ğŸŒ!", result1)
  
  // æµ‹è¯•åŒ…å«è½¬ä¹‰å­—ç¬¦çš„å­—ç¬¦ä¸²
  let escaped_string = "Line1\nLine2\tTabbed"
  let result2 = @azimuth.greet(escaped_string)
  @azimuth.assert_eq_string("Hello, Line1\nLine2\tTabbed!", result2)
  
  // æµ‹è¯•åŒ…å«å¼•å·çš„å­—ç¬¦ä¸²
  let quoted_string = "\"Quote\" inside"
  let result3 = @azimuth.greet(quoted_string)
  @azimuth.assert_eq_string("Hello, \"Quote\" inside!", result3)
}

test "matrix_multiplication_simulation" {
  // æ¨¡æ‹Ÿ2x2çŸ©é˜µä¹˜æ³•
  // çŸ©é˜µA: [a b]  çŸ©é˜µB: [e f]
  //         [c d]          [g h]
  // ç»“æœ: [a*e+b*g, a*f+b*h]
  //       [c*e+d*g, c*f+d*h]
  
  let a = 1; let b = 2
  let c = 3; let d = 4
  let e = 5; let f = 6
  let g = 7; let h = 8
  
  // è®¡ç®—ç»“æœçŸ©é˜µçš„å…ƒç´ 
  let result_00 = @azimuth.add(@azimuth.multiply(a, e), @azimuth.multiply(b, g))  // 1*5 + 2*7 = 19
  let result_01 = @azimuth.add(@azimuth.multiply(a, f), @azimuth.multiply(b, h))  // 1*6 + 2*8 = 22
  let result_10 = @azimuth.add(@azimuth.multiply(c, e), @azimuth.multiply(d, g))  // 3*5 + 4*7 = 43
  let result_11 = @azimuth.add(@azimuth.multiply(c, f), @azimuth.multiply(d, h))  // 3*6 + 4*8 = 50
  
  @azimuth.assert_eq(19, result_00)
  @azimuth.assert_eq(22, result_01)
  @azimuth.assert_eq(43, result_10)
  @azimuth.assert_eq(50, result_11)
}

test "physics_simulation" {
  // ç‰©ç†æ¨¡æ‹Ÿæµ‹è¯•ï¼šè®¡ç®—è‡ªç”±è½ä½“è¿åŠ¨
  // å…¬å¼ï¼šh = h0 - 0.5 * g * t^2
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šh = h0 - 5 * t^2 (g â‰ˆ 10)
  
  let initial_height = 100  // åˆå§‹é«˜åº¦100ç±³
  let g_half = 5  // 0.5 * g çš„è¿‘ä¼¼å€¼
  
  // è®¡ç®—ä¸åŒæ—¶é—´çš„é«˜åº¦
  let height_t1 = @azimuth.add(initial_height, @azimuth.multiply(-g_half, @azimuth.multiply(1, 1)))  // 100 - 5*1 = 95
  let height_t2 = @azimuth.add(initial_height, @azimuth.multiply(-g_half, @azimuth.multiply(2, 2)))  // 100 - 5*4 = 80
  let height_t3 = @azimuth.add(initial_height, @azimuth.multiply(-g_half, @azimuth.multiply(3, 3)))  // 100 - 5*9 = 55
  let height_t4 = @azimuth.add(initial_height, @azimuth.multiply(-g_half, @azimuth.multiply(4, 4)))  // 100 - 5*16 = 20
  
  @azimuth.assert_eq(95, height_t1)
  @azimuth.assert_eq(80, height_t2)
  @azimuth.assert_eq(55, height_t3)
  @azimuth.assert_eq(20, height_t4)
}

test "statistical_analysis" {
  // ç»Ÿè®¡åˆ†ææµ‹è¯•ï¼šè®¡ç®—æ–¹å·®å’Œæ ‡å‡†å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ•°æ®é›†ï¼š[10, 20, 30, 40, 50]
  
  // è®¡ç®—å¹³å‡å€¼
  let data_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)  // 150
  let mean = data_sum / 5  // 30
  
  // è®¡ç®—æ–¹å·®ï¼šæ¯ä¸ªæ•°æ®ç‚¹ä¸å¹³å‡å€¼å·®çš„å¹³æ–¹å’Œçš„å¹³å‡å€¼
  let diff1 = @azimuth.add(10, -mean)  // -20
  let diff2 = @azimuth.add(20, -mean)  // -10
  let diff3 = @azimuth.add(30, -mean)  // 0
  let diff4 = @azimuth.add(40, -mean)  // 10
  let diff5 = @azimuth.add(50, -mean)  // 20
  
  let square_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(
    @azimuth.multiply(diff1, diff1),  // 400
    @azimuth.multiply(diff2, diff2)), // 100
    @azimuth.multiply(diff3, diff3)), // 0
    @azimuth.multiply(diff4, diff4)), // 100
    @azimuth.multiply(diff5, diff5))  // 400
  
  let variance = square_sum / 5  // 200
  
  @azimuth.assert_eq(30, mean)
  @azimuth.assert_eq(200, variance)
}

test "cryptography_simulation" {
  // å¯†ç å­¦æ¨¡æ‹Ÿæµ‹è¯•ï¼šç®€åŒ–çš„å‡¯æ’’å¯†ç 
  // å°†å­—æ¯å‘åç§»åŠ¨3ä½
  
  // æ¨¡æ‹Ÿå­—æ¯è¡¨ä½ç½®ï¼ˆA=0, B=1, ..., Z=25ï¼‰
  let letter_A = 0
  let letter_D = 3
  let letter_X = 23
  let letter_A_shifted = @azimuth.add(letter_X, 3)  // 26ï¼Œåº”è¯¥å¾ªç¯åˆ°0
  let letter_A_wrapped = letter_A_shifted % 26  // 0
  
  @azimuth.assert_eq(0, letter_A_wrapped)
  
  // æµ‹è¯•è§£å¯†ï¼šå‘åç§»åŠ¨3ä½ç­‰äºå‘å‰ç§»åŠ¨23ä½
  let letter_original = @azimuth.add(letter_D, 23)  // 26
  let letter_wrapped = letter_original % 26  // 0
  
  @azimuth.assert_eq(0, letter_wrapped)
}

test "game_logic_simulation" {
  // æ¸¸æˆé€»è¾‘æ¨¡æ‹Ÿæµ‹è¯•ï¼šç®€å•çš„RPGæˆ˜æ–—è®¡ç®—
  
  let player_hp = 100
  let player_attack = 25
  let player_defense = 10
  
  let enemy_hp = 80
  let enemy_attack = 20
  let enemy_defense = 5
  
  // è®¡ç®—å®é™…ä¼¤å®³ï¼šæ”»å‡»åŠ› - é˜²å¾¡åŠ›
  let player_damage = @azimuth.add(player_attack, -enemy_defense)  // 20
  let enemy_damage = @azimuth.add(enemy_attack, -player_defense)   // 10
  
  // ç¬¬ä¸€è½®æˆ˜æ–—
  let enemy_hp_after_round1 = @azimuth.add(enemy_hp, -player_damage)  // 60
  let player_hp_after_round1 = @azimuth.add(player_hp, -enemy_damage) // 90
  
  // ç¬¬äºŒè½®æˆ˜æ–—
  let enemy_hp_after_round2 = @azimuth.add(enemy_hp_after_round1, -player_damage)  // 40
  let player_hp_after_round2 = @azimuth.add(player_hp_after_round1, -enemy_damage) // 80
  
  // ç¬¬ä¸‰è½®æˆ˜æ–—
  let enemy_hp_after_round3 = @azimuth.add(enemy_hp_after_round2, -player_damage)  // 20
  let player_hp_after_round3 = @azimuth.add(player_hp_after_round2, -enemy_damage) // 70
  
  // ç¬¬å››è½®æˆ˜æ–—
  let enemy_hp_after_round4 = @azimuth.add(enemy_hp_after_round3, -player_damage)  // 0
  let player_hp_after_round4 = @azimuth.add(player_hp_after_round3, -enemy_damage) // 60
  
  @azimuth.assert_eq(0, enemy_hp_after_round4)  // æ•Œäººè¢«å‡»è´¥
  @azimuth.assert_eq(60, player_hp_after_round4)  // ç©å®¶å‰©ä½™HP
}

test "financial_compound_interest" {
  // é‡‘èå¤åˆ©è®¡ç®—æµ‹è¯•
  // å…¬å¼ï¼šA = P(1 + r/n)^(nt)
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šA = P(1 + r*t)  ï¼ˆè¿‘ä¼¼è®¡ç®—ï¼‰
  
  let principal = 10000  // æœ¬é‡‘
  let rate_percent = 5   // å¹´åˆ©ç‡5%
  let years = 3          // 3å¹´
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let growth_factor = @azimuth.add(100, @azimuth.multiply(rate_percent, years))  // 115
  let total_amount = @azimuth.multiply(principal, growth_factor) / 100  // 11500
  
  @azimuth.assert_eq(11500, total_amount)
  
  // è®¡ç®—åˆ©æ¯
  let interest = @azimuth.add(total_amount, -principal)
  @azimuth.assert_eq(1500, interest)
}

test "algorithm_complexity_simulation" {
  // ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿæµ‹è¯•ï¼šæ¨¡æ‹Ÿä¸åŒæ—¶é—´å¤æ‚åº¦çš„ç®—æ³•
  
  let n = 10
  
  // O(1) å¸¸æ•°æ—¶é—´
  let constant_time = 1
  
  // O(n) çº¿æ€§æ—¶é—´
  let linear_time = n
  
  // O(n^2) å¹³æ–¹æ—¶é—´
  let quadratic_time = @azimuth.multiply(n, n)
  
  // O(n^3) ç«‹æ–¹æ—¶é—´
  let cubic_time = @azimuth.multiply(@azimuth.multiply(n, n), n)
  
  // O(2^n) æŒ‡æ•°æ—¶é—´ï¼ˆç®€åŒ–ä¸º2çš„næ¬¡æ–¹ï¼‰
  let exponential_time = {
    // æ‰‹åŠ¨è®¡ç®—2^10 = 1024
    @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(
      @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)),
      @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2))), 2), 2)
  }
  
  @azimuth.assert_eq(1, constant_time)
  @azimuth.assert_eq(10, linear_time)
  @azimuth.assert_eq(100, quadratic_time)
  @azimuth.assert_eq(1000, cubic_time)
  @azimuth.assert_eq(1024, exponential_time)
}