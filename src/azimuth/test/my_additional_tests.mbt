// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½

test "add_large_numbers_with_overflow" {
  // æµ‹è¯•å¤§æ•°ç›¸åŠ çš„æº¢å‡ºå¤„ç†
  let max_val = 2147483647
  
  // æµ‹è¯•æ¥è¿‘æœ€å¤§å€¼çš„ç›¸åŠ 
  @azimuth.assert_eq(max_val, @azimuth.add(max_val - 1000, 1000))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val - 1000000, 1000000))
  
  // æµ‹è¯•æœ€å°å€¼é™„è¿‘çš„ç›¸åŠ 
  let min_val = -2147483648
  @azimuth.assert_eq(min_val, @azimuth.add(min_val + 1000, -1000))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val + 1000000, -1000000))
}

test "multiply_with_decimal_simulation" {
  // é€šè¿‡æ•´æ•°è¿ç®—æ¨¡æ‹Ÿå°æ•°ä¹˜æ³•ï¼ˆä¾‹å¦‚ï¼šè®¡ç®—ç™¾åˆ†æ¯”å’ŒæŠ˜æ‰£ï¼‰
  let original_price = 299
  let discount_rate = 15  // 15% æŠ˜æ‰£
  
  // è®¡ç®—æŠ˜æ‰£é‡‘é¢
  let discount_amount = @azimuth.multiply(original_price, discount_rate) / 100
  @azimuth.assert_eq(44, discount_amount)  // 299 * 15 / 100 = 44.85 â‰ˆ 44ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let final_price = @azimuth.add(original_price, -discount_amount)
  @azimuth.assert_eq(255, final_price)  // 299 - 44 = 255
}

test "greet_with_unicode_and_emoji" {
  // æµ‹è¯•åŒ…å« Unicode å­—ç¬¦å’Œ emoji çš„å­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
  @azimuth.assert_eq_string("Hello, ğŸ‘¨â€ğŸ’»!", @azimuth.greet("ğŸ‘¨â€ğŸ’»"))
  @azimuth.assert_eq_string("Hello, ğŸ‰!", @azimuth.greet("ğŸ‰"))
  
  // æµ‹è¯•æ··åˆå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, MoonBitğŸŒ™!", @azimuth.greet("MoonBitğŸŒ™"))
  @azimuth.assert_eq_string("Hello, ä½ å¥½ä¸–ç•ŒğŸŒ!", @azimuth.greet("ä½ å¥½ä¸–ç•ŒğŸŒ"))
}

test "complex_financial_calculation" {
  // å¤æ‚çš„é‡‘èè®¡ç®—åœºæ™¯ï¼šè´·æ¬¾è®¡ç®—
  let principal = 100000  // æœ¬é‡‘
  let annual_rate = 6     // å¹´åˆ©ç‡ 6%
  let years = 10          // è´·æ¬¾å¹´é™
  
  // ç®€åŒ–çš„å•åˆ©è®¡ç®—ï¼šæ€»åˆ©æ¯ = æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years)) / 100
  @azimuth.assert_eq(60000, total_interest)  // 100000 Ã— 6 Ã— 10 / 100 = 60000
  
  // è®¡ç®—æ€»è¿˜æ¬¾é¢
  let total_payment = @azimuth.add(principal, total_interest)
  @azimuth.assert_eq(160000, total_payment)
  
  // è®¡ç®—æœˆä¾›ï¼ˆç®€åŒ–ï¼‰
  let monthly_payment = total_payment / @azimuth.multiply(years, 12)
  @azimuth.assert_eq(1333, monthly_payment)  // 160000 / 120 â‰ˆ 1333
}

test "temperature_conversion_comprehensive" {
  // å…¨é¢çš„æ¸©åº¦è½¬æ¢æµ‹è¯•
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32ï¼ˆç®€åŒ–ä¸ºæ•´æ•°è¿ç®—ï¼šF = C Ã— 2 + 30ï¼‰
  
  // å¸¸è§æ¸©åº¦ç‚¹
  let celsius_temps = [0, 10, 20, 30, 40, 100]
  let expected_fahrenheit = [30, 50, 70, 90, 110, 230]
  
  // æµ‹è¯•å†°ç‚¹
  let freezing_c = 0
  let freezing_f = @azimuth.add(@azimuth.multiply(freezing_c, 2), 30)
  @azimuth.assert_eq(30, freezing_f)
  
  // æµ‹è¯•å®¤æ¸©
  let room_c = 20
  let room_f = @azimuth.add(@azimuth.multiply(room_c, 2), 30)
  @azimuth.assert_eq(70, room_f)
  
  // æµ‹è¯•æ²¸ç‚¹
  let boiling_c = 100
  let boiling_f = @azimuth.add(@azimuth.multiply(boiling_c, 2), 30)
  @azimuth.assert_eq(230, boiling_f)
}

test "shopping_cart_with_tax_and_shipping" {
  // è´­ç‰©è½¦è®¡ç®—ï¼ŒåŒ…å«ç¨è´¹å’Œè¿è´¹
  let item1_price = 199
  let item1_quantity = 2
  let item2_price = 99
  let item2_quantity = 3
  let tax_rate = 8      // 8% ç¨è´¹
  let shipping_fee = 15 // è¿è´¹
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal1 = @azimuth.multiply(item1_price, item1_quantity)  // 398
  let subtotal2 = @azimuth.multiply(item2_price, item2_quantity)  // 297
  let subtotal = @azimuth.add(subtotal1, subtotal2)              // 695
  
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(subtotal, tax_rate) / 100  // 695 * 8 / 100 = 55.6 â‰ˆ 55
  @azimuth.assert_eq(55, tax)
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = @azimuth.add(@azimuth.add(subtotal, tax), shipping_fee)  // 695 + 55 + 15 = 765
  @azimuth.assert_eq(765, total)
}

test "statistical_analysis" {
  // ç»Ÿè®¡åˆ†ææµ‹è¯•
  // æ•°æ®é›†ï¼š[15, 25, 35, 45, 55, 65, 75, 85, 95, 105]
  let data_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(15, 25), 35), 45), 55)
  let data_sum2 = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(65, 75), 85), 95), 105)
  let total_sum = @azimuth.add(data_sum, data_sum2)
  
  // è®¡ç®—å¹³å‡å€¼
  let count = 10
  let mean = total_sum / count
  @azimuth.assert_eq(60, mean)
  
  // è®¡ç®—ä¸­ä½æ•°ï¼ˆå¶æ•°ä¸ªæ•°æ®ï¼Œå–ä¸­é—´ä¸¤ä¸ªçš„å¹³å‡ï¼‰
  let median = @azimuth.add(55, 65) / 2
  @azimuth.assert_eq(60, median)
  
  // è®¡ç®—èŒƒå›´ï¼ˆæœ€å¤§å€¼ - æœ€å°å€¼ï¼‰
  let range = @azimuth.add(105, -15)
  @azimuth.assert_eq(90, range)
}

test "physics_projectile_motion" {
  // ç‰©ç†æŠ›ç‰©è¿åŠ¨è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let initial_velocity = 20  // m/s
  let angle = 45             // åº¦
  let gravity = 10           // m/sÂ²ï¼ˆç®€åŒ–å€¼ï¼‰
  
  // æ°´å¹³é€Ÿåº¦åˆ†é‡ï¼ˆç®€åŒ–ï¼šv Ã— cos(45Â°) â‰ˆ v Ã— 0.7 â‰ˆ v Ã— 7 / 10ï¼‰
  let vx = @azimuth.multiply(initial_velocity, 7) / 10
  @azimuth.assert_eq(14, vx)  // 20 * 7 / 10 = 14
  
  // å‚ç›´é€Ÿåº¦åˆ†é‡ï¼ˆç®€åŒ–ï¼šv Ã— sin(45Â°) â‰ˆ v Ã— 0.7 â‰ˆ v Ã— 7 / 10ï¼‰
  let vy = @azimuth.multiply(initial_velocity, 7) / 10
  @azimuth.assert_eq(14, vy)  // 20 * 7 / 10 = 14
  
  // é£è¡Œæ—¶é—´ï¼ˆç®€åŒ–ï¼š2 Ã— vy / gï¼‰
  let flight_time = @azimuth.multiply(2, vy) / gravity
  @azimuth.assert_eq(2, flight_time)  // 2 * 14 / 10 = 2.8 â‰ˆ 2
  
  // æ°´å¹³è·ç¦»
  let horizontal_distance = @azimuth.multiply(vx, flight_time)
  @azimuth.assert_eq(28, horizontal_distance)  // 14 * 2 = 28
}

test "data_structure_operations" {
  // æ•°æ®ç»“æ„æ“ä½œæ¨¡æ‹Ÿ
  // æ¨¡æ‹Ÿæ•°ç»„ç´¢å¼•è®¡ç®—ï¼šäºŒç»´æ•°ç»„è½¬ä¸€ç»´æ•°ç»„
  let rows = 4
  let cols = 5
  let row_index = 2
  let col_index = 3
  
  // è®¡ç®—ä¸€ç»´æ•°ç»„ç´¢å¼•ï¼šindex = row Ã— cols + col
  let index = @azimuth.add(@azimuth.multiply(row_index, cols), col_index)
  @azimuth.assert_eq(13, index)  // 2 Ã— 5 + 3 = 13
  
  // æ¨¡æ‹Ÿæ ˆæ“ä½œï¼šå‹å…¥å’Œå¼¹å‡º
  let stack_size = 0
  let push_count = 5
  let pop_count = 2
  
  // å‹å…¥æ“ä½œ
  let after_push = @azimuth.add(stack_size, push_count)
  @azimuth.assert_eq(5, after_push)
  
  // å¼¹å‡ºæ“ä½œ
  let after_pop = @azimuth.add(after_push, -pop_count)
  @azimuth.assert_eq(3, after_pop)
}

test "algorithm_complexity_simulation" {
  // ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿ
  let n = 100  // æ•°æ®è§„æ¨¡
  
  // O(1) å¸¸æ•°æ—¶é—´å¤æ‚åº¦
  let constant_time_ops = 1
  @azimuth.assert_eq(1, constant_time_ops)
  
  // O(log n) å¯¹æ•°æ—¶é—´å¤æ‚åº¦ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
  let log_time_ops = 7  // logâ‚‚(100) â‰ˆ 6.64 â‰ˆ 7
  @azimuth.assert_eq(7, log_time_ops)
  
  // O(n) çº¿æ€§æ—¶é—´å¤æ‚åº¦
  let linear_time_ops = n
  @azimuth.assert_eq(100, linear_time_ops)
  
  // O(n log n) æ—¶é—´å¤æ‚åº¦
  let n_log_n_ops = @azimuth.multiply(n, log_time_ops)
  @azimuth.assert_eq(700, n_log_n_ops)
  
  // O(nÂ²) å¹³æ–¹æ—¶é—´å¤æ‚åº¦
  let quadratic_ops = @azimuth.multiply(n, n)
  @azimuth.assert_eq(10000, quadratic_ops)
}