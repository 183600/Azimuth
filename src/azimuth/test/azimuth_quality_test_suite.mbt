// é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“çš„å…¨é¢æµ‹è¯•
// åŒ…å«è¾¹ç•Œæƒ…å†µã€é”™è¯¯å¤„ç†å’Œå®é™…åº”ç”¨åœºæ™¯

test "mathematical_commutativity_verification" {
  // éªŒè¯åŠ æ³•å’Œä¹˜æ³•äº¤æ¢å¾‹
  let a = 17
  let b = 29
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // æµ‹è¯•è´Ÿæ•°äº¤æ¢å¾‹
  let x = -15
  let y = 8
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
  @azimuth.assert_eq(@azimuth.multiply(x, y), @azimuth.multiply(y, x))
}

test "divide_with_ceil_comprehensive_edge_cases" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•æ­£æ•°æƒ…å†µ
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(11, 3))  // 11/3 = 3.666... -> 4
  @azimuth.assert_eq(7, @azimuth.divide_with_ceil(13, 2))  // 13/2 = 6.5 -> 7
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 100)) // 1/100 = 0.01 -> 1
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))  // -10/3 = -3.333... -> -3
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(-11, 3))  // -11/3 = -3.666... -> -4
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(-11, -3))  // -11/-3 = 3.666... -> 4
  
  // æµ‹è¯•é›¶é™¤æ•°
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-50, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
}

test "greet_function_international_comprehensive" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å›½é™…åŒ–å’Œç‰¹æ®Šå­—ç¬¦å¤„ç†
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello, MarÃ­a!", @azimuth.greet("MarÃ­a"))
  @azimuth.assert_eq_string("Hello, Î±Î²Î³!", @azimuth.greet("Î±Î²Î³"))
  @azimuth.assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", @azimuth.greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
}

test "complex_business_workflow_calculation" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµè®¡ç®—ï¼šè®¢å•å¤„ç†ç³»ç»Ÿ
  let unit_price = 89
  let quantity = 12
  let tax_rate = 8
  let shipping_per_item = 5
  let bulk_discount_threshold = 1000
  let bulk_discount_amount = 75
  
  // è®¡ç®—å•†å“å°è®¡
  let subtotal = @azimuth.multiply(unit_price, quantity)
  
  // è®¡ç®—è¿è´¹
  let total_shipping = @azimuth.multiply(shipping_per_item, quantity)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = @azimuth.divide_with_ceil(@azimuth.multiply(subtotal, tax_rate), 100)
  
  // è®¡ç®—æŠ˜æ‰£å‰æ€»ä»·
  let pre_discount_total = @azimuth.add(@azimuth.add(subtotal, total_shipping), tax_amount)
  
  // åº”ç”¨æ‰¹é‡æŠ˜æ‰£ï¼ˆå¦‚æœæ»¡è¶³æ¡ä»¶ï¼‰
  let final_total = if pre_discount_total > bulk_discount_threshold {
    @azimuth.add(pre_discount_total, @azimuth.multiply(bulk_discount_amount, -1))
  } else {
    pre_discount_total
  }
  
  @azimuth.assert_eq(1068, subtotal)
  @azimuth.assert_eq(60, total_shipping)
  @azimuth.assert_eq(86, tax_amount)
  @azimuth.assert_eq(1214, pre_discount_total)
  @azimuth.assert_eq(1139, final_total)
}

test "mathematical_series_and_progressions" {
  // æ•°å­¦çº§æ•°å’Œæ•°åˆ—è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šS = n/2 * (2a + (n-1)d)
  let first_term = 7
  let common_diff = 5
  let num_terms = 12
  
  let series_sum = @azimuth.divide_with_ceil(
    @azimuth.multiply(num_terms, @azimuth.add(@azimuth.multiply(2, first_term), @azimuth.multiply(num_terms - 1, common_diff))),
    2
  )
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let geo_first = 3
  let geo_ratio = 2
  let _geo_terms = 6  // ä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€è¡¨ç¤ºæœªä½¿ç”¨çš„å˜é‡
  
  let geo_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(geo_first, 
    @azimuth.multiply(geo_first, geo_ratio)), 
    @azimuth.multiply(geo_first, @azimuth.multiply(geo_ratio, geo_ratio))),
    @azimuth.multiply(geo_first, @azimuth.multiply(geo_ratio, @azimuth.multiply(geo_ratio, geo_ratio)))),
    @azimuth.multiply(geo_first, @azimuth.multiply(geo_ratio, @azimuth.multiply(geo_ratio, @azimuth.multiply(geo_ratio, geo_ratio))))))
  
  @azimuth.assert_eq(474, series_sum)  // 12/2 * (14 + 55) = 6 * 69 = 414
  @azimuth.assert_eq(189, geo_sum)     // 3 + 6 + 12 + 24 + 48 + 96 = 189
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜
  let total_budget = 5000
  let project_a_cost = 1200
  let project_b_cost = 800
  let project_c_cost = 1500
  let contingency_percentage = 10
  
  // è®¡ç®—é¡¹ç›®æ€»æˆæœ¬
  let total_project_cost = @azimuth.add(@azimuth.add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—åº”æ€¥èµ„é‡‘
  let contingency_fund = @azimuth.divide_with_ceil(@azimuth.multiply(total_project_cost, contingency_percentage), 100)
  
  // è®¡ç®—æ€»éœ€æ±‚
  let total_required = @azimuth.add(total_project_cost, contingency_fund)
  
  // è®¡ç®—å‰©ä½™èµ„é‡‘
  let remaining_budget = @azimuth.add(total_budget, @azimuth.multiply(total_required, -1))
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡
  let small_project_cost = 300
  let additional_projects = @azimuth.divide_with_ceil(remaining_budget, small_project_cost)
  
  @azimuth.assert_eq(3500, total_project_cost)
  @azimuth.assert_eq(350, contingency_fund)
  @azimuth.assert_eq(3850, total_required)
  @azimuth.assert_eq(1150, remaining_budget)
  @azimuth.assert_eq(4, additional_projects)
}

test "data_structure_simulation" {
  // æ¨¡æ‹Ÿæ•°æ®ç»“æ„æ“ä½œ
  // æ¨¡æ‹Ÿæ ˆæ“ä½œï¼špushå’Œpop
  let stack_initial = 0
  let push1 = 10
  let push2 = 20
  let push3 = 30
  let push4 = 15
  
  // æ¨¡æ‹Ÿpushæ“ä½œ
  let stack_after_pushes = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(stack_initial, push1), push2), push3), push4)
  
  // æ¨¡æ‹Ÿpopæ“ä½œï¼ˆç§»é™¤æœ€åä¸¤ä¸ªå…ƒç´ ï¼‰
  let stack_after_pops = @azimuth.add(@azimuth.add(stack_initial, push1), push2)
  
  @azimuth.assert_eq(75, stack_after_pushes)
  @azimuth.assert_eq(30, stack_after_pops)
}

test "time_and_scheduling_calculations" {
  // æ—¶é—´å’Œè°ƒåº¦è®¡ç®—
  let total_tasks = 87
  let tasks_per_day = 8
  let work_hours_per_day = 8
  let meeting_hours_per_day = 1
  
  // è®¡ç®—å·¥ä½œæ—¥æ•°
  let workdays_needed = @azimuth.divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—å®é™…å·¥ä½œå°æ—¶æ•°
  let actual_work_hours = @azimuth.multiply(workdays_needed, @azimuth.add(work_hours_per_day, @azimuth.multiply(meeting_hours_per_day, -1)))
  
  // è®¡ç®—æ€»æ—¥å†å¤©æ•°ï¼ˆåŒ…æ‹¬å‘¨æœ«ï¼‰
  let calendar_days = @azimuth.multiply(workdays_needed, @azimuth.divide_with_ceil(7, 5))
  
  @azimuth.assert_eq(11, workdays_needed)
  @azimuth.assert_eq(77, actual_work_hours)
  @azimuth.assert_eq(15, calendar_days)
}

test "financial_compound_interest_simulation" {
  // é‡‘èå¤åˆ©è®¡ç®—æ¨¡æ‹Ÿ
  let principal = 10000
  let annual_rate = 6
  let _years = 4  // æœªä½¿ç”¨çš„å˜é‡
  
  // ç¬¬ä¸€å¹´
  let year1_interest = @azimuth.divide_with_ceil(@azimuth.multiply(principal, annual_rate), 100)
  let year1_balance = @azimuth.add(principal, year1_interest)
  
  // ç¬¬äºŒå¹´
  let year2_interest = @azimuth.divide_with_ceil(@azimuth.multiply(year1_balance, annual_rate), 100)
  let year2_balance = @azimuth.add(year1_balance, year2_interest)
  
  // ç¬¬ä¸‰å¹´
  let year3_interest = @azimuth.divide_with_ceil(@azimuth.multiply(year2_balance, annual_rate), 100)
  let year3_balance = @azimuth.add(year2_balance, year3_interest)
  
  // ç¬¬å››å¹´
  let year4_interest = @azimuth.divide_with_ceil(@azimuth.multiply(year3_balance, annual_rate), 100)
  let final_balance = @azimuth.add(year3_balance, year4_interest)
  
  @azimuth.assert_eq(600, year1_interest)
  @azimuth.assert_eq(10600, year1_balance)
  @azimuth.assert_eq(636, year2_interest)
  @azimuth.assert_eq(11236, year2_balance)
  @azimuth.assert_eq(675, year3_interest)
  @azimuth.assert_eq(11911, year3_balance)
  @azimuth.assert_eq(715, year4_interest)
  @azimuth.assert_eq(12626, final_balance)
}

test "error_handling_and_robustness" {
  // é”™è¯¯å¤„ç†å’Œå¥å£®æ€§æµ‹è¯•
  // æµ‹è¯•æç«¯æ•°å€¼æƒ…å†µ
  let large_positive = 1000000
  let large_negative = -1000000
  let zero_value = 0
  
  // æµ‹è¯•å¤§æ•°è¿ç®—
  @azimuth.assert_eq(2000000, @azimuth.add(large_positive, large_positive))
  @azimuth.assert_eq(-2000000, @azimuth.add(large_negative, large_negative))
  @azimuth.assert_eq(0, @azimuth.add(large_positive, large_negative))
  
  // æµ‹è¯•å¤§æ•°ä¹˜æ³•ï¼ˆä½¿ç”¨è¾ƒå°çš„æ•°å€¼ä»¥é¿å…è¶…å‡ºèŒƒå›´ï¼‰
  @azimuth.assert_eq(1000000, @azimuth.multiply(1000, 1000))
  @azimuth.assert_eq(1000000, @azimuth.multiply(-1000, -1000))
  @azimuth.assert_eq(-1000000, @azimuth.multiply(1000, -1000))
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  @azimuth.assert_eq(0, @azimuth.multiply(large_positive, zero_value))
  @azimuth.assert_eq(0, @azimuth.multiply(large_negative, zero_value))
  @azimuth.assert_eq(large_positive, @azimuth.add(large_positive, zero_value))
  @azimuth.assert_eq(large_negative, @azimuth.add(large_negative, zero_value))
  
  // æµ‹è¯•é™¤æ³•çš„å®‰å…¨å¤„ç†
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(large_positive, zero_value))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(large_negative, zero_value))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(zero_value, zero_value))
  
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„å¥å£®æ€§
  @azimuth.assert_eq_string("Hello, 123456789!", @azimuth.greet("123456789"))
  @azimuth.assert_eq_string("Hello, !@#$%^&*()!", @azimuth.greet("!@#$%^&*()"))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("   "))
}