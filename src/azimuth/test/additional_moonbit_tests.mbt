// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "addition_mathematical_properties" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 12345
  let b = 67890
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let c = 54321
  let result1 = @azimuth.add(@azimuth.add(a, b), c)
  let result2 = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•åŠ æ³•å•ä½å…ƒï¼ša + 0 = a
  @azimuth.assert_eq(a, @azimuth.add(a, 0))
  @azimuth.assert_eq(b, @azimuth.add(0, b))
}

test "multiplication_mathematical_properties" {
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹ï¼ša Ã— b = b Ã— a
  let a = 123
  let b = 456
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // æµ‹è¯•ä¹˜æ³•ç»“åˆå¾‹ï¼š(a Ã— b) Ã— c = a Ã— (b Ã— c)
  let c = 789
  let result1 = @azimuth.multiply(@azimuth.multiply(a, b), c)
  let result2 = @azimuth.multiply(a, @azimuth.multiply(b, c))
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•ä¹˜æ³•å•ä½å…ƒï¼ša Ã— 1 = a
  @azimuth.assert_eq(a, @azimuth.multiply(a, 1))
  @azimuth.assert_eq(b, @azimuth.multiply(1, b))
  
  // æµ‹è¯•ä¹˜æ³•é›¶å…ƒï¼ša Ã— 0 = 0
  @azimuth.assert_eq(0, @azimuth.multiply(a, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, b))
}

test "string_processing_edge_cases" {
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, @#$%^&*()!", @azimuth.greet("@#$%^&*()"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  
  // æµ‹è¯•åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, 2023!", @azimuth.greet("2023"))
}

test "shopping_cart_calculation" {
  // æµ‹è¯•è´­ç‰©è½¦è®¡ç®—åœºæ™¯
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let shipping_fee = 20
  let discount = 50
  
  // è®¡ç®—æ¯ç§å•†å“çš„æ€»ä»·
  let total1 = @azimuth.multiply(item1_price, item1_quantity)
  let total2 = @azimuth.multiply(item2_price, item2_quantity)
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.add(total1, total2)
  
  // åº”ç”¨æŠ˜æ‰£
  let discounted_total = @azimuth.add(subtotal, -discount)
  
  // æ·»åŠ è¿è´¹
  let final_total = @azimuth.add(discounted_total, shipping_fee)
  
  // éªŒè¯æœ€ç»ˆæ€»ä»·ï¼š299*2 + 199*3 - 50 + 20 = 598 + 597 - 50 + 20 = 1165
  @azimuth.assert_eq(1165, final_total)
}

test "area_and_perimeter_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—ï¼šé¢ç§¯å’Œå‘¨é•¿
  let length = 12
  let width = 8
  
  // è®¡ç®—çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, area)
  
  // è®¡ç®—çŸ©å½¢å‘¨é•¿ï¼š2 Ã— (é•¿ + å®½)
  let perimeter = @azimuth.multiply(2, @azimuth.add(length, width))
  @azimuth.assert_eq(40, perimeter)
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = @azimuth.divide_with_ceil(@azimuth.multiply(base, height), 2)
  @azimuth.assert_eq(30, triangle_area)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 5
  let bottom_base = 15
  let trapezoid_height = 8
  let trapezoid_area = @azimuth.divide_with_ceil(
    @azimuth.multiply(@azimuth.add(top_base, bottom_base), trapezoid_height), 
    2
  )
  @azimuth.assert_eq(80, trapezoid_area)
}

test "numeric_range_validation" {
  // æµ‹è¯•æ­£æ•°èŒƒå›´éªŒè¯
  let positive_sum = @azimuth.add(1000000, 2000000)
  @azimuth.assert_true(positive_sum > 0)
  
  let positive_product = @azimuth.multiply(1000, 1000)
  @azimuth.assert_true(positive_product > 0)
  
  // æµ‹è¯•è´Ÿæ•°èŒƒå›´éªŒè¯
  let negative_sum = @azimuth.add(-1000000, -2000000)
  @azimuth.assert_true(negative_sum < 0)
  
  let negative_product = @azimuth.multiply(-1000, 1000)
  @azimuth.assert_true(negative_product < 0)
  
  // æµ‹è¯•é›¶å€¼éªŒè¯
  @azimuth.assert_eq(0, @azimuth.multiply(0, 123456789))
  @azimuth.assert_eq(123456789, @azimuth.add(0, 123456789))
  
  // æµ‹è¯•è¾¹ç•Œå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
}

test "conditional_logic_scenarios" {
  // æµ‹è¯•åŸºäºæ¯”è¾ƒç»“æœçš„æ¡ä»¶è¿ç®—
  let x = 25
  let y = 30
  let z = 20
  
  // å¦‚æœ x < yï¼Œåˆ™è®¡ç®— x + yï¼Œå¦åˆ™è®¡ç®— x * y
  let condition1 = x < y
  let result1 = if condition1 { @azimuth.add(x, y) } else { @azimuth.multiply(x, y) }
  @azimuth.assert_eq(55, result1)  // 25 < 30 ä¸ºçœŸï¼Œæ‰€ä»¥è®¡ç®— 25 + 30 = 55
  
  // å¦‚æœ x > zï¼Œåˆ™è®¡ç®— x * zï¼Œå¦åˆ™è®¡ç®— x + z
  let condition2 = x > z
  let result2 = if condition2 { @azimuth.multiply(x, z) } else { @azimuth.add(x, z) }
  @azimuth.assert_eq(500, result2)  // 25 > 20 ä¸ºçœŸï¼Œæ‰€ä»¥è®¡ç®— 25 * 20 = 500
  
  // åµŒå¥—æ¡ä»¶ï¼šå¦‚æœ x < y ä¸” y > zï¼Œåˆ™è®¡ç®— x + y + z
  let condition3 = x < y && y > z
  let result3 = if condition3 { 
    @azimuth.add(@azimuth.add(x, y), z) 
  } else { 
    @azimuth.multiply(x, @azimuth.multiply(y, z)) 
  }
  @azimuth.assert_eq(75, result3)  // 25 < 30 ä¸” 30 > 20 ä¸ºçœŸï¼Œæ‰€ä»¥è®¡ç®— 25 + 30 + 20 = 75
}

test "data_conversion_scenarios" {
  // æµ‹è¯•æ•°å€¼åˆ°å­—ç¬¦ä¸²çš„é—´æ¥è½¬æ¢ï¼ˆé€šè¿‡greetå‡½æ•°ï¼‰
  let number = 42
  let number_str = "42"
  let result1 = @azimuth.greet(number_str)
  @azimuth.assert_eq_string("Hello, 42!", result1)
  
  // æµ‹è¯•å¸ƒå°”å€¼åœºæ™¯ï¼ˆé€šè¿‡å­—ç¬¦ä¸²è¡¨ç¤ºï¼‰
  let true_str = "true"
  let false_str = "false"
  @azimuth.assert_eq_string("Hello, true!", @azimuth.greet(true_str))
  @azimuth.assert_eq_string("Hello, false!", @azimuth.greet(false_str))
  
  // æµ‹è¯•æµ®ç‚¹æ•°çš„ç®€åŒ–è¡¨ç¤ºï¼ˆä½¿ç”¨æ•´æ•°è¡¨ç¤ºå°æ•°éƒ¨åˆ†ï¼‰
  let pi_approx_str = "3.14"
  @azimuth.assert_eq_string("Hello, 3.14!", @azimuth.greet(pi_approx_str))
  
  // æµ‹è¯•æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
  let date_str = "2023-12-25"
  let time_str = "14:30:00"
  @azimuth.assert_eq_string("Hello, 2023-12-25!", @azimuth.greet(date_str))
  @azimuth.assert_eq_string("Hello, 14:30:00!", @azimuth.greet(time_str))
}

test "error_handling_validation" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„æ­£å¸¸ä½¿ç”¨
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_eq(100, 100)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µçš„æ­£ç¡®å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ç¡®ä¿æº¢å‡ºè¢«æ­£ç¡®å¤„ç†
  @azimuth.assert_true(@azimuth.add(max_val, 1) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -1) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•æ­£å¸¸è¿ç®—ç»“æœ
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_true(@azimuth.multiply(4, 6) == 24)
  @azimuth.assert_true(@azimuth.greet("Test") == "Hello, Test!")
  
  // æµ‹è¯•ç‰¹æ®Šå€¼çš„å¤„ç†
  @azimuth.assert_true(@azimuth.multiply(0, 0) == 0)
  @azimuth.assert_true(@azimuth.add(0, 0) == 0)
  @azimuth.assert_true(@azimuth.multiply(1, 1) == 1)
  @azimuth.assert_true(@azimuth.add(1, 0) == 1)
}

test "performance_related_calculations" {
  // æµ‹è¯•å¤§é‡æ•°æ®çš„ç´¯åŠ è®¡ç®—
  let base_value = 100
  let count = 100
  
  // ä½¿ç”¨å…¬å¼è®¡ç®—ï¼šbase_value Ã— (1 + 2 + ... + count) = base_value Ã— count Ã— (count + 1) / 2
  let sum_total = @azimuth.multiply(
    base_value, 
    @azimuth.divide_with_ceil(@azimuth.multiply(count, @azimuth.add(count, 1)), 2)
  )
  
  // éªŒè¯è®¡ç®—ç»“æœï¼š100 Ã— 100 Ã— 101 / 2 = 505000
  @azimuth.assert_eq(505000, sum_total)
  
  // æµ‹è¯•æŒ‡æ•°å¢é•¿è®¡ç®—
  let initial_value = 2
  let periods = 8
  
  // è®¡ç®—ï¼š2^8 = 256
  let power_result = @azimuth.multiply(
    @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)), 
    @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2))
  )
  @azimuth.assert_eq(256, power_result)
  
  // æµ‹è¯•é˜¶ä¹˜è®¡ç®—ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let n = 5
  let factorial_result = @azimuth.multiply(
    n, 
    @azimuth.multiply(
      n - 1, 
      @azimuth.multiply(n - 2, @azimuth.multiply(n - 3, n - 4))
    )
  )
  @azimuth.assert_eq(120, factorial_result)
}