// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæµ‹è¯• azimuth æ¨¡å—çš„å„ç§åŠŸèƒ½

test "large_number_operations" {
  // æµ‹è¯•å¤§æ•°è¿ç®—
  let large_num1 = 1000000
  let large_num2 = 2000000
  
  // å¤§æ•°ç›¸åŠ 
  let sum_result = @azimuth.add(large_num1, large_num2)
  @azimuth.assert_eq(3000000, sum_result)
  
  // å¤§æ•°ç›¸ä¹˜
  let product_result = @azimuth.multiply(1000, 1000)
  @azimuth.assert_eq(1000000, product_result)
  
  // å¤§æ•°ä¸è¾¹ç•Œå€¼ç»„åˆ
  let max_val = 2147483647
  let large_sum = @azimuth.add(max_val, large_num1)
  @azimuth.assert_eq(max_val, large_sum)  // åº”è¯¥æº¢å‡ºåˆ°æœ€å¤§å€¼
}

test "boundary_condition_combinations" {
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  let zero = 0
  let one = 1
  let neg_one = -1
  
  // æœ€å¤§å€¼ä¸å„ç§å€¼çš„ç»„åˆ
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, zero))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, one))
  @azimuth.assert_eq(min_val, @azimuth.multiply(max_val, neg_one))
  
  // æœ€å°å€¼ä¸å„ç§å€¼çš„ç»„åˆ
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, zero))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, one))
  @azimuth.assert_eq(max_val, @azimuth.multiply(min_val, neg_one))
  
  // è¿ç»­è¾¹ç•Œè¿ç®—
  let chain_result = @azimuth.add(@azimuth.multiply(@azimuth.add(max_val, min_val), one), max_val)
  @azimuth.assert_eq(max_val, chain_result)
}

test "ecommerce_business_logic" {
  // æµ‹è¯•ç”µå•†ä¸šåŠ¡é€»è¾‘
  let product_price = 199
  let quantity = 3
  let discount_threshold = 500
  let discount_rate = 10
  let shipping_fee = 20
  let tax_rate = 8
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(product_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£ï¼ˆå¦‚æœè¶…è¿‡é˜ˆå€¼ï¼‰
  let discount_amount = if (subtotal > discount_threshold) {
    @azimuth.multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_total = @azimuth.add(subtotal, -discount_amount)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = @azimuth.multiply(discounted_total, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let final_total = @azimuth.add(@azimuth.add(discounted_total, tax_amount), shipping_fee)
  
  @azimuth.assert_eq(1076, final_total)
  
  // æµ‹è¯•å°é¢è®¢å•ï¼ˆæ— æŠ˜æ‰£ï¼‰
  let small_price = 50
  let small_quantity = 2
  let small_subtotal = @azimuth.multiply(small_price, small_quantity)
  let small_final = @azimuth.add(@azimuth.add(small_subtotal, @azimuth.multiply(small_subtotal, tax_rate) / 100), shipping_fee)
  
  @azimuth.assert_eq(127, small_final)
}

test "advanced_string_processing" {
  // æµ‹è¯•é«˜çº§å­—ç¬¦ä¸²å¤„ç†
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "!@#$%^&*()_+-={}[]|\\:;\"'<>?,./"
  let result1 = @azimuth.greet(special_chars)
  @azimuth.assert_eq_string("Hello, !@#$%^&*()_+-={}[]|\\:;\"'<>?,.//!", result1)
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  let unicode_text = "Helloä¸–ç•ŒğŸŒ"
  let result2 = @azimuth.greet(unicode_text)
  @azimuth.assert_eq_string("Hello, Helloä¸–ç•ŒğŸŒ!", result2)
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  let alphanumeric = "User2023ProjectX"
  let result3 = @azimuth.greet(alphanumeric)
  @azimuth.assert_eq_string("Hello, User2023ProjectX!", result3)
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  let spaced_text = "  Leading and trailing spaces  "
  let result4 = @azimuth.greet(spaced_text)
  @azimuth.assert_eq_string("Hello,   Leading and trailing spaces  !", result4)
}

test "mathematical_formula_validation" {
  // æµ‹è¯•æ•°å­¦å…¬å¼éªŒè¯
  let a = 6
  let b = 4
  
  // éªŒè¯åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let c = 5
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left_side, right_side)
  
  // éªŒè¯å¹³æ–¹å·®å…¬å¼ï¼š(a + b) Ã— (a - b) = aÂ² - bÂ²
  let sum = @azimuth.add(a, b)
  let diff = @azimuth.add(a, -b)
  let product = @azimuth.multiply(sum, diff)
  let square_diff = @azimuth.add(@azimuth.multiply(a, a), @azimuth.multiply(-b, b))
  @azimuth.assert_eq(product, square_diff)
  
  // éªŒè¯ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let d = 3
  let left_associative = @azimuth.add(@azimuth.add(a, b), c)
  let right_associative = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(left_associative, right_associative)
}

test "performance_calculations" {
  // æµ‹è¯•æ€§èƒ½ç›¸å…³è®¡ç®—
  let base_value = 100
  let iterations = 1000
  
  // æ¨¡æ‹Ÿç´¯åŠ è®¡ç®—ï¼šbase_value + base_value*2 + ... + base_value*iterations
  // ä½¿ç”¨å…¬å¼ï¼šbase_value Ã— (1 + 2 + ... + iterations) = base_value Ã— iterations Ã— (iterations + 1) / 2
  let sum_formula = @azimuth.multiply(base_value, @azimuth.multiply(iterations, @azimuth.add(iterations, 1)) / 2)
  
  // éªŒè¯å‰å‡ é¡¹çš„è®¡ç®—
  let sum_first_10 = @azimuth.multiply(base_value, @azimuth.multiply(10, 11) / 2)
  @azimuth.assert_eq(5500, sum_first_10)
  
  // éªŒè¯æ€»å’Œ
  @azimuth.assert_eq(500500, sum_formula)
  
  // æ¨¡æ‹ŸæŒ‡æ•°å¢é•¿è®¡ç®—
  let growth_factor = 2
  let periods = 8
  let initial_amount = 100
  
  // è®¡ç®—ï¼šinitial_amount Ã— growth_factor^periods
  let exponential_growth = @azimuth.multiply(initial_amount, @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)))))
  @azimuth.assert_eq(25600, exponential_growth)
}

test "error_handling_robustness" {
  // æµ‹è¯•é”™è¯¯å¤„ç†çš„å¥å£®æ€§
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å„ç§æº¢å‡ºæƒ…å†µçš„ä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  
  // æµ‹è¯•ç‰¹æ®Šè¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„å®¹é”™æ€§
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_false(@azimuth.add(5, 3) == 9)
  @azimuth.assert_eq(8, @azimuth.add(5, 3))
  @azimuth.assert_eq_string("Hello, ErrorTest!", @azimuth.greet("ErrorTest"))
  
  // æµ‹è¯•å¤æ‚æ¡ä»¶ä¸‹çš„é”™è¯¯å¤„ç†
  let complex_result = @azimuth.add(@azimuth.multiply(@azimuth.add(max_val, -max_val), 100), max_val)
  @azimuth.assert_eq(max_val, complex_result)
}

test "data_conversion_scenarios" {
  // æµ‹è¯•æ•°æ®è½¬æ¢åœºæ™¯
  // æ¨¡æ‹Ÿæ•´æ•°åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼ˆé€šè¿‡greetå‡½æ•°ï¼‰
  let number = 2024
  let number_as_string = "2024"
  let converted_greeting = @azimuth.greet(number_as_string)
  
  @azimuth.assert_eq_string("Hello, 2024!", converted_greeting)
  
  // æ¨¡æ‹Ÿå¸ƒå°”å€¼åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢
  let true_as_string = "true"
  let false_as_string = "false"
  
  @azimuth.assert_eq_string("Hello, true!", @azimuth.greet(true_as_string))
  @azimuth.assert_eq_string("Hello, false!", @azimuth.greet(false_as_string))
  
  // æ¨¡æ‹Ÿæµ®ç‚¹æ•°çš„ç®€åŒ–è¡¨ç¤ºï¼ˆä½¿ç”¨æ•´æ•°è¡¨ç¤ºå°æ•°éƒ¨åˆ†ï¼‰
  let pi_approx_string = "3.14"
  
  @azimuth.assert_eq_string("Hello, 3.14!", @azimuth.greet(pi_approx_string))
  
  // æ¨¡æ‹Ÿæ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
  let date_string = "2024-01-15 14:30:00"
  @azimuth.assert_eq_string("Hello, 2024-01-15 14:30:00!", @azimuth.greet(date_string))
}

test "algorithm_implementation" {
  // æµ‹è¯•ç®—æ³•å®ç°
  // è®¡ç®—é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let n = 5
  let factorial_result = @azimuth.multiply(n, @azimuth.multiply(n - 1, @azimuth.multiply(n - 2, @azimuth.multiply(n - 3, n - 4))))
  @azimuth.assert_eq(120, factorial_result)
  
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ç¬¬10é¡¹ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // F(10) = F(9) + F(8) = 34 + 21 = 55
  let fib_8 = 21
  let fib_9 = 34
  let fib_10 = @azimuth.add(fib_9, fib_8)
  @azimuth.assert_eq(55, fib_10)
  
  // è®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆä½¿ç”¨æ¬§å‡ é‡Œå¾—ç®—æ³•çš„ç®€åŒ–ç‰ˆæœ¬ï¼‰
  // gcd(48, 18) = gcd(18, 48 % 18) = gcd(18, 12) = gcd(12, 6) = 6
  let a = 48
  let b = 18
  let remainder = a % b  // 48 % 18 = 12
  let next_remainder = b % remainder  // 18 % 12 = 6
  let gcd = next_remainder  // ç®€åŒ–ç‰ˆæœ¬ï¼Œå‡è®¾å·²ç»æ‰¾åˆ°æœ€å¤§å…¬çº¦æ•°
  @azimuth.assert_eq(6, gcd)
  
  // è®¡ç®—å¹‚ï¼š2^10 = 1024
  let power_result = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)))), 4)
  @azimuth.assert_eq(1024, power_result)
}

test "real_world_simulation" {
  // æµ‹è¯•çœŸå®ä¸–ç•Œæ¨¡æ‹Ÿåœºæ™¯
  // åœºæ™¯1ï¼šè®¡ç®—æ±½è½¦æ—…ç¨‹
  let distance = 300  // å…¬é‡Œ
  let fuel_efficiency = 15  // æ¯å‡æ±½æ²¹è¡Œé©¶çš„å…¬é‡Œæ•°
  let fuel_price = 8  // æ¯å‡æ±½æ²¹ä»·æ ¼
  
  // è®¡ç®—æ‰€éœ€ç‡ƒæ–™
  let fuel_needed = distance / fuel_efficiency  // 20å‡
  let fuel_cost = @azimuth.multiply(fuel_needed, fuel_price)  // 160å…ƒ
  
  @azimuth.assert_eq(20, fuel_needed)
  @azimuth.assert_eq(160, fuel_cost)
  
  // åœºæ™¯2ï¼šè®¡ç®—BMIï¼ˆç®€åŒ–ç‰ˆï¼Œé¿å…æµ®ç‚¹æ•°ï¼‰
  let weight_kg = 70  // ä½“é‡ï¼ˆå…¬æ–¤ï¼‰
  let height_cm = 175  // èº«é«˜ï¼ˆå˜ç±³ï¼‰
  let height_m_squared = @azimuth.multiply(height_cm / 100, height_cm / 100)  // èº«é«˜ç±³çš„å¹³æ–¹
  let bmi_index = @azimuth.multiply(weight_kg, 10000) / height_m_squared  // BMI Ã— 100ï¼ˆé¿å…å°æ•°ï¼‰
  
  @azimuth.assert_eq(22857, bmi_index)  // å®é™…BMIä¸º22.857ï¼Œè¿™é‡Œå­˜å‚¨ä¸º22857
  
  // åœºæ™¯3ï¼šè®¡ç®—è´·æ¬¾æœˆä¾›ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let loan_amount = 100000  // è´·æ¬¾é‡‘é¢
  let annual_rate = 6  // å¹´åˆ©ç‡ç™¾åˆ†æ¯”
  let loan_years = 20  // è´·æ¬¾å¹´é™
  
  // ç®€åŒ–çš„æœˆä¾›è®¡ç®—ï¼šæ€»é‡‘é¢ / æ€»æœˆæ•°
  let total_months = @azimuth.multiply(loan_years, 12)
  let total_interest = @azimuth.multiply(loan_amount, @azimuth.multiply(annual_rate, loan_years)) / 100
  let total_payment = @azimuth.add(loan_amount, total_interest)
  let monthly_payment = total_payment / total_months
  
  @azimuth.assert_eq(240, total_months)
  @azimuth.assert_eq(120000, total_interest)
  @azimuth.assert_eq(220000, total_payment)
  @azimuth.assert_eq(916, monthly_payment)  // ç®€åŒ–è®¡ç®—çš„æœˆä¾›
}