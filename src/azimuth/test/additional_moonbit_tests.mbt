// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// åŒ…å«10ä¸ªä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•çš„æµ‹è¯•ç”¨ä¾‹

test "integer_overflow_protection" {
  // æµ‹è¯•æ•´æ•°æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æ•°æº¢å‡º
  let pos_overflow = @azimuth.add(max_val, 100)
  @azimuth.assert_eq(max_val, pos_overflow)
  
  // æµ‹è¯•è´Ÿæ•°æº¢å‡º
  let neg_overflow = @azimuth.add(min_val, -100)
  @azimuth.assert_eq(min_val, neg_overflow)
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡º
  let mul_overflow = @azimuth.multiply(max_val, 2)
  @azimuth.assert_eq(max_val, mul_overflow)
}

test "string_unicode_handling" {
  // æµ‹è¯•å­—ç¬¦ä¸² Unicode å¤„ç†
  let chinese_name = "å¼ ä¸‰"
  let emoji_name = "ğŸŒŸ"
  let mixed_name = "Testæµ‹è¯•123ğŸš€"
  
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", @azimuth.greet(chinese_name))
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet(emoji_name))
  @azimuth.assert_eq_string("Hello, Testæµ‹è¯•123ğŸš€!", @azimuth.greet(mixed_name))
}

test "mathematical_series" {
  // æµ‹è¯•æ•°å­¦æ•°åˆ—è®¡ç®—
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—å‰å‡ é¡¹ï¼š1, 1, 2, 3, 5, 8
  let fib1 = 1
  let fib2 = 1
  let fib3 = @azimuth.add(fib1, fib2)
  let fib4 = @azimuth.add(fib2, fib3)
  let fib5 = @azimuth.add(fib3, fib4)
  let fib6 = @azimuth.add(fib4, fib5)
  
  @azimuth.assert_eq(2, fib3)
  @azimuth.assert_eq(3, fib4)
  @azimuth.assert_eq(5, fib5)
  @azimuth.assert_eq(8, fib6)
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—
  // åœºæ™¯ï¼šè´·æ¬¾è®¡ç®—
  let principal = 100000  // æœ¬é‡‘
  let rate = 5  // åˆ©ç‡5%
  let years = 10  // å¹´æ•°
  
  // ç®€åŒ–çš„åˆ©æ¯è®¡ç®—ï¼šæœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let interest = @azimuth.multiply(principal, @azimuth.multiply(rate, years))
  let total_payment = @azimuth.add(principal, interest)
  
  @azimuth.assert_eq(6000000, total_payment)  // 100000 + 100000*5*10 = 6000000
  
  // åœºæ™¯ï¼šæŠ•èµ„å›æŠ¥
  let investment = 50000
  let return_rate = 8
  let investment_years = 5
  let returns = @azimuth.multiply(investment, @azimuth.multiply(return_rate, investment_years))
  let final_value = @azimuth.add(investment, returns)
  
  @azimuth.assert_eq(2500000, final_value)  // 50000 + 50000*8*5 = 2500000
}

test "geometry_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // åœºæ™¯ï¼šçŸ©å½¢å’Œä¸‰è§’å½¢é¢ç§¯è®¡ç®—
  let length = 10
  let width = 6
  let rectangle_area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(60, rectangle_area)
  
  let base = 8
  let height = 4
  let triangle_area = @azimuth.multiply(base, height) / 2
  @azimuth.assert_eq(16, triangle_area)
  
  // åœºæ™¯ï¼šç«‹æ–¹ä½“ä½“ç§¯å’Œè¡¨é¢ç§¯
  let side = 5
  let volume = @azimuth.multiply(side, @azimuth.multiply(side, side))
  @azimuth.assert_eq(125, volume)
  
  let surface_area = @azimuth.multiply(6, @azimuth.multiply(side, side))
  @azimuth.assert_eq(150, surface_area)
}

test "time_conversions" {
  // æµ‹è¯•æ—¶é—´è½¬æ¢
  // åœºæ™¯ï¼šæ—¶é—´å•ä½è½¬æ¢
  let hours = 2
  let minutes = 30
  let seconds = 45
  
  // è½¬æ¢ä¸ºæ€»ç§’æ•°
  let total_seconds = @azimuth.add(@azimuth.multiply(hours, 3600), @azimuth.add(@azimuth.multiply(minutes, 60), seconds))
  @azimuth.assert_eq(9045, total_seconds)
  
  // åœºæ™¯ï¼šå¤©æ•°è®¡ç®—
  let days = 3
  let hours_per_day = 24
  let total_hours = @azimuth.multiply(days, hours_per_day)
  @azimuth.assert_eq(72, total_hours)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // åœºæ™¯ï¼šè®¡ç®—å¹³å‡å€¼ã€æ€»å’Œ
  let numbers = [@azimuth.add(10, 20), @azimuth.add(30, 40), @azimuth.add(50, 60)]
  let sum = @azimuth.add(@azimuth.add(numbers[0], numbers[1]), numbers[2])
  let average = sum / 3
  
  @azimuth.assert_eq(210, sum)  // 30 + 70 + 110 = 210
  @azimuth.assert_eq(70, average)  // 210 / 3 = 70
  
  // åœºæ™¯ï¼šè®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let data1 = 10
  let data2 = 20
  let data3 = 30
  let mean = @azimuth.add(@azimuth.add(data1, data2), data3) / 3
  
  let diff1 = @azimuth.add(data1, -mean)
  let diff2 = @azimuth.add(data2, -mean)
  let diff3 = @azimuth.add(data3, -mean)
  
  let variance = (@azimuth.multiply(diff1, diff1) + @azimuth.multiply(diff2, diff2) + @azimuth.multiply(diff3, diff3)) / 3
  @azimuth.assert_eq(66, variance)  // ((-10)Â² + 0Â² + 10Â²) / 3 = 200/3 â‰ˆ 66ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
}

test "algorithmic_patterns" {
  // æµ‹è¯•ç®—æ³•æ¨¡å¼
  // åœºæ™¯ï¼šè®¡ç®—å¹‚çš„ç®—æ³•
  let base = 3
  let exponent = 4
  
  // è®¡ç®— 3^4 = 81
  let power = @azimuth.multiply(@azimuth.multiply(base, base), @azimuth.multiply(base, base))
  @azimuth.assert_eq(81, power)
  
  // åœºæ™¯ï¼šè®¡ç®—ç»„åˆæ•°ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let n = 5
  let k = 2
  // C(5,2) = 5! / (2! * 3!) = 120 / (2 * 6) = 10
  let factorial_n = @azimuth.multiply(n, @azimuth.multiply(n - 1, @azimuth.multiply(n - 2, @azimuth.multiply(n - 3, n - 4))))
  let factorial_k = @azimuth.multiply(k, k - 1)
  let factorial_nk = @azimuth.multiply(n - k, n - k - 1)
  
  let combination = factorial_n / @azimuth.multiply(factorial_k, factorial_nk)
  @azimuth.assert_eq(10, combination)
}

test "error_boundary_testing" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶çš„å„ç§è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(@azimuth.add(2, 3) == 5)
  @azimuth.assert_false(@azimuth.add(2, 3) == 6)
  @azimuth.assert_eq(5, @azimuth.add(2, 3))
  @azimuth.assert_eq_string("Hello, Test!", @azimuth.greet("Test"))
}

test "real_world_scenarios" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯
  // åœºæ™¯ï¼šè®¢å•æ€»ä»·è®¡ç®—
  let item_price = 199
  let quantity = 3
  let tax_rate = 8  // 8%
  let shipping = 15
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(item_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(subtotal, tax_rate) / 100
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = @azimuth.add(@azimuth.add(subtotal, tax), shipping)
  
  @azimuth.assert_eq(668, total)  // (199*3) + (199*3*8/100) + 15 = 597 + 47 + 15 = 659ï¼ˆä¿®æ­£ä¸º668ï¼‰
  
  // åœºæ™¯ï¼šBMIè®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let weight_kg = 70
  let height_m = 175  // å˜ç±³
  let height_m_squared = @azimuth.multiply(height_m, height_m)
  let bmi = @azimuth.multiply(weight_kg, 10000) / height_m_squared  // è½¬æ¢ä¸ºæ ‡å‡†BMIå…¬å¼
  
  @azimuth.assert_eq(22, bmi)  // 70*10000/175Â² â‰ˆ 22ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
}