// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// åŒ…å« 8 ä¸ªé’ˆå¯¹ç‰¹å®šåœºæ™¯çš„æµ‹è¯•ç”¨ä¾‹

test "divide_with_ceil_functionality" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•åŠŸèƒ½
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(10, 4))     // 10/4 = 2.5 -> 3
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(8, 4))      // 8/4 = 2 -> 2
  @azimuth.assert_eq(5, @azimuth.divide_with_ceil(9, 2))      // 9/2 = 4.5 -> 5
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 5))      // 0/5 = 0 -> 0
  @azimuth.assert_eq(-2, @azimuth.divide_with_ceil(-8, 4))    // -8/4 = -2 -> -2
}

test "extreme_overflow_scenarios" {
  // æµ‹è¯•æç«¯æº¢å‡ºåœºæ™¯
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸è‡ªèº«ç›¸åŠ 
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // æœ€å°å€¼ä¸è‡ªèº«ç›¸åŠ 
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  
  // æœ€å¤§å€¼ä¸æœ€å¤§å€¼ç›¸ä¹˜
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, max_val))
  
  // æœ€å°å€¼ä¸2ç›¸ä¹˜
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
}

test "string_processing_with_special_chars" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²å¤„ç†
  let unicode_name = "ğŸš€MoonBitğŸŒŸ"
  @azimuth.assert_eq_string("Hello, ğŸš€MoonBitğŸŒŸ!", @azimuth.greet(unicode_name))
  
  let whitespace_name = "  \t\n  "
  @azimuth.assert_eq_string("Hello,  	\n  !", @azimuth.greet(whitespace_name))
  
  let emoji_combo = "ğŸ˜€ğŸ‰ğŸŠ"
  @azimuth.assert_eq_string("Hello, ğŸ˜€ğŸ‰ğŸŠ!", @azimuth.greet(emoji_combo))
}

test "mathematical_series_calculations" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼š1 + 4 + 7 + 10 + 13
  let n = 5
  let first_term = 1
  let common_diff = 3
  let sum = @azimuth.multiply(n, @azimuth.add(@azimuth.multiply(first_term, 2), @azimuth.multiply(common_diff, n - 1))) / 2
  @azimuth.assert_eq(35, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹ç§¯ï¼š2 Ã— 4 Ã— 8 Ã— 16
  let product = @azimuth.multiply(2, @azimuth.multiply(4, @azimuth.multiply(8, 16)))
  @azimuth.assert_eq(1024, product)
}

test "business_calculation_scenarios" {
  // æµ‹è¯•å•†ä¸šè®¡ç®—åœºæ™¯
  // è®¡ç®—æŠ˜æ‰£ä»·æ ¼ï¼šåŸä»· Ã— (1 - æŠ˜æ‰£ç‡)
  let original_price = 1000
  let discount_rate = 20  // 20%
  let discounted_price = @azimuth.multiply(original_price, @azimuth.add(100, -discount_rate)) / 100
  @azimuth.assert_eq(800, discounted_price)
  
  // è®¡ç®—åˆ©æ¶¦ï¼šå”®ä»· - æˆæœ¬
  let selling_price = 1500
  let cost_price = 1000
  let profit = @azimuth.add(selling_price, -cost_price)
  @azimuth.assert_eq(500, profit)
  
  // è®¡ç®—åˆ©æ¶¦ç‡ï¼šåˆ©æ¶¦ / æˆæœ¬ Ã— 100%
  let profit_rate = @azimuth.multiply(profit, 100) / cost_price
  @azimuth.assert_eq(50, profit_rate)
}

test "time_based_calculations" {
  // æµ‹è¯•åŸºäºæ—¶é—´çš„è®¡ç®—
  // è®¡ç®—æ€»ç§’æ•°ï¼šå°æ—¶ Ã— 3600 + åˆ†é’Ÿ Ã— 60 + ç§’
  let hours = 2
  let minutes = 30
  let seconds = 45
  let total_seconds = @azimuth.add(@azimuth.multiply(hours, 3600), @azimuth.add(@azimuth.multiply(minutes, 60), seconds))
  @azimuth.assert_eq(9045, total_seconds)
  
  // è®¡ç®—æ—¶é—´å·®ï¼šç»“æŸæ—¶é—´ - å¼€å§‹æ—¶é—´ï¼ˆä»¥åˆ†é’Ÿè®¡ï¼‰
  let start_hour = 9
  let start_min = 15
  let end_hour = 14
  let end_min = 45
  let start_total = @azimuth.add(@azimuth.multiply(start_hour, 60), start_min)
  let end_total = @azimuth.add(@azimuth.multiply(end_hour, 60), end_min)
  let duration = @azimuth.add(end_total, -start_total)
  @azimuth.assert_eq(330, duration)
}

test "nested_function_compositions" {
  // æµ‹è¯•åµŒå¥—å‡½æ•°ç»„åˆ
  let base = 10
  
  // è®¡ç®—ï¼š((base + 5) Ã— 2) - 3
  let step1 = @azimuth.add(base, 5)      // 15
  let step2 = @azimuth.multiply(step1, 2) // 30
  let result = @azimuth.add(step2, -3)    // 27
  @azimuth.assert_eq(27, result)
  
  // è®¡ç®—ï¼šgreet(greet("test")çš„å‰5ä¸ªå­—ç¬¦)çš„ç®€åŒ–ç‰ˆæœ¬
  let inner = @azimuth.greet("test")     // "Hello, test!"
  let outer = @azimuth.greet("User")     // "Hello, User!"
  @azimuth.assert_eq_string("Hello, User!", outer)
}

test "error_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ç¡®ä¿è¾¹ç•Œå€¼è¿ç®—çš„å®‰å…¨æ€§
  @azimuth.assert_true(@azimuth.add(max_val, 1) <= max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -1) >= min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) <= max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, 2) >= min_val)
  
  // ç¡®ä¿æ­£å¸¸è¿ç®—çš„æ­£ç¡®æ€§
  @azimuth.assert_eq(100, @azimuth.add(50, 50))
  @azimuth.assert_eq(100, @azimuth.multiply(10, 10))
  @azimuth.assert_eq_string("Hello, Boundary!", @azimuth.greet("Boundary"))
}