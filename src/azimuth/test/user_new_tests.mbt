// ç”¨æˆ·æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "add_overflow_protection" {
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ­£æ•°æº¢å‡ºæµ‹è¯•
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // è´Ÿæ•°æº¢å‡ºæµ‹è¯•
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
}

test "multiply_overflow_protection" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ­£æ•°ä¹˜æ³•æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.multiply(46341, 46341))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  
  // è´Ÿæ•°ä¹˜æ³•æº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.multiply(-46341, 46341))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  
  // ç‰¹æ®Šæƒ…å†µï¼šæœ€å°å€¼ä¹˜ä»¥-1
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "greet_unicode_support" {
  // æµ‹è¯• greet å‡½æ•°çš„ Unicode æ”¯æŒ
  @azimuth.assert_eq_string(@azimuth.greet("ä¸–ç•Œ"), "Hello, ä¸–ç•Œ!")
  @azimuth.assert_eq_string(@azimuth.greet("ğŸŒ"), "Hello, ğŸŒ!")
  @azimuth.assert_eq_string(@azimuth.greet("cafÃ©"), "Hello, cafÃ©!")
  @azimuth.assert_eq_string(@azimuth.greet("naÃ¯ve"), "Hello, naÃ¯ve!")
  @azimuth.assert_eq_string(@azimuth.greet("ğŸš€ğŸŒ•"), "Hello, ğŸš€ğŸŒ•!")
}

test "divide_with_ceil_edge_cases" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  // æ­£æ•°æµ‹è¯•
  @azimuth.assert_eq(@azimuth.divide_with_ceil(10, 3), 4)
  @azimuth.assert_eq(@azimuth.divide_with_ceil(9, 3), 3)
  @azimuth.assert_eq(@azimuth.divide_with_ceil(1, 1), 1)
  
  // è´Ÿæ•°æµ‹è¯•
  @azimuth.assert_eq(@azimuth.divide_with_ceil(-10, 3), -3)
  @azimuth.assert_eq(@azimuth.divide_with_ceil(-9, 3), -3)
  @azimuth.assert_eq(@azimuth.divide_with_ceil(-1, 1), -1)
  
  // é›¶æµ‹è¯•
  @azimuth.assert_eq(@azimuth.divide_with_ceil(0, 5), 0)
}

test "complex_financial_calculation" {
  // æµ‹è¯•å¤æ‚é‡‘èè®¡ç®—åœºæ™¯
  // è´·æ¬¾è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + æœˆåˆ©ç‡) ^ æœˆæ•°
  let principal = 100000
  let monthly_rate = 1  // 1%
  let months = 12
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let monthly_factor = @azimuth.add(100, monthly_rate)
  let total_factor = monthly_factor  // ç®€åŒ–ä¸ºå•åˆ©
  let total_amount = @azimuth.multiply(principal, total_factor)
  
  @azimuth.assert_eq(10100000, total_amount)
}

test "geometric_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 10
  let bottom_base = 20
  let height = 5
  
  let sum_bases = @azimuth.add(top_base, bottom_base)
  let product = @azimuth.multiply(sum_bases, height)
  let trapezoid_area = product / 2
  
  @azimuth.assert_eq(75, trapezoid_area)
  
  // è®¡ç®—ç«‹æ–¹ä½“ä½“ç§¯ï¼šè¾¹é•¿Â³
  let side_length = 5
  let cube_volume = @azimuth.multiply(@azimuth.multiply(side_length, side_length), side_length)
  @azimuth.assert_eq(125, cube_volume)
}

test "statistical_analysis" {
  // æµ‹è¯•ç»Ÿè®¡åˆ†æ
  // è®¡ç®—æ–¹å·®ï¼šå¹³æ–¹å’Œçš„å¹³å‡å€¼å‡å»å¹³å‡å€¼çš„å¹³æ–¹
  let values = [10, 20, 30, 40, 50]
  
  // è®¡ç®—å¹³å‡å€¼
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)
  let mean = sum / 5
  
  // è®¡ç®—å¹³æ–¹å’Œ
  let square1 = @azimuth.multiply(10, 10)
  let square2 = @azimuth.multiply(20, 20)
  let square3 = @azimuth.multiply(30, 30)
  let square4 = @azimuth.multiply(40, 40)
  let square5 = @azimuth.multiply(50, 50)
  let square_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(square1, square2), square3), square4), square5)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let variance = square_sum / 5
  @azimuth.assert_eq(1100, variance)
}

test "time_based_calculations" {
  // æµ‹è¯•åŸºäºæ—¶é—´çš„è®¡ç®—
  // è®¡ç®—ä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹é—´çš„åˆ†é’Ÿå·®
  let start_hour = 9
  let start_minute = 30
  let end_hour = 14
  let end_minute = 45
  
  // è½¬æ¢ä¸ºæ€»åˆ†é’Ÿæ•°
  let start_total = @azimuth.add(@azimuth.multiply(start_hour, 60), start_minute)
  let end_total = @azimuth.add(@azimuth.multiply(end_hour, 60), end_minute)
  
  // è®¡ç®—æ—¶é—´å·®
  let time_diff = @azimuth.add(end_total, -start_total)
  @azimuth.assert_eq(315, time_diff)  // 5å°æ—¶15åˆ†é’Ÿ = 315åˆ†é’Ÿ
}

test "string_processing_scenarios" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†åœºæ™¯
  // æµ‹è¯•å„ç§ç‰¹æ®Šå­—ç¬¦ä¸²
  @azimuth.assert_eq_string(@azimuth.greet(""), "Hello, !")
  @azimuth.assert_eq_string(@azimuth.greet(" "), "Hello,  !")
  @azimuth.assert_eq_string(@azimuth.greet("a"), "Hello, a!")
  @azimuth.assert_eq_string(@azimuth.greet("A B C"), "Hello, A B C!")
  @azimuth.assert_eq_string(@azimuth.greet("1234567890"), "Hello, 1234567890!")
  @azimuth.assert_eq_string(@azimuth.greet("!@#$%^&*()"), "Hello, !@#$%^&*()!")
}

test "error_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(@azimuth.add(1, 1) == 2)
  @azimuth.assert_false(@azimuth.add(1, 1) == 3)
  @azimuth.assert_eq(2, @azimuth.add(1, 1))
  @azimuth.assert_eq_string("Hello, Test!", @azimuth.greet("Test"))
  
  // æµ‹è¯•è¾¹ç•Œå€¼è¿ç®—
  @azimuth.assert_eq(@azimuth.add(max_val, min_val), -1)
  @azimuth.assert_eq(@azimuth.add(max_val, 0), max_val)
  @azimuth.assert_eq(@azimuth.add(min_val, 0), min_val)
  @azimuth.assert_eq(@azimuth.multiply(max_val, 0), 0)
  @azimuth.assert_eq(@azimuth.multiply(min_val, 0), 0)
  @azimuth.assert_eq(@azimuth.multiply(max_val, 1), max_val)
  @azimuth.assert_eq(@azimuth.multiply(min_val, 1), min_val)
}