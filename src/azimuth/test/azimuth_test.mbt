// Azimuth é¡¹ç›® MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•åŸºæœ¬æ•°å­¦è¿ç®—å’Œå­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½

test "string_with_special_characters" {
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, @#$%^&*()!", @azimuth.greet("@#$%^&*()"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", @azimuth.greet("ä¸­æ–‡æµ‹è¯•"))
  @azimuth.assert_eq_string("Hello, Ã©mojiğŸš€!", @azimuth.greet("Ã©mojiğŸš€"))
  @azimuth.assert_eq_string("Hello,   spaced   !", @azimuth.greet("  spaced   "))
}

test "mathematical_identity_properties" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰æ€§è´¨
  let a = 42
  let b = 17
  
  // åŠ æ³•æ’ç­‰å¼
  @azimuth.assert_eq(a, @azimuth.add(a, 0))
  @azimuth.assert_eq(a, @azimuth.add(0, a))
  
  // ä¹˜æ³•æ’ç­‰å¼
  @azimuth.assert_eq(a, @azimuth.multiply(a, 1))
  @azimuth.assert_eq(a, @azimuth.multiply(1, a))
  @azimuth.assert_eq(0, @azimuth.multiply(a, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, a))
}

test "complex_calculation_scenarios" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  // åœºæ™¯1ï¼šè®¡ç®—äºŒæ¬¡æ–¹ç¨‹ axÂ² + bx + c
  let x = 5
  let a = 2
  let b = 3
  let c = 7
  
  let x_squared = @azimuth.multiply(x, x)  // xÂ² = 25
  let ax_squared = @azimuth.multiply(a, x_squared)  // axÂ² = 50
  let bx = @azimuth.multiply(b, x)  // bx = 15
  let result = @azimuth.add(@azimuth.add(ax_squared, bx), c)  // axÂ² + bx + c = 72
  
  @azimuth.assert_eq(72, result)
}

test "financial_calculation_compound_interest" {
  // æµ‹è¯•å¤åˆ©è®¡ç®—åœºæ™¯
  let principal = 10000  // æœ¬é‡‘
  let rate = 5  // åˆ©ç‡ç™¾åˆ†æ¯”
  let years = 3  // å¹´æ•°
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—ï¼šæœ€ç»ˆé‡‘é¢ = æœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let growth_factor = @azimuth.add(1, @azimuth.multiply(rate, years))  // 1 + 5Ã—3 = 16
  let final_amount = @azimuth.multiply(principal, growth_factor)  // 10000 Ã— 16 = 160000
  
  @azimuth.assert_eq(160000, final_amount)
}

test "geometry_calculations_rectangle" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—ï¼šçŸ©å½¢
  let length = 12
  let width = 8
  
  // è®¡ç®—é¢ç§¯
  let area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, area)
  
  // è®¡ç®—å‘¨é•¿
  let perimeter = @azimuth.add(@azimuth.multiply(2, length), @azimuth.multiply(2, width))
  @azimuth.assert_eq(40, perimeter)
  
  // è®¡ç®—å¯¹è§’çº¿é•¿åº¦ï¼ˆç®€åŒ–è®¡ç®—ï¼Œä¸ä½¿ç”¨å¹³æ–¹æ ¹ï¼‰
  let length_squared = @azimuth.multiply(length, length)  // 144
  let width_squared = @azimuth.multiply(width, width)    // 64
  let diagonal_squared = @azimuth.add(length_squared, width_squared)  // 208
  
  @azimuth.assert_eq(208, diagonal_squared)
}

test "temperature_conversion_celsius_fahrenheit" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢ï¼šæ‘„æ°åº¦è½¬åæ°åº¦
  // ç®€åŒ–å…¬å¼ï¼šF = C Ã— 2 + 30ï¼ˆé¿å…å°æ•°ï¼‰
  
  // æµ‹è¯•å¸¸è§æ¸©åº¦ç‚¹
  let freezing_celsius = 0    // å†°ç‚¹
  let freezing_fahrenheit = @azimuth.add(@azimuth.multiply(freezing_celsius, 2), 30)
  @azimuth.assert_eq(30, freezing_fahrenheit)
  
  let room_celsius = 20       // å®¤æ¸©
  let room_fahrenheit = @azimuth.add(@azimuth.multiply(room_celsius, 2), 30)
  @azimuth.assert_eq(70, room_fahrenheit)
  
  let boiling_celsius = 100   // æ²¸ç‚¹
  let boiling_fahrenheit = @azimuth.add(@azimuth.multiply(boiling_celsius, 2), 30)
  @azimuth.assert_eq(230, boiling_fahrenheit)
}

test "shopping_cart_total_calculation" {
  // æµ‹è¯•è´­ç‰©è½¦æ€»ä»·è®¡ç®—
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let item3_price = 99
  let item3_quantity = 1
  let shipping_fee = 15
  let discount = 50
  
  // è®¡ç®—æ¯ç§å•†å“æ€»ä»·
  let total1 = @azimuth.multiply(item1_price, item1_quantity)  // 598
  let total2 = @azimuth.multiply(item2_price, item2_quantity)  // 597
  let total3 = @azimuth.multiply(item3_price, item3_quantity)  // 99
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.add(@azimuth.add(total1, total2), total3)  // 1294
  
  // åº”ç”¨æŠ˜æ‰£å’Œè¿è´¹
  let final_total = @azimuth.add(@azimuth.add(subtotal, -discount), shipping_fee)  // 1259
  
  @azimuth.assert_eq(1259, final_total)
}

test "statistical_calculations_mean_median" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—ï¼šå¹³å‡å€¼å’Œä¸­ä½æ•°
  // æ•°æ®é›†ï¼š10, 20, 30, 40, 50, 60, 70
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50), 60), 70)
  @azimuth.assert_eq(280, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let count = 7
  let mean = sum / count
  @azimuth.assert_eq(40, mean)
  
  // è®¡ç®—ä¸­ä½æ•°ï¼ˆå·²æ’åºæ•°æ®é›†çš„ä¸­é—´å€¼ï¼‰
  let median = 40
  @azimuth.assert_eq(median, median)
  
  // è®¡ç®—èŒƒå›´ï¼ˆæœ€å¤§å€¼ - æœ€å°å€¼ï¼‰
  let range = @azimuth.add(70, -10)
  @azimuth.assert_eq(60, range)
}

test "time_calculations_duration" {
  // æµ‹è¯•æ—¶é—´è®¡ç®—ï¼šæŒç»­æ—¶é—´
  let start_hour = 9   // 9:00 AM
  let start_minute = 30
  let end_hour = 14     // 2:00 PM
  let end_minute = 45
  
  // è½¬æ¢ä¸ºåˆ†é’Ÿæ•°
  let start_total = @azimuth.add(@azimuth.multiply(start_hour, 60), start_minute)  // 570
  let end_total = @azimuth.add(@azimuth.multiply(end_hour, 60), end_minute)        // 885
  
  // è®¡ç®—æŒç»­æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
  let duration = @azimuth.add(end_total, -start_total)  // 315åˆ†é’Ÿ = 5å°æ—¶15åˆ†é’Ÿ
  
  @azimuth.assert_eq(315, duration)
  
  // è½¬æ¢å›å°æ—¶å’Œåˆ†é’Ÿ
  let duration_hours = duration / 60  // 5
  let duration_minutes = duration % 60  // 15
  
  @azimuth.assert_eq(5, duration_hours)
  @azimuth.assert_eq(15, duration_minutes)
}

test "game_score_calculation_complex" {
  // æµ‹è¯•æ¸¸æˆå¾—åˆ†è®¡ç®—ï¼šå¤æ‚åœºæ™¯
  let base_score = 1000
  let level = 5
  let combo_multiplier = 3
  let time_bonus = 500
  let accuracy_penalty = 200
  let difficulty_bonus = 300
  
  // è®¡ç®—ç­‰çº§å¾—åˆ†
  let level_score = @azimuth.multiply(base_score, level)  // 5000
  
  // åº”ç”¨è¿å‡»å€æ•°
  let combo_score = @azimuth.multiply(level_score, combo_multiplier)  // 15000
  
  // åŠ æˆå’Œå‡åˆ†
  let with_time_bonus = @azimuth.add(combo_score, time_bonus)  // 15500
  let with_accuracy_penalty = @azimuth.add(with_time_bonus, -accuracy_penalty)  // 15300
  let final_score = @azimuth.add(with_accuracy_penalty, difficulty_bonus)  // 15600
  
  @azimuth.assert_eq(15600, final_score)
  
  // è®¡ç®—æ’åï¼ˆæ¯1000åˆ†ä¸€ä¸ªç­‰çº§ï¼‰
  let rank_level = final_score / 1000  // 15
  @azimuth.assert_eq(15, rank_level)
}