// å¢å¼ºçš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½

test "enhanced_add_commutativity" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 12345
  let b = -67890
  
  let result1 = @azimuth.add(a, b)
  let result2 = @azimuth.add(b, a)
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•ä¸è¾¹ç•Œå€¼çš„äº¤æ¢å¾‹
  let max_val = 2147483647
  let min_val = -2147483648
  
  let result3 = @azimuth.add(max_val, min_val)
  let result4 = @azimuth.add(min_val, max_val)
  @azimuth.assert_eq(result3, result4)
}

test "enhanced_multiply_distributivity" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let a = 15
  let b = 25
  let c = 35
  
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left_side, right_side)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„åˆ†é…å¾‹
  let d = -10
  let e = 20
  let f = -30
  
  let left_side2 = @azimuth.multiply(d, @azimuth.add(e, f))
  let right_side2 = @azimuth.add(@azimuth.multiply(d, e), @azimuth.multiply(d, f))
  @azimuth.assert_eq(left_side2, right_side2)
}

test "enhanced_greet_unicode_handling" {
  // æµ‹è¯• greet å‡½æ•°çš„ Unicode å¤„ç†èƒ½åŠ›
  let chinese_name = "å¼ ä¸‰æå››"
  let result1 = @azimuth.greet(chinese_name)
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰æå››!", result1)
  
  let emoji_name = "ğŸš€ğŸŒŸğŸ’«"
  let result2 = @azimuth.greet(emoji_name)
  @azimuth.assert_eq_string("Hello, ğŸš€ğŸŒŸğŸ’«!", result2)
  
  let mixed_unicode = "Helloä¸–ç•ŒğŸŒ"
  let result3 = @azimuth.greet(mixed_unicode)
  @azimuth.assert_eq_string("Hello, Helloä¸–ç•ŒğŸŒ!", result3)
}

test "enhanced_financial_compound_interest" {
  // æµ‹è¯•å¤åˆ©è®¡ç®—çš„å®é™…åº”ç”¨åœºæ™¯
  let principal = 10000  // æœ¬é‡‘
  let rate = 5           // å¹´åˆ©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let years = 3          // å¹´æ•°
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—ï¼šæœ¬æ¯å’Œ = æœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let growth_factor = @azimuth.add(1, @azimuth.multiply(rate, years))
  let total_amount = @azimuth.multiply(principal, growth_factor)
  
  @azimuth.assert_eq(160000, total_amount)
  
  // æµ‹è¯•ä¸åŒåˆ©ç‡å’ŒæœŸé™
  let principal2 = 5000
  let rate2 = 8
  let years2 = 2
  
  let growth_factor2 = @azimuth.add(1, @azimuth.multiply(rate2, years2))
  let total_amount2 = @azimuth.multiply(principal2, growth_factor2)
  
  @azimuth.assert_eq(85000, total_amount2)
}

test "enhanced_temperature_conversion" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢åœºæ™¯ï¼ˆæ‘„æ°åº¦è½¬åæ°åº¦ï¼‰
  // ç®€åŒ–å…¬å¼ï¼šF = C Ã— 2 + 30
  let celsius_temperatures = [0, 10, 20, 30, 40, 100]
  let expected_fahrenheit = [30, 50, 70, 90, 110, 230]
  
  let f1 = @azimuth.add(@azimuth.multiply(celsius_temperatures[0], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[0], f1)
  
  let f2 = @azimuth.add(@azimuth.multiply(celsius_temperatures[1], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[1], f2)
  
  let f3 = @azimuth.add(@azimuth.multiply(celsius_temperatures[2], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[2], f3)
  
  let f4 = @azimuth.add(@azimuth.multiply(celsius_temperatures[3], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[3], f4)
  
  let f5 = @azimuth.add(@azimuth.multiply(celsius_temperatures[4], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[4], f5)
  
  let f6 = @azimuth.add(@azimuth.multiply(celsius_temperatures[5], 2), 30)
  @azimuth.assert_eq(expected_fahrenheit[5], f6)
}

test "enhanced_shopping_cart_total" {
  // æµ‹è¯•è´­ç‰©è½¦æ€»ä»·è®¡ç®—
  let item_prices = [199, 299, 399, 499]
  let quantities = [2, 1, 3, 1]
  
  // è®¡ç®—æ¯ç§å•†å“çš„å°è®¡
  let subtotal1 = @azimuth.multiply(item_prices[0], quantities[0])
  let subtotal2 = @azimuth.multiply(item_prices[1], quantities[1])
  let subtotal3 = @azimuth.multiply(item_prices[2], quantities[2])
  let subtotal4 = @azimuth.multiply(item_prices[3], quantities[3])
  
  // è®¡ç®—æ€»ä»·
  let cart_total = @azimuth.add(@azimuth.add(@azimuth.add(subtotal1, subtotal2), subtotal3), subtotal4)
  
  // éªŒè¯ï¼š199Ã—2 + 299Ã—1 + 399Ã—3 + 499Ã—1 = 398 + 299 + 1197 + 499 = 2393
  @azimuth.assert_eq(2393, cart_total)
  
  // æµ‹è¯•æŠ˜æ‰£è®¡ç®—ï¼šæ»¡2000å‡200
  let discount_threshold = 2000
  let discount_amount = 200
  let final_total = if (cart_total > discount_threshold) {
    @azimuth.add(cart_total, -discount_amount)
  } else {
    cart_total
  }
  
  @azimuth.assert_eq(2193, final_total)
}

test "enhanced_geometric_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—åœºæ™¯
  let radius = 7
  
  // åœ†å‘¨é•¿ï¼ˆç®€åŒ–ï¼‰ï¼š2 Ã— Ï€ Ã— r â‰ˆ 2 Ã— 3 Ã— r
  let circumference = @azimuth.multiply(@azimuth.multiply(2, 3), radius)
  @azimuth.assert_eq(42, circumference)
  
  // åœ†é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šÏ€ Ã— rÂ² â‰ˆ 3 Ã— rÂ²
  let area = @azimuth.multiply(3, @azimuth.multiply(radius, radius))
  @azimuth.assert_eq(147, area)
  
  // çƒä½“ä½“ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼š4/3 Ã— Ï€ Ã— rÂ³ â‰ˆ 4 Ã— rÂ³
  let volume = @azimuth.multiply(4, @azimuth.multiply(radius, @azimuth.multiply(radius, radius)))
  @azimuth.assert_eq(1372, volume)
  
  // æµ‹è¯•çŸ©å½¢å’Œä¸‰è§’å½¢é¢ç§¯
  let length = 12
  let width = 8
  let rectangle_area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, rectangle_area)
  
  let base = 10
  let height = 6
  let triangle_area = @azimuth.multiply(base, height) / 2
  @azimuth.assert_eq(30, triangle_area)
}

test "enhanced_sequence_calculations" {
  // æµ‹è¯•æ•°åˆ—è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼š1 + 2 + 3 + ... + n
  let n = 10
  let arithmetic_sum = @azimuth.multiply(n, @azimuth.add(n, 1)) / 2
  @azimuth.assert_eq(55, arithmetic_sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼š1 + 2 + 4 + 8 + ... + 2^(n-1)
  // ç®€åŒ–è®¡ç®—ï¼š2^n - 1
  let geometric_sum = @azimuth.add(@azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)), -1)
  @azimuth.assert_eq(15, geometric_sum)
  
  // è®¡ç®—å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + ... + nÂ²
  let square1 = @azimuth.multiply(1, 1)
  let square2 = @azimuth.multiply(2, 2)
  let square3 = @azimuth.multiply(3, 3)
  let square4 = @azimuth.multiply(4, 4)
  let square5 = @azimuth.multiply(5, 5)
  let sum_of_squares = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(square1, square2), square3), square4), square5)
  @azimuth.assert_eq(55, sum_of_squares)
}

test "enhanced_boundary_stress_test" {
  // æµ‹è¯•è¾¹ç•Œå€¼çš„å‹åŠ›æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•è¿ç»­è¾¹ç•Œè¿ç®—
  let chain1 = @azimuth.add(@azimuth.add(max_val, min_val), max_val)
  @azimuth.assert_eq(max_val, chain1)
  
  let chain2 = @azimuth.multiply(@azimuth.multiply(min_val, 1), -1)
  @azimuth.assert_eq(min_val, chain2)
  
  // æµ‹è¯•è¾¹ç•Œå€¼ä¸æ™®é€šå€¼çš„ç»„åˆ
  let normal1 = 1000000
  let normal2 = -1000000
  
  let result1 = @azimuth.add(max_val, normal1)
  @azimuth.assert_eq(max_val, result1)
  
  let result2 = @azimuth.add(min_val, normal2)
  @azimuth.assert_eq(min_val, result2)
  
  let result3 = @azimuth.multiply(normal1, normal2)
  @azimuth.assert_eq(-1000000, result3)
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ç‰¹æ®Šè¿ç®—
  let special1 = @azimuth.multiply(min_val, -1)
  @azimuth.assert_eq(min_val, special1)
  
  let special2 = @azimuth.add(max_val, 1)
  @azimuth.assert_eq(max_val, special2)
}

test "enhanced_error_resilience" {
  // æµ‹è¯•é”™è¯¯æ¢å¤å’Œå®¹é”™èƒ½åŠ›
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤çš„æ­£ç¡®æ€§
  let overflow_add1 = @azimuth.add(max_val, max_val)
  let overflow_add2 = @azimuth.add(max_val, 1000000)
  let overflow_add3 = @azimuth.add(min_val, min_val)
  let overflow_add4 = @azimuth.add(min_val, -1000000)
  
  @azimuth.assert_eq(max_val, overflow_add1)
  @azimuth.assert_eq(max_val, overflow_add2)
  @azimuth.assert_eq(min_val, overflow_add3)
  @azimuth.assert_eq(min_val, overflow_add4)
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  let overflow_mul1 = @azimuth.multiply(max_val, 2)
  let overflow_mul2 = @azimuth.multiply(max_val, max_val)
  let overflow_mul3 = @azimuth.multiply(min_val, 2)
  let overflow_mul4 = @azimuth.multiply(min_val, min_val)
  
  @azimuth.assert_eq(max_val, overflow_mul1)
  @azimuth.assert_eq(max_val, overflow_mul2)
  @azimuth.assert_eq(min_val, overflow_mul3)
  @azimuth.assert_eq(max_val, overflow_mul4)
  
  // éªŒè¯æ­£å¸¸è¿ç®—ä»ç„¶æ­£ç¡®
  @azimuth.assert_eq(100, @azimuth.add(50, 50))
  @azimuth.assert_eq(100, @azimuth.multiply(10, 10))
  @azimuth.assert_eq_string("Hello, Test!", @azimuth.greet("Test"))
}