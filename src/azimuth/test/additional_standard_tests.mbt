// é¢å¤–çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½

test "mathematical_properties" {
  // æµ‹è¯•æ•°å­¦æ€§è´¨ï¼šç»“åˆå¾‹
  let a = 5
  let b = 10
  let c = 15
  
  // åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let result1 = @azimuth.add(@azimuth.add(a, b), c)
  let result2 = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(result1, result2)
  
  // ä¹˜æ³•ç»“åˆå¾‹ï¼š(a Ã— b) Ã— c = a Ã— (b Ã— c)
  let result3 = @azimuth.multiply(@azimuth.multiply(a, b), c)
  let result4 = @azimuth.multiply(a, @azimuth.multiply(b, c))
  @azimuth.assert_eq(result3, result4)
}

test "distributive_property" {
  // æµ‹è¯•åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let a = 7
  let b = 12
  let c = 8
  
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left_side, right_side)
}

test "special_case_handling" {
  // æµ‹è¯•ç‰¹æ®Šæƒ…å†µå¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•ä¸0çš„è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  
  // æµ‹è¯•ä¸1çš„è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  
  // æµ‹è¯•ä¸-1çš„è¿ç®—
  @azimuth.assert_eq(min_val, @azimuth.multiply(max_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "string_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•ä¸ªå­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, @#$%!", @azimuth.greet("@#$%"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, ğŸŒŸ!", @azimuth.greet("ğŸŒŸ"))
}

test "complex_calculations" {
  // æµ‹è¯•å¤æ‚è®¡ç®—
  // è®¡ç®—å¤šé¡¹å¼ï¼š3xÂ² + 2x + 1ï¼Œå½“x=5æ—¶
  let x = 5
  let x_squared = @azimuth.multiply(x, x)
  let term1 = @azimuth.multiply(3, x_squared)
  let term2 = @azimuth.multiply(2, x)
  let result = @azimuth.add(@azimuth.add(term1, term2), 1)
  @azimuth.assert_eq(86, result)  // 3*25 + 2*5 + 1 = 75 + 10 + 1 = 86
  
  // è®¡ç®—é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1
  let factorial = @azimuth.multiply(5, @azimuth.multiply(4, @azimuth.multiply(3, @azimuth.multiply(2, 1))))
  @azimuth.assert_eq(120, factorial)
}

test "overflow_protection" {
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "real_world_scenarios" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯
  // è´­ç‰©è½¦è®¡ç®—ï¼šå•†å“ä»·æ ¼ Ã— æ•°é‡ + è¿è´¹
  let item_price = 199
  let quantity = 3
  let shipping = 15
  
  let subtotal = @azimuth.multiply(item_price, quantity)
  let total = @azimuth.add(subtotal, shipping)
  @azimuth.assert_eq(612, total)  // 199*3 + 15 = 597 + 15 = 612
  
  // æ¸©åº¦è½¬æ¢ï¼šæ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼šF = C Ã— 2 + 30ï¼‰
  let celsius = 25
  let fahrenheit = @azimuth.add(@azimuth.multiply(celsius, 2), 30)
  @azimuth.assert_eq(80, fahrenheit)  // 25*2 + 30 = 80
}

test "error_conditions" {
  // æµ‹è¯•é”™è¯¯æ¡ä»¶å’Œè¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_eq(42, 42)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•è¿ç®—ç»“æœçš„æ­£ç¡®æ€§
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_false(@azimuth.add(5, 3) == 9)
  @azimuth.assert_true(@azimuth.multiply(4, 5) == 20)
  @azimuth.assert_false(@azimuth.multiply(4, 5) == 21)
  
  // æµ‹è¯•è¾¹ç•Œå€¼è¿ç®—
  @azimuth.assert_true(@azimuth.add(max_val, 1) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -1) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, -1) == min_val)
}

test "performance_calculations" {
  // æµ‹è¯•æ€§èƒ½ç›¸å…³çš„è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼š1 + 2 + 3 + ... + 100
  let n = 100
  let sum = @azimuth.multiply(n, @azimuth.add(n, 1)) / 2
  @azimuth.assert_eq(5050, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—çš„å’Œï¼š2 + 2Â² + 2Â³ + 2â´
  let term1 = 2
  let term2 = @azimuth.multiply(2, 2)
  let term3 = @azimuth.multiply(2, @azimuth.multiply(2, 2))
  let term4 = @azimuth.multiply(2, @azimuth.multiply(2, @azimuth.multiply(2, 2)))
  let geometric_sum = @azimuth.add(@azimuth.add(@azimuth.add(term1, term2), term3), term4)
  @azimuth.assert_eq(30, geometric_sum)  // 2 + 4 + 8 + 16 = 30
}