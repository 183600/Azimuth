// é¢å¤–çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "add_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 12345
  let b = 67890
  
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let c = -12345
  let d = 67890
  
  @azimuth.assert_eq(@azimuth.add(c, d), @azimuth.add(d, c))
  
  // æµ‹è¯•ä¸¤ä¸ªè´Ÿæ•°
  let e = -12345
  let f = -67890
  
  @azimuth.assert_eq(@azimuth.add(e, f), @azimuth.add(f, e))
}

test "add_associative_property" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let a = 100
  let b = 200
  let c = 300
  
  let result1 = @azimuth.add(@azimuth.add(a, b), c)
  let result2 = @azimuth.add(a, @azimuth.add(b, c))
  
  @azimuth.assert_eq(result1, result2)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let d = -150
  let e = 250
  let f = -100
  
  let result3 = @azimuth.add(@azimuth.add(d, e), f)
  let result4 = @azimuth.add(d, @azimuth.add(e, f))
  
  @azimuth.assert_eq(result3, result4)
}

test "multiply_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let a = 5
  let b = 10
  let c = 15
  
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  
  @azimuth.assert_eq(left_side, right_side)
  
  // æµ‹è¯•åŒ…å«è´Ÿæ•°çš„æƒ…å†µ
  let d = -3
  let e = 8
  let f = -2
  
  let left_side2 = @azimuth.multiply(d, @azimuth.add(e, f))
  let right_side2 = @azimuth.add(@azimuth.multiply(d, e), @azimuth.multiply(d, f))
  
  @azimuth.assert_eq(left_side2, right_side2)
}

test "multiply_identity_property" {
  // æµ‹è¯•ä¹˜æ³•å•ä½å…ƒï¼ša Ã— 1 = a
  let a = 123456
  @azimuth.assert_eq(a, @azimuth.multiply(a, 1))
  @azimuth.assert_eq(a, @azimuth.multiply(1, a))
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let b = -123456
  @azimuth.assert_eq(b, @azimuth.multiply(b, 1))
  @azimuth.assert_eq(b, @azimuth.multiply(1, b))
  
  // æµ‹è¯•é›¶çš„æƒ…å†µ
  let c = 0
  @azimuth.assert_eq(c, @azimuth.multiply(c, 1))
  @azimuth.assert_eq(c, @azimuth.multiply(1, c))
}

test "multiply_zero_property" {
  // æµ‹è¯•ä¹˜æ³•é›¶å…ƒï¼ša Ã— 0 = 0
  let a = 123456
  @azimuth.assert_eq(0, @azimuth.multiply(a, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, a))
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let b = -123456
  @azimuth.assert_eq(0, @azimuth.multiply(b, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, b))
  
  // æµ‹è¯•æœ€å¤§å€¼å’Œæœ€å°å€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, max_val))
  @azimuth.assert_eq(0, @azimuth.multiply(0, min_val))
}

test "greet_unicode_handling" {
  // æµ‹è¯• greet å‡½æ•°çš„ Unicode å¤„ç†èƒ½åŠ›
  // æµ‹è¯•ä¸­æ–‡å­—ç¬¦
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  
  // æµ‹è¯•æ—¥æ–‡å­—ç¬¦
  @azimuth.assert_eq_string("Hello, ã“ã‚“ã«ã¡ã¯!", @azimuth.greet("ã“ã‚“ã«ã¡ã¯"))
  
  // æµ‹è¯•éŸ©æ–‡å­—ç¬¦
  @azimuth.assert_eq_string("Hello, ì•ˆë…•í•˜ì„¸ìš”!", @azimuth.greet("ì•ˆë…•í•˜ì„¸ìš”"))
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡å­—ç¬¦
  @azimuth.assert_eq_string("Hello, Ù…Ø±Ø­Ø¨Ø§!", @azimuth.greet("Ù…Ø±Ø­Ø¨Ø§"))
  
  // æµ‹è¯•è¡¨æƒ…ç¬¦å·
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello, ğŸ‰!", @azimuth.greet("ğŸ‰"))
  @azimuth.assert_eq_string("Hello, ğŸ‘!", @azimuth.greet("ğŸ‘"))
}

test "complex_financial_calculation" {
  // æµ‹è¯•å¤æ‚é‡‘èè®¡ç®—åœºæ™¯
  // è®¡ç®—è´·æ¬¾æœˆä¾›ï¼šP Ã— [r(1+r)^n] / [(1+r)^n-1]
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—
  
  let principal = 100000  // æœ¬é‡‘
  let annual_rate = 6     // å¹´åˆ©ç‡6%
  let years = 30          // è´·æ¬¾å¹´é™
  
  // ç®€åŒ–è®¡ç®—ï¼šæœˆä¾› â‰ˆ æœ¬é‡‘ / æœˆæ•° + åˆ©æ¯
  let months = @azimuth.multiply(years, 12)
  let monthly_principal = principal / months
  
  // ç®€åŒ–çš„åˆ©æ¯è®¡ç®—
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years)) / 100
  let monthly_interest = total_interest / months
  
  let monthly_payment = @azimuth.add(monthly_principal, monthly_interest)
  
  // éªŒè¯æœˆä¾›åœ¨åˆç†èŒƒå›´å†…
  @azimuth.assert_true(monthly_payment > 500)
  @azimuth.assert_true(monthly_payment < 1000)
}

test "scientific_calculation" {
  // æµ‹è¯•ç§‘å­¦è®¡ç®—åœºæ™¯
  // è®¡ç®—è‡ªç”±è½ä½“è·ç¦»ï¼šs = 0.5 Ã— g Ã— tÂ²
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šs â‰ˆ 5 Ã— tÂ² (g â‰ˆ 10 m/sÂ²)
  
  let time1 = 1  // 1ç§’
  let distance1 = @azimuth.multiply(5, @azimuth.multiply(time1, time1))
  @azimuth.assert_eq(5, distance1)
  
  let time2 = 2  // 2ç§’
  let distance2 = @azimuth.multiply(5, @azimuth.multiply(time2, time2))
  @azimuth.assert_eq(20, distance2)
  
  let time3 = 3  // 3ç§’
  let distance3 = @azimuth.multiply(5, @azimuth.multiply(time3, time3))
  @azimuth.assert_eq(45, distance3)
  
  // è®¡ç®—é€Ÿåº¦ï¼šv = g Ã— t
  let velocity1 = @azimuth.multiply(10, time1)  // 10 m/s
  let velocity2 = @azimuth.multiply(10, time2)  // 20 m/s
  let velocity3 = @azimuth.multiply(10, time3)  // 30 m/s
  
  @azimuth.assert_eq(10, velocity1)
  @azimuth.assert_eq(20, velocity2)
  @azimuth.assert_eq(30, velocity3)
}

test "string_length_validation" {
  // æµ‹è¯•å­—ç¬¦ä¸²é•¿åº¦éªŒè¯
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•çŸ­å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, Hi!", @azimuth.greet("Hi"))
  
  // æµ‹è¯•ä¸­ç­‰é•¿åº¦å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_name = "ThisIsAVeryLongNameForTestingPurposes"
  @azimuth.assert_eq_string("Hello, " + long_name + "!", @azimuth.greet(long_name))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  @azimuth.assert_eq_string("Hello,  Space Test !", @azimuth.greet(" Space Test "))
}

test "extreme_boundary_combinations" {
  // æµ‹è¯•æç«¯è¾¹ç•Œå€¼ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•è¿ç»­è¾¹ç•Œè¿ç®—
  let chain1 = @azimuth.add(@azimuth.multiply(max_val, 0), max_val)
  @azimuth.assert_eq(max_val, chain1)
  
  let chain2 = @azimuth.add(@azimuth.multiply(min_val, 0), min_val)
  @azimuth.assert_eq(min_val, chain2)
  
  // æµ‹è¯•å¤æ‚è¾¹ç•Œè¡¨è¾¾å¼
  let complex1 = @azimuth.add(@azimuth.multiply(@azimuth.add(max_val, min_val), 1), max_val)
  @azimuth.assert_eq(max_val, complex1)
  
  let complex2 = @azimuth.multiply(@azimuth.add(max_val, 1), 0)
  @azimuth.assert_eq(0, complex2)
}