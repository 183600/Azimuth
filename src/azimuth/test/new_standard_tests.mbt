// æ–°å¢çš„æµ‹è¯•ç”¨ä¾‹ - è¡¥å……ç°æœ‰æµ‹è¯•è¦†ç›–èŒƒå›´

// æµ‹è¯•ç”¨ä¾‹ 1: æµ‹è¯•å¤§æ•°ç›¸åŠ çš„è¾¹ç•Œæƒ…å†µ
///|
test "large_number_addition_boundaries" {
  // æµ‹è¯•æ¥è¿‘æœ€å¤§å€¼çš„å¤§æ•°ç›¸åŠ 
  let near_max1 = 2147483640
  let near_max2 = 7
  
  // åº”è¯¥æº¢å‡ºåˆ°æœ€å¤§å€¼
  assert_eq(2147483647, @azimuth.add(near_max1, near_max2))
  
  // æµ‹è¯•æ¥è¿‘æœ€å°å€¼çš„å¤§æ•°ç›¸åŠ 
  let near_min1 = -2147483640
  let near_min2 = -7
  
  // åº”è¯¥æº¢å‡ºåˆ°æœ€å°å€¼
  assert_eq(-2147483648, @azimuth.add(near_min1, near_min2))
  
  // æµ‹è¯•ä¸æº¢å‡ºçš„å¤§æ•°ç›¸åŠ 
  let large1 = 1000000000
  let large2 = 1000000000
  assert_eq(2000000000, @azimuth.add(large1, large2))
}

// æµ‹è¯•ç”¨ä¾‹ 2: æµ‹è¯•ä¹˜æ³•ä¸­çš„è´Ÿæ•°è¾¹ç•Œæƒ…å†µ
///|
test "negative_multiplication_boundaries" {
  // æµ‹è¯•è´Ÿæ•°ä¹˜ä»¥è´Ÿæ•°å¾—åˆ°æ­£æ•°çš„è¾¹ç•Œ
  let neg1 = -46340
  let neg2 = -46340
  
  // åº”è¯¥æ¥è¿‘ä½†ä¸æº¢å‡º
  assert_eq(2147395600, @azimuth.multiply(neg1, neg2))
  
  // æµ‹è¯•è´Ÿæ•°ä¹˜ä»¥è´Ÿæ•°æº¢å‡º
  let neg3 = -46341
  let neg4 = -46341
  
  // åº”è¯¥æº¢å‡ºåˆ°æœ€å¤§å€¼
  assert_eq(2147483647, @azimuth.multiply(neg3, neg4))
  
  // æµ‹è¯•å¤§è´Ÿæ•°ä¹˜ä»¥å°æ­£æ•°
  let large_neg = -2147483648
  let small_pos = 2
  
  // åº”è¯¥æº¢å‡ºåˆ°æœ€å°å€¼
  assert_eq(-2147483648, @azimuth.multiply(large_neg, small_pos))
}

// æµ‹è¯•ç”¨ä¾‹ 3: æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„é«˜çº§åœºæ™¯
///|
test "advanced_string_processing" {
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  assert_eq("Hello, 12345!", @azimuth.greet("12345"))
  assert_eq("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  assert_eq("Hello, C:\\Program Files!", @azimuth.greet("C:\\Program Files"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq("Hello, John Doe!", @azimuth.greet("John Doe"))
  assert_eq("Hello,   Multiple   Spaces!", @azimuth.greet("   Multiple   Spaces"))
  
  // æµ‹è¯•Unicode emoji
  assert_eq("Hello, ğŸ‘‹ğŸŒ!", @azimuth.greet("ğŸ‘‹ğŸŒ"))
  assert_eq("Hello, ğŸš€ğŸ‰!", @azimuth.greet("ğŸš€ğŸ‰"))
}

// æµ‹è¯•ç”¨ä¾‹ 4: æµ‹è¯•æ•°å­¦è¿ç®—çš„å¹‚æ¬¡è®¡ç®—
///|
test "power_calculation_simulation" {
  // é€šè¿‡é‡å¤ä¹˜æ³•æ¨¡æ‹Ÿå¹‚æ¬¡è¿ç®—
  
  // 2^4 = 16
  let two_to_four = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), 2), 2)
  assert_eq(16, two_to_four)
  
  // 3^3 = 27
  let three_to_three = @azimuth.multiply(@azimuth.multiply(3, 3), 3)
  assert_eq(27, three_to_three)
  
  // (-2)^3 = -8
  let neg_two_to_three = @azimuth.multiply(@azimuth.multiply(-2, -2), -2)
  assert_eq(-8, neg_two_to_three)
  
  // (-2)^4 = 16
  let neg_two_to_four = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(-2, -2), -2), -2)
  assert_eq(16, neg_two_to_four)
}

// æµ‹è¯•ç”¨ä¾‹ 5: æµ‹è¯•æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—
///|
test "fibonacci_sequence_calculation" {
  // è®¡ç®—å‰å‡ ä¸ªæ–æ³¢é‚£å¥‘æ•°
  // F(0) = 0, F(1) = 1, F(n) = F(n-1) + F(n-2)
  
  let f0 = 0
  let f1 = 1
  let f2 = @azimuth.add(f1, f0)  // 1
  let f3 = @azimuth.add(f2, f1)  // 2
  let f4 = @azimuth.add(f3, f2)  // 3
  let f5 = @azimuth.add(f4, f3)  // 5
  let f6 = @azimuth.add(f5, f4)  // 8
  let f7 = @azimuth.add(f6, f5)  // 13
  let f8 = @azimuth.add(f7, f6)  // 21
  let f9 = @azimuth.add(f8, f7)  // 34
  let f10 = @azimuth.add(f9, f8) // 55
  
  assert_eq(1, f2)
  assert_eq(2, f3)
  assert_eq(3, f4)
  assert_eq(5, f5)
  assert_eq(8, f6)
  assert_eq(13, f7)
  assert_eq(21, f8)
  assert_eq(34, f9)
  assert_eq(55, f10)
}

// æµ‹è¯•ç”¨ä¾‹ 6: æµ‹è¯•é˜¶ä¹˜è®¡ç®—
///|
test "factorial_calculation" {
  // é€šè¿‡é‡å¤ä¹˜æ³•è®¡ç®—é˜¶ä¹˜
  // n! = n * (n-1) * ... * 1
  
  // 1! = 1
  let fact1 = 1
  assert_eq(1, fact1)
  
  // 2! = 2
  let fact2 = @azimuth.multiply(2, 1)
  assert_eq(2, fact2)
  
  // 3! = 6
  let fact3 = @azimuth.multiply(@azimuth.multiply(3, 2), 1)
  assert_eq(6, fact3)
  
  // 4! = 24
  let fact4 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(4, 3), 2), 1)
  assert_eq(24, fact4)
  
  // 5! = 120
  let fact5 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(@azimuth.multiply(5, 4), 3), 2), 1)
  assert_eq(120, fact5)
}

// æµ‹è¯•ç”¨ä¾‹ 7: æµ‹è¯•æœ€å¤§å…¬çº¦æ•°è®¡ç®—ï¼ˆæ¨¡æ‹Ÿï¼‰
///|
test "gcd_calculation_simulation" {
  // é€šè¿‡å‡æ³•æ¨¡æ‹Ÿæœ€å¤§å…¬çº¦æ•°è®¡ç®—
  // gcd(a, b) = gcd(b, a mod b)
  // è¿™é‡Œæˆ‘ä»¬ç”¨å‡æ³•æ¥æ¨¡æ‹Ÿæ¨¡è¿ç®—
  
  // gcd(48, 18) = 6
  let a = 48
  let b = 18
  
  // 48 - 18 = 30
  let step1 = @azimuth.add(a, @azimuth.multiply(-1, b))
  // 30 - 18 = 12
  let step2 = @azimuth.add(step1, @azimuth.multiply(-1, b))
  // 18 - 12 = 6
  let step3 = @azimuth.add(b, @azimuth.multiply(-1, step2))
  // 12 - 6 = 6
  let step4 = @azimuth.add(step2, @azimuth.multiply(-1, step3))
  // 6 - 6 = 0ï¼Œæ‰€ä»¥gcdæ˜¯6
  
  assert_eq(6, step3)
  assert_eq(6, step4)
}

// æµ‹è¯•ç”¨ä¾‹ 8: æµ‹è¯•ç™¾åˆ†æ¯”è®¡ç®—
///|
test "percentage_calculation" {
  // ç™¾åˆ†æ¯”è®¡ç®—ï¼šéƒ¨åˆ† = æ€»æ•° * ç™¾åˆ†æ¯”
  // æˆ‘ä»¬é€šè¿‡ä¹˜ä»¥100æ¥é¿å…å°æ•°
  
  let total = 200
  let percentage_25 = 25  // 25%
  let percentage_50 = 50  // 50%
  let percentage_75 = 75  // 75%
  
  // 25% of 200 = 50
  let part25_times_100 = @azimuth.multiply(total, percentage_25)
  assert_eq(5000, part25_times_100)  // 50 * 100 = 5000
  
  // 50% of 200 = 100
  let part50_times_100 = @azimuth.multiply(total, percentage_50)
  assert_eq(10000, part50_times_100)  // 100 * 100 = 10000
  
  // 75% of 200 = 150
  let part75_times_100 = @azimuth.multiply(total, percentage_75)
  assert_eq(15000, part75_times_100)  // 150 * 100 = 15000
}

// æµ‹è¯•ç”¨ä¾‹ 9: æµ‹è¯•å¤åˆ©è®¡ç®—
///|
test "compound_interest_calculation" {
  // å¤åˆ©è®¡ç®—ï¼šæœ€ç»ˆé‡‘é¢ = æœ¬é‡‘ * (1 + åˆ©ç‡)^æ—¶é—´
  // æˆ‘ä»¬é€šè¿‡é¿å…å°æ•°æ¥è®¡ç®—
  
  let principal = 1000
  let rate_percent = 5  // 5%
  let years = 3
  
  // (1 + 5%)^3 = 1.05^3 â‰ˆ 1.157625
  // æˆ‘ä»¬é€šè¿‡ä¹˜ä»¥1000000æ¥é¿å…å°æ•°
  
  // 105% = 105000/100000
  let rate_plus_100 = 105000
  
  // ç¬¬ä¸€å¹´åçš„é‡‘é¢ï¼ˆä¹˜ä»¥100000ï¼‰
  let year1_times_100000 = @azimuth.multiply(principal, rate_plus_100)
  
  // ç¬¬äºŒå¹´åçš„é‡‘é¢ï¼ˆä¹˜ä»¥100000ï¼‰
  let year2_times_100000 = @azimuth.multiply(year1_times_100000, rate_plus_100)
  
  // ç¬¬ä¸‰å¹´åçš„é‡‘é¢ï¼ˆä¹˜ä»¥100000ï¼‰
  let year3_times_100000 = @azimuth.multiply(year2_times_100000, rate_plus_100)
  
  // éªŒè¯è®¡ç®—è¿‡ç¨‹æ­£ç¡®
  assert_eq(105000000, year1_times_100000)  // 1000 * 105000
  assert_eq(11025000000, year2_times_100000)  // 105000000 * 105000
}

// æµ‹è¯•ç”¨ä¾‹ 10: æµ‹è¯•ç»Ÿè®¡å­¦ä¸­çš„æ–¹å·®è®¡ç®—
///|
test "variance_calculation" {
  // æ–¹å·®è®¡ç®—ï¼šVar = Î£(x - Î¼)Â² / n
  // å…¶ä¸­Î¼æ˜¯å¹³å‡å€¼ï¼Œnæ˜¯æ•°æ®ç‚¹æ•°é‡
  
  // æ•°æ®é›†ï¼š[2, 4, 4, 4, 5, 5, 7, 9]
  // å¹³å‡å€¼ï¼š5
  
  let mean = 5
  let n = 8
  
  // è®¡ç®—æ¯ä¸ªæ•°æ®ç‚¹ä¸å¹³å‡å€¼çš„å·®çš„å¹³æ–¹
  let diff1 = @azimuth.multiply(@azimuth.add(2, @azimuth.multiply(-1, mean)), @azimuth.add(2, @azimuth.multiply(-1, mean)))  // (2-5)Â² = 9
  let diff2 = @azimuth.multiply(@azimuth.add(4, @azimuth.multiply(-1, mean)), @azimuth.add(4, @azimuth.multiply(-1, mean)))  // (4-5)Â² = 1
  let diff3 = diff2  // (4-5)Â² = 1
  let diff4 = diff2  // (4-5)Â² = 1
  let diff5 = @azimuth.multiply(@azimuth.add(5, @azimuth.multiply(-1, mean)), @azimuth.add(5, @azimuth.multiply(-1, mean)))  // (5-5)Â² = 0
  let diff6 = diff5  // (5-5)Â² = 0
  let diff7 = @azimuth.multiply(@azimuth.add(7, @azimuth.multiply(-1, mean)), @azimuth.add(7, @azimuth.multiply(-1, mean)))  // (7-5)Â² = 4
  let diff8 = @azimuth.multiply(@azimuth.add(9, @azimuth.multiply(-1, mean)), @azimuth.add(9, @azimuth.multiply(-1, mean)))  // (9-5)Â² = 16
  
  // è®¡ç®—å¹³æ–¹å’Œ
  let sum_of_squares = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(diff1, diff2), diff3), diff4), diff5), diff6), diff7), diff8)
  
  // éªŒè¯è®¡ç®—ç»“æœ
  assert_eq(9, diff1)
  assert_eq(1, diff2)
  assert_eq(0, diff5)
  assert_eq(4, diff7)
  assert_eq(16, diff8)
  assert_eq(32, sum_of_squares)  // 9 + 1 + 1 + 1 + 0 + 0 + 4 + 16 = 32
}