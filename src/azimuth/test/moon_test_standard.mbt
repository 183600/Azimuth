// MoonBit æ ‡å‡†æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "addition_associativity" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let a = 123
  let b = 456
  let c = 789
  
  let left_assoc = @azimuth.add(@azimuth.add(a, b), c)
  let right_assoc = @azimuth.add(a, @azimuth.add(b, c))
  
  @azimuth.assert_eq(left_assoc, right_assoc)
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let d = -100
  let e = 200
  let f = -150
  
  let left_assoc_neg = @azimuth.add(@azimuth.add(d, e), f)
  let right_assoc_neg = @azimuth.add(d, @azimuth.add(e, f))
  
  @azimuth.assert_eq(left_assoc_neg, right_assoc_neg)
}

test "multiplication_commutativity" {
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹ï¼ša Ã— b = b Ã— a
  let a = 42
  let b = 17
  
  let ab = @azimuth.multiply(a, b)
  let ba = @azimuth.multiply(b, a)
  
  @azimuth.assert_eq(ab, ba)
  
  // æµ‹è¯•åŒ…å«é›¶çš„æƒ…å†µ
  let c = 0
  let d = 999
  
  let cd = @azimuth.multiply(c, d)
  let dc = @azimuth.multiply(d, c)
  
  @azimuth.assert_eq(cd, dc)
  @azimuth.assert_eq(0, cd)
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let e = -25
  let f = 8
  
  let ef = @azimuth.multiply(e, f)
  let fe = @azimuth.multiply(f, e)
  
  @azimuth.assert_eq(ef, fe)
}

test "boundary_value_combinations" {
  // æµ‹è¯•è¾¹ç•Œå€¼ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•è¾¹ç•Œå€¼é™„è¿‘çš„è¿ç®—
  @azimuth.assert_eq(2147483646, @azimuth.add(max_val, -1))
  @azimuth.assert_eq(-2147483647, @azimuth.add(min_val, 1))
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_name = "ThisIsAVeryLongNameForTestingPurposes"
  @azimuth.assert_eq_string("Hello, " + long_name + "!", @azimuth.greet(long_name))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, @#$%^&*()!", @azimuth.greet("@#$%^&*()"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, æµ‹è¯•!", @azimuth.greet("æµ‹è¯•"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
}

test "mathematical_formula_validation" {
  // æµ‹è¯•æ•°å­¦å…¬å¼éªŒè¯
  let a = 6
  let b = 4
  
  // éªŒè¯åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let c = 3
  let distrib_left = @azimuth.multiply(a, @azimuth.add(b, c))
  let distrib_right = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(distrib_left, distrib_right)
  
  // éªŒè¯å¹³æ–¹å·®å…¬å¼ï¼š(a + b) Ã— (a - b) = aÂ² - bÂ²
  let sum_ab = @azimuth.add(a, b)
  let diff_ab = @azimuth.add(a, -b)
  let left_side = @azimuth.multiply(sum_ab, diff_ab)
  
  let a_squared = @azimuth.multiply(a, a)
  let b_squared = @azimuth.multiply(b, b)
  let right_side = @azimuth.add(a_squared, -b_squared)
  
  @azimuth.assert_eq(left_side, right_side)
  
  // éªŒè¯ç»“åˆå¾‹ï¼š(a Ã— b) Ã— c = a Ã— (b Ã— c)
  let c2 = 5
  let assoc_left = @azimuth.multiply(@azimuth.multiply(a, b), c2)
  let assoc_right = @azimuth.multiply(a, @azimuth.multiply(b, c2))
  @azimuth.assert_eq(assoc_left, assoc_right)
}

test "real_world_application_scenario" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šé“¶è¡Œè´·æ¬¾è®¡ç®—
  let principal = 100000  // æœ¬é‡‘ï¼ˆå•ä½ï¼šå…ƒï¼‰
  let annual_rate = 6     // å¹´åˆ©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let years = 3           // è´·æ¬¾å¹´é™
  
  // ç®€åŒ–çš„å•åˆ©è®¡ç®—ï¼šæ€»åˆ©æ¯ = æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years))
  
  // æ€»è¿˜æ¬¾é¢ = æœ¬é‡‘ + æ€»åˆ©æ¯
  let total_payment = @azimuth.add(principal, total_interest)
  
  // æœˆè¿˜æ¬¾é¢ = æ€»è¿˜æ¬¾é¢ Ã· (å¹´æ•° Ã— 12)
  let monthly_payment = total_payment / @azimuth.multiply(years, 12)
  
  @azimuth.assert_eq(1800000, total_interest)   // 100000 Ã— 6 Ã— 3 = 1800000
  @azimuth.assert_eq(1900000, total_payment)    // 100000 + 1800000 = 1900000
  @azimuth.assert_eq(52777, monthly_payment)    // 1900000 Ã· 36 â‰ˆ 52777ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
}

test "error_handling_and_edge_cases" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_eq(42, 42)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤æ˜¯å¦æ­£å¸¸å·¥ä½œ
  @azimuth.assert_true(@azimuth.add(max_val, 100) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, -100) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)
  @azimuth.assert_true(@azimuth.multiply(min_val, -2) == min_val)
  
  // æµ‹è¯•ç‰¹æ®Šå€¼çš„å¤„ç†
  @azimuth.assert_eq(0, @azimuth.multiply(0, max_val))
  @azimuth.assert_eq(0, @azimuth.multiply(0, min_val))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
}

test "performance_related_calculations" {
  // æµ‹è¯•æ€§èƒ½ç›¸å…³è®¡ç®—
  // æµ‹è¯•å¤§é‡æ•°æ®çš„ç´¯åŠ ï¼ˆä½¿ç”¨å…¬å¼ä¼˜åŒ–ï¼‰
  let base_value = 100
  let count = 1000
  
  // ä½¿ç”¨ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼ï¼šsum = n Ã— (first + last) / 2
  let last_value = @azimuth.multiply(base_value, count)
  let sum_formula = @azimuth.multiply(count, @azimuth.add(base_value, last_value)) / 2
  
  @azimuth.assert_eq(5050000, sum_formula)
  
  // æµ‹è¯•æŒ‡æ•°å¢é•¿è®¡ç®—ï¼ˆ2çš„10æ¬¡æ–¹ï¼‰
  let power_of_2 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)), 
                                     @azimuth.multiply(@azimuth.multiply(2, 2), 2))
  @azimuth.assert_eq(1024, power_of_2)
  
  // æµ‹è¯•é˜¶ä¹˜è®¡ç®—ï¼ˆ5!ï¼‰
  let factorial_5 = @azimuth.multiply(5, @azimuth.multiply(4, @azimuth.multiply(3, @azimuth.multiply(2, 1))))
  @azimuth.assert_eq(120, factorial_5)
}

test "data_conversion_and_formatting" {
  // æµ‹è¯•æ•°æ®è½¬æ¢å’Œæ ¼å¼åŒ–
  // æ¨¡æ‹Ÿæ•´æ•°åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢ï¼ˆé€šè¿‡greetå‡½æ•°ï¼‰
  let year = 2024
  let year_string = "2024"
  @azimuth.assert_eq_string("Hello, 2024!", @azimuth.greet(year_string))
  
  // æ¨¡æ‹Ÿå¸ƒå°”å€¼åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢
  @azimuth.assert_eq_string("Hello, true!", @azimuth.greet("true"))
  @azimuth.assert_eq_string("Hello, false!", @azimuth.greet("false"))
  
  // æ¨¡æ‹Ÿæµ®ç‚¹æ•°çš„ç®€åŒ–è¡¨ç¤º
  @azimuth.assert_eq_string("Hello, 3.14!", @azimuth.greet("3.14"))
  
  // æµ‹è¯•æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, 2024-01-15!", @azimuth.greet("2024-01-15"))
  @azimuth.assert_eq_string("Hello, 12:30:45!", @azimuth.greet("12:30:45"))
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, User123!", @azimuth.greet("User123"))
  @azimuth.assert_eq_string("Hello, ID_2024_001!", @azimuth.greet("ID_2024_001"))
}

test "complex_calculation_scenario" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯ï¼šç‰©ç†å…¬å¼æ¨¡æ‹Ÿ
  // è‡ªç”±è½ä½“è¿åŠ¨ï¼ˆç®€åŒ–ç‰ˆï¼Œä¸è€ƒè™‘é‡åŠ›å¸¸æ•°ï¼‰
  let initial_velocity = 10  // åˆå§‹é€Ÿåº¦
  let time = 5               // æ—¶é—´
  let acceleration = 2       // åŠ é€Ÿåº¦
  
  // ä½ç§» = åˆé€Ÿåº¦ Ã— æ—¶é—´ + 0.5 Ã— åŠ é€Ÿåº¦ Ã— æ—¶é—´Â²
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šä½ç§» = åˆé€Ÿåº¦ Ã— æ—¶é—´ + åŠ é€Ÿåº¦ Ã— æ—¶é—´Â² / 2
  let time_squared = @azimuth.multiply(time, time)  // 25
  let distance_part1 = @azimuth.multiply(initial_velocity, time)  // 50
  let distance_part2 = @azimuth.multiply(acceleration, time_squared) / 2  // 25
  let total_distance = @azimuth.add(distance_part1, distance_part2)  // 75
  
  @azimuth.assert_eq(75, total_distance)
  
  // æµ‹è¯•åŠ¨èƒ½è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šåŠ¨èƒ½ = è´¨é‡ Ã— é€Ÿåº¦Â² / 2
  let mass = 10
  let velocity = 8
  let velocity_squared = @azimuth.multiply(velocity, velocity)  // 64
  let kinetic_energy = @azimuth.multiply(mass, velocity_squared) / 2  // 320
  
  @azimuth.assert_eq(320, kinetic_energy)
  
  // æµ‹è¯•å¤åˆè®¡ç®—ï¼šè®¡ç®—ä¸¤ä¸ªç‰©ä½“ç¢°æ’åçš„æ€»åŠ¨èƒ½
  let mass2 = 15
  let velocity2 = 6
  let velocity2_squared = @azimuth.multiply(velocity2, velocity2)  // 36
  let kinetic_energy2 = @azimuth.multiply(mass2, velocity2_squared) / 2  // 270
  
  let total_kinetic_energy = @azimuth.add(kinetic_energy, kinetic_energy2)
  @azimuth.assert_eq(590, total_kinetic_energy)
}