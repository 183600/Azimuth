// æ–°çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åŒ…çš„æ ¸å¿ƒåŠŸèƒ½

test "string_processing_with_unicode" {
  // æµ‹è¯• Unicode å­—ç¬¦ä¸²å¤„ç†
  let chinese_name = "å¼ ä¸‰"
  let result = @azimuth.greet(chinese_name)
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", result)
  
  // æµ‹è¯• emoji å­—ç¬¦ä¸²
  let emoji_name = "ğŸš€"
  let emoji_result = @azimuth.greet(emoji_name)
  @azimuth.assert_eq_string("Hello, ğŸš€!", emoji_result)
  
  // æµ‹è¯•æ··åˆå­—ç¬¦ä¸²
  let mixed_name = "User_2023ğŸ‰"
  let mixed_result = @azimuth.greet(mixed_name)
  @azimuth.assert_eq_string("Hello, User_2023ğŸ‰!", mixed_result)
}

test "mathematical_sequence_calculations" {
  // æµ‹è¯•æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // F(5) = 5, F(6) = 8, F(7) = 13
  let fib5 = 5
  let fib6 = 8
  let fib7 = @azimuth.add(fib5, fib6)  // 5 + 8 = 13
  
  @azimuth.assert_eq(13, fib7)
  
  // æµ‹è¯•ç­‰å·®æ•°åˆ—æ±‚å’Œ
  // 1 + 2 + 3 + 4 + 5 = 15
  let sum_1_to_5 = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(1, 2), 3), 4), 5)
  @azimuth.assert_eq(15, sum_1_to_5)
  
  // æµ‹è¯•ç­‰æ¯”æ•°åˆ—æ±‚å’Œ
  // 2 + 4 + 8 + 16 = 30
  let sum_powers = @azimuth.add(@azimuth.add(@azimuth.add(2, @azimuth.multiply(2, 2)), @azimuth.multiply(2, @azimuth.multiply(2, 2))), @azimuth.multiply(@azimuth.multiply(2, 2), @azimuth.multiply(2, 2)))
  @azimuth.assert_eq(30, sum_powers)
}

test "real_world_financial_calculations" {
  // æµ‹è¯•è´·æ¬¾è®¡ç®—
  let principal = 100000  // æœ¬é‡‘
  let annual_rate = 5     // å¹´åˆ©ç‡ 5%
  let years = 3          // å¹´æ•°
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼šåˆ©æ¯ = æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years))
  let total_payment = @azimuth.add(principal, interest)
  
  @azimuth.assert_eq(1600000, total_payment)  // 100000 + 100000Ã—5Ã—3 = 1600000
  
  // æµ‹è¯•æŠ˜æ‰£è®¡ç®—
  let original_price = 1000
  let discount_percentage = 20  // 20% æŠ˜æ‰£
  
  let discount_amount = @azimuth.multiply(original_price, discount_percentage) / 100
  let discounted_price = @azimuth.add(original_price, -discount_amount)
  
  @azimuth.assert_eq(800, discounted_price)  // 1000 - 1000Ã—20/100 = 800
}

test "temperature_conversion_calculations" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šF = C Ã— 2 + 30
  
  // æµ‹è¯•å†°ç‚¹
  let celsius_freezing = 0
  let fahrenheit_freezing = @azimuth.add(@azimuth.multiply(celsius_freezing, 2), 30)
  @azimuth.assert_eq(30, fahrenheit_freezing)
  
  // æµ‹è¯•æ²¸ç‚¹
  let celsius_boiling = 100
  let fahrenheit_boiling = @azimuth.add(@azimuth.multiply(celsius_boiling, 2), 30)
  @azimuth.assert_eq(230, fahrenheit_boiling)
  
  // æµ‹è¯•å®¤æ¸©
  let celsius_room = 20
  let fahrenheit_room = @azimuth.add(@azimuth.multiply(celsius_room, 2), 30)
  @azimuth.assert_eq(70, fahrenheit_room)
  
  // æµ‹è¯•åå‘è½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šC = (F - 30) / 2
  let fahrenheit_back = 70
  let celsius_back = @azimuth.add(fahrenheit_back, -30) / 2
  @azimuth.assert_eq(20, celsius_back)
}

test "geometry_area_calculations" {
  // æµ‹è¯•å‡ ä½•é¢ç§¯è®¡ç®—
  
  // çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let rectangle_length = 10
  let rectangle_width = 6
  let rectangle_area = @azimuth.multiply(rectangle_length, rectangle_width)
  @azimuth.assert_eq(60, rectangle_area)
  
  // ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let triangle_base = 8
  let triangle_height = 5
  let triangle_area = @azimuth.multiply(triangle_base, triangle_height) / 2
  @azimuth.assert_eq(20, triangle_area)
  
  // æ¢¯å½¢é¢ç§¯ï¼šï¼ˆä¸Šåº• + ä¸‹åº•ï¼‰Ã— é«˜ Ã· 2
  let trapezoid_top = 4
  let trapezoid_bottom = 8
  let trapezoid_height = 5
  let trapezoid_area = @azimuth.multiply(@azimuth.add(trapezoid_top, trapezoid_bottom), trapezoid_height) / 2
  @azimuth.assert_eq(30, trapezoid_area)
}

test "complex_number_operations_simulation" {
  // æ¨¡æ‹Ÿå¤æ•°è¿ç®—ï¼ˆä½¿ç”¨æœ‰åºå¯¹è¡¨ç¤ºï¼‰
  // å¤æ•°åŠ æ³•ï¼š(a, b) + (c, d) = (a+c, b+d)
  let real1 = 3
  let imag1 = 4
  let real2 = 5
  let imag2 = 2
  
  let sum_real = @azimuth.add(real1, real2)  // 3 + 5 = 8
  let sum_imag = @azimuth.add(imag1, imag2)  // 4 + 2 = 6
  
  @azimuth.assert_eq(8, sum_real)
  @azimuth.assert_eq(6, sum_imag)
  
  // å¤æ•°ä¹˜æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š(a, b) Ã— (c, d) = (ac-bd, ad+bc)
  let product_real = @azimuth.add(@azimuth.multiply(real1, real2), @azimuth.multiply(-imag1, imag2))  // 3Ã—5 - 4Ã—2 = 7
  let product_imag = @azimuth.add(@azimuth.multiply(real1, imag2), @azimuth.multiply(imag1, real2))    // 3Ã—2 + 4Ã—5 = 26
  
  @azimuth.assert_eq(7, product_real)
  @azimuth.assert_eq(26, product_imag)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  
  // è®¡ç®—å¹³å‡æ•°
  let numbers_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(10, 20), 30), 40), 50)  // 150
  let count = 5
  let average = numbers_sum / count
  @azimuth.assert_eq(30, average)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ•°æ®ï¼š10, 20, 30, 40, 50ï¼Œå¹³å‡å€¼ï¼š30
  let diff1 = @azimuth.add(10, -30)  // -20
  let diff2 = @azimuth.add(20, -30)  // -10
  let diff3 = @azimuth.add(30, -30)  // 0
  let diff4 = @azimuth.add(40, -30)  // 10
  let diff5 = @azimuth.add(50, -30)  // 20
  
  let squared_diff_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.multiply(diff1, diff1), @azimuth.multiply(diff2, diff2)), @azimuth.multiply(diff3, diff3)), @azimuth.multiply(diff4, diff4)), @azimuth.multiply(diff5, diff5))
  let variance = squared_diff_sum / count
  @azimuth.assert_eq(200, variance)  // (400+100+0+100+400)/5 = 200
}

test "game_logic_calculations" {
  // æµ‹è¯•æ¸¸æˆé€»è¾‘è®¡ç®—
  
  // è®¡ç®—å¾—åˆ†ï¼šåŸºç¡€åˆ† + æ—¶é—´å¥–åŠ± + è¿å‡»å¥–åŠ±
  let base_score = 1000
  let time_bonus = 500
  let combo_bonus = 300
  let total_score = @azimuth.add(@azimuth.add(base_score, time_bonus), combo_bonus)
  @azimuth.assert_eq(1800, total_score)
  
  // è®¡ç®—ç­‰çº§æå‡æ‰€éœ€ç»éªŒå€¼
  let current_level = 5
  let base_exp = 1000
  let level_multiplier = 2
  
  // æ‰€éœ€ç»éªŒå€¼ï¼šåŸºç¡€å€¼ Ã— (ç­‰çº§ Ã— å€æ•°)
  let required_exp = @azimuth.multiply(base_exp, @azimuth.multiply(current_level, level_multiplier))
  @azimuth.assert_eq(10000, required_exp)
  
  // è®¡ç®—ä¼¤å®³å€¼ï¼šæ”»å‡»åŠ› Ã— é˜²å¾¡ç³»æ•° - é˜²å¾¡åŠ›
  let attack_power = 100
  let defense_coefficient = 15  // 1.5ï¼Œç®€åŒ–ä¸ºæ•´æ•°
  let defense = 50
  
  let damage = @azimuth.add(@azimuth.multiply(attack_power, defense_coefficient) / 10, -defense)
  @azimuth.assert_eq(100, damage)  // (100Ã—15/10) - 50 = 100
}

test "time_and_date_calculations" {
  // æµ‹è¯•æ—¶é—´å’Œæ—¥æœŸè®¡ç®—
  
  // è®¡ç®—æ€»ç§’æ•°ï¼šå°æ—¶ Ã— 3600 + åˆ†é’Ÿ Ã— 60 + ç§’
  let hours = 2
  let minutes = 30
  let seconds = 45
  
  let total_seconds = @azimuth.add(@azimuth.add(@azimuth.multiply(hours, 3600), @azimuth.multiply(minutes, 60)), seconds)
  @azimuth.assert_eq(9045, total_seconds)  // 2Ã—3600 + 30Ã—60 + 45 = 9045
  
  // è®¡ç®—å¤©æ•°å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let start_day = 15
  let start_month = 1
  let end_day = 5
  let end_month = 2
  
  // å‡è®¾æ¯æœˆ30å¤©
  let days_in_first_month = @azimuth.multiply(@azimuth.add(start_month, -1), 30)
  let days_from_start = @azimuth.add(days_in_first_month, start_day)
  
  let days_in_second_month = @azimuth.multiply(@azimuth.add(end_month, -1), 30)
  let days_to_end = @azimuth.add(days_in_second_month, end_day)
  
  let days_difference = @azimuth.add(days_to_end, -days_from_start)
  @azimuth.assert_eq(20, days_difference)  // (30+5) - (0+15) = 20
}