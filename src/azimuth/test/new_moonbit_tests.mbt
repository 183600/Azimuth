// æ–°çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åŒ…ä¸­çš„å„ç§åŠŸèƒ½

test "add_overflow_edge_cases" {
  // æµ‹è¯•åŠ æ³•æº¢å‡ºçš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æ•°æº¢å‡º
  assert_eq(max_val, azimuth::add(max_val, 1))
  assert_eq(max_val, azimuth::add(max_val, max_val))
  
  // æµ‹è¯•è´Ÿæ•°æº¢å‡º
  assert_eq(min_val, azimuth::add(min_val, -1))
  assert_eq(min_val, azimuth::add(min_val, min_val))
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æœ€å°å€¼ç›¸åŠ 
  assert_eq(-1, azimuth::add(max_val, min_val))
}

test "multiply_overflow_scenarios" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºçš„å„ç§åœºæ™¯
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å¤§æ•°ç›¸ä¹˜æº¢å‡º
  assert_eq(max_val, azimuth::multiply(46341, 46341))
  assert_eq(min_val, azimuth::multiply(-46341, 46341))
  
  // æµ‹è¯•æœ€å°å€¼ä¹˜æ³•ç‰¹æ®Šæƒ…å†µ
  assert_eq(min_val, azimuth::multiply(min_val, -1))
  assert_eq(min_val, azimuth::multiply(min_val, 2))
  
  // æµ‹è¯•è¾¹ç•Œå€¼ç»„åˆ
  assert_eq(0, azimuth::multiply(max_val, 0))
  assert_eq(0, azimuth::multiply(min_val, 0))
}

test "greet_unicode_and_special_chars" {
  // æµ‹è¯•åŒ…å« Unicode å­—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦çš„é—®å€™
  assert_eq_string("Hello, ğŸŒ!", azimuth::greet("ğŸŒ"))
  assert_eq_string("Hello, ğŸš€!", azimuth::greet("ğŸš€"))
  assert_eq_string("Hello, å¼ ä¸‰!", azimuth::greet("å¼ ä¸‰"))
  assert_eq_string("Hello, Ã±oÃ±o!", azimuth::greet("Ã±oÃ±o"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", azimuth::greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
}

test "complex_mathematical_expressions" {
  // æµ‹è¯•å¤æ‚æ•°å­¦è¡¨è¾¾å¼
  // è®¡ç®—ï¼š(a + b) * (c - d)
  let a = 10
  let b = 5
  let c = 20
  let d = 8
  
  let sum_ab = azimuth::add(a, b)  // 15
  let diff_cd = azimuth::add(c, -d)  // 12
  let result = azimuth::multiply(sum_ab, diff_cd)  // 15 * 12 = 180
  
  assert_eq(180, result)
  
  // è®¡ç®—ï¼ša * b + c * d
  let product_ab = azimuth::multiply(a, b)  // 50
  let product_cd = azimuth::multiply(c, d)  // 160
  let sum_result = azimuth::add(product_ab, product_cd)  // 50 + 160 = 210
  
  assert_eq(210, sum_result)
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯
  // è®¡ç®—å¤åˆ©ï¼šprincipal * (1 + rate * years)
  let principal = 10000
  let rate = 5  // 5%
  let years = 3
  
  let rate_multiplier = azimuth::add(1, azimuth::multiply(rate, years))  // 1 + 5*3 = 16
  let total = azimuth::multiply(principal, rate_multiplier)  // 10000 * 16 = 160000
  
  assert_eq(160000, total)
  
  // è®¡ç®—æŠ˜æ‰£ä»·æ ¼ï¼šoriginal_price * (1 - discount_rate)
  let original_price = 200
  let discount_rate = 20  // 20%
  let discount_multiplier = azimuth::add(1, -discount_rate)  // 1 - 20 = -19
  let discounted_price = azimuth::multiply(original_price, discount_multiplier)  // 200 * -19 = -3800
  
  assert_eq(-3800, discounted_price)
}

test "geometry_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // è®¡ç®—åœ†çš„å‘¨é•¿ï¼ˆè¿‘ä¼¼å€¼ï¼‰ï¼š2 * Ï€ * rï¼Œä½¿ç”¨ Ï€ â‰ˆ 3
  let radius = 10
  let pi_approx = 3
  let circumference = azimuth::multiply(2, azimuth::multiply(pi_approx, radius))  // 2 * 3 * 10 = 60
  
  assert_eq(60, circumference)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) * é«˜ / 2
  let top_base = 8
  let bottom_base = 12
  let height = 5
  
  let sum_bases = azimuth::add(top_base, bottom_base)  // 20
  let area_times_2 = azimuth::multiply(sum_bases, height)  // 20 * 5 = 100
  let area = area_times_2 / 2  // 50
  
  assert_eq(50, area)
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•éå¸¸é•¿çš„åå­—
  let very_long_name = "ThisIsAnExtremelyLongNameThatCouldPotentiallyCauseIssuesInSomeSystems"
  let result1 = azimuth::greet(very_long_name)
  assert_eq_string("Hello, " + very_long_name + "!", result1)
  
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„åå­—
  let special_chars_name = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  let result2 = azimuth::greet(special_chars_name)
  assert_eq_string("Hello, " + special_chars_name + "!", result2)
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„åå­—
  let spaced_name = "   "
  let result3 = azimuth::greet(spaced_name)
  assert_eq_string("Hello,    !", result3)
}

test "sequence_operations" {
  // æµ‹è¯•åºåˆ—æ“ä½œ
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šn/2 * (2a + (n-1)d)
  let n = 10
  let a = 1  // é¦–é¡¹
  let d = 2  // å…¬å·®
  
  let two_a = azimuth::multiply(2, a)  // 2
  let n_minus_1 = azimuth::add(n, -1)  // 9
  let term_in_parentheses = azimuth::add(two_a, azimuth::multiply(n_minus_1, d))  // 2 + 9*2 = 20
  let sum = azimuth::multiply(n / 2, term_in_parentheses)  // 5 * 20 = 100
  
  assert_eq(100, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼ša * (1 - r^n) / (1 - r)
  // è¿™é‡Œæˆ‘ä»¬åªè®¡ç®—å‰3é¡¹çš„å’Œ
  let first_term = 2
  let ratio = 3
  
  let term1 = first_term  // 2
  let term2 = azimuth::multiply(first_term, ratio)  // 6
  let term3 = azimuth::multiply(term2, ratio)  // 18
  let geo_sum = azimuth::add(azimuth::add(term1, term2), term3)  // 2 + 6 + 18 = 26
  
  assert_eq(26, geo_sum)
}

test "error_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯è¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°çš„æ­£ç¡®æ€§
  azimuth::assert_true(true)
  azimuth::assert_false(false)
  azimuth::assert_eq(42, 42)
  azimuth::assert_eq_string("test", "test")
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„è¿ç®—ç»“æœ
  assert_true(azimuth::add(max_val, 1) == max_val)
  assert_true(azimuth::add(min_val, -1) == min_val)
  assert_true(azimuth::multiply(max_val, 2) == max_val)
  assert_true(azimuth::multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•æ­£å¸¸è¿ç®—
  assert_true(azimuth::add(100, 200) == 300)
  assert_true(azimuth::multiply(15, 20) == 300)
  assert_true(azimuth::greet("Test") == "Hello, Test!")
}