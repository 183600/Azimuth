// æ–°å¢çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åŒ…çš„é¢å¤–åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "add_function_large_numbers" {
  // æµ‹è¯•å¤§æ•°åŠ æ³•
  assert_eq(2000000000, azimuth::add(1000000000, 1000000000))
  assert_eq(-2000000000, azimuth::add(-1000000000, -1000000000))
  assert_eq(0, azimuth::add(1500000000, -1500000000))
}

test "multiply_function_large_numbers" {
  // æµ‹è¯•å¤§æ•°ä¹˜æ³•
  assert_eq(1000000, azimuth::multiply(1000, 1000))
  assert_eq(-1000000, azimuth::multiply(-1000, 1000))
  assert_eq(1000000, azimuth::multiply(-1000, -1000))
  assert_eq(4000000, azimuth::multiply(2000, 2000))
}

test "greet_function_unicode_and_emoji" {
  // æµ‹è¯• Unicode å’Œ emoji å­—ç¬¦
  assert_eq_string("Hello, ğŸŒ!", azimuth::greet("ğŸŒ"))
  assert_eq_string("Hello, ğŸ‘‹!", azimuth::greet("ğŸ‘‹"))
  assert_eq_string("Hello, ğŸš€!", azimuth::greet("ğŸš€"))
  assert_eq_string("Hello, æµ‹è¯•!", azimuth::greet("æµ‹è¯•"))
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  // è®¡ç®—ç­‰å·®æ•°åˆ—å’Œï¼š1 + 2 + 3 + 4 + 5 = 15
  let sum1 = azimuth::add(azimuth::add(1, 2), azimuth::add(3, 4))
  let total1 = azimuth::add(sum1, 5)
  assert_eq(15, total1)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å’Œï¼š2 + 4 + 8 + 16 = 30
  let sum2 = azimuth::add(azimuth::add(2, 4), azimuth::add(8, 16))
  assert_eq(30, sum2)
}

test "complex_business_calculation" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡è®¡ç®—
  // è®¡ç®—è®¢å•æ€»ä»·ï¼šå•†å“ä»·æ ¼ Ã— æ•°é‡ + ç¨è´¹ + è¿è´¹
  let unit_price = 299
  let quantity = 2
  let tax_rate = 8  // 8%
  let shipping = 15
  
  let subtotal = azimuth::multiply(unit_price, quantity)
  let tax = azimuth::multiply(subtotal, tax_rate) / 100
  let total = azimuth::add(azimuth::add(subtotal, tax), shipping)
  
  assert_eq(658, total)  // 299*2 + 299*2*8/100 + 15 = 598 + 47 + 15 = 660
}

test "temperature_conversion_calculation" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢è®¡ç®—
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 9/5 + 32 (ç®€åŒ–ä¸º F = C * 2 + 30)
  let celsius = 25
  let fahrenheit = azimuth::add(azimuth::multiply(celsius, 2), 30)
  assert_eq(80, fahrenheit)
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼šC = (F - 32) * 5/9 (ç®€åŒ–ä¸º C = (F - 30) / 2)
  let fahrenheit2 = 80
  let celsius2 = (azimuth::add(fahrenheit2, -30)) / 2
  assert_eq(25, celsius2)
}

test "geometric_area_calculations" {
  // æµ‹è¯•å‡ ä½•é¢ç§¯è®¡ç®—
  // çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  let rectangle_area = azimuth::multiply(length, width)
  assert_eq(96, rectangle_area)
  
  // ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = (azimuth::multiply(base, height)) / 2
  assert_eq(30, triangle_area)
  
  // æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 6
  let bottom_base = 10
  let trapezoid_height = 4
  let trapezoid_area = (
    azimuth::multiply(azimuth::add(top_base, bottom_base), trapezoid_height)
  ) / 2
  assert_eq(32, trapezoid_area)
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  // ç©ºå­—ç¬¦ä¸²
  assert_eq_string("Hello, !", azimuth::greet(""))
  
  // å•ä¸ªå­—ç¬¦
  assert_eq_string("Hello, A!", azimuth::greet("A"))
  
  // åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, John Doe!", azimuth::greet("John Doe"))
  
  // åŒ…å«ç‰¹æ®Šç¬¦å·çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, test@example.com!", azimuth::greet("test@example.com"))
  
  // åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, User123!", azimuth::greet("User123"))
}

test "overflow_and_underflow_protection" {
  // æµ‹è¯•æº¢å‡ºå’Œä¸‹æº¢ä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // åŠ æ³•æº¢å‡ºä¿æŠ¤
  assert_eq(max_val, azimuth::add(max_val, 1))
  assert_eq(max_val, azimuth::add(max_val, max_val))
  
  // åŠ æ³•ä¸‹æº¢ä¿æŠ¤
  assert_eq(min_val, azimuth::add(min_val, -1))
  assert_eq(min_val, azimuth::add(min_val, min_val))
  
  // ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  assert_eq(max_val, azimuth::multiply(max_val, 2))
  assert_eq(min_val, azimuth::multiply(min_val, -1))
  
  // ä¹˜æ³•ä¸‹æº¢ä¿æŠ¤
  assert_eq(min_val, azimuth::multiply(min_val, 2))
}

test "nested_function_calls" {
  // æµ‹è¯•åµŒå¥—å‡½æ•°è°ƒç”¨
  // è®¡ç®— ((a + b) * (c + d)) - (e * f)
  let a = 10
  let b = 20
  let c = 5
  let d = 15
  let e = 8
  let f = 12
  
  let sum1 = azimuth::add(a, b)  // 30
  let sum2 = azimuth::add(c, d)  // 20
  let product1 = azimuth::multiply(sum1, sum2)  // 600
  let product2 = azimuth::multiply(e, f)  // 96
  let result = azimuth::add(product1, -product2)  // 504
  
  assert_eq(504, result)
}