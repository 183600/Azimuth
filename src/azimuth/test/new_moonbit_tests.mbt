// æ–°å¢ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth æ¨¡å—çš„å„ç§åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "add_zero_properties" {
  // æµ‹è¯•åŠ æ³•çš„é›¶å…ƒç´ æ€§è´¨
  @azimuth.assert_eq(42, @azimuth.add(42, 0))
  @azimuth.assert_eq(42, @azimuth.add(0, 42))
  @azimuth.assert_eq(0, @azimuth.add(0, 0))
  @azimuth.assert_eq(-17, @azimuth.add(-17, 0))
  @azimuth.assert_eq(-17, @azimuth.add(0, -17))
}

test "multiply_identity_properties" {
  // æµ‹è¯•ä¹˜æ³•çš„å•ä½å…ƒæ€§è´¨
  @azimuth.assert_eq(25, @azimuth.multiply(25, 1))
  @azimuth.assert_eq(25, @azimuth.multiply(1, 25))
  @azimuth.assert_eq(0, @azimuth.multiply(25, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, 25))
  @azimuth.assert_eq(-30, @azimuth.multiply(-30, 1))
  @azimuth.assert_eq(-30, @azimuth.multiply(1, -30))
}

test "add_overflow_protection" {
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  // æµ‹è¯•è´Ÿæº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
}

test "multiply_overflow_protection" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.multiply(46341, 46341))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  
  // æµ‹è¯•è´Ÿæº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.multiply(-46341, 46341))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•æœ€å°å€¼ä¹˜æ³•ç‰¹æ®Šæƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "greet_special_characters" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„é—®å€™
  @azimuth.assert_eq_string("Hello, @#$%!", @azimuth.greet("@#$%"))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
  @azimuth.assert_eq_string("Hello, 	\n!", @azimuth.greet("\t\n"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", @azimuth.greet("ä¸­æ–‡æµ‹è¯•"))
  @azimuth.assert_eq_string("Hello, Ã©mojiğŸš€!", @azimuth.greet("Ã©mojiğŸš€"))
}

test "complex_business_calculation" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¡ç®—è®¢å•æ€»ä»·
  let item_price = 199
  let quantity = 3
  let discount = 50
  let tax_rate = 8
  let shipping = 15
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(item_price, quantity)
  // åº”ç”¨æŠ˜æ‰£
  let discounted_total = @azimuth.add(subtotal, -discount)
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(discounted_total, tax_rate) / 100
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let final_total = @azimuth.add(@azimuth.add(discounted_total, tax), shipping)
  
  @azimuth.assert_eq(622, final_total)
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—ï¼šè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—å‰10é¡¹çš„å’Œ
  // æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼š1, 1, 2, 3, 5, 8, 13, 21, 34, 55
  // å’Œä¸ºï¼š143
  
  // é€šè¿‡åŠ æ³•å’Œä¹˜æ³•è®¡ç®—æ–æ³¢é‚£å¥‘æ•°
  let f1 = 1
  let f2 = 1
  let f3 = @azimuth.add(f1, f2)  // 2
  let f4 = @azimuth.add(f2, f3)  // 3
  let f5 = @azimuth.add(f3, f4)  // 5
  let f6 = @azimuth.add(f4, f5)  // 8
  let f7 = @azimuth.add(f5, f6)  // 13
  let f8 = @azimuth.add(f6, f7)  // 21
  let f9 = @azimuth.add(f7, f8)  // 34
  let f10 = @azimuth.add(f8, f9) // 55
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(
    @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(f1, f2), f3), f4), f5), f6), f7), f8), f9), f10)
  
  @azimuth.assert_eq(143, sum)
}

test "temperature_conversion_calculation" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢è®¡ç®—ï¼šæ‘„æ°åº¦è½¬åæ°åº¦
  // ä½¿ç”¨ç®€åŒ–å…¬å¼ï¼šF = C * 9/5 + 32ï¼Œç”±äºæ•´æ•°è¿ç®—ï¼Œæˆ‘ä»¬ä½¿ç”¨ F = C * 2 + 30
  
  // æµ‹è¯•å†°ç‚¹
  let freezing_c = 0
  let freezing_f = @azimuth.add(@azimuth.multiply(freezing_c, 2), 30)
  @azimuth.assert_eq(30, freezing_f)
  
  // æµ‹è¯•æ²¸ç‚¹
  let boiling_c = 100
  let boiling_f = @azimuth.add(@azimuth.multiply(boiling_c, 2), 30)
  @azimuth.assert_eq(230, boiling_f)
  
  // æµ‹è¯•å®¤æ¸©
  let room_c = 20
  let room_f = @azimuth.add(@azimuth.multiply(room_c, 2), 30)
  @azimuth.assert_eq(70, room_f)
  
  // æµ‹è¯•é›¶ä¸‹æ¸©åº¦
  let below_zero_c = -10
  let below_zero_f = @azimuth.add(@azimuth.multiply(below_zero_c, 2), 30)
  @azimuth.assert_eq(10, below_zero_f)
}

test "compound_interest_calculation" {
  // æµ‹è¯•å¤åˆ©è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡)^å¹´æ•°
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼š10000 Ã— (1 + 5%)^3 â‰ˆ 10000 Ã— 116 = 1160000
  
  let principal = 10000
  let rate_percent = 5
  let years = 3
  
  // ç®€åŒ–çš„å¤åˆ©å…¬å¼ï¼Œé¿å…æµ®ç‚¹æ•°
  let growth_factor = @azimuth.add(100, @azimuth.multiply(rate_percent, years))
  let total = @azimuth.multiply(principal, growth_factor)
  @azimuth.assert_eq(1150000, total)  // 10000 Ã— (100 + 5Ã—3) = 10000 Ã— 115 = 1150000
  
  // æµ‹è¯•ä¸åŒåˆ©ç‡
  let high_rate = 10
  let high_growth = @azimuth.add(100, @azimuth.multiply(high_rate, years))
  let high_total = @azimuth.multiply(principal, high_growth)
  @azimuth.assert_eq(1300000, high_total)  // 10000 Ã— (100 + 10Ã—3) = 10000 Ã— 130 = 1300000
}

test "geometric_area_calculation" {
  // æµ‹è¯•å‡ ä½•é¢ç§¯è®¡ç®—
  // è®¡ç®—çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  let rectangle_area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, rectangle_area)
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = @azimuth.multiply(base, height) / 2
  @azimuth.assert_eq(30, triangle_area)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 5
  let bottom_base = 15
  let trapezoid_height = 8
  let trapezoid_area = @azimuth.multiply(@azimuth.add(top_base, bottom_base), trapezoid_height) / 2
  @azimuth.assert_eq(80, trapezoid_area)
}