// MoonBit æµ‹è¯•å¥—ä»¶
// æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•ç¤ºä¾‹

// æµ‹è¯• 1: æ•°å­—è¿ç®—è¾¹ç•Œæµ‹è¯•
test "numeric_boundary_operations" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•åŠ æ³•è¾¹ç•Œ
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  
  // æµ‹è¯•ä¹˜æ³•è¾¹ç•Œ
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  
  // æµ‹è¯•ç‰¹æ®Šç»„åˆ
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
}

// æµ‹è¯• 2: å­—ç¬¦ä¸²å¤„ç†å¤šè¯­è¨€æµ‹è¯•
test "multilingual_string_processing" {
  // æµ‹è¯•ä¸­æ–‡
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", @azimuth.greet("å¼ ä¸‰"))
  
  // æµ‹è¯•æ—¥æ–‡
  @azimuth.assert_eq_string("Hello, ã“ã‚“ã«ã¡ã¯!", @azimuth.greet("ã“ã‚“ã«ã¡ã¯"))
  
  // æµ‹è¯•éŸ©æ–‡
  @azimuth.assert_eq_string("Hello, ì•ˆë…•í•˜ì„¸ìš”!", @azimuth.greet("ì•ˆë…•í•˜ì„¸ìš”"))
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡
  @azimuth.assert_eq_string("Hello, Ù…Ø±Ø­Ø¨Ø§!", @azimuth.greet("Ù…Ø±Ø­Ø¨Ø§"))
  
  // æµ‹è¯•è¡¨æƒ…ç¬¦å·
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
}

// æµ‹è¯• 3: å¤æ‚æ•°å­¦è¡¨è¾¾å¼
test "complex_mathematical_expressions" {
  // æµ‹è¯• (a + b) * (c - d) + e
  let a = 10
  let b = 5
  let c = 20
  let d = 8
  let e = 3
  
  let sum_ab = @azimuth.add(a, b)
  let diff_cd = @azimuth.add(c, -d)
  let product = @azimuth.multiply(sum_ab, diff_cd)
  let result = @azimuth.add(product, e)
  
  @azimuth.assert_eq(93, result)
}

// æµ‹è¯• 4: æ¡ä»¶åˆ†æ”¯æµ‹è¯•
test "conditional_branching_test" {
  let x = 15
  let y = 10
  
  // æµ‹è¯•ä¸‰å…ƒæ¡ä»¶
  let max_val = if x > y { x } else { y }
  @azimuth.assert_eq(15, max_val)
  
  // æµ‹è¯•åµŒå¥—æ¡ä»¶
  let result = if x > 10 {
    if y > 5 {
      @azimuth.add(x, y)
    } else {
      @azimuth.multiply(x, y)
    }
  } else {
    @azimuth.multiply(x, y)
  }
  
  @azimuth.assert_eq(25, result)
}

// æµ‹è¯• 5: æ•°ç»„ç´¢å¼•è®¡ç®—æ¨¡æ‹Ÿ
test "array_index_calculation" {
  // äºŒç»´æ•°ç»„åˆ°ä¸€ç»´æ•°ç»„çš„ç´¢å¼•è®¡ç®—
  let row = 3
  let col = 4
  let width = 10
  
  // è®¡ç®—ä¸€ç»´ç´¢å¼•: index = row * width + col
  let index = @azimuth.add(@azimuth.multiply(row, width), col)
  @azimuth.assert_eq(34, index)
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  let first_index = @azimuth.add(@azimuth.multiply(0, width), 0)
  let last_index = @azimuth.add(@azimuth.multiply(9, width), 9)
  
  @azimuth.assert_eq(0, first_index)
  @azimuth.assert_eq(99, last_index)
}

// æµ‹è¯• 6: å­—ç¬¦ä¸²æ¨¡æ¿æ¨¡æ‹Ÿ
test "string_template_simulation" {
  // æ¨¡æ‹Ÿç®€å•çš„å­—ç¬¦ä¸²æ¨¡æ¿åŠŸèƒ½
  let name = "Alice"
  let age = "25"
  let city = "Beijing"
  
  // æ„å»ºä¸ªäººä¿¡æ¯å­—ç¬¦ä¸²
  let greeting = @azimuth.greet(name)
  let age_info = " Age: " + age
  let city_info = " City: " + city
  let full_info = greeting + age_info + city_info
  
  @azimuth.assert_eq_string("Hello, Alice! Age: 25 City: Beijing", full_info)
}

// æµ‹è¯• 7: æ•°å­¦æ’ç­‰å¼éªŒè¯
test "mathematical_identities" {
  let a = 12
  let b = 5
  
  // éªŒè¯äº¤æ¢å¾‹: a + b = b + a
  let sum_ab = @azimuth.add(a, b)
  let sum_ba = @azimuth.add(b, a)
  @azimuth.assert_eq(sum_ab, sum_ba)
  
  // éªŒè¯ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  let c = 3
  let left_assoc = @azimuth.add(@azimuth.add(a, b), c)
  let right_assoc = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(left_assoc, right_assoc)
  
  // éªŒè¯åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let distrib_left = @azimuth.multiply(a, @azimuth.add(b, c))
  let distrib_right = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(distrib_left, distrib_right)
}

// æµ‹è¯• 8: å®é™…åº”ç”¨åœºæ™¯ - è®¢å•è®¡ç®—
test "order_calculation_scenario" {
  let unit_price = 199
  let quantity = 3
  let discount_rate = 10
  let shipping_fee = 15
  let tax_rate = 8
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(unit_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£
  let discount = @azimuth.multiply(subtotal, discount_rate) / 100
  let discounted_price = @azimuth.add(subtotal, -discount)
  
  // è®¡ç®—ç¨è´¹
  let tax = @azimuth.multiply(discounted_price, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = @azimuth.add(@azimuth.add(discounted_price, tax), shipping_fee)
  
  @azimuth.assert_eq(626, total)
}

// æµ‹è¯• 9: æ€§èƒ½ç›¸å…³è®¡ç®—
test "performance_related_calculations" {
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œ: 1 + 2 + 3 + ... + n
  let n = 100
  
  // ä½¿ç”¨å…¬å¼: n * (n + 1) / 2
  let sum = @azimuth.multiply(n, @azimuth.add(n, 1)) / 2
  @azimuth.assert_eq(5050, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—çš„å’Œ: 1 + 2 + 4 + 8 + 16
  let power_sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(1, 2), 4), 8), 16)
  @azimuth.assert_eq(31, power_sum)
}

// æµ‹è¯• 10: é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
test "error_handling_and_edge_cases" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  let overflow_result = @azimuth.add(max_val, max_val)
  let underflow_result = @azimuth.add(min_val, min_val)
  
  @azimuth.assert_eq(max_val, overflow_result)
  @azimuth.assert_eq(min_val, underflow_result)
  
  // æµ‹è¯•ç‰¹æ®Šæƒ…å†µ
  let special_case1 = @azimuth.multiply(min_val, -1)
  let special_case2 = @azimuth.multiply(max_val, -1)
  
  @azimuth.assert_eq(min_val, special_case1)
  @azimuth.assert_eq(min_val, special_case2)
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_false(@azimuth.add(5, 3) == 9)
}