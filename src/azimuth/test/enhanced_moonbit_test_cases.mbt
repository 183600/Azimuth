// å¢å¼ºçš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åº“çš„å„ç§åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

// æµ‹è¯•1: å¤§æ•°è¿ç®—æµ‹è¯•
test "large_number_operations" {
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œå€¼çš„å¤§æ•°è¿ç®—
  let large_num1 = 1000000000
  let large_num2 = 1500000000
  
  // å¤§æ•°ç›¸åŠ ï¼ˆåº”è¯¥è§¦å‘æº¢å‡ºä¿æŠ¤ï¼‰
  let sum_result = @azimuth.add(large_num1, large_num2)
  @azimuth.assert_eq(2147483647, sum_result)
  
  // å¤§æ•°ç›¸ä¹˜ï¼ˆåº”è¯¥è§¦å‘æº¢å‡ºä¿æŠ¤ï¼‰
  let product_result = @azimuth.multiply(50000, 50000)
  @azimuth.assert_eq(2147483647, product_result)
}

// æµ‹è¯•2: ç‰¹æ®Šå€¼ç»„åˆæµ‹è¯•
test "special_value_combinations" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // é›¶ä¸ç‰¹æ®Šå€¼çš„è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
}

// æµ‹è¯•3: å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µæµ‹è¯•
test "string_boundary_cases" {
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²å’Œå•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello,   World!", @azimuth.greet("  World"))
  @azimuth.assert_eq_string("Hello, World   !", @azimuth.greet("World  "))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, æµ‹è¯•123!", @azimuth.greet("æµ‹è¯•123"))
  @azimuth.assert_eq_string("Hello, ğŸŒ!", @azimuth.greet("ğŸŒ"))
}

// æµ‹è¯•4: å¤åˆè¿ç®—åœºæ™¯æµ‹è¯•
test "complex_calculation_scenarios" {
  // åœºæ™¯1: è®¡ç®—åœ†æŸ±ä½“è¡¨é¢ç§¯ï¼ˆç®€åŒ–ï¼‰
  // è¡¨é¢ç§¯ = 2 Ã— Ï€ Ã— r Ã— (r + h) â‰ˆ 6 Ã— r Ã— (r + h)
  let radius = 5
  let height = 10
  
  let radius_plus_height = @azimuth.add(radius, height)  // 15
  let surface_area = @azimuth.multiply(6, @azimuth.multiply(radius, radius_plus_height))  // 6 Ã— 5 Ã— 15 = 450
  @azimuth.assert_eq(450, surface_area)
  
  // åœºæ™¯2: è®¡ç®—æŠ•èµ„å›æŠ¥ï¼ˆç®€åŒ–ï¼‰
  // å›æŠ¥ = æœ¬é‡‘ Ã— (1 + æ”¶ç›Šç‡ Ã— å¹´æ•°)
  let principal = 10000
  let return_rate = 8  // 8%
  let years = 5
  
  let growth_factor = @azimuth.add(1, @azimuth.multiply(return_rate, years))  // 1 + 8Ã—5 = 41
  let returns = @azimuth.multiply(principal, growth_factor)  // 10000 Ã— 41 = 410000
  @azimuth.assert_eq(410000, returns)
}

// æµ‹è¯•5: æ•°å­¦æ’ç­‰å¼éªŒè¯æµ‹è¯•
test "mathematical_identities" {
  let a = 12
  let b = 7
  let c = 5
  
  // éªŒè¯åŠ æ³•ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  let left_assoc = @azimuth.add(@azimuth.add(a, b), c)  // (12 + 7) + 5 = 24
  let right_assoc = @azimuth.add(a, @azimuth.add(b, c))  // 12 + (7 + 5) = 24
  @azimuth.assert_eq(left_assoc, right_assoc)
  
  // éªŒè¯ä¹˜æ³•åˆ†é…å¾‹: a Ã— (b + c) = a Ã— b + a Ã— c
  let distrib_left = @azimuth.multiply(a, @azimuth.add(b, c))  // 12 Ã— (7 + 5) = 144
  let distrib_right = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))  // 12Ã—7 + 12Ã—5 = 144
  @azimuth.assert_eq(distrib_left, distrib_right)
}

// æµ‹è¯•6: è¾¹ç•Œå€¼æº¢å‡ºä¿æŠ¤æµ‹è¯•
test "overflow_protection_boundary" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å„ç§æº¢å‡ºæƒ…å†µ
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(max_val, @azimuth.multiply(100000, 30000))
  
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(-100000, 30000))
}

// æµ‹è¯•7: å®é™…åº”ç”¨åœºæ™¯æµ‹è¯•
test "practical_application_scenarios" {
  // åœºæ™¯1: è®¡ç®—è´­ç‰©è½¦æ€»ä»·
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let shipping_fee = 20
  let tax_rate = 8  // 8%
  
  // è®¡ç®—å•†å“æ€»ä»·
  let item1_total = @azimuth.multiply(item1_price, item1_quantity)  // 598
  let item2_total = @azimuth.multiply(item2_price, item2_quantity)  // 597
  let subtotal = @azimuth.add(item1_total, item2_total)  // 1195
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = @azimuth.multiply(subtotal, tax_rate) / 100  // 95
  let total_with_tax = @azimuth.add(subtotal, tax_amount)  // 1290
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let final_total = @azimuth.add(total_with_tax, shipping_fee)  // 1310
  @azimuth.assert_eq(1310, final_total)
  
  // åœºæ™¯2: è®¡ç®—å¹³å‡åˆ†
  let score1 = 85
  let score2 = 92
  let score3 = 78
  let score4 = 96
  let score5 = 89
  
  let total_score = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(score1, score2), score3), score4), score5)  // 440
  let average_score = total_score / 5  // 88
  @azimuth.assert_eq(88, average_score)
}

// æµ‹è¯•8: æ¡ä»¶è¿ç®—æµ‹è¯•
test "conditional_operations" {
  // æ¨¡æ‹Ÿæ¡ä»¶è¿ç®—ï¼šå¦‚æœ a > bï¼Œåˆ™è®¡ç®— a + bï¼Œå¦åˆ™è®¡ç®— a Ã— b
  let a = 15
  let b = 20
  
  // ç”±äº a < bï¼Œåº”è¯¥è®¡ç®— a Ã— b
  let condition = a > b  // false
  let result = if condition { 
    @azimuth.add(a, b) 
  } else { 
    @azimuth.multiply(a, b) 
  }
  @azimuth.assert_eq(300, result)  // 15 Ã— 20 = 300
  
  // åå‘æµ‹è¯•
  let c = 25
  let d = 10
  
  // ç”±äº c > dï¼Œåº”è¯¥è®¡ç®— c + d
  let condition2 = c > d  // true
  let result2 = if condition2 { 
    @azimuth.add(c, d) 
  } else { 
    @azimuth.multiply(c, d) 
  }
  @azimuth.assert_eq(35, result2)  // 25 + 10 = 35
}

// æµ‹è¯•9: æ•°å€¼èŒƒå›´éªŒè¯æµ‹è¯•
test "numeric_range_validation" {
  // æµ‹è¯•æ­£æ•°èŒƒå›´
  @azimuth.assert_true(@azimuth.add(1000000, 2000000) > 0)
  @azimuth.assert_true(@azimuth.multiply(1000, 1000) > 0)
  
  // æµ‹è¯•è´Ÿæ•°èŒƒå›´
  @azimuth.assert_true(@azimuth.add(-1000000, -2000000) < 0)
  @azimuth.assert_true(@azimuth.multiply(-1000, 1000) < 0)
  
  // æµ‹è¯•é›¶å€¼
  @azimuth.assert_eq(0, @azimuth.multiply(0, 123456789))
  @azimuth.assert_eq(123456789, @azimuth.add(0, 123456789))
  
  // æµ‹è¯•è¾¹ç•Œæ¯”è¾ƒ
  let max_val = 2147483647
  let min_val = -2147483648
  
  @azimuth.assert_true(max_val > 0)
  @azimuth.assert_true(min_val < 0)
  @azimuth.assert_true(max_val > min_val)
}

// æµ‹è¯•10: å­—ç¬¦ä¸²æ ¼å¼åŒ–æµ‹è¯•
test "string_formatting_tests" {
  // æµ‹è¯•å„ç§å­—ç¬¦ä¸²æ ¼å¼
  @azimuth.assert_eq_string("Hello, 123!", @azimuth.greet("123"))
  @azimuth.assert_eq_string("Hello, user_2023!", @azimuth.greet("user_2023"))
  @azimuth.assert_eq_string("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  @azimuth.assert_eq_string("Hello, John@Doe#123!", @azimuth.greet("John@Doe#123"))
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", @azimuth.greet("å¼ ä¸‰"))
  @azimuth.assert_eq_string("Hello, Johnå¼ ä¸‰123!", @azimuth.greet("Johnå¼ ä¸‰123"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, Mary Jane!", @azimuth.greet("Mary Jane"))
  @azimuth.assert_eq_string("Hello,  Hello World  !", @azimuth.greet(" Hello World  "))
}