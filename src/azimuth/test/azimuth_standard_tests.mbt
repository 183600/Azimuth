// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½è¿›è¡Œæµ‹è¯•

// æµ‹è¯•åŸºæœ¬ç®—æœ¯è¿ç®—
test "test_basic_arithmetic_operations" {
  // æµ‹è¯•åŠ æ³•è¿ç®—
  @azimuth.assert_eq(10, @azimuth.add(3, 7))
  @azimuth.assert_eq(0, @azimuth.add(0, 0))
  @azimuth.assert_eq(-5, @azimuth.add(-2, -3))
  
  // æµ‹è¯•ä¹˜æ³•è¿ç®—
  @azimuth.assert_eq(15, @azimuth.multiply(3, 5))
  @azimuth.assert_eq(0, @azimuth.multiply(0, 10))
  @azimuth.assert_eq(-6, @azimuth.multiply(-2, 3))
}

// æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
test "test_divide_with_ceil_boundary_cases" {
  // æµ‹è¯•æ­£æ•°é™¤æ³•
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(10, 3))
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(9, 3))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 100))
  
  // æµ‹è¯•è´Ÿæ•°é™¤æ³•
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(-10, -3))
  
  // æµ‹è¯•é™¤æ•°ä¸ºé›¶çš„æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(5, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-5, 0))
}

// æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½
test "test_string_greeting_functionality" {
  // æµ‹è¯•åŸºæœ¬é—®å€™åŠŸèƒ½
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
}

// æµ‹è¯•æ•°å­¦æ€§è´¨å’Œç»„åˆè¿ç®—
test "test_mathematical_properties" {
  let a = 7
  let b = 13
  
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // æµ‹è¯•é›¶å…ƒç´ æ€§è´¨
  @azimuth.assert_eq(0, @azimuth.multiply(a, 0))
  @azimuth.assert_eq(a, @azimuth.add(a, 0))
  
  // æµ‹è¯•åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let c = 5
  let left_side = @azimuth.multiply(a, @azimuth.add(b, c))
  let right_side = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left_side, right_side)
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯
test "test_practical_business_scenarios" {
  // è®¡ç®—è´­ç‰©è½¦æ€»ä»·
  let item1_price = 29
  let item1_qty = 2
  let item2_price = 15
  let item2_qty = 3
  let total = @azimuth.add(
    @azimuth.multiply(item1_price, item1_qty),
    @azimuth.multiply(item2_price, item2_qty)
  )
  @azimuth.assert_eq(103, total)  // 29*2 + 15*3 = 58 + 45 = 103
  
  // è®¡ç®—éœ€è¦çš„åŒ…è£…ç®±æ•°é‡
  let total_items = 25
  let items_per_box = 6
  let boxes_needed = @azimuth.divide_with_ceil(total_items, items_per_box)
  @azimuth.assert_eq(5, boxes_needed)  // ceil(25/6) = 5
}

// æµ‹è¯•è¾¹ç•Œå€¼å’Œæç«¯æƒ…å†µ
test "test_boundary_and_extreme_values" {
  // æµ‹è¯•å¤§æ•°è¿ç®—
  @azimuth.assert_eq(2000000, @azimuth.add(1000000, 1000000))
  @azimuth.assert_eq(1000000, @azimuth.multiply(1000, 1000))
  
  // æµ‹è¯•é›¶çš„è¿ç®—
  @azimuth.assert_eq(0, @azimuth.multiply(0, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(5, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 5))
  
  // æµ‹è¯•è´Ÿæ•°è¿ç®—
  @azimuth.assert_eq(-10, @azimuth.add(-3, -7))
  @azimuth.assert_eq(15, @azimuth.multiply(-3, -5))
  @azimuth.assert_eq(-15, @azimuth.multiply(3, -5))
}

// æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
test "test_complex_calculation_scenarios" {
  // å¤šå±‚åµŒå¥—è®¡ç®—
  let complex_result = @azimuth.add(
    @azimuth.multiply(10, @azimuth.divide_with_ceil(25, 4)),
    @azimuth.multiply(5, @azimuth.divide_with_ceil(17, 3))
  )
  @azimuth.assert_eq(85, complex_result)  // 10*7 + 5*6 = 70 + 15 = 85
  
  // è´¢åŠ¡è®¡ç®—åœºæ™¯
  let principal = 1000
  let rate_percent = 5
  let amount_after_year1 = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, rate_percent), 100))
  let amount_after_year2 = @azimuth.add(amount_after_year1, @azimuth.divide_with_ceil(@azimuth.multiply(amount_after_year1, rate_percent), 100))
  @azimuth.assert_eq(1103, amount_after_year2)  // 1000 -> 1050 -> 1103
}

// æµ‹è¯• Unicode å’Œç‰¹æ®Šå­—ç¬¦å¤„ç†
test "test_unicode_and_special_characters" {
  // æµ‹è¯•å„ç§ Unicode å­—ç¬¦
  @azimuth.assert_eq_string("Hello, Î±Î²Î³!", @azimuth.greet("Î±Î²Î³"))
  @azimuth.assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", @azimuth.greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  @azimuth.assert_eq_string("Hello, ğŸŒğŸŒğŸŒ!", @azimuth.greet("ğŸŒğŸŒğŸŒ"))
  
  // æµ‹è¯•æ•°å­—å’Œç¬¦å·
  @azimuth.assert_eq_string("Hello, 123!", @azimuth.greet("123"))
  @azimuth.assert_eq_string("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  @azimuth.assert_eq_string("Hello, A+B=C!", @azimuth.greet("A+B=C"))
}

// æµ‹è¯•é”™è¯¯å¤„ç†å’Œå¥å£®æ€§
test "test_error_handling_and_robustness" {
  // æµ‹è¯•é™¤æ•°ä¸ºé›¶çš„å„ç§æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  
  // æµ‹è¯•è¾¹ç•Œå€¼è¿ç®—
  @azimuth.assert_eq(1, @azimuth.add(0, 1))
  @azimuth.assert_eq(-1, @azimuth.add(0, -1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))
}