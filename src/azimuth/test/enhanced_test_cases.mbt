// å¢å¼ºæµ‹è¯•ç”¨ä¾‹ - ä¸“æ³¨äºè¾¹ç•Œæƒ…å†µå’Œå¤æ‚åœºæ™¯
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "add_function_boundary_values" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„è¾¹ç•Œå€¼
  @azimuth.assert_eq(2147483647, @azimuth.add(2147483646, 1))
  @azimuth.assert_eq(-2147483648, @azimuth.add(-2147483647, -1))
  @azimuth.assert_eq(0, @azimuth.add(2147483647, -2147483647))
  @azimuth.assert_eq(1, @azimuth.add(2147483647, -2147483646))
}

test "multiply_function_precision" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„ç²¾åº¦å’Œè¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(46340, @azimuth.multiply(215, 215))  // æ¥è¿‘âˆšINT_MAX
  @azimuth.assert_eq(-46340, @azimuth.multiply(-215, 215))
  @azimuth.assert_eq(46340, @azimuth.multiply(-215, -215))
  @azimuth.assert_eq(0, @azimuth.multiply(2147483647, 0))
}

test "divide_with_ceil_complex_scenarios" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å¤æ‚åœºæ™¯
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, 1))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(1, -1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-1, 2))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(-3, 2))
}

test "greet_function_encoding_edge_cases" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ç¼–ç è¾¹ç¼˜æƒ…å†µ
  @azimuth.assert_eq_string("Hello, \n\r\t!", @azimuth.greet("\n\r\t"))
  @azimuth.assert_eq_string("Hello, \"quoted\"!", @azimuth.greet("\"quoted\""))
  @azimuth.assert_eq_string("Hello, 'single'!", @azimuth.greet("'single'"))
  @azimuth.assert_eq_string("Hello, \\backslash!", @azimuth.greet("\\backslash"))
  @azimuth.assert_eq_string("Hello, ğŸ³ï¸â€ğŸŒˆ!", @azimuth.greet("ğŸ³ï¸â€ğŸŒˆ"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯ï¼šè´·æ¬¾åˆ†æœŸ
  let loan_amount = 150000
  let monthly_payment = 4500
  let months_needed = @azimuth.divide_with_ceil(loan_amount, monthly_payment)
  
  @azimuth.assert_eq(34, months_needed)  // ceil(150000/4500) = 34
  
  // éªŒè¯æ€»æ”¯ä»˜é‡‘é¢
  let total_payment = @azimuth.multiply(months_needed, monthly_payment)
  @azimuth.assert_eq(153000, total_payment)
  
  // éªŒè¯æœ€åä¸€ä¸ªæœˆçš„å®é™…æ”¯ä»˜é‡‘é¢
  let final_payment = @azimuth.add(total_payment, 
    -@azimuth.multiply(months_needed - 1, monthly_payment))
  @azimuth.assert_eq(1500, final_payment)
}

test "resource_optimization_problem" {
  // èµ„æºä¼˜åŒ–é—®é¢˜ï¼šä»“åº“å­˜å‚¨
  // ç‰©å“1ï¼š37ä¸ªï¼Œæ¯ç®±å®¹é‡10
  let item1_boxes = @azimuth.divide_with_ceil(37, 10)  // 4ç®±
  
  // ç‰©å“2ï¼š89ä¸ªï¼Œæ¯ç®±å®¹é‡15
  let item2_boxes = @azimuth.divide_with_ceil(89, 15)  // 6ç®±
  
  // ç‰©å“3ï¼š156ä¸ªï¼Œæ¯ç®±å®¹é‡25
  let item3_boxes = @azimuth.divide_with_ceil(156, 25)  // 7ç®±
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = @azimuth.add(@azimuth.add(item1_boxes, item2_boxes), item3_boxes)
  @azimuth.assert_eq(17, total_boxes)
  
  // è®¡ç®—æ€»å­˜å‚¨å®¹é‡
  let item1_capacity = @azimuth.multiply(item1_boxes, 10)  // 40
  let item2_capacity = @azimuth.multiply(item2_boxes, 15)  // 90
  let item3_capacity = @azimuth.multiply(item3_boxes, 25)  // 175
  
  let total_capacity = @azimuth.add(@azimuth.add(item1_capacity, item2_capacity), item3_capacity)
  @azimuth.assert_eq(305, total_capacity)
}

test "nested_function_composition" {
  // åµŒå¥—å‡½æ•°ç»„åˆæµ‹è¯•
  let base = 12
  
  // å¤æ‚åµŒå¥—è®¡ç®—
  let result = @azimuth.divide_with_ceil(
    @azimuth.add(
      @azimuth.multiply(base, 3),
      @azimuth.multiply(base, 2)
    ),
    @azimuth.add(base, @azimuth.divide_with_ceil(base, 5))
  )
  
  // æ‰‹åŠ¨è®¡ç®—éªŒè¯ï¼š(12*3 + 12*2) / (12 + ceil(12/5)) = 60 / 15 = 4
  @azimuth.assert_eq(4, result)
}

test "algorithm_efficiency_comparison" {
  // ç®—æ³•æ•ˆç‡æ¯”è¾ƒæµ‹è¯•
  let data_size = 1000
  
  // æ¨¡æ‹ŸO(n)ç®—æ³•
  let linear_ops = @azimuth.multiply(data_size, 3)
  
  // æ¨¡æ‹ŸO(log n)ç®—æ³•ï¼ˆç®€åŒ–ï¼‰
  let log_ops = @azimuth.divide_with_ceil(data_size, 50)
  
  // æ¨¡æ‹ŸO(nÂ²)ç®—æ³•ï¼ˆç®€åŒ–ï¼‰
  let quadratic_ops = @azimuth.divide_with_ceil(@azimuth.multiply(data_size, data_size), 1000)
  
  @azimuth.assert_eq(3000, linear_ops)
  @azimuth.assert_eq(20, log_ops)
  @azimuth.assert_eq(1000, quadratic_ops)
  
  // éªŒè¯æ•ˆç‡å·®å¼‚
  let linear_to_log_ratio = @azimuth.divide_with_ceil(linear_ops, log_ops)
  @azimuth.assert_eq(150, linear_to_log_ratio)
}

test "error_recovery_scenarios" {
  // é”™è¯¯æ¢å¤åœºæ™¯æµ‹è¯•
  // é™¤é›¶é”™è¯¯çš„å¤šç§å¤„ç†
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
  
  // æå€¼éªŒè¯
  @azimuth.assert_eq(2147483647, @azimuth.divide_with_ceil(2147483647, 1))
  @azimuth.assert_eq(-2147483648, @azimuth.divide_with_ceil(-2147483648, 1))
  
  // æå°é™¤æ•°æƒ…å†µ
  @azimuth.assert_eq(2147483647, @azimuth.divide_with_ceil(2147483647, 1))
  @azimuth.assert_eq(2147483647, @azimuth.divide_with_ceil(2147483646, 1))
}