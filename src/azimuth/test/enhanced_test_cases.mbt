// å¢å¼ºçš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• Azimuth é¡¹ç›®çš„å„ç§åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

// æµ‹è¯•ç”¨ä¾‹1: å¤æ‚çš„æ•°å­¦è¿ç®—åºåˆ—
test "complex_mathematical_sequence" {
  // è®¡ç®— (a + b) * (c - d) + e * f
  let a = 15
  let b = 25
  let c = 100
  let d = 40
  let e = 8
  let f = 12
  
  let sum_ab = @azimuth.add(a, b)  // 40
  let diff_cd = @azimuth.add(c, -d)  // 60
  let product_ab_cd = @azimuth.multiply(sum_ab, diff_cd)  // 2400
  let product_ef = @azimuth.multiply(e, f)  // 96
  let result = @azimuth.add(product_ab_cd, product_ef)  // 2496
  
  @azimuth.assert_eq(2496, result)
}

// æµ‹è¯•ç”¨ä¾‹2: æ¸©åº¦è½¬æ¢è®¡ç®—
test "temperature_conversion_calculations" {
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C * 9/5 + 32
  // ç®€åŒ–ä¸ºæ•´æ•°è®¡ç®—ï¼šF = C * 2 + 30 (è¿‘ä¼¼å€¼)
  
  // æµ‹è¯•0Â°C
  let temp1 = @azimuth.add(@azimuth.multiply(0, 2), 30)
  @azimuth.assert_eq(30, temp1)
  
  // æµ‹è¯•20Â°C (å®¤æ¸©)
  let temp2 = @azimuth.add(@azimuth.multiply(20, 2), 30)
  @azimuth.assert_eq(70, temp2)
  
  // æµ‹è¯•40Â°C (é«˜æ¸©)
  let temp3 = @azimuth.add(@azimuth.multiply(40, 2), 30)
  @azimuth.assert_eq(110, temp3)
}

// æµ‹è¯•ç”¨ä¾‹3: è´­ç‰©è½¦æ€»ä»·è®¡ç®—
test "shopping_cart_total_calculation" {
  // å•†å“ä»·æ ¼å’Œæ•°é‡
  let item1_price = 199
  let item1_quantity = 2
  let item2_price = 299
  let item2_quantity = 1
  let item3_price = 99
  let item3_quantity = 3
  
  // è®¡ç®—æ¯ç§å•†å“çš„å°è®¡
  let subtotal1 = @azimuth.multiply(item1_price, item1_quantity)  // 398
  let subtotal2 = @azimuth.multiply(item2_price, item2_quantity)  // 299
  let subtotal3 = @azimuth.multiply(item3_price, item3_quantity)  // 297
  
  // è®¡ç®—æ€»ä»·
  let total = @azimuth.add(@azimuth.add(subtotal1, subtotal2), subtotal3)
  
  @azimuth.assert_eq(994, total)
}

// æµ‹è¯•ç”¨ä¾‹4: å­—ç¬¦ä¸²å¤„ç†è¾¹ç•Œæƒ…å†µ
test "string_processing_boundary_cases" {
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  // æµ‹è¯•å•å­—ç¬¦
  @azimuth.assert_eq_string("Hello, A!", @azimuth.greet("A"))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_string = "ThisIsAVeryLongStringThatContainsManyCharactersAndSymbols1234567890!@#$%^&*()"
  let expected_long = "Hello, " + long_string + "!"
  @azimuth.assert_eq_string(expected_long, @azimuth.greet(long_string))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•123!", @azimuth.greet("ä¸­æ–‡æµ‹è¯•123"))
  @azimuth.assert_eq_string("Hello, ğŸŒğŸŒğŸŒ!", @azimuth.greet("ğŸŒğŸŒğŸŒ"))
}

// æµ‹è¯•ç”¨ä¾‹5: æ•°åˆ—å’Œçº§æ•°è®¡ç®—
test "series_and_progression_calculations" {
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼š1 + 3 + 5 + ... + (2n-1) = nÂ²
  let n = 10
  let sum_of_odds = @azimuth.multiply(n, n)  // 10Â² = 100
  @azimuth.assert_eq(100, sum_of_odds)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼š2 + 4 + 8 + ... + 2^n
  // ç®€åŒ–è®¡ç®—ï¼š2 * (2^n - 1)
  let power_of_2 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(2, 2), 2), 2)  // 2^4 = 16
  let geometric_sum = @azimuth.multiply(2, @azimuth.add(power_of_2, -1))  // 2 * (16 - 1) = 30
  @azimuth.assert_eq(30, geometric_sum)
}

// æµ‹è¯•ç”¨ä¾‹6: é¢ç§¯å’Œä½“ç§¯è®¡ç®—
test "area_and_volume_calculations" {
  // è®¡ç®—çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  let rectangle_area = @azimuth.multiply(length, width)
  @azimuth.assert_eq(96, rectangle_area)
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = @azimuth.multiply(base, height) / 2
  @azimuth.assert_eq(30, triangle_area)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼š(ä¸Šåº• + ä¸‹åº•) Ã— é«˜ Ã· 2
  let top_base = 6
  let bottom_base = 10
  let trapezoid_height = 4
  let trapezoid_area = @azimuth.multiply(@azimuth.add(top_base, bottom_base), trapezoid_height) / 2
  @azimuth.assert_eq(32, trapezoid_area)
}

// æµ‹è¯•ç”¨ä¾‹7: é‡‘èè®¡ç®—åœºæ™¯
test "financial_calculation_scenarios" {
  // ç®€å•è´·æ¬¾è®¡ç®—ï¼šæœˆä¾› = (æœ¬é‡‘ + åˆ©æ¯) / æœŸæ•°
  let principal = 100000  // 10ä¸‡å…ƒ
  let annual_rate = 6     // å¹´åˆ©ç‡6%
  let years = 3           // 3å¹´
  let months = @azimuth.multiply(years, 12)  // 36ä¸ªæœˆ
  
  // è®¡ç®—æ€»åˆ©æ¯ï¼šæœ¬é‡‘ Ã— å¹´åˆ©ç‡ Ã— å¹´æ•°
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(annual_rate, years))
  // æ€»è¿˜æ¬¾é¢
  let total_payment = @azimuth.add(principal, total_interest)
  // æœˆä¾›
  let monthly_payment = total_payment / months
  
  @azimuth.assert_eq(2777, monthly_payment)  // å‘ä¸‹å–æ•´
}

// æµ‹è¯•ç”¨ä¾‹8: æå€¼è¾¹ç•Œæµ‹è¯•
test "extreme_value_boundary_tests" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„å„ç§è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  
  // æµ‹è¯•æœ€å°å€¼çš„å„ç§è¿ç®—
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•æå€¼ç›¸åŠ 
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
}

// æµ‹è¯•ç”¨ä¾‹9: æ¸¸æˆå¾—åˆ†è®¡ç®—
test "game_score_calculations" {
  // åŸºç¡€å¾—åˆ†è®¡ç®—
  let base_score = 1000
  let level_bonus = 200
  let combo_multiplier = 3
  let time_bonus = 150
  let penalty = 50
  
  // è®¡ç®—æœ€ç»ˆå¾—åˆ†
  let level_total = @azimuth.add(base_score, level_bonus)
  let combo_total = @azimuth.multiply(level_total, combo_multiplier)
  let time_total = @azimuth.add(combo_total, time_bonus)
  let final_score = @azimuth.add(time_total, -penalty)
  
  @azimuth.assert_eq(3750, final_score)
  
  // è®¡ç®—æ’åå¾—åˆ†ï¼ˆå‰10%é¢å¤–åŠ åˆ†ï¼‰
  let rank_bonus_percent = 10
  let rank_bonus = @azimuth.multiply(final_score, rank_bonus_percent) / 100
  let rank_total = @azimuth.add(final_score, rank_bonus)
  
  @azimuth.assert_eq(4125, rank_total)
}

// æµ‹è¯•ç”¨ä¾‹10: æ•°æ®ç»Ÿè®¡è®¡ç®—
test "data_statistics_calculations" {
  // è®¡ç®—æ•°æ®é›†çš„åŸºæœ¬ç»Ÿè®¡é‡
  let data1 = 85
  let data2 = 92
  let data3 = 78
  let data4 = 96
  let data5 = 89
  
  // è®¡ç®—æ€»å’Œ
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(data1, data2), data3), data4), data5)
  @azimuth.assert_eq(440, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  @azimuth.assert_eq(88, average)
  
  // è®¡ç®—æœ€å¤§å€¼å’Œæœ€å°å€¼çš„å·®ï¼ˆæå·®ï¼‰
  let max_val = 96
  let min_val = 78
  let range = @azimuth.add(max_val, -min_val)
  @azimuth.assert_eq(18, range)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let diff1 = @azimuth.add(data1, -average)
  let diff2 = @azimuth.add(data2, -average)
  let diff3 = @azimuth.add(data3, -average)
  let diff4 = @azimuth.add(data4, -average)
  let diff5 = @azimuth.add(data5, -average)
  
  let squared_diff1 = @azimuth.multiply(diff1, diff1)
  let squared_diff2 = @azimuth.multiply(diff2, diff2)
  let squared_diff3 = @azimuth.multiply(diff3, diff3)
  let squared_diff4 = @azimuth.multiply(diff4, diff4)
  let squared_diff5 = @azimuth.multiply(diff5, diff5)
  
  let variance = @azimuth.add(@azimuth.add(@azimuth.add(@azimuth.add(squared_diff1, squared_diff2), squared_diff3), squared_diff4), squared_diff5) / 5
  @azimuth.assert_eq(34, variance)
}