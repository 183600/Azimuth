// é¢å¤–çš„ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹è¡¥å……ç°æœ‰æµ‹è¯•ï¼Œè¦†ç›–æ›´å¤šè¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šåœºæ™¯

///|
test "new_add_symmetry_properties" {
  // æµ‹è¯•åŠ æ³•çš„äº¤æ¢å¾‹
  assert_eq(@azimuth.add(100, 200), @azimuth.add(200, 100))
  assert_eq(@azimuth.add(-100, 200), @azimuth.add(200, -100))
  assert_eq(@azimuth.add(-100, -200), @azimuth.add(-200, -100))
  
  // æµ‹è¯•åŠ æ³•çš„ç»“åˆå¾‹ï¼ˆåœ¨æº¢å‡ºä¿æŠ¤ä¸‹çš„è¡¨ç°ï¼‰
  let a = 1000000
  let b = 2000000
  let c = 3000000
  assert_eq(@azimuth.add(@azimuth.add(a, b), c), @azimuth.add(a, @azimuth.add(b, c)))
}

///|
test "new_multiply_distributive_properties" {
  // æµ‹è¯•ä¹˜æ³•å¯¹åŠ æ³•çš„åˆ†é…å¾‹ï¼ˆåœ¨æº¢å‡ºä¿æŠ¤ä¸‹çš„è¡¨ç°ï¼‰
  let a = 100
  let b = 200
  let c = 3
  assert_eq(@azimuth.multiply(a, @azimuth.add(b, c)), @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c)))
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(@azimuth.multiply(-100, @azimuth.add(200, -50)), @azimuth.add(@azimuth.multiply(-100, 200), @azimuth.multiply(-100, -50)))
}

///|
test "new_extreme_boundary_combinations" {
  // æµ‹è¯•æç«¯è¾¹ç•Œå€¼çš„ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼çš„å¤šæ¬¡è¿ç®—
  let result1 = @azimuth.add(max_val, @azimuth.add(max_val, max_val))
  assert_eq(max_val, result1) // åº”è¯¥æº¢å‡º
  
  // æœ€å°å€¼çš„å¤šæ¬¡è¿ç®—
  let result2 = @azimuth.add(min_val, @azimuth.add(min_val, min_val))
  assert_eq(min_val, result2) // åº”è¯¥æº¢å‡º
  
  // æ··åˆè¾¹ç•Œè¿ç®—
  let result3 = @azimuth.add(@azimuth.add(max_val, min_val), 1)
  assert_eq(0, result3) // max_val + min_val = -1, then + 1 = 0
}

///|
test "new_power_of_two_operations" {
  // æµ‹è¯•2çš„å¹‚æ¬¡æ–¹çš„è¿ç®—
  assert_eq(@azimuth.multiply(2, 1024), 2048)
  assert_eq(@azimuth.multiply(4, 512), 2048)
  assert_eq(@azimuth.multiply(8, 256), 2048)
  assert_eq(@azimuth.multiply(16, 128), 2048)
  assert_eq(@azimuth.multiply(32, 64), 2048)
  
  // 2çš„å¹‚æ¬¡æ–¹ç›¸åŠ 
  assert_eq(@azimuth.add(1024, 2048), 3072)
  assert_eq(@azimuth.add(4096, 8192), 12288)
  
  // å¤§çš„2çš„å¹‚æ¬¡æ–¹
  assert_eq(@azimuth.multiply(32768, 32768), 2147483647) // åº”è¯¥æº¢å‡º
}

///|
test "new_greet_unicode_and_special_chars" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦å’ŒUnicodeçš„å­—ç¬¦ä¸²
  assert_eq("Hello, ä¸­æ–‡!", @azimuth.greet("ä¸­æ–‡"))
  assert_eq("Hello, ğŸŒ™!", @azimuth.greet("ğŸŒ™"))
  assert_eq("Hello, CafÃ©!", @azimuth.greet("CafÃ©"))
  assert_eq("Hello, test@example.com!", @azimuth.greet("test@example.com"))
  assert_eq("Hello, Hello World!", @azimuth.greet("Hello World"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq("Hello,  !", @azimuth.greet("  "))
  assert_eq("Hello, a b c!", @azimuth.greet("a b c"))
}

///|
test "new_sequential_operations_stability" {
  // æµ‹è¯•è¿ç»­è¿ç®—çš„ç¨³å®šæ€§
  let mut result = 0
  result = @azimuth.add(result, 100)
  assert_eq(100, result)
  result = @azimuth.multiply(result, 2)
  assert_eq(200, result)
  result = @azimuth.add(result, -50)
  assert_eq(150, result)
  result = @azimuth.multiply(result, 3)
  assert_eq(450, result)
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„è¿ç»­è¿ç®—
  let mut large_result = 1000000
  large_result = @azimuth.multiply(large_result, 1000)
  assert_eq(2147483647, large_result) // åº”è¯¥æº¢å‡º
  large_result = @azimuth.add(large_result, -1000000)
  assert_eq(2147482647, large_result) // æº¢å‡ºåå‡æ³•
}

///|
test "new_negative_zero_handling" {
  // æµ‹è¯•è´Ÿé›¶çš„å¤„ç†ï¼ˆè™½ç„¶Intä¸­æ²¡æœ‰è´Ÿé›¶ï¼Œä½†æµ‹è¯•ç›¸å…³è¾¹ç•Œï¼‰
  assert_eq(0, @azimuth.add(0, 0))
  assert_eq(0, @azimuth.multiply(0, 0))
  assert_eq(0, @azimuth.multiply(0, -1))
  assert_eq(0, @azimuth.multiply(-1, 0))
  assert_eq(0, @azimuth.multiply(0, 2147483647))
  assert_eq(0, @azimuth.multiply(0, -2147483648))
}

///|
test "new_alternating_sign_patterns" {
  // æµ‹è¯•äº¤æ›¿ç¬¦å·çš„æ¨¡å¼
  assert_eq(0, @azimuth.add(100, -100))
  assert_eq(0, @azimuth.add(-100, 100))
  assert_eq(200, @azimuth.add(-100, 300))
  assert_eq(-200, @azimuth.add(100, -300))
  
  // ä¹˜æ³•çš„äº¤æ›¿ç¬¦å·
  assert_eq(-10000, @azimuth.multiply(100, -100))
  assert_eq(10000, @azimuth.multiply(-100, -100))
  assert_eq(10000, @azimuth.multiply(100, 100))
  
  // å¤æ‚çš„ç¬¦å·ç»„åˆ
  let result = @azimuth.multiply(@azimuth.add(10, -5), @azimuth.add(-3, 8))
  assert_eq(25, result) // (10-5)*( -3+8) = 5*5 = 25
}

///|
test "new_boundary_precision_tests" {
  // æµ‹è¯•è¾¹ç•Œç²¾åº¦ç›¸å…³çš„æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„å‡æ³•ï¼ˆé€šè¿‡åŠ è´Ÿæ•°å®ç°ï¼‰
  assert_eq(0, @azimuth.add(max_val, @azimuth.multiply(min_val, -1)))
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„ç²¾ç¡®è®¡ç®—
  assert_eq(2147483646, @azimuth.add(1073741823, 1073741823))
  assert_eq(-2147483647, @azimuth.add(-1073741824, -1073741823))
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ä¹˜æ³•
  assert_eq(2147483647, @azimuth.multiply(46340, 46341)) // æ¥è¿‘æº¢å‡ºä½†ä¸æº¢å‡º
  assert_eq(2147483647, @azimuth.multiply(46341, 46340)) // åè¿‡æ¥
}

///|
test "new_mathematical_identities" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰å¼
  let test_values = [0, 1, -1, 100, -100, 2147483647, -2147483648]
  
  for value in test_values {
    // åŠ æ³•æ’ç­‰å¼ï¼ša + 0 = a
    assert_eq(value, @azimuth.add(value, 0))
    assert_eq(value, @azimuth.add(0, value))
    
    // ä¹˜æ³•æ’ç­‰å¼ï¼ša * 1 = a
    assert_eq(value, @azimuth.multiply(value, 1))
    assert_eq(value, @azimuth.multiply(1, value))
    
    // é›¶ä¹˜æ³•ï¼ša * 0 = 0
    assert_eq(0, @azimuth.multiply(value, 0))
    assert_eq(0, @azimuth.multiply(0, value))
    
    // è´Ÿä¸€ä¹˜æ³•ï¼ša * -1 = -aï¼ˆé™¤äº†æœ€å°å€¼ï¼‰
    if value != -2147483648 {
      assert_eq(@azimuth.multiply(value, -1), @azimuth.multiply(-1, value))
    }
  }
}