// Azimuth é¡¹ç›®å¢å¼ºæµ‹è¯•ç”¨ä¾‹
// è¦†ç›–æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µçš„æ ‡å‡† MoonBit æµ‹è¯•

test "add_comprehensive_boundary_tests" {
  // å…¨é¢æµ‹è¯•åŠ æ³•è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, max_val))
  assert_eq(max_val, add(max_val, 1000000))
  
  // æœ€å°å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(min_val, min_val))
  assert_eq(min_val, add(min_val, -1000000))
  
  // æ­£è´Ÿæ•°æ··åˆæµ‹è¯•
  assert_eq(0, add(max_val, min_val + 1))
  assert_eq(-1, add(max_val, min_val))
  assert_eq(1, add(min_val, max_val))
  
  // é›¶å€¼æµ‹è¯•
  assert_eq(max_val, add(max_val, 0))
  assert_eq(min_val, add(min_val, 0))
  assert_eq(0, add(0, 0))
}

test "multiply_comprehensive_boundary_tests" {
  // å…¨é¢æµ‹è¯•ä¹˜æ³•è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¹˜æ³•æµ‹è¯•
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(max_val, multiply(max_val, 2))
  assert_eq(max_val, multiply(46341, 46341))
  
  // æœ€å°å€¼ä¹˜æ³•æµ‹è¯•
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
  assert_eq(min_val, multiply(min_val, 3))
  assert_eq(min_val, multiply(-46341, 46341))
  
  // é›¶å€¼ä¹˜æ³•æµ‹è¯•
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(0, multiply(0, 0))
  
  // å•ä½å…ƒæµ‹è¯•
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(42, multiply(42, 1))
}

test "greet_unicode_and_special_characters" {
  // æµ‹è¯•åŒ…å«å„ç§Unicodeå­—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  // ä¸­æ–‡å­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", greet("ä¸­æ–‡æµ‹è¯•"))
  assert_eq_string("Hello, å¼ ä¸‰æå››!", greet("å¼ ä¸‰æå››"))
  
  // Emojiæµ‹è¯•
  assert_eq_string("Hello, ğŸŒğŸŒğŸŒ!", greet("ğŸŒğŸŒğŸŒ"))
  assert_eq_string("Hello, ğŸ‘‹ğŸš€ğŸ‰!", greet("ğŸ‘‹ğŸš€ğŸ‰"))
  
  // ç‰¹æ®Šç¬¦å·æµ‹è¯•
  assert_eq_string("Hello, @#$%^&*()!", greet("@#$%^&*()"))
  assert_eq_string("Hello, []{}|\\:;<>?!", greet("[]{}|\\:;<>?"))
  
  // æ··åˆå†…å®¹æµ‹è¯•
  assert_eq_string("Hello, Testæµ‹è¯•123ğŸš€!", greet("Testæµ‹è¯•123ğŸš€"))
  assert_eq_string("Hello, ç”¨æˆ·@2023#Project!", greet("ç”¨æˆ·@2023#Project"))
}

test "complex_mathematical_scenarios" {
  // å¤æ‚æ•°å­¦åœºæ™¯æµ‹è¯•
  // å¤šæ­¥è®¡ç®—ï¼š((a + b) * c - d) / e
  let a = 15
  let b = 25
  let c = 4
  let d = 30
  let e = 5
  
  let step1 = add(a, b)  // 40
  let step2 = multiply(step1, c)  // 160
  let step3 = add(step2, -d)  // 130
  let final_result = step3 / e  // 26
  
  assert_eq(26, final_result)
  
  // åˆ©ç‡è®¡ç®—ï¼šæœ¬é‡‘ * (1 + åˆ©ç‡ * æœŸé™)
  let principal = 10000
  let rate = 8  // 8%
  let years = 3
  
  let interest = multiply(principal, multiply(rate, years))
  let total = add(principal, interest)
  assert_eq(250000, total)  // 10000 + 10000*8*3 = 250000
  
  // æŠ˜æ‰£è®¡ç®—ï¼šåŸä»· * (1 - æŠ˜æ‰£ç‡)
  let original_price = 800
  let discount_rate = 15  // 15%
  let discount_amount = multiply(original_price, discount_rate) / 100
  let final_price = add(original_price, -discount_amount)
  assert_eq(680, final_price)
}

test "divide_with_ceil_functionality" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•åŠŸèƒ½
  // æ­£æ•°æµ‹è¯•
  assert_eq(3, divide_with_ceil(10, 4))  // 10/4 = 2.5 â†’ 3
  assert_eq(5, divide_with_ceil(20, 4))  // 20/4 = 5 â†’ 5
  assert_eq(1, divide_with_ceil(1, 1))   // 1/1 = 1 â†’ 1
  
  // è´Ÿæ•°æµ‹è¯•
  assert_eq(-2, divide_with_ceil(-10, 4))  // -10/4 = -2.5 â†’ -2
  assert_eq(-5, divide_with_ceil(-20, 4))  // -20/4 = -5 â†’ -5
  
  // è¾¹ç•Œæƒ…å†µæµ‹è¯•
  assert_eq(0, divide_with_ceil(0, 5))    // 0/5 = 0 â†’ 0
  assert_eq(100, divide_with_ceil(100, 1)) // 100/1 = 100 â†’ 100
  
  // å¤§æ•°æµ‹è¯•
  assert_eq(1000001, divide_with_ceil(2000001, 2))  // 2000001/2 = 1000000.5 â†’ 1000001
}

test "string_edge_cases_and_performance" {
  // å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µå’Œæ€§èƒ½æµ‹è¯•
  // ç©ºå­—ç¬¦ä¸²å’Œå•å­—ç¬¦
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello, a!", greet("a"))
  assert_eq_string("Hello,  !", greet(" "))
  
  // é•¿å­—ç¬¦ä¸²æµ‹è¯•
  let long_string = "ThisIsAVeryLongStringThatTestsPerformanceAndHandlingOfLargeInputs"
  let long_result = greet(long_string)
  assert_eq_string("Hello, " + long_string + "!", long_result)
  
  // åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello,  Leading Space!", greet(" Leading Space"))
  assert_eq_string("Hello, Trailing Space !", greet("Trailing Space "))
  assert_eq_string("Hello,  Both Spaces  !", greet(" Both Spaces "))
  
  // åŒ…å«å¼•å·çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, \"Quoted\"!", greet("\"Quoted\""))
  assert_eq_string("Hello, 'Single Quote'!", greet("'Single Quote'"))
}

test "error_handling_and_validation" {
  // é”™è¯¯å¤„ç†å’ŒéªŒè¯æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æº¢å‡ºä¿æŠ¤éªŒè¯
  assert_true(add(max_val, 1) == max_val)
  assert_true(add(min_val, -1) == min_val)
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, -1) == min_val)
  
  // æ–­è¨€å‡½æ•°æµ‹è¯•
  assert_true(true)
  assert_false(false)
  assert_eq(100, 100)
  assert_eq_string("test", "test")
  
  // å¤åˆæ¡ä»¶æµ‹è¯•
  let x = 10
  let y = 20
  assert_true(x < y)
  assert_false(x > y)
  assert_true(x <= y)
  assert_false(x >= y)
  assert_true(x != y)
  assert_false(x == y)
}

test "real_world_application_scenarios" {
  // å®é™…åº”ç”¨åœºæ™¯æµ‹è¯•
  // è´­ç‰©è½¦è®¡ç®—
  let item1_price = 299
  let item1_qty = 2
  let item2_price = 199
  let item2_qty = 3
  let shipping = 20
  let tax_rate = 10
  
  let subtotal1 = multiply(item1_price, item1_qty)
  let subtotal2 = multiply(item2_price, item2_qty)
  let subtotal = add(subtotal1, subtotal2)
  let tax = multiply(subtotal, tax_rate) / 100
  let total = add(add(subtotal, tax), shipping)
  
  assert_eq(1278, total)  // (299*2 + 199*3) + 10% + 20 = 1195 + 119 + 20 = 1278
  
  // æ¸©åº¦è½¬æ¢ï¼šæ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼šF = C Ã— 2 + 30ï¼‰
  let celsius = 25
  let fahrenheit = add(multiply(celsius, 2), 30)
  assert_eq(80, fahrenheit)
  
  // é¢ç§¯è®¡ç®—
  let length = 12
  let width = 8
  let area = multiply(length, width)
  assert_eq(96, area)
}

test "mathematical_properties_and_invariants" {
  // æ•°å­¦æ€§è´¨å’Œä¸å˜é‡æµ‹è¯•
  let a = 17
  let b = 23
  let c = 5
  
  // åŠ æ³•äº¤æ¢å¾‹
  assert_eq(add(a, b), add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  assert_eq(multiply(a, b), multiply(b, a))
  
  // åŠ æ³•ç»“åˆå¾‹
  assert_eq(add(add(a, b), c), add(a, add(b, c)))
  
  // ä¹˜æ³•ç»“åˆå¾‹
  assert_eq(multiply(multiply(a, b), c), multiply(a, multiply(b, c)))
  
  // åˆ†é…å¾‹
  assert_eq(multiply(a, add(b, c)), add(multiply(a, b), multiply(a, c)))
  
  // é›¶å…ƒç´ æ€§è´¨
  assert_eq(a, add(a, 0))
  assert_eq(0, multiply(a, 0))
  
  // å•ä½å…ƒæ€§è´¨
  assert_eq(a, multiply(a, 1))
  
  // è´Ÿæ•°æ€§è´¨
  assert_eq(0, add(a, -a))
  assert_eq(-a, multiply(a, -1))
}