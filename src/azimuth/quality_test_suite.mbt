// é«˜è´¨é‡ MoonBit æµ‹è¯•å¥—ä»¶
// é’ˆå¯¹ azimuth åº“çš„å…¨é¢æµ‹è¯•ï¼ŒåŒ…å«è¾¹ç•Œæƒ…å†µã€å®é™…åº”ç”¨åœºæ™¯å’Œæ•°å­¦æ€§è´¨éªŒè¯

test "mathematical_fundamentals" {
  // æµ‹è¯•åŸºæœ¬æ•°å­¦è¿ç®—çš„æ•°å­¦æ€§è´¨
  let a = 17
  let b = 23
  
  // åŠ æ³•äº¤æ¢å¾‹å’Œç»“åˆå¾‹
  assert_eq(add(a, b), add(b, a))  // äº¤æ¢å¾‹
  assert_eq(add(add(a, b), 5), add(a, add(b, 5)))  // ç»“åˆå¾‹
  
  // ä¹˜æ³•äº¤æ¢å¾‹å’Œåˆ†é…å¾‹
  assert_eq(multiply(a, b), multiply(b, a))  // äº¤æ¢å¾‹
  assert_eq(multiply(a, add(b, 3)), add(multiply(a, b), multiply(a, 3)))  // åˆ†é…å¾‹
}

test "divide_with_ceil_comprehensive" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å„ç§æƒ…å†µ
  // æ­£æ•°æƒ…å†µ
  assert_eq(4, divide_with_ceil(11, 3))  // 11/3 = 3.666... -> 4
  assert_eq(3, divide_with_ceil(9, 3))   // 9/3 = 3 -> 3
  assert_eq(1, divide_with_ceil(1, 100)) // 1/100 = 0.01 -> 1
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(-10, 3))  // -10/3 = -3.333... -> -3
  assert_eq(-4, divide_with_ceil(-11, 3))  // -11/3 = -3.666... -> -4
  assert_eq(4, divide_with_ceil(-11, -3))  // -11/-3 = 3.666... -> 4
  
  // è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 5))   // 0/5 = 0 -> 0
  assert_eq(0, divide_with_ceil(5, 0))   // é™¤æ•°ä¸º0ï¼Œè¿”å›0
  assert_eq(0, divide_with_ceil(0, 0))   // 0/0ï¼Œè¿”å›0
}

test "string_processing_internationalization" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„å›½é™…åŒ–æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
  assert_eq_string("Hello, MarÃ­a!", greet("MarÃ­a"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,   !", greet("  "))
}

test "complex_business_workflow" {
  // æµ‹è¯•å¤æ‚çš„ä¸šåŠ¡å·¥ä½œæµç¨‹
  let product_price = 89
  let quantity = 4
  let tax_rate = 8
  let shipping_cost = 12
  let discount_threshold = 300
  let discount_amount = 25
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(product_price, quantity)
  
  // è®¡ç®—ç¨è´¹ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  
  // è®¡ç®—æ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let pre_discount_total = add(add(subtotal, tax_amount), shipping_cost)
  
  // åº”ç”¨æŠ˜æ‰£ï¼ˆå¦‚æœæ»¡è¶³æ¡ä»¶ï¼‰
  let final_total = if pre_discount_total > discount_threshold {
    add(pre_discount_total, -discount_amount)
  } else {
    pre_discount_total
  }
  
  assert_eq(356, subtotal)
  assert_eq(29, tax_amount)
  assert_eq(397, pre_discount_total)
  assert_eq(372, final_total)
}

test "resource_allocation_optimization" {
  // æµ‹è¯•èµ„æºåˆ†é…ä¼˜åŒ–ç®—æ³•
  let total_budget = 10000
  let project_a_cost = 3200
  let project_b_cost = 2800
  let project_c_cost = 2100
  let small_project_cost = 450
  
  // è®¡ç®—å¤§é¡¹ç›®æ€»æˆæœ¬
  let major_projects_cost = add(add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining_budget = add(total_budget, -major_projects_cost)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡
  let small_projects_count = divide_with_ceil(remaining_budget, small_project_cost)
  
  assert_eq(8100, major_projects_cost)
  assert_eq(1900, remaining_budget)
  assert_eq(5, small_projects_count)
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—
  let first_term = 7
  let common_difference = 3
  let number_of_terms = 12
  
  // ä½¿ç”¨å…¬å¼è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼šS = n/2 * (2a + (n-1)d)
  let series_sum = divide_with_ceil(
    multiply(number_of_terms, add(multiply(2, first_term), multiply(number_of_terms - 1, common_difference))),
    2
  )
  
  // éªŒè¯ç»“æœï¼š12/2 * (14 + 33) = 6 * 47 = 282
  assert_eq(282, series_sum)
}

test "time_management_scenarios" {
  // æµ‹è¯•æ—¶é—´ç®¡ç†åœºæ™¯
  let tasks_per_day = 7
  let total_tasks = 45
  let work_hours_per_day = 8
  let meeting_hours_per_week = 6
  
  // è®¡ç®—å·¥ä½œæ—¥æ•°
  let work_days_needed = divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—å‘¨æ•°
  let weeks_needed = divide_with_ceil(work_days_needed, 5)
  
  // è®¡ç®—æ€»å·¥ä½œå°æ—¶æ•°
  let total_work_hours = multiply(work_days_needed, work_hours_per_day)
  
  // è®¡ç®—å¯ç”¨å·¥ä½œæ—¶é—´ï¼ˆå‡å»ä¼šè®®ï¼‰
  let available_work_hours = add(total_work_hours, -multiply(weeks_needed, meeting_hours_per_week))
  
  assert_eq(7, work_days_needed)
  assert_eq(2, weeks_needed)
  assert_eq(56, total_work_hours)
  assert_eq(44, available_work_hours)
}

test "engineering_precision_calculations" {
  // æµ‹è¯•å·¥ç¨‹ç²¾åº¦è®¡ç®—
  let beam_length = 1250  // æ¯«ç±³
  let support_spacing = 300  // æ¯«ç±³
  let safety_factor = 2
  let load_per_support = 150  // å…¬æ–¤
  
  // è®¡ç®—éœ€è¦çš„æ”¯æ’‘ç‚¹æ•°é‡
  let supports_needed = divide_with_ceil(beam_length, support_spacing)
  
  // è®¡ç®—æ€»æ‰¿è½½èƒ½åŠ›
  let total_capacity = multiply(supports_needed, load_per_support)
  
  // åº”ç”¨å®‰å…¨ç³»æ•°
  let safe_capacity = divide_with_ceil(total_capacity, safety_factor)
  
  assert_eq(5, supports_needed)
  assert_eq(750, total_capacity)
  assert_eq(375, safe_capacity)
}

test "data_analysis_statistics" {
  // æµ‹è¯•æ•°æ®åˆ†æç»Ÿè®¡
  let data_points = [15, 22, 18, 31, 25, 19, 28, 16, 24, 21]
  let sum_manual = add(add(add(add(add(add(add(add(add(data_points[0], data_points[1]), data_points[2]), data_points[3]), data_points[4]), data_points[5]), data_points[6]), data_points[7]), data_points[8]), data_points[9])
  
  // è®¡ç®—å¹³å‡å€¼ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let average = divide_with_ceil(sum_manual, 10)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let variance_base = add(add(add(add(add(add(add(add(add(multiply(15 - average, 15 - average), multiply(22 - average, 22 - average)), multiply(18 - average, 18 - average)), multiply(31 - average, 31 - average)), multiply(25 - average, 25 - average)), multiply(19 - average, 19 - average)), multiply(28 - average, 28 - average)), multiply(16 - average, 16 - average)), multiply(24 - average, 24 - average)), multiply(21 - average, 21 - average))
  let variance = divide_with_ceil(variance_base, 10)
  
  assert_eq(219, sum_manual)
  assert_eq(22, average)
  assert_eq(30, variance)
}

test "extreme_boundary_conditions" {
  // æµ‹è¯•æç«¯è¾¹ç•Œæ¡ä»¶
  // æ¥è¿‘Intæœ€å¤§å€¼çš„è¿ç®—
  let near_max = 2147483640
  let small_increment = 5
  let max_safe_add = add(near_max, small_increment)
  
  // æ¥è¿‘Intæœ€å°å€¼çš„è¿ç®—
  let near_min = -2147483640
  let small_decrement = -5
  let min_safe_add = add(near_min, small_decrement)
  
  // å¤§æ•°é™¤æ³•ç²¾åº¦æµ‹è¯•
  let large_dividend = 1000000
  let large_divisor = 37
  let large_division_result = divide_with_ceil(large_dividend, large_divisor)
  
  // è´Ÿæ•°å¤§æ•°é™¤æ³•
  let negative_large_division = divide_with_ceil(-1000000, 37)
  
  assert_eq(2147483645, max_safe_add)
  assert_eq(-2147483645, min_safe_add)
  assert_eq(27028, large_division_result)
  assert_eq(-27027, negative_large_division)
}