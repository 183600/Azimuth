// ç”¨æˆ·è¯·æ±‚çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// åŒ…å« 10 ä¸ªæ ‡å‡†æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½

test "arithmetico_boundary_operations" {
  // ç®—æœ¯è¾¹ç•Œè¿ç®—æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼è¾¹ç•Œè¿ç®—
  assert_eq(max_val, add(max_val, 0))
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, 100))
  
  // æµ‹è¯•æœ€å°å€¼è¾¹ç•Œè¿ç®—
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(min_val, -100))
  
  // æµ‹è¯•æœ€å¤§å€¼ä¹˜æ³•è¾¹ç•Œ
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(max_val, -1))
  
  // æµ‹è¯•æœ€å°å€¼ä¹˜æ³•è¾¹ç•Œ
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
}

test "multilingual_string_processing" {
  // å¤šè¯­è¨€å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  // æµ‹è¯•ä¸­æ–‡
  assert_eq_string("Hello, å¼ ä¸‰!", greet("å¼ ä¸‰"))
  assert_eq_string("Hello, æå››!", greet("æå››"))
  
  // æµ‹è¯•è‹±æ–‡
  assert_eq_string("Hello, Alice!", greet("Alice"))
  assert_eq_string("Hello, Bob!", greet("Bob"))
  
  // æµ‹è¯•æ—¥æ–‡
  assert_eq_string("Hello, ç”°ä¸­!", greet("ç”°ä¸­"))
  assert_eq_string("Hello, ä½è—¤!", greet("ä½è—¤"))
  
  // æµ‹è¯•éŸ©æ–‡
  assert_eq_string("Hello, ê¹€ì² ìˆ˜!", greet("ê¹€ì² ìˆ˜"))
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡
  assert_eq_string("Hello, Ù…Ø­Ù…Ø¯!", greet("Ù…Ø­Ù…Ø¯"))
  
  // æµ‹è¯•æ··åˆè¯­è¨€
  assert_eq_string("Hello, Johnå¼ ä¸‰!", greet("Johnå¼ ä¸‰"))
}

test "mathematical_function_combinations" {
  // æ•°å­¦å‡½æ•°ç»„åˆæµ‹è¯•
  // è®¡ç®— (a + b) * c - d / e çš„å¤åˆè¿ç®—
  let a = 10
  let b = 20
  let c = 3
  let d = 15
  let e = 5
  
  let sum_ab = add(a, b)  // 30
  let product = multiply(sum_ab, c)  // 90
  let quotient = d / e  // 3
  let result = add(product, -quotient)  // 87
  
  assert_eq(87, result)
  
  // è®¡ç®—å¹³æ–¹å’Œï¼šaÂ² + bÂ²
  let a_squared = multiply(a, a)  // 100
  let b_squared = multiply(b, b)  // 400
  let sum_of_squares = add(a_squared, b_squared)  // 500
  
  assert_eq(500, sum_of_squares)
  
  // è®¡ç®—ç«‹æ–¹å·®ï¼šaÂ³ - bÂ³
  let a_cubed = multiply(a_squared, a)  // 1000
  let b_cubed = multiply(b_squared, b)  // 8000
  let difference_of_cubes = add(a_cubed, -b_cubed)  // -7000
  
  assert_eq(-7000, difference_of_cubes)
}

test "real_world_financial_calculations" {
  // å®é™…é‡‘èè®¡ç®—æµ‹è¯•
  // è´·æ¬¾è®¡ç®—ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let principal = 100000  // 1000å…ƒï¼ˆä»¥åˆ†ä¸ºå•ä½ï¼‰
  let annual_rate = 5  // 5%
  let years = 3
  
  let interest_rate = multiply(annual_rate, years)  // 15
  let total_rate = add(100, interest_rate)  // 115
  let total_repayment = multiply(principal, total_rate)  // 115000
  
  assert_eq(115000, total_repayment)
  
  // æŠ•èµ„å›æŠ¥è®¡ç®—ï¼šå¤åˆ©ç®€åŒ–ç‰ˆ
  let investment = 50000  // 500å…ƒ
  let quarterly_return = 2  // 2%æ¯å­£åº¦
  let quarters = 4  // 1å¹´4ä¸ªå­£åº¦
  
  let quarterly_growth = add(100, quarterly_return)  // 102
  let annual_growth = multiply(quarterly_growth, quarterly_growth)  // 10404ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
  let investment_return = multiply(investment, annual_growth) / 10000  // 52020
  
  assert_eq(52020, investment_return)
}

test "error_handling_and_edge_cases" {
  // é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  assert_true(add(max_val, max_val) == max_val)
  assert_true(add(min_val, min_val) == min_val)
  assert_true(multiply(max_val, max_val) == max_val)
  assert_true(multiply(min_val, min_val) == min_val)
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  assert_eq(0, multiply(0, max_val))
  assert_eq(0, multiply(0, min_val))
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  
  // æµ‹è¯•å•ä½å…ƒè¿ç®—
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(max_val, add(0, max_val))
  assert_eq(min_val, add(0, min_val))
  
  // æµ‹è¯•è´Ÿå•ä½å…ƒè¿ç®—
  assert_eq(add(max_val, min_val), -1)
  assert_eq(add(min_val, max_val), -1)
}

test "performance_related_operations" {
  // æ€§èƒ½ç›¸å…³æ“ä½œæµ‹è¯•
  // å¤§æ•°è¿ç®—æµ‹è¯•
  let large_num1 = 1000000
  let large_num2 = 2000000
  let large_num3 = 3000000
  
  // å¤§æ•°åŠ æ³•
  let large_sum = add(add(large_num1, large_num2), large_num3)
  assert_eq(6000000, large_sum)
  
  // å¤§æ•°ä¹˜æ³•
  let large_product = multiply(large_num1, large_num2)
  assert_eq(2000000000000, large_product)
  
  // è¿ç»­è¿ç®—æµ‹è¯•
  let chain_result = add(multiply(1000, 1000), multiply(2000, 2000))
  assert_eq(5000000, chain_result)
  
  // åµŒå¥—è¿ç®—æµ‹è¯•
  let nested_result = multiply(add(100, 200), add(300, 400))
  assert_eq(210000, nested_result)
}

test "data_type_conversion_scenarios" {
  // æ•°æ®ç±»å‹è½¬æ¢åœºæ™¯æµ‹è¯•
  // æ•°å­—å­—ç¬¦ä¸²å¤„ç†
  let numeric_string = "12345"
  assert_eq_string("Hello, 12345!", greet(numeric_string))
  
  // å¸ƒå°”å€¼å­—ç¬¦ä¸²å¤„ç†
  let true_string = "true"
  let false_string = "false"
  assert_eq_string("Hello, true!", greet(true_string))
  assert_eq_string("Hello, false!", greet(false_string))
  
  // ç‰¹æ®Šå­—ç¬¦å­—ç¬¦ä¸²å¤„ç†
  let special_chars = "!@#$%^&*()"
  assert_eq_string("Hello, !@#$%^&*()!", greet(special_chars))
  
  // ç©ºå­—ç¬¦ä¸²å’Œç©ºæ ¼å¤„ç†
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,   !", greet("  "))
  
  // Unicodeå­—ç¬¦å¤„ç†
  let unicode_chars = "ğŸŒŸğŸ’«â­"
  assert_eq_string("Hello, ğŸŒŸğŸ’«â­!", greet(unicode_chars))
}

test "complex_algorithm_implementations" {
  // å¤æ‚ç®—æ³•å®ç°æµ‹è¯•
  // æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // F(5) = F(4) + F(3) = (F(3) + F(2)) + (F(2) + F(1)) = 5
  let fib1 = 1
  let fib2 = 1
  let fib3 = add(fib1, fib2)  // 2
  let fib4 = add(fib2, fib3)  // 3
  let fib5 = add(fib3, fib4)  // 5
  
  assert_eq(5, fib5)
  
  // æœ€å¤§å…¬çº¦æ•°ç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼Œä½¿ç”¨å‡æ³•ï¼‰
  let a = 48
  let b = 18
  
  // ç®€åŒ–çš„GCDè®¡ç®—è¿‡ç¨‹
  let diff1 = add(a, -b)  // 30
  let diff2 = add(diff1, -b)  // 12
  let diff3 = add(b, -diff2)  // 6
  let diff4 = add(diff2, multiply(-2, diff3))  // 0
  
  // å½“å·®å€¼ä¸º0æ—¶ï¼Œå½“å‰æ•°å°±æ˜¯GCD
  assert_eq(6, diff3)
  
  // ç®€å•çš„æ’åºç®—æ³•æµ‹è¯•
  let num1 = 5
  let num2 = 2
  let num3 = 8
  let num4 = 1
  let num5 = 9
  
  // æ‰¾å‡ºæœ€å¤§å€¼
  let max1 = if (num1 > num2) { num1 } else { num2 }  // 5
  let max2 = if (max1 > num3) { max1 } else { num3 }  // 8
  let max3 = if (max2 > num4) { max2 } else { num4 }  // 8
  let max4 = if (max3 > num5) { max3 } else { num5 }  // 9
  
  assert_eq(9, max4)
}

test "business_logic_validation" {
  // ä¸šåŠ¡é€»è¾‘éªŒè¯æµ‹è¯•
  // è´­ç‰©è½¦ä¸šåŠ¡é€»è¾‘
  let item1_price = 299
  let item1_qty = 2
  let item2_price = 199
  let item2_qty = 3
  let discount_threshold = 1000
  let discount_rate = 10
  let shipping_fee = 20
  
  // è®¡ç®—å•†å“æ€»ä»·
  let item1_total = multiply(item1_price, item1_qty)  // 598
  let item2_total = multiply(item2_price, item2_qty)  // 597
  let subtotal = add(item1_total, item2_total)  // 1195
  
  // è®¡ç®—æŠ˜æ‰£
  let discount_amount = if (subtotal > discount_threshold) {
    multiply(subtotal, discount_rate) / 100
  } else {
    0
  }  // 119
  
  // è®¡ç®—æœ€ç»ˆä»·æ ¼
  let discounted_total = add(subtotal, -discount_amount)  // 1076
  let final_total = add(discounted_total, shipping_fee)  // 1096
  
  assert_eq(1096, final_total)
  
  // åº“å­˜ç®¡ç†é€»è¾‘
  let initial_stock = 100
  let sold_quantity = 35
  let restocked_quantity = 20
  
  let current_stock = add(add(initial_stock, -sold_quantity), restocked_quantity)
  assert_eq(85, current_stock)
  
  // ä¼šå‘˜ç­‰çº§è®¡ç®—
  let purchase_amount = 2500
  let silver_threshold = 1000
  let gold_threshold = 2000
  let platinum_threshold = 5000
  
  let is_platinum = purchase_amount >= platinum_threshold
  let is_gold = purchase_amount >= gold_threshold && purchase_amount < platinum_threshold
  let is_silver = purchase_amount >= silver_threshold && purchase_amount < gold_threshold
  
  assert_false(is_platinum)
  assert_true(is_gold)
  assert_false(is_silver)
}

test "security_and_validation_tests" {
  // å®‰å…¨æ€§å’ŒéªŒè¯æµ‹è¯•
  // è¾“å…¥éªŒè¯æµ‹è¯•
  let normal_input = 100
  let extreme_input = 2147483647
  let negative_input = -100
  
  // ç¡®ä¿æ­£å¸¸è¾“å…¥æ­£ç¡®å¤„ç†
  assert_eq(200, add(normal_input, normal_input))
  assert_eq(10000, multiply(normal_input, normal_input))
  
  // ç¡®ä¿æå€¼è¾“å…¥å®‰å…¨å¤„ç†
  assert_true(add(extreme_input, 1) == extreme_input)
  assert_true(multiply(extreme_input, 2) == extreme_input)
  
  // ç¡®ä¿è´Ÿæ•°è¾“å…¥æ­£ç¡®å¤„ç†
  assert_eq(0, add(negative_input, 100))
  assert_eq(-10000, multiply(negative_input, 100))
  
  // å­—ç¬¦ä¸²å®‰å…¨æµ‹è¯•
  let sql_injection_attempt = "'; DROP TABLE users; --"
  let safe_greeting = greet(sql_injection_attempt)
  assert_eq_string("Hello, '; DROP TABLE users; --!", safe_greeting)
  
  let xss_attempt = "<script>alert('xss')</script>"
  let safe_xss_greeting = greet(xss_attempt)
  assert_eq_string("Hello, <script>alert('xss')</script>!", safe_xss_greeting)
  
  // è¾¹ç•Œæ¡ä»¶å®‰å…¨æµ‹è¯•
  let buffer_overflow_attempt = "A" * 1000  // ç®€åŒ–çš„é•¿å­—ç¬¦ä¸²
  let long_string = "VeryLongStringThatMightCauseIssuesInSomeSystems"
  let safe_long_greeting = greet(long_string)
  assert_eq_string("Hello, " + long_string + "!", safe_long_greeting)
}