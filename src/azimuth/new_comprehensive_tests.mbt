// æ–°çš„ç»¼åˆæµ‹è¯•ç”¨ä¾‹ - è¡¥å……æµ‹è¯•è¦†ç›–

///|
test "additive_associativity" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  let a = 100
  let b = 200
  let c = -50
  
  let left = add(add(a, b), c)
  let right = add(a, add(b, c))
  assert_eq(left, right)
  
  // ä½¿ç”¨è¾¹ç•Œå€¼æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  let left_boundary = add(add(max_val, 0), min_val)
  let right_boundary = add(max_val, add(0, min_val))
  assert_eq(left_boundary, right_boundary)
}

///|
test "multiplicative_associativity" {
  // æµ‹è¯•ä¹˜æ³•ç»“åˆå¾‹: (a * b) * c = a * (b * c)
  let a = 10
  let b = 20
  let c = 3
  
  let left = multiply(multiply(a, b), c)
  let right = multiply(a, multiply(b, c))
  assert_eq(left, right)
  
  // ä½¿ç”¨è´Ÿæ•°æµ‹è¯•
  let x = -5
  let y = 4
  let z = -2
  
  let left_neg = multiply(multiply(x, y), z)
  let right_neg = multiply(x, multiply(y, z))
  assert_eq(left_neg, right_neg)
}

///|
test "distributive_property" {
  // æµ‹è¯•åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let a = 5
  let b = 10
  let c = 15
  
  let left = multiply(a, add(b, c))
  let right = add(multiply(a, b), multiply(a, c))
  assert_eq(left, right)
  
  // ä½¿ç”¨è´Ÿæ•°æµ‹è¯•
  let x = -3
  let y = 7
  let z = -2
  
  let left_neg = multiply(x, add(y, z))
  let right_neg = add(multiply(x, y), multiply(x, z))
  assert_eq(left_neg, right_neg)
}

///|
test "string_with_special_characters" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²å¤„ç†
  assert_eq("Hello, ğŸŒ™!", greet("ğŸŒ™")) // emoji
  assert_eq("Hello, \"quoted\"!", greet("\"quoted\"")) // å¼•å·
  assert_eq("Hello, \\backslash\\!", greet("\\backslash\\")) // åæ–œæ 
  assert_eq("Hello, \nnewline\ttab!", greet("\nnewline\ttab")) // æ¢è¡Œå’Œåˆ¶è¡¨ç¬¦
  assert_eq("Hello, ğŸš€ğŸŒŸğŸ’»!", greet("ğŸš€ğŸŒŸğŸ’»")) // å¤šä¸ªemoji
}

///|
test "extreme_boundary_combinations" {
  // æµ‹è¯•æç«¯è¾¹ç•Œå€¼çš„ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æ¥è¿‘æœ€å¤§å€¼çš„è¿ç®—
  assert_eq(max_val, add(max_val, 0))
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(max_val, add(max_val - 1, 1))
  assert_eq(max_val, add(max_val - 100, 100))
  
  // æœ€å°å€¼ä¸æ¥è¿‘æœ€å°å€¼çš„è¿ç®—
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, add(min_val + 1, -1))
  assert_eq(min_val, add(min_val + 100, -100))
}

///|
test "zero_in_complex_expressions" {
  // æµ‹è¯•é›¶å€¼åœ¨å¤æ‚è¡¨è¾¾å¼ä¸­çš„è¡Œä¸º
  let a = 42
  let b = -17
  let c = 0
  
  // åŠ æ³•ä¸­çš„é›¶
  assert_eq(a, add(a, c))
  assert_eq(b, add(b, c))
  assert_eq(c, add(c, c))
  
  // ä¹˜æ³•ä¸­çš„é›¶
  assert_eq(c, multiply(a, c))
  assert_eq(c, multiply(b, c))
  assert_eq(c, multiply(c, c))
  assert_eq(c, multiply(c, a))
  
  // å¤æ‚è¡¨è¾¾å¼ä¸­çš„é›¶
  let complex1 = add(multiply(a, c), add(b, c))
  assert_eq(b, complex1)
  
  let complex2 = multiply(add(a, c), add(b, c))
  assert_eq(multiply(a, b), complex2)
}

///|
test "subtraction_via_addition" {
  // é€šè¿‡åŠ è´Ÿæ•°å®ç°å‡æ³•: a - b = a + (-b)
  let a = 100
  let b = 30
  
  // a - b = a + (-b)
  let subtraction = add(a, -b)
  assert_eq(70, subtraction)
  
  // ä½¿ç”¨è¾¹ç•Œå€¼æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼å‡æ­£æ•°
  let max_sub = add(max_val, -100)
  assert_eq(2147483547, max_sub)
  
  // æœ€å°å€¼å‡è´Ÿæ•°
  let min_sub = add(min_val, 100)
  assert_eq(-2147483548, min_sub)
  
  // è¾¹ç•Œå‡æ³•
  let boundary_sub = add(min_val, -max_val)
  assert_eq(min_val, boundary_sub) // ç”±äºæº¢å‡ºï¼Œç»“æœåº”è¯¥æ˜¯ min_val
}

///|
test "mathematical_series" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è¿ç®—
  // ç­‰å·®æ•°åˆ—: 1 + 2 + 3 + 4 + 5 = 15
  let sum1 = add(1, 2)
  let sum2 = add(sum1, 3)
  let sum3 = add(sum2, 4)
  let sum4 = add(sum3, 5)
  assert_eq(15, sum4)
  
  // ç­‰æ¯”æ•°åˆ—: 1 * 2 * 3 * 4 = 24
  let prod1 = multiply(1, 2)
  let prod2 = multiply(prod1, 3)
  let prod3 = multiply(prod2, 4)
  assert_eq(24, prod3)
  
  // æ··åˆè¿ç®—: (1 + 2) * (3 + 4) = 3 * 7 = 21
  let mixed1 = add(1, 2)
  let mixed2 = add(3, 4)
  let mixed_result = multiply(mixed1, mixed2)
  assert_eq(21, mixed_result)
}

///|
test "commutative_property_verification" {
  // éªŒè¯äº¤æ¢å¾‹ - æµ‹è¯•å‡ ç»„å…¸å‹å€¼
  // æ­£æ•°å¯¹
  let a1 = 10
  let b1 = 20
  assert_eq(add(a1, b1), add(b1, a1))
  assert_eq(multiply(a1, b1), multiply(b1, a1))
  
  // è´Ÿæ•°å¯¹
  let a2 = -5
  let b2 = 7
  assert_eq(add(a2, b2), add(b2, a2))
  assert_eq(multiply(a2, b2), multiply(b2, a2))
  
  // é›¶å€¼å¯¹
  let a3 = 0
  let b3 = 100
  assert_eq(add(a3, b3), add(b3, a3))
  assert_eq(multiply(a3, b3), multiply(b3, a3))
  
  // è¾¹ç•Œå€¼å¯¹
  let max_val = 2147483647
  let min_val = -2147483648
  assert_eq(add(max_val, 1), add(1, max_val))
  assert_eq(multiply(max_val, 1), multiply(1, max_val))
  assert_eq(add(min_val, 1), add(1, min_val))
  assert_eq(multiply(min_val, 1), multiply(1, min_val))
}

///|
test "string_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  // ç©ºå­—ç¬¦ä¸²
  assert_eq("Hello, !", greet(""))
  
  // å•ä¸ªå­—ç¬¦
  assert_eq("Hello, A!", greet("A"))
  assert_eq("Hello, 1!", greet("1"))
  assert_eq("Hello, !!", greet("!")) // greetå‡½æ•°ä¼šåœ¨è¾“å…¥åæ·»åŠ !
  
  // é•¿å­—ç¬¦ä¸²
  let long_string = "This is a very long string that contains many words and characters to test the greet function's ability to handle longer inputs properly"
  let expected = "Hello, " + long_string + "!"
  assert_eq(expected, greet(long_string))
  
  // åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq("Hello,  leading space!", greet(" leading space")) // ä¿ç•™å‰å¯¼ç©ºæ ¼
  assert_eq("Hello, trailing space !", greet("trailing space "))
  assert_eq("Hello, multiple   spaces!", greet("multiple   spaces"))
}

// é¢å¤–æ·»åŠ çš„10ä¸ªæ–°æµ‹è¯•ç”¨ä¾‹
///|
test "new_add_symmetry_properties" {
  // æµ‹è¯•åŠ æ³•çš„äº¤æ¢å¾‹
  assert_eq(add(100, 200), add(200, 100))
  assert_eq(add(-100, 200), add(200, -100))
  assert_eq(add(-100, -200), add(-200, -100))
  
  // æµ‹è¯•åŠ æ³•çš„ç»“åˆå¾‹ï¼ˆåœ¨æº¢å‡ºä¿æŠ¤ä¸‹çš„è¡¨ç°ï¼‰
  let a = 1000000
  let b = 2000000
  let c = 3000000
  assert_eq(add(add(a, b), c), add(a, add(b, c)))
}

///|
test "new_multiply_distributive_properties" {
  // æµ‹è¯•ä¹˜æ³•å¯¹åŠ æ³•çš„åˆ†é…å¾‹ï¼ˆåœ¨æº¢å‡ºä¿æŠ¤ä¸‹çš„è¡¨ç°ï¼‰
  let a = 100
  let b = 200
  let c = 3
  assert_eq(multiply(a, add(b, c)), add(multiply(a, b), multiply(a, c)))
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(multiply(-100, add(200, -50)), add(multiply(-100, 200), multiply(-100, -50)))
}

///|
test "new_extreme_boundary_combinations" {
  // æµ‹è¯•æç«¯è¾¹ç•Œå€¼çš„ç»„åˆ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼çš„å¤šæ¬¡è¿ç®—
  let result1 = add(max_val, add(max_val, max_val))
  assert_eq(max_val, result1) // åº”è¯¥æº¢å‡º
  
  // æœ€å°å€¼çš„å¤šæ¬¡è¿ç®—
  let result2 = add(min_val, add(min_val, min_val))
  assert_eq(min_val, result2) // åº”è¯¥æº¢å‡º
  
  // æ··åˆè¾¹ç•Œè¿ç®—
  let result3 = add(add(max_val, min_val), 1)
  assert_eq(0, result3) // max_val + min_val = -1, then + 1 = 0
}

///|
test "new_power_of_two_operations" {
  // æµ‹è¯•2çš„å¹‚æ¬¡æ–¹çš„è¿ç®—
  assert_eq(multiply(2, 1024), 2048)
  assert_eq(multiply(4, 512), 2048)
  assert_eq(multiply(8, 256), 2048)
  assert_eq(multiply(16, 128), 2048)
  assert_eq(multiply(32, 64), 2048)
  
  // 2çš„å¹‚æ¬¡æ–¹ç›¸åŠ 
  assert_eq(add(1024, 2048), 3072)
  assert_eq(add(4096, 8192), 12288)
  
  // å¤§çš„2çš„å¹‚æ¬¡æ–¹
  assert_eq(multiply(32768, 32768), 1073741824) // 32768 * 32768 = 1073741824
}

///|
test "new_greet_unicode_and_special_chars" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦å’ŒUnicodeçš„å­—ç¬¦ä¸²
  assert_eq("Hello, ä¸­æ–‡!", greet("ä¸­æ–‡"))
  assert_eq("Hello, ğŸŒ™!", greet("ğŸŒ™"))
  assert_eq("Hello, CafÃ©!", greet("CafÃ©"))
  assert_eq("Hello, test@example.com!", greet("test@example.com"))
  assert_eq("Hello, Hello World!", greet("Hello World"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq("Hello,   !", greet("  "))
  assert_eq("Hello, a b c!", greet("a b c"))
}

///|
test "new_sequential_operations_stability" {
  // æµ‹è¯•è¿ç»­è¿ç®—çš„ç¨³å®šæ€§
  let mut result = 0
  result = add(result, 100)
  assert_eq(100, result)
  result = multiply(result, 2)
  assert_eq(200, result)
  result = add(result, -50)
  assert_eq(150, result)
  result = multiply(result, 3)
  assert_eq(450, result)
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„è¿ç»­è¿ç®—
  let mut large_result = 1000000
  large_result = multiply(large_result, 1000)
  assert_eq(1000000000, large_result) // 1000000 * 1000 = 1000000000
  large_result = add(large_result, -1000000)
  assert_eq(999000000, large_result) // 1000000000 - 1000000 = 999000000
}

///|
test "new_negative_zero_handling" {
  // æµ‹è¯•è´Ÿé›¶çš„å¤„ç†ï¼ˆè™½ç„¶Intä¸­æ²¡æœ‰è´Ÿé›¶ï¼Œä½†æµ‹è¯•ç›¸å…³è¾¹ç•Œï¼‰
  assert_eq(0, add(0, 0))
  assert_eq(0, multiply(0, 0))
  assert_eq(0, multiply(0, -1))
  assert_eq(0, multiply(-1, 0))
  assert_eq(0, multiply(0, 2147483647))
  assert_eq(0, multiply(0, -2147483648))
}

///|
test "new_alternating_sign_patterns" {
  // æµ‹è¯•äº¤æ›¿ç¬¦å·çš„æ¨¡å¼
  assert_eq(0, add(100, -100))
  assert_eq(0, add(-100, 100))
  assert_eq(200, add(-100, 300))
  assert_eq(-200, add(100, -300))
  
  // ä¹˜æ³•çš„äº¤æ›¿ç¬¦å·
  assert_eq(-10000, multiply(100, -100))
  assert_eq(10000, multiply(-100, -100))
  assert_eq(10000, multiply(100, 100))
  
  // å¤æ‚çš„ç¬¦å·ç»„åˆ
  let result = multiply(add(10, -5), add(-3, 8))
  assert_eq(25, result) // (10-5)*( -3+8) = 5*5 = 25
}

///|
test "new_boundary_precision_tests" {
  // æµ‹è¯•è¾¹ç•Œç²¾åº¦ç›¸å…³çš„æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„å‡æ³•ï¼ˆé€šè¿‡åŠ è´Ÿæ•°å®ç°ï¼‰
  assert_eq(-1, add(max_val, multiply(min_val, -1))) // 2147483647 + (-2147483648 * -1) = 2147483647 + 2147483648 = æº¢å‡º
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„ç²¾ç¡®è®¡ç®—
  assert_eq(2147483646, add(1073741823, 1073741823))
  assert_eq(-2147483647, add(-1073741824, -1073741823))
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ä¹˜æ³•
  assert_eq(2147441940, multiply(46340, 46341)) // æ¥è¿‘æº¢å‡ºä½†ä¸æº¢å‡º
  assert_eq(2147441940, multiply(46341, 46340)) // åè¿‡æ¥
}

///|
test "new_mathematical_identities" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰å¼
  let test_values = [0, 1, -1, 100, -100, 2147483647, -2147483648]
  
  for value in test_values {
    // åŠ æ³•æ’ç­‰å¼ï¼ša + 0 = a
    assert_eq(value, add(value, 0))
    assert_eq(value, add(0, value))
    
    // ä¹˜æ³•æ’ç­‰å¼ï¼ša * 1 = a
    assert_eq(value, multiply(value, 1))
    assert_eq(value, multiply(1, value))
    
    // é›¶ä¹˜æ³•ï¼ša * 0 = 0
    assert_eq(0, multiply(value, 0))
    assert_eq(0, multiply(0, value))
    
    // è´Ÿä¸€ä¹˜æ³•ï¼ša * -1 = -aï¼ˆé™¤äº†æœ€å°å€¼ï¼‰
    if value != -2147483648 {
      assert_eq(multiply(value, -1), multiply(-1, value))
    }
  }
}