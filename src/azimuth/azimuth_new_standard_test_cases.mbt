// æ–°å¢çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½è¿›è¡Œå…¨é¢æµ‹è¯•

test "add_function_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 17
  let b = 29
  assert_eq(add(a, b), add(b, a))
  assert_eq(46, add(17, 29))
  assert_eq(46, add(29, 17))
}

test "multiply_function_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let a = 5
  let b = 8
  let c = 12
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  assert_eq(left_side, right_side)
  assert_eq(100, left_side)  // 5 * (8 + 12) = 5 * 20 = 100
}

test "divide_with_ceil_fractional_results" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å°æ•°ç»“æœå¤„ç†
  assert_eq(4, divide_with_ceil(11, 3))  // 11/3 = 3.666... -> 4
  assert_eq(7, divide_with_ceil(25, 4))  // 25/4 = 6.25 -> 7
  assert_eq(2, divide_with_ceil(3, 2))   // 3/2 = 1.5 -> 2
  assert_eq(1, divide_with_ceil(1, 100)) // 1/100 = 0.01 -> 1
}

test "greet_function_special_characters" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ç‰¹æ®Šå­—ç¬¦å¤„ç†
  assert_eq_string("Hello, @#$%!", greet("@#$%"))
  assert_eq_string("Hello, emojiğŸš€!", greet("emojiğŸš€"))
  assert_eq_string("Hello, spaced name !", greet("spaced name "))
  assert_eq_string("Hello, \"quoted\"!", greet("\"quoted\""))
}

test "complex_financial_calculation" {
  // æµ‹è¯•å¤æ‚é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000
  let interest_rate = 8  // 8%
  let years = 3
  let tax_rate = 20      // 20%ç¨ç‡
  
  // è®¡ç®—å¹´åˆ©æ¯
  let annual_interest = divide_with_ceil(multiply(principal, interest_rate), 100)
  // è®¡ç®—æ€»åˆ©æ¯
  let total_interest = multiply(annual_interest, years)
  // è®¡ç®—ç¨ååˆ©æ¯
  let after_tax_interest = add(total_interest, -divide_with_ceil(multiply(total_interest, tax_rate), 100))
  // è®¡ç®—æœ€ç»ˆé‡‘é¢
  let final_amount = add(principal, after_tax_interest)
  
  assert_eq(800, annual_interest)
  assert_eq(2400, total_interest)
  assert_eq(1920, after_tax_interest)
  assert_eq(11920, final_amount)
}

test "inventory_management_system" {
  // æµ‹è¯•åº“å­˜ç®¡ç†ç³»ç»Ÿè®¡ç®—
  let initial_stock = 500
  let daily_sales = 25
  let restock_amount = 200
  let days = 7
  
  // è®¡ç®—ä¸€å‘¨é”€å”®é‡
  let weekly_sales = multiply(daily_sales, days)
  // è®¡ç®—è¡¥è´§å‰åº“å­˜
  let stock_before_restock = add(initial_stock, -weekly_sales)
  // è®¡ç®—è¡¥è´§ååº“å­˜
  let final_stock = add(stock_before_restock, restock_amount)
  
  assert_eq(175, weekly_sales)
  assert_eq(325, stock_before_restock)
  assert_eq(525, final_stock)
}

test "project_resource_allocation" {
  // æµ‹è¯•é¡¹ç›®èµ„æºåˆ†é…è®¡ç®—
  let total_budget = 50000
  let team_members = 8
  let project_duration = 12  // å‘¨
  let equipment_cost = 15000
  
  // è®¡ç®—äººåŠ›é¢„ç®—
  let personnel_budget = add(total_budget, -equipment_cost)
  // è®¡ç®—æ¯äººæ¯å‘¨é¢„ç®—
  let budget_per_person_per_week = divide_with_ceil(personnel_budget, multiply(team_members, project_duration))
  // è®¡ç®—æ€»äººåŠ›æˆæœ¬
  let total_personnel_cost = multiply(budget_per_person_per_week, multiply(team_members, project_duration))
  
  assert_eq(35000, personnel_budget)
  assert_eq(365, budget_per_person_per_week)
  assert_eq(35040, total_personnel_cost)
}

test "data_processing_pipeline" {
  // æµ‹è¯•æ•°æ®å¤„ç†ç®¡é“è®¡ç®—
  let data_points = 1000
  let processing_time_per_point = 3  // æ¯«ç§’
  let parallel_workers = 4
  let overhead_time = 100  // æ¯«ç§’
  
  // è®¡ç®—æ€»å¤„ç†æ—¶é—´ï¼ˆä¸è€ƒè™‘å¹¶è¡Œï¼‰
  let total_processing_time = multiply(data_points, processing_time_per_point)
  // è®¡ç®—å¹¶è¡Œå¤„ç†æ—¶é—´
  let parallel_time = divide_with_ceil(total_processing_time, parallel_workers)
  // è®¡ç®—æ€»æ—¶é—´ï¼ˆåŒ…æ‹¬å¼€é”€ï¼‰
  let total_time = add(parallel_time, overhead_time)
  
  assert_eq(3000, total_processing_time)
  assert_eq(750, parallel_time)
  assert_eq(850, total_time)
}

test "mathematical_series_calculation" {
  // æµ‹è¯•æ•°å­¦çº§æ•°è®¡ç®—ï¼šç­‰å·®æ•°åˆ—æ±‚å’Œ
  let first_term = 7
  let common_difference = 5
  let number_of_terms = 10
  
  // ä½¿ç”¨å…¬å¼ï¼šS = n/2 * (2a + (n-1)d)
  let sum = divide_with_ceil(
    multiply(number_of_terms, add(multiply(2, first_term), multiply(number_of_terms - 1, common_difference))),
    2
  )
  
  // éªŒè¯ç»“æœï¼š7 + 12 + 17 + 22 + 27 + 32 + 37 + 42 + 47 + 52 = 295
  assert_eq(295, sum)
}

test "error_handling_and_boundary_values" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œå€¼
  // æµ‹è¯•é™¤é›¶å®‰å…¨æ€§
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  
  // æµ‹è¯•æå€¼è¿ç®—
  assert_eq(0, multiply(0, -1000000))
  assert_eq(1000000, add(500000, 500000))
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(1000000, divide_with_ceil(1000000, 1))
  
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œ
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello, x!", greet("x"))
  assert_eq_string("Hello, very long name!", greet("very long name"))
}