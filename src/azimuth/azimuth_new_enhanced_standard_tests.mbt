// æ–°å¢çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½è¿›è¡Œå…¨é¢æµ‹è¯•

test "add_function_boundary_values" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„è¾¹ç•Œå€¼
  assert_eq(2147483647, add(2147483646, 1))  // æ¥è¿‘Intæœ€å¤§å€¼
  assert_eq(-2147483648, add(-2147483647, -1))  // æ¥è¿‘Intæœ€å°å€¼
  assert_eq(0, add(2147483647, -2147483647))  // æœ€å¤§å€¼ä¸ç›¸åæ•°ç›¸åŠ 
  assert_eq(1, add(0, 1))  // å•ä½å…ƒæµ‹è¯•
  assert_eq(-1, add(0, -1))
}

test "multiply_function_large_numbers" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„å¤§æ•°è¿ç®—
  assert_eq(1000000, multiply(1000, 1000))
  assert_eq(4611686014132420609, multiply(2147483647, 2147483647))  // æœ€å¤§å€¼å¹³æ–¹
  assert_eq(-1000000, multiply(1000, -1000))
  assert_eq(0, multiply(2147483647, 0))  // é›¶ä¹˜æ³•
}

test "divide_with_ceil_comprehensive" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•
  // æ­£æ•°æƒ…å†µ
  assert_eq(4, divide_with_ceil(10, 3))  // 3.333... -> 4
  assert_eq(3, divide_with_ceil(9, 3))   // æ•´é™¤
  assert_eq(1, divide_with_ceil(1, 100)) // å°æ•°
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(-10, 3))  // -3.333... -> -3
  assert_eq(4, divide_with_ceil(-10, -3))  // 3.333... -> 4
  assert_eq(0, divide_with_ceil(5, 0))     // é™¤é›¶ä¿æŠ¤
}

test "greet_function_special_characters" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ç‰¹æ®Šå­—ç¬¦å¤„ç†
  assert_eq_string("Hello, ğŸš€ MoonBit! ğŸŒŸ!", greet("ğŸš€ MoonBit! ğŸŒŸ"))
  assert_eq_string("Hello, line1\nline2!", greet("line1\nline2"))
  assert_eq_string("Hello, tab\there!", greet("tab\there"))
  assert_eq_string("Hello, \"quoted\"!", greet("\"quoted\""))
  assert_eq_string("Hello, @#$%^&*()!", greet("@#$%^&*()"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000
  let rate_percent = 5
  let years = 3
  
  // è®¡ç®—å¤åˆ©ï¼ˆç®€åŒ–ç‰ˆï¼Œæ¯å¹´è®¡ç®—ä¸€æ¬¡ï¼‰
  let year1 = add(principal, divide_with_ceil(multiply(principal, rate_percent), 100))
  let year2 = add(year1, divide_with_ceil(multiply(year1, rate_percent), 100))
  let year3 = add(year2, divide_with_ceil(multiply(year2, rate_percent), 100))
  
  assert_eq(10500, year1)
  assert_eq(11025, year2)
  assert_eq(11576, year3)
}

test "inventory_warehouse_calculation" {
  // ä»“åº“åº“å­˜è®¡ç®—
  let warehouse_capacity = 5000
  let item_volume = 12
  let safety_stock = 200
  
  // è®¡ç®—å¯å­˜å‚¨çš„ç‰©å“æ•°é‡
  let max_items = divide_with_ceil(warehouse_capacity, item_volume)
  let available_space = add(max_items, -divide_with_ceil(safety_stock, item_volume))
  
  assert_eq(417, max_items)  // ceil(5000/12) = 417
  assert_eq(401, available_space)  // 417 - ceil(200/12) = 417 - 17 = 400
}

test "mathematical_properties_verification" {
  // éªŒè¯åŸºæœ¬æ•°å­¦æ€§è´¨
  let a = 15
  let b = 25
  let c = 35
  
  // åŠ æ³•äº¤æ¢å¾‹
  assert_eq(add(a, b), add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  assert_eq(multiply(a, b), multiply(b, a))
  
  // åˆ†é…å¾‹: a * (b + c) = a * b + a * c
  let distributive_left = multiply(a, add(b, c))
  let distributive_right = add(multiply(a, b), multiply(a, c))
  assert_eq(distributive_left, distributive_right)
  
  // ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  assert_eq(add(add(a, b), c), add(a, add(b, c)))
}

test "real_world_shipping_calculation" {
  // çœŸå®ä¸–ç•Œè¿è¾“è®¡ç®—
  let package_weight = 47  // kg
  let base_rate = 10  // per kg
  let weight_threshold = 50  // kg
  let discount_rate = 10  // percent
  
  // è®¡ç®—åŸºç¡€è¿è´¹
  let base_cost = multiply(package_weight, base_rate)
  
  // åº”ç”¨æŠ˜æ‰£ï¼ˆå¦‚æœè¶…è¿‡é˜ˆå€¼ï¼‰
  let discount = if base_cost > multiply(weight_threshold, base_rate) {
    divide_with_ceil(multiply(base_cost, discount_rate), 100)
  } else {
    0
  }
  
  let final_cost = add(base_cost, -discount)
  
  assert_eq(470, base_cost)
  assert_eq(47, discount)
  assert_eq(423, final_cost)
}

test "algorithm_complexity_simulation" {
  // ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿ
  let input_size = 1000
  let linear_factor = 2
  let quadratic_factor = 3
  let constant_factor = 10
  
  // æ¨¡æ‹Ÿ O(nÂ²) ç®—æ³•çš„æ‰§è¡Œæ—¶é—´
  let linear_time = multiply(input_size, linear_factor)
  let quadratic_time = divide_with_ceil(multiply(input_size, input_size), quadratic_factor)
  let total_time = add(add(linear_time, quadratic_time), constant_factor)
  
  assert_eq(2000, linear_time)
  assert_eq(333334, quadratic_time)  // ceil(1000*1000/3) = 333334
  assert_eq(335344, total_time)
}

test "data_structure_operations" {
  // æ•°æ®ç»“æ„æ“ä½œæ¨¡æ‹Ÿ
  let array_size = 100
  let page_size = 10
  
  // æ¨¡æ‹Ÿåˆ†é¡µè®¡ç®—
  let total_pages = divide_with_ceil(array_size, page_size)
  
  // æ¨¡æ‹ŸäºŒåˆ†æŸ¥æ‰¾çš„ä¸­é—´ä½ç½®
  let middle_index = divide_with_ceil(array_size, 2)
  
  // æ¨¡æ‹Ÿå¾ªç¯ç§»ä½
  let shift_distance = 25
  let effective_shift = shift_distance % array_size
  let new_position = add(middle_index, effective_shift)
  
  assert_eq(10, total_pages)  // ceil(100/10) = 10
  assert_eq(50, middle_index)  // ceil(100/2) = 50
  assert_eq(75, new_position)  // 50 + 25 = 75
}