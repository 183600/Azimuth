// é¢å¤–çš„ç»¼åˆæµ‹è¯•ç”¨ä¾‹ - MoonBit æ ‡å‡†æµ‹è¯•è¯­æ³•
// æµ‹è¯• azimuth åŒ…çš„æ ¸å¿ƒåŠŸèƒ½

test "add_overflow_protection" {
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ­£æ•°æº¢å‡ºæµ‹è¯•
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, 100))
  assert_eq(max_val, add(1000000000, 1500000000))
  
  // è´Ÿæ•°æº¢å‡ºæµ‹è¯•
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(min_val, -100))
  assert_eq(min_val, add(-1500000000, -1000000000))
}

test "multiply_edge_cases" {
  // æµ‹è¯•ä¹˜æ³•è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å°å€¼ä¸-1ç›¸ä¹˜çš„ç‰¹æ®Šæƒ…å†µ
  assert_eq(min_val, multiply(min_val, -1))
  
  // å¤§æ•°ç›¸ä¹˜æº¢å‡ºæµ‹è¯•
  assert_eq(max_val, multiply(46341, 46341))
  assert_eq(min_val, multiply(-46341, 46341))
  
  // é›¶å€¼æµ‹è¯•
  assert_eq(0, multiply(0, max_val))
  assert_eq(0, multiply(0, min_val))
}

test "divide_with_ceil_functionality" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•åŠŸèƒ½
  // æ­£æ•°æµ‹è¯•
  assert_eq(3, divide_with_ceil(10, 4))
  assert_eq(5, divide_with_ceil(20, 4))
  assert_eq(4, divide_with_ceil(15, 4))
  
  // è´Ÿæ•°æµ‹è¯•
  assert_eq(-2, divide_with_ceil(-10, 4))
  assert_eq(-3, divide_with_ceil(-11, 4))
  
  // æ•´é™¤æµ‹è¯•
  assert_eq(2, divide_with_ceil(8, 4))
  assert_eq(-2, divide_with_ceil(-8, 4))
}

test "greet_unicode_handling" {
  // æµ‹è¯• greet å‡½æ•°çš„ Unicode å¤„ç†
  // ä¸­æ–‡å­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, å¼ ä¸‰!", greet("å¼ ä¸‰"))
  
  // Emoji æµ‹è¯•
  assert_eq_string("Hello, ğŸŒ!", greet("ğŸŒ"))
  assert_eq_string("Hello, ğŸ‘‹!", greet("ğŸ‘‹"))
  
  // æ··åˆå­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, Testæµ‹è¯•123!", greet("Testæµ‹è¯•123"))
}

test "complex_arithmetic_sequence" {
  // æµ‹è¯•å¤æ‚ç®—æœ¯åºåˆ—
  let a = 5
  let b = 10
  let c = 15
  
  // è®¡ç®— (a + b) * (b + c) - a * c
  let sum1 = add(a, b)
  let sum2 = add(b, c)
  let product1 = multiply(sum1, sum2)
  let product2 = multiply(a, c)
  let result = add(product1, -product2)
  
  assert_eq(275, result)
}

test "mathematical_commutativity" {
  // æµ‹è¯•æ•°å­¦äº¤æ¢å¾‹
  let x = 12
  let y = 18
  
  // åŠ æ³•äº¤æ¢å¾‹
  assert_eq(add(x, y), add(y, x))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  assert_eq(multiply(x, y), multiply(y, x))
  
  // åŒ…å«è´Ÿæ•°çš„äº¤æ¢å¾‹æµ‹è¯•
  let neg_x = -12
  let neg_y = 18
  assert_eq(add(neg_x, neg_y), add(neg_y, neg_x))
  assert_eq(multiply(neg_x, neg_y), multiply(neg_y, neg_x))
}

test "assert_functions_comprehensive" {
  // ç»¼åˆæµ‹è¯•æ–­è¨€å‡½æ•°
  // åŸºæœ¬æ–­è¨€æµ‹è¯•
  assert_true(true)
  assert_false(false)
  
  // æ•°å€¼æ–­è¨€æµ‹è¯•
  assert_eq(0, 0)
  assert_eq(100, 100)
  assert_eq(-50, -50)
  
  // å­—ç¬¦ä¸²æ–­è¨€æµ‹è¯•
  assert_eq_string("", "")
  assert_eq_string("test", "test")
  assert_eq_string("Hello, World!", "Hello, World!")
  
  // å¸ƒå°”è¡¨è¾¾å¼æ–­è¨€
  assert_true(10 > 5)
  assert_true(3 >= 3)
  assert_false(10 < 5)
  assert_false(3 <= 2)
}

test "financial_calculation_scenario" {
  // é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  let principal = 10000
  let rate = 5
  let years = 3
  let fee = 50
  
  // è®¡ç®—ç®€å•åˆ©æ¯ï¼šæœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let interest = multiply(principal, multiply(rate, years))
  
  // è®¡ç®—æ€»é¢ï¼šæœ¬é‡‘ + åˆ©æ¯ - æ‰‹ç»­è´¹
  let total = add(add(principal, interest), -fee)
  
  assert_eq(160450, total)
}

test "temperature_conversion_formula" {
  // æ¸©åº¦è½¬æ¢å…¬å¼æµ‹è¯•ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 2 + 30ï¼ˆç®€åŒ–å…¬å¼ï¼‰
  
  // æµ‹è¯•å¸¸è§æ¸©åº¦ç‚¹
  let freezing_c = 0
  let freezing_f = add(multiply(freezing_c, 2), 30)
  assert_eq(30, freezing_f)
  
  let room_c = 20
  let room_f = add(multiply(room_c, 2), 30)
  assert_eq(70, room_f)
  
  let boiling_c = 100
  let boiling_f = add(multiply(boiling_c, 2), 30)
  assert_eq(230, boiling_f)
}

test "geometry_area_calculations" {
  // å‡ ä½•é¢ç§¯è®¡ç®—æµ‹è¯•
  // çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let length = 12
  let width = 8
  let rectangle_area = multiply(length, width)
  assert_eq(96, rectangle_area)
  
  // ä¸‰è§’å½¢é¢ç§¯ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = multiply(base, height) / 2
  assert_eq(30, triangle_area)
  
  // æ¢¯å½¢é¢ç§¯ï¼šï¼ˆä¸Šåº• + ä¸‹åº•ï¼‰Ã— é«˜ Ã· 2
  let top_base = 5
  let bottom_base = 15
  let trapezoid_height = 8
  let trapezoid_area = multiply(add(top_base, bottom_base), trapezoid_height) / 2
  assert_eq(80, trapezoid_area)
}