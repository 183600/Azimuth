// Contextå’ŒBaggageå¹¶å‘å®‰å…¨æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•Contextå’ŒBaggageåœ¨å¹¶å‘åœºæ™¯ä¸‹çš„å®‰å…¨æ€§å’Œä¸€è‡´æ€§

test "context_basic_concurrent_access" {
  // æµ‹è¯•Contextçš„åŸºæœ¬å¹¶å‘è®¿é—®
  
  let base_ctx = Context::empty()
  let key1 = create_key("concurrent.key1")
  let key2 = create_key("concurrent.key2")
  let key3 = create_key("concurrent.key3")
  
  // åˆ›å»ºå¤šä¸ªå¸¦æœ‰ä¸åŒå€¼çš„Context
  let ctx1 = base_ctx.with_value(key1, "value1")
  let ctx2 = base_ctx.with_value(key2, "value2")
  let ctx3 = base_ctx.with_value(key3, "value3")
  
  // éªŒè¯æ¯ä¸ªContextçš„ç‹¬ç«‹æ€§
  match ctx1.get(key1) {
    Some(v) => assert_eq(v, "value1")
    None => @test.fail("Test failed")
  }
  
  match ctx2.get(key2) {
    Some(v) => assert_eq(v, "value2")
    None => @test.fail("Test failed")
  }
  
  match ctx3.get(key3) {
    Some(v) => assert_eq(v, "value3")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯äº¤å‰è®¿é—®ï¼ˆåº”è¯¥è¿”å›žNoneï¼‰
  match ctx1.get(key2) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx2.get(key3) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx3.get(key1) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "context_chained_operations_isolation" {
  // æµ‹è¯•Contexté“¾å¼æ“ä½œçš„éš”ç¦»æ€§
  
  let base_ctx = Context::empty()
  let key1 = create_key("chain.key1")
  let key2 = create_key("chain.key2")
  let key3 = create_key("chain.key3")
  
  // åˆ›å»ºé“¾å¼Context
  let ctx1 = base_ctx.with_value(key1, "base1")
  let ctx2 = ctx1.with_value(key2, "base2")
  let ctx3 = ctx2.with_value(key3, "base3")
  
  // éªŒè¯é“¾å¼è®¿é—®
  match ctx3.get(key1) {
    Some(v) => assert_eq(v, "base1")
    None => @test.fail("Test failed")
  }
  
  match ctx3.get(key2) {
    Some(v) => assert_eq(v, "base2")
    None => @test.fail("Test failed")
  }
  
  match ctx3.get(key3) {
    Some(v) => assert_eq(v, "base3")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯æ—©æœŸContextä¸åŒ…å«åŽæœŸæ·»åŠ çš„å€¼
  match ctx1.get(key2) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx2.get(key3) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  // åˆ›å»ºåˆ†æ”¯é“¾
  let branch1 = ctx2.with_value(key1, "branch1")
  let branch2 = ctx2.with_value(key2, "branch2")
  
  // éªŒè¯åˆ†æ”¯ç‹¬ç«‹æ€§
  match branch1.get(key1) {
    Some(v) => assert_eq(v, "branch1")
    None => @test.fail("Test failed")
  }
  
  match branch2.get(key2) {
    Some(v) => assert_eq(v, "branch2")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯åˆ†æ”¯ä¸å½±å“åŽŸå§‹Context
  match ctx2.get(key1) {
    Some(v) => assert_eq(v, "base1")
    None => @test.fail("Test failed")
  }
  
  match ctx2.get(key2) {
    Some(v) => assert_eq(v, "base2")
    None => @test.fail("Test failed")
  }
}

test "baggage_basic_concurrent_access" {
  // æµ‹è¯•Baggageçš„åŸºæœ¬å¹¶å‘è®¿é—®
  
  let base_baggage = Baggage::empty()
  
  // åˆ›å»ºå¤šä¸ªå¸¦æœ‰ä¸åŒæ¡ç›®çš„Baggage
  let baggage1 = base_baggage.with_entry("user.id", "user-123")
  let baggage2 = base_baggage.with_entry("request.id", "req-456")
  let baggage3 = base_baggage.with_entry("session.id", "session-789")
  
  // éªŒè¯æ¯ä¸ªBaggageçš„ç‹¬ç«‹æ€§
  match baggage1.get("user.id") {
    Some(v) => assert_eq(v, "user-123")
    None => @test.fail("Test failed")
  }
  
  match baggage2.get("request.id") {
    Some(v) => assert_eq(v, "req-456")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("session.id") {
    Some(v) => assert_eq(v, "session-789")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯äº¤å‰è®¿é—®ï¼ˆåº”è¯¥è¿”å›žNoneï¼‰
  match baggage1.get("request.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage2.get("session.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage3.get("user.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "baggage_chained_operations_isolation" {
  // æµ‹è¯•Baggageé“¾å¼æ“ä½œçš„éš”ç¦»æ€§
  
  let base_baggage = Baggage::empty()
  
  // åˆ›å»ºé“¾å¼Baggage
  let baggage1 = base_baggage.with_entry("service.name", "web-server")
  let baggage2 = baggage1.with_entry("service.version", "1.0.0")
  let baggage3 = baggage2.with_entry("deployment.environment", "production")
  
  // éªŒè¯é“¾å¼è®¿é—®
  match baggage3.get("service.name") {
    Some(v) => assert_eq(v, "web-server")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("service.version") {
    Some(v) => assert_eq(v, "1.0.0")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("deployment.environment") {
    Some(v) => assert_eq(v, "production")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯æ—©æœŸBaggageä¸åŒ…å«åŽæœŸæ·»åŠ çš„å€¼
  match baggage1.get("service.version") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage2.get("deployment.environment") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  // åˆ›å»ºåˆ†æ”¯é“¾
  let branch1 = baggage2.with_entry("service.name", "api-gateway")
  let branch2 = baggage2.with_entry("service.version", "2.0.0")
  
  // éªŒè¯åˆ†æ”¯ç‹¬ç«‹æ€§
  match branch1.get("service.name") {
    Some(v) => assert_eq(v, "api-gateway")
    None => @test.fail("Test failed")
  }
  
  match branch2.get("service.version") {
    Some(v) => assert_eq(v, "2.0.0")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯åˆ†æ”¯ä¸å½±å“åŽŸå§‹Baggage
  match baggage2.get("service.name") {
    Some(v) => assert_eq(v, "web-server")
    None => @test.fail("Test failed")
  }
  
  match baggage2.get("service.version") {
    Some(v) => assert_eq(v, "1.0.0")
    None => @test.fail("Test failed")
  }
}

test "context_complex_concurrent_scenarios" {
  // æµ‹è¯•Contextçš„å¤æ‚å¹¶å‘åœºæ™¯
  
  let base_ctx = Context::empty()
  
  // åˆ›å»ºå¤šä¸ªé”®
  let keys = [
    create_key("request.id"),
    create_key("user.id"),
    create_key("session.id"),
    create_key("trace.id"),
    create_key("operation.name"),
    create_key("service.name"),
    create_key("service.version"),
    create_key("deployment.environment")
  ]
  
  let values = [
    "req-12345",
    "user-67890",
    "session-abcdef",
    "trace-123456789",
    "process-data",
    "api-service",
    "1.2.3",
    "production"
  ]
  
  // åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„Contextåˆ†æ”¯
  let ctx1 = base_ctx.with_value(keys[0], values[0]).with_value(keys[1], values[1])
  let ctx2 = base_ctx.with_value(keys[2], values[2]).with_value(keys[3], values[3])
  let ctx3 = base_ctx.with_value(keys[4], values[4]).with_value(keys[5], values[5])
  let ctx4 = base_ctx.with_value(keys[6], values[6]).with_value(keys[7], values[7])
  
  // éªŒè¯æ¯ä¸ªåˆ†æ”¯çš„ç‹¬ç«‹æ€§
  match ctx1.get(keys[0]) {
    Some(v) => assert_eq(v, values[0])
    None => @test.fail("Expected " + values[0])
  }
  
  match ctx1.get(keys[1]) {
    Some(v) => assert_eq(v, values[1])
    None => @test.fail("Expected " + values[1])
  }
  
  match ctx2.get(keys[2]) {
    Some(v) => assert_eq(v, values[2])
    None => @test.fail("Expected " + values[2])
  }
  
  match ctx2.get(keys[3]) {
    Some(v) => assert_eq(v, values[3])
    None => @test.fail("Expected " + values[3])
  }
  
  match ctx3.get(keys[4]) {
    Some(v) => assert_eq(v, values[4])
    None => @test.fail("Expected " + values[4])
  }
  
  match ctx3.get(keys[5]) {
    Some(v) => assert_eq(v, values[5])
    None => @test.fail("Expected " + values[5])
  }
  
  match ctx4.get(keys[6]) {
    Some(v) => assert_eq(v, values[6])
    None => @test.fail("Expected " + values[6])
  }
  
  match ctx4.get(keys[7]) {
    Some(v) => assert_eq(v, values[7])
    None => @test.fail("Expected " + values[7])
  }
  
  // éªŒè¯äº¤å‰è®¿é—®è¿”å›žNone
  match ctx1.get(keys[2]) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx2.get(keys[4]) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx3.get(keys[6]) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match ctx4.get(keys[0]) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "baggage_complex_concurrent_scenarios" {
  // æµ‹è¯•Baggageçš„å¤æ‚å¹¶å‘åœºæ™¯
  
  let base_baggage = Baggage::empty()
  
  // åˆ›å»ºå¤šä¸ªç‹¬ç«‹çš„Baggageåˆ†æ”¯
  let baggage1 = base_baggage
    .with_entry("user.id", "user-123")
    .with_entry("user.role", "admin")
    .with_entry("user.email", "admin@example.com")
  
  let baggage2 = base_baggage
    .with_entry("request.id", "req-456")
    .with_entry("request.method", "GET")
    .with_entry("request.path", "/api/users")
  
  let baggage3 = base_baggage
    .with_entry("service.name", "api-gateway")
    .with_entry("service.version", "2.1.0")
    .with_entry("service.namespace", "production")
  
  let baggage4 = base_baggage
    .with_entry("trace.id", "trace-789")
    .with_entry("trace.sampled", "true")
    .with_entry("trace.flags", "01")
  
  // éªŒè¯æ¯ä¸ªåˆ†æ”¯çš„ç‹¬ç«‹æ€§
  match baggage1.get("user.id") {
    Some(v) => assert_eq(v, "user-123")
    None => @test.fail("Test failed")
  }
  
  match baggage1.get("user.role") {
    Some(v) => assert_eq(v, "admin")
    None => @test.fail("Test failed")
  }
  
  match baggage2.get("request.method") {
    Some(v) => assert_eq(v, "GET")
    None => @test.fail("Test failed")
  }
  
  match baggage2.get("request.path") {
    Some(v) => assert_eq(v, "/api/users")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("service.name") {
    Some(v) => assert_eq(v, "api-gateway")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("service.version") {
    Some(v) => assert_eq(v, "2.1.0")
    None => @test.fail("Test failed")
  }
  
  match baggage4.get("trace.id") {
    Some(v) => assert_eq(v, "trace-789")
    None => @test.fail("Test failed")
  }
  
  match baggage4.get("trace.sampled") {
    Some(v) => assert_eq(v, "true")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯äº¤å‰è®¿é—®è¿”å›žNone
  match baggage1.get("request.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage2.get("service.name") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage3.get("trace.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage4.get("user.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "context_and_baggage_integration_concurrency" {
  // æµ‹è¯•Contextå’ŒBaggageé›†æˆçš„å¹¶å‘åœºæ™¯
  
  let base_ctx = Context::empty()
  let base_baggage = Baggage::empty()
  
  // åˆ›å»ºContexté”®
  let ctx_key1 = create_key("operation.id")
  let ctx_key2 = create_key("correlation.id")
  let ctx_key3 = create_key("tenant.id")
  
  // åˆ›å»ºContextåˆ†æ”¯
  let ctx1 = base_ctx.with_value(ctx_key1, "op-123")
  let ctx2 = base_ctx.with_value(ctx_key2, "corr-456")
  let ctx3 = base_ctx.with_value(ctx_key3, "tenant-789")
  
  // åˆ›å»ºBaggageåˆ†æ”¯
  let baggage1 = base_baggage
    .with_entry("user.id", "user-111")
    .with_entry("session.id", "session-111")
  
  let baggage2 = base_baggage
    .with_entry("service.name", "service-222")
    .with_entry("service.version", "2.2.2")
  
  let baggage3 = base_baggage
    .with_entry("environment", "env-333")
    .with_entry("region", "region-333")
  
  // éªŒè¯Contextå’ŒBaggageçš„ç‹¬ç«‹æ€§
  match ctx1.get(ctx_key1) {
    Some(v) => assert_eq(v, "op-123")
    None => @test.fail("Test failed")
  }
  
  match baggage1.get("user.id") {
    Some(v) => assert_eq(v, "user-111")
    None => @test.fail("Test failed")
  }
  
  match ctx2.get(ctx_key2) {
    Some(v) => assert_eq(v, "corr-456")
    None => @test.fail("Test failed")
  }
  
  match baggage2.get("service.name") {
    Some(v) => assert_eq(v, "service-222")
    None => @test.fail("Test failed")
  }
  
  match ctx3.get(ctx_key3) {
    Some(v) => assert_eq(v, "tenant-789")
    None => @test.fail("Test failed")
  }
  
  match baggage3.get("environment") {
    Some(v) => assert_eq(v, "env-333")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯äº¤å‰ç‹¬ç«‹æ€§
  match ctx1.get(ctx_key2) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match baggage1.get("service.name") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "context_edge_cases_concurrency" {
  // æµ‹è¯•Contextçš„è¾¹ç•Œæƒ…å†µå¹¶å‘
  
  let base_ctx = Context::empty()
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²é”®å’Œå€¼
  let empty_key = create_key("")
  let ctx_empty_key = base_ctx.with_value(empty_key, "empty.key.value")
  
  match ctx_empty_key.get(empty_key) {
    Some(v) => assert_eq(v, "empty.key.value")
    None => @test.fail("Test failed")
  }
  
  let normal_key = create_key("normal.key")
  let ctx_empty_value = base_ctx.with_value(normal_key, "")
  
  match ctx_empty_value.get(normal_key) {
    Some(v) => assert_eq(v, "")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦é”®å’Œå€¼
  let special_key = create_key("!@#$%^&*()_+-=[]{}|;':\",./<>?")
  let ctx_special = base_ctx.with_value(special_key, "special.value!@#$%")
  
  match ctx_special.get(special_key) {
    Some(v) => assert_eq(v, "special.value!@#$%")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•Unicodeé”®å’Œå€¼
  let unicode_key = create_key("æµ‹è¯•é”®ðŸš€")
  let ctx_unicode = base_ctx.with_value(unicode_key, "æµ‹è¯•å€¼ðŸŒŸðŸ’«")
  
  match ctx_unicode.get(unicode_key) {
    Some(v) => assert_eq(v, "æµ‹è¯•å€¼ðŸŒŸðŸ’«")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•é•¿é”®å’Œå€¼
  let long_key_name = "this.is.a.very.long.key.name.with.many.components.and.subdomains"
  let long_key = create_key(long_key_name)
  let long_value = "this.is.a.very.long.value.with.many.words.and.characters.that.might.be.used.in.real.world.scenarios"
  let ctx_long = base_ctx.with_value(long_key, long_value)
  
  match ctx_long.get(long_key) {
    Some(v) => assert_eq(v, long_value)
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯æ‰€æœ‰è¾¹ç•Œæƒ…å†µContextçš„ç‹¬ç«‹æ€§
  match base_ctx.get(empty_key) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_ctx.get(normal_key) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_ctx.get(special_key) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_ctx.get(unicode_key) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_ctx.get(long_key) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "baggage_edge_cases_concurrency" {
  // æµ‹è¯•Baggageçš„è¾¹ç•Œæƒ…å†µå¹¶å‘
  
  let base_baggage = Baggage::empty()
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²é”®å’Œå€¼
  let baggage_empty_key = base_baggage.with_entry("", "empty.key.value")
  
  match baggage_empty_key.get("") {
    Some(v) => assert_eq(v, "empty.key.value")
    None => @test.fail("Test failed")
  }
  
  let baggage_empty_value = base_baggage.with_entry("empty.value", "")
  
  match baggage_empty_value.get("empty.value") {
    Some(v) => assert_eq(v, "")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦é”®å’Œå€¼
  let baggage_special = base_baggage.with_entry("!@#$%^&*()", "special.value!@#$%")
  
  match baggage_special.get("!@#$%^&*()") {
    Some(v) => assert_eq(v, "special.value!@#$%")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•Unicodeé”®å’Œå€¼
  let baggage_unicode = base_baggage.with_entry("æµ‹è¯•é”®ðŸš€", "æµ‹è¯•å€¼ðŸŒŸðŸ’«")
  
  match baggage_unicode.get("æµ‹è¯•é”®ðŸš€") {
    Some(v) => assert_eq(v, "æµ‹è¯•å€¼ðŸŒŸðŸ’«")
    None => @test.fail("Test failed")
  }
  
  // æµ‹è¯•é•¿é”®å’Œå€¼
  let long_key_name = "this.is.a.very.long.baggage.key.name.with.many.components"
  let long_value = "this.is.a.very.long.baggage.value.with.many.words.and.characters"
  let baggage_long = base_baggage.with_entry(long_key_name, long_value)
  
  match baggage_long.get(long_key_name) {
    Some(v) => assert_eq(v, long_value)
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯æ‰€æœ‰è¾¹ç•Œæƒ…å†µBaggageçš„ç‹¬ç«‹æ€§
  match base_baggage.get("") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_baggage.get("empty.value") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_baggage.get("!@#$%^&*()") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_baggage.get("æµ‹è¯•é”®ðŸš€") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match base_baggage.get(long_key_name) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}

test "context_and_baggage_mixed_concurrency" {
  // æµ‹è¯•Contextå’ŒBaggageçš„æ··åˆå¹¶å‘åœºæ™¯
  
  let base_ctx = Context::empty()
  let base_baggage = Baggage::empty()
  
  // åˆ›å»ºå¤šä¸ªContextå’ŒBaggageçš„ç»„åˆ
  let ctx1 = base_ctx.with_value(create_key("request.id"), "req-111")
  let baggage1 = base_baggage.with_entry("user.id", "user-111")
  
  let ctx2 = base_ctx.with_value(create_key("operation.name"), "operation-222")
  let baggage2 = base_baggage.with_entry("service.name", "service-222")
  
  let ctx3 = base_ctx.with_value(create_key("trace.id"), "trace-333")
  let baggage3 = base_baggage.with_entry("environment", "env-333")
  
  // åˆ›å»ºæ›´å¤æ‚çš„ç»„åˆ
  let complex_ctx1 = ctx1.with_value(create_key("session.id"), "session-111")
  let complex_baggage1 = baggage1.with_entry("tenant.id", "tenant-111")
  
  let complex_ctx2 = ctx2.with_value(create_key("correlation.id"), "corr-222")
  let complex_baggage2 = baggage2.with_entry("deployment.region", "region-222")
  
  let complex_ctx3 = ctx3.with_value(create_key("workflow.id"), "workflow-333")
  let complex_baggage3 = baggage3.with_entry("cluster.name", "cluster-333")
  
  // éªŒè¯æ‰€æœ‰ç»„åˆçš„ç‹¬ç«‹æ€§
  match complex_ctx1.get(create_key("request.id")) {
    Some(v) => assert_eq(v, "req-111")
    None => @test.fail("Test failed")
  }
  
  match complex_ctx1.get(create_key("session.id")) {
    Some(v) => assert_eq(v, "session-111")
    None => @test.fail("Test failed")
  }
  
  match complex_baggage1.get("user.id") {
    Some(v) => assert_eq(v, "user-111")
    None => @test.fail("Test failed")
  }
  
  match complex_baggage1.get("tenant.id") {
    Some(v) => assert_eq(v, "tenant-111")
    None => @test.fail("Test failed")
  }
  
  // éªŒè¯äº¤å‰ç‹¬ç«‹æ€§
  match complex_ctx1.get(create_key("operation.name")) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match complex_baggage1.get("service.name") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match complex_ctx2.get(create_key("request.id")) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match complex_baggage2.get("user.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match complex_ctx3.get(create_key("session.id")) {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
  
  match complex_baggage3.get("tenant.id") {
    Some(_) => @test.fail("Test failed")
    None => assert_eq(true, true)
  }
}