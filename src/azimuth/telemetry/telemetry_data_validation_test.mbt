// æ•°æ®éªŒè¯æµ‹è¯• - æµ‹è¯•æ•°æ®å®Œæ•´æ€§å’ŒéªŒè¯è§„åˆ™
test "data_validation_trace_id_format" {
  // æµ‹è¯•Trace IDæ ¼å¼éªŒè¯
  
  // æµ‹è¯•æœ‰æ•ˆçš„Trace IDï¼ˆ16å­—èŠ‚ï¼Œ32ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼‰
  let valid_trace_id_1 = [for i = 0; i < 16; i = i + 1].map(fn(i) { 
    if i % 2 == 0 { 0x0a_byte } else { 0xf0_byte }
  })
  let valid_trace_id_2 = [for i = 0; i < 16; i = i + 1].map(fn(_) { 0x00_byte })
  let valid_trace_id_3 = [for i = 0; i < 16; i = i + 1].map(fn(_) { 0xff_byte })
  
  // åˆ›å»ºæœ‰æ•ˆçš„SpanContext
  let valid_context_1 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: valid_trace_id_1,
    span_id: [for i = 0; i < 8; i = i + 1].map(fn(_) { 0x01_byte }),
    trace_flags: 1_byte,
    trace_state: ""
  }
  
  let valid_context_2 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: valid_trace_id_2,
    span_id: [for i = 0; i < 8; i = i + 1].map(fn(_) { 0x02_byte }),
    trace_flags: 0_byte,
    trace_state: ""
  }
  
  let valid_context_3 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: valid_trace_id_3,
    span_id: [for i = 0; i < 8; i = i + 1].map(fn(_) { 0x03_byte }),
    trace_flags: 1_byte,
    trace_state: "key=value"
  }
  
  // éªŒè¯æœ‰æ•ˆTrace ID
  assert_eq(valid_context_1.trace_id.length(), 16)
  assert_eq(valid_context_2.trace_id.length(), 16)
  assert_eq(valid_context_3.trace_id.length(), 16)
  
  // éªŒè¯Trace IDå†…å®¹
  assert_eq(valid_context_1.trace_id[0], 0x0a_byte)
  assert_eq(valid_context_1.trace_id[1], 0xf0_byte)
  assert_eq(valid_context_2.trace_id[0], 0x00_byte)
  assert_eq(valid_context_3.trace_id[0], 0xff_byte)
}

test "data_validation_span_id_format" {
  // æµ‹è¯•Span IDæ ¼å¼éªŒè¯
  
  // æµ‹è¯•æœ‰æ•ˆçš„Span IDï¼ˆ8å­—èŠ‚ï¼Œ16ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼‰
  let valid_span_id_1 = [for i = 0; i < 8; i = i + 1].map(fn(i) { 
    if i % 2 == 0 { 0x0b_byte } else { 0xf1_byte }
  })
  let valid_span_id_2 = [for i = 0; i < 8; i = i + 1].map(fn(_) { 0x00_byte })
  let valid_span_id_3 = [for i = 0; i < 8; i = i + 1].map(fn(_) { 0xff_byte })
  
  // åˆ›å»ºæœ‰æ•ˆçš„SpanContext
  let valid_context_1 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: [for i = 0; i < 16; i = i + 1].map(fn(_) { 0x01_byte }),
    span_id: valid_span_id_1,
    trace_flags: 1_byte,
    trace_state: ""
  }
  
  let valid_context_2 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: [for i = 0; i < 16; i = i + 1].map(fn(_) { 0x02_byte }),
    span_id: valid_span_id_2,
    trace_flags: 0_byte,
    trace_state: ""
  }
  
  let valid_context_3 = @azimuth.telemetry.api.trace.SpanContext::{
    trace_id: [for i = 0; i < 16; i = i + 1].map(fn(_) { 0x03_byte }),
    span_id: valid_span_id_3,
    trace_flags: 1_byte,
    trace_state: "key=value"
  }
  
  // éªŒè¯æœ‰æ•ˆSpan ID
  assert_eq(valid_context_1.span_id.length(), 8)
  assert_eq(valid_context_2.span_id.length(), 8)
  assert_eq(valid_context_3.span_id.length(), 8)
  
  // éªŒè¯Span IDå†…å®¹
  assert_eq(valid_context_1.span_id[0], 0x0b_byte)
  assert_eq(valid_context_1.span_id[1], 0xf1_byte)
  assert_eq(valid_context_2.span_id[0], 0x00_byte)
  assert_eq(valid_context_3.span_id[0], 0xff_byte)
}

test "data_validation_attribute_values" {
  // æµ‹è¯•å±æ€§å€¼éªŒè¯
  
  // æµ‹è¯•å­—ç¬¦ä¸²å€¼
  let valid_string_values = [
    "simple_string",
    "string.with.dots",
    "string_with_underscores",
    "string-with-dashes",
    "StringWithCamelCase",
    "string_with_numbers123",
    "unicode_string_æµ‹è¯•",
    "emoji_string_ğŸš€",
    "",  // ç©ºå­—ç¬¦ä¸²
    " ",  // åªæœ‰ç©ºæ ¼
    "a".repeat(100)  // é•¿å­—ç¬¦ä¸²
  ]
  
  // æµ‹è¯•æ•´æ•°å€¼
  let valid_int_values = [
    0L,
    1L,
    -1L,
    9223372036854775807L,  // Max Int64
    -9223372036854775808L,  // Min Int64
    1234567890L,
    -987654321L
  ]
  
  // æµ‹è¯•æµ®ç‚¹æ•°å€¼
  let valid_float_values = [
    0.0,
    1.0,
    -1.0,
    3.14159265359,
    1.7976931348623157e+308,  // Max Double
    -1.7976931348623157e+308,  // Min Double
    1.0/0.0,  // Infinity
    -1.0/0.0,  // Negative Infinity
    0.0/0.0   // NaN
  ]
  
  // æµ‹è¯•å¸ƒå°”å€¼
  let valid_bool_values = [true, false]
  
  // åˆ›å»ºå±æ€§å¹¶éªŒè¯
  let mut string_attributes = []
  let mut i = 0
  while i < valid_string_values.length() {
    let value = valid_string_values[i]
    string_attributes.push(("string_test_" + i.to_string(), @azimuth.telemetry.api.common.AttributeValue::string(value)))
    i = i + 1
  }
  
  let mut int_attributes = []
  i = 0
  while i < valid_int_values.length() {
    let value = valid_int_values[i]
    int_attributes.push(("int_test_" + i.to_string(), @azimuth.telemetry.api.common.AttributeValue::int(value)))
    i = i + 1
  }
  
  let mut float_attributes = []
  i = 0
  while i < valid_float_values.length() {
    let value = valid_float_values[i]
    float_attributes.push(("float_test_" + i.to_string(), @azimuth.telemetry.api.common.AttributeValue::float(value)))
    i = i + 1
  }
  
  let mut bool_attributes = []
  i = 0
  while i < valid_bool_values.length() {
    let value = valid_bool_values[i]
    bool_attributes.push(("bool_test_" + i.to_string(), @azimuth.telemetry.api.common.AttributeValue::bool(value)))
    i = i + 1
  }
  
  // éªŒè¯å±æ€§åˆ›å»º
  assert_eq(string_attributes.length(), 11)
  assert_eq(int_attributes.length(), 7)
  assert_eq(float_attributes.length(), 9)
  assert_eq(bool_attributes.length(), 2)
}