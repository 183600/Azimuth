// Azimuth åº“ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "subtract_functionality" {
  // æµ‹è¯•å‡æ³•åŠŸèƒ½ï¼ˆé€šè¿‡åŠ è´Ÿæ•°å®ç°ï¼‰
  assert_eq(5, add(10, -5))
  assert_eq(-3, add(2, -5))
  assert_eq(0, add(5, -5))
  assert_eq(-10, add(-5, -5))
}

test "divide_with_ceil_precision_test" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„ç²¾åº¦
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(2, divide_with_ceil(3, 2))
  assert_eq(4, divide_with_ceil(11, 3))
  assert_eq(34, divide_with_ceil(100, 3))
  assert_eq(-3, divide_with_ceil(-8, 3))
}

test "multiply_by_negative_one" {
  // æµ‹è¯•ä¹˜ä»¥-1çš„å–åæ“ä½œ
  assert_eq(-5, multiply(5, -1))
  assert_eq(5, multiply(-5, -1))
  assert_eq(0, multiply(0, -1))
  assert_eq(100, multiply(-100, -1))
}

test "greet_with_special_characters" {
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦çš„é—®å€™åŠŸèƒ½
  assert_eq_string("Hello, @#$%!", greet("@#$%"))
  assert_eq_string("Hello, \n\t\r!", greet("\n\t\r"))
  assert_eq_string("Hello, <>[]{}!", greet("<>[]{}"))
  assert_eq_string("Hello, ğŸŒŸğŸŒ™â­!", greet("ğŸŒŸğŸŒ™â­"))
}

test "complex_nested_operations" {
  // æµ‹è¯•å¤æ‚åµŒå¥—è¿ç®—
  let result = add(multiply(3, add(2, 4)), divide_with_ceil(multiply(5, 7), 3))
  assert_eq(36, result)  // 3*(2+4) + ceil(5*7/3) = 18 + 12 = 30
  
  let result2 = multiply(add(divide_with_ceil(25, 4), 3), 2)
  assert_eq(14, result2)  // (ceil(25/4)+3)*2 = (7+3)*2 = 20
}

test "boundary_value_analysis" {
  // è¾¹ç•Œå€¼åˆ†ææµ‹è¯•
  assert_eq(1, add(1, 0))
  assert_eq(-1, add(-1, 0))
  assert_eq(0, multiply(0, 1))
  assert_eq(0, multiply(0, -1))
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(0, divide_with_ceil(0, 1))
}

test "mathematical_series_calculation" {
  // æ•°å­¦çº§æ•°è®¡ç®—æµ‹è¯•
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼š1+2+3+...+10 = 55
  let n = 10
  let sum = divide_with_ceil(multiply(n, add(n, 1)), 2)
  assert_eq(55, sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹ç§¯ï¼š2^4 = 16
  let base = 2
  let power = 4
  let product = multiply(multiply(multiply(base, base), base), base)
  assert_eq(16, product)
}

test "real_world_financial_calculation" {
  // å®é™…é‡‘èè®¡ç®—åœºæ™¯
  let principal = 1000
  let rate_percent = 5
  let years = 3
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼ˆä½¿ç”¨å‘ä¸Šå–æ•´ï¼‰
  let year1_interest = divide_with_ceil(multiply(principal, rate_percent), 100)
  let year2_interest = divide_with_ceil(multiply(add(principal, year1_interest), rate_percent), 100)
  let year3_interest = divide_with_ceil(multiply(add(add(principal, year1_interest), year2_interest), rate_percent), 100)
  
  let total_amount = add(add(add(principal, year1_interest), year2_interest), year3_interest)
  assert_eq(1158, total_amount)
}

test "string_concatenation_with_greet" {
  // å­—ç¬¦ä¸²è¿æ¥ä¸é—®å€™å‡½æ•°ç»“åˆæµ‹è¯•
  let first_name = "å¼ "
  let last_name = "ä¸‰"
  let full_name = first_name + last_name
  let greeting = greet(full_name)
  
  assert_eq_string("Hello, å¼ ä¸‰!", greeting)
  
  // æµ‹è¯•æ•°å­—å­—ç¬¦ä¸²
  let number_str = "123"
  let number_greeting = greet(number_str)
  assert_eq_string("Hello, 123!", number_greeting)
}

test "error_resilience_test" {
  // é”™è¯¯æ¢å¤èƒ½åŠ›æµ‹è¯•
  // æµ‹è¯•é™¤æ•°ä¸º0çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  
  // æµ‹è¯•å¤§æ•°è¿ç®—çš„ç¨³å®šæ€§
  let large_num = 100000
  assert_eq(200000, add(large_num, large_num))
  assert_eq(0, multiply(large_num, 0))
  assert_eq(1, divide_with_ceil(large_num, large_num))
}