// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

test "add_function_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹
  assert_eq(15, add(8, 7))
  assert_eq(15, add(7, 8))
  assert_eq(0, add(-5, 5))
  assert_eq(0, add(5, -5))
}

test "multiply_function_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹
  let a = 6
  let b = 4
  let c = 3
  
  // a * (b + c) = a * b + a * c
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  
  assert_eq(left_side, right_side)  // 6 * (4 + 3) = 6 * 4 + 6 * 3 = 42
}

test "divide_with_ceil_comprehensive_test" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•
  // æ­£æ•°æƒ…å†µ
  assert_eq(3, divide_with_ceil(8, 3))    // 8/3 = 2.666... -> 3
  assert_eq(2, divide_with_ceil(6, 3))    // 6/3 = 2 -> 2
  assert_eq(1, divide_with_ceil(1, 100))  // 1/100 = 0.01 -> 1
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(-2, divide_with_ceil(-8, 3))   // -8/3 = -2.666... -> -2
  assert_eq(-3, divide_with_ceil(-9, 3))   // -9/3 = -3 -> -3
  
  // é›¶é™¤æ•°æƒ…å†µ
  assert_eq(0, divide_with_ceil(100, 0))   // é™¤æ•°ä¸º0æ—¶è¿”å›0
  assert_eq(0, divide_with_ceil(-100, 0))  // é™¤æ•°ä¸º0æ—¶è¿”å›0
}

test "greet_function_multilingual_support" {
  // æµ‹è¯•å¤šè¯­è¨€æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, Mundo!", greet("Mundo"))
  assert_eq_string("Hello, ĞœĞ¸Ñ€!", greet("ĞœĞ¸Ñ€"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
}

test "complex_business_calculation" {
  // å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¢å•æ€»ä»·
  let unit_price = 25
  let quantity = 8
  let tax_rate = 8  // 8%
  let shipping = 15
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  // è®¡ç®—ç¨è´¹
  let tax = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  // è®¡ç®—æ€»ä»·
  let total = add(add(subtotal, tax), shipping)
  
  assert_eq(200, subtotal)     // 25 * 8 = 200
  assert_eq(16, tax)           // ceil(200 * 8 / 100) = ceil(16) = 16
  assert_eq(231, total)        // 200 + 16 + 15 = 231
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—ï¼šç­‰å·®æ•°åˆ—æ±‚å’Œ
  let first_term = 5
  let common_diff = 3
  let num_terms = 6
  
  // æ‰‹åŠ¨è®¡ç®—å‰6é¡¹ï¼š5, 8, 11, 14, 17, 20
  let sum1 = first_term
  let sum2 = add(sum1, add(first_term, common_diff))
  let sum3 = add(sum2, add(first_term, multiply(2, common_diff)))
  let sum4 = add(sum3, add(first_term, multiply(3, common_diff)))
  let sum5 = add(sum4, add(first_term, multiply(4, common_diff)))
  let sum6 = add(sum5, add(first_term, multiply(5, common_diff)))
  
  assert_eq(75, sum6)  // 5 + 8 + 11 + 14 + 17 + 20 = 75
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–
  let total_budget = 1000
  let project_a_cost = 350
  let project_b_cost = 280
  let project_c_cost = 420
  
  // è®¡ç®—ä¸‰ä¸ªé¡¹ç›®æ€»æˆæœ¬
  let total_cost = add(add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining = add(total_budget, -total_cost)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡ï¼ˆæ¯ä¸ª50å•ä½ï¼‰
  let small_projects = divide_with_ceil(remaining, 50)
  
  assert_eq(1050, total_cost)
  assert_eq(-50, remaining)
  assert_eq(-1, small_projects)  // é¢„ç®—ä¸è¶³ï¼Œè¿”å›-1è¡¨ç¤ºæ— æ³•æ”¯æŒ
}

test "time_management_calculation" {
  // æ—¶é—´ç®¡ç†è®¡ç®—
  let tasks_per_day = 7
  let total_tasks = 45
  let work_days_per_week = 5
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œæ—¥
  let work_days_needed = divide_with_ceil(total_tasks, tasks_per_day)
  
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(work_days_needed, work_days_per_week)
  
  assert_eq(7, work_days_needed)  // ceil(45/7) = 7
  assert_eq(2, weeks_needed)      // ceil(7/5) = 2
}

test "string_processing_validation" {
  // å­—ç¬¦ä¸²å¤„ç†éªŒè¯
  let username = "Alice"
  let domain = "example.com"
  let email = username + "@" + domain
  
  // ä½¿ç”¨greetå‡½æ•°éªŒè¯é‚®ç®±æ ¼å¼
  let greeting = greet(email)
  
  assert_eq_string("Hello, Alice@example.com!", greeting)
  assert_eq_string("Hello, @!", greet("@"))
  assert_eq_string("Hello, a.b.c!", greet("a.b.c"))
}

test "extreme_boundary_conditions" {
  // æç«¯è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  // æµ‹è¯•å¤§æ•°å€¼
  assert_eq(2000000, add(1000000, 1000000))
  assert_eq(1000000000, multiply(10000, 100000))
  
  // æµ‹è¯•é›¶å€¼è¿ç®—
  assert_eq(0, multiply(0, 123456))
  assert_eq(123456, add(0, 123456))
  assert_eq(0, divide_with_ceil(0, 123456))
  
  // æµ‹è¯•è´Ÿæ•°è¾¹ç•Œ
  assert_eq(-1, divide_with_ceil(-1, 100))
  assert_eq(-1000, add(-500, -500))
  assert_eq(250000, multiply(-500, -500))
}