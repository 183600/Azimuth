// æ–°çš„ MoonBit æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“
// åŒ…å«é«˜çº§æµ‹è¯•åœºæ™¯å’Œè¾¹ç•Œæƒ…å†µæµ‹è¯•

test "extreme_boundary_values" {
  // æµ‹è¯•æžç«¯è¾¹ç•Œå€¼
  assert_eq(2147483647, add(2147483646, 1))  // æŽ¥è¿‘Intæœ€å¤§å€¼
  assert_eq(-2147483648, add(-2147483647, -1))  // æŽ¥è¿‘Intæœ€å°å€¼
  assert_eq(0, add(2147483647, -2147483647))  // æœ€å¤§å€¼ä¸Žç›¸åæ•°ç›¸åŠ 
}

test "divide_with_ceil_precision_edge_cases" {
  // æµ‹è¯•é™¤æ³•å‘ä¸Šå–æ•´çš„ç²¾åº¦è¾¹ç•Œæƒ…å†µ
  assert_eq(1, divide_with_ceil(1, 1))  // å®Œå…¨ç›¸ç­‰
  assert_eq(2, divide_with_ceil(3, 2))  // 1.5 -> 2
  assert_eq(100, divide_with_ceil(9999, 100))  // 99.99 -> 100
  assert_eq(1, divide_with_ceil(-1, -1))  // è´Ÿæ•°ç›¸ç­‰
  assert_eq(-3, divide_with_ceil(-10, 3))  // -10/3 = -3.333... -> -3
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èžè®¡ç®—åœºæ™¯
  let principal = 10000
  let rate_percent = 5
  let years = 3
  
  // è®¡ç®—å¤åˆ©ï¼ˆæ¯å¹´è®¡ç®—ä¸€æ¬¡ï¼‰
  let year1 = add(principal, divide_with_ceil(multiply(principal, rate_percent), 100))
  let year2 = add(year1, divide_with_ceil(multiply(year1, rate_percent), 100))
  let year3 = add(year2, divide_with_ceil(multiply(year2, rate_percent), 100))
  
  assert_eq(10500, year1)  // 10000 + 500
  assert_eq(11025, year2)  // 10500 + 525
  assert_eq(11576, year3)  // 11025 + 551
}

test "inventory_optimization" {
  // åº“å­˜ä¼˜åŒ–è®¡ç®—
  let monthly_demand = 450
  let lead_time_days = 7
  let safety_stock_percentage = 20
  
  // è®¡ç®—å®‰å…¨åº“å­˜
  let safety_stock = divide_with_ceil(multiply(monthly_demand, safety_stock_percentage), 100)
  
  // è®¡ç®—å†è®¢è´§ç‚¹
  let daily_demand = divide_with_ceil(monthly_demand, 30)
  let lead_time_demand = multiply(daily_demand, lead_time_days)
  let reorder_point = add(lead_time_demand, safety_stock)
  
  assert_eq(90, safety_stock)
  assert_eq(15, daily_demand)
  assert_eq(105, lead_time_demand)
  assert_eq(195, reorder_point)
}

test "string_processing_with_unicode" {
  // Unicode å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  assert_eq_string("Hello, ðŸŒŸðŸŒ™ðŸŒŸ!", greet("ðŸŒŸðŸŒ™ðŸŒŸ"))
  assert_eq_string("Hello, Î±Î²Î³Î´Îµ!", greet("Î±Î²Î³Î´Îµ"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³ÃºÃ¼!", greet("Ã±Ã¡Ã©Ã­Ã³ÃºÃ¼"))
  assert_eq_string("Hello, ðŸ¢ðŸ’¼ðŸ“Š!", greet("ðŸ¢ðŸ’¼ðŸ“Š"))
}

test "mathematical_series_calculation" {
  // æ•°å­¦çº§æ•°è®¡ç®—ï¼šç­‰å·®æ•°åˆ—å’Œç­‰æ¯”æ•°åˆ—
  // ç­‰å·®æ•°åˆ—ï¼š3, 7, 11, 15, 19
  let arithmetic_sum = add(add(add(add(3, 7), 11), 15), 19)
  
  // ç­‰æ¯”æ•°åˆ—ï¼š2, 4, 8, 16, 32
  let geometric_sum = add(add(add(add(2, 4), 8), 16), 32)
  
  assert_eq(55, arithmetic_sum)  // 3+7+11+15+19 = 55
  assert_eq(62, geometric_sum)   // 2+4+8+16+32 = 62
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–
  let total_budget = 50000
  let project_a_cost = 12000
  let project_b_cost = 8000
  let project_c_cost = 15000
  
  // è®¡ç®—å·²åˆ†é…é¢„ç®—
  let allocated_budget = add(add(project_a_cost, project_b_cost), project_c_cost)
  
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining_budget = add(total_budget, -allocated_budget)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡ï¼ˆæ¯ä¸ªå°é¡¹ç›®æˆæœ¬2000ï¼‰
  let small_projects_count = divide_with_ceil(remaining_budget, 2000)
  
  assert_eq(35000, allocated_budget)
  assert_eq(15000, remaining_budget)
  assert_eq(8, small_projects_count)
}

test "time_management_calculations" {
  // æ—¶é—´ç®¡ç†è®¡ç®—
  let total_tasks = 87
  let working_hours_per_day = 8
  let tasks_per_hour = 3
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œå¤©æ•°
  let total_hours_needed = divide_with_ceil(total_tasks, tasks_per_hour)
  let days_needed = divide_with_ceil(total_hours_needed, working_hours_per_day)
  
  // è®¡ç®—æ¯å‘¨å·¥ä½œè´Ÿè½½
  let weekly_capacity = multiply(working_hours_per_day, 5)
  let tasks_per_week = multiply(weekly_capacity, tasks_per_hour)
  
  assert_eq(29, total_hours_needed)
  assert_eq(4, days_needed)
  assert_eq(40, weekly_capacity)
  assert_eq(120, tasks_per_week)
}

test "error_handling_robustness" {
  // é”™è¯¯å¤„ç†å¥å£®æ€§æµ‹è¯•
  // æµ‹è¯•é™¤æ•°ä¸ºé›¶çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  
  // æµ‹è¯•å¤§æ•°è¿ç®—çš„ç¨³å®šæ€§
  let large_num = 1000000
  assert_eq(2000000, add(large_num, large_num))
  assert_eq(1000000000000, multiply(large_num, large_num))
}

test "complex_business_workflow" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµç¨‹
  let product_price = 250
  let quantity = 12
  let tax_rate = 8
  let shipping_per_item = 15
  let discount_threshold = 3000
  let discount_amount = 150
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(product_price, quantity)
  
  // è®¡ç®—è¿è´¹
  let total_shipping = multiply(shipping_per_item, quantity)
  
  // è®¡ç®—ç¨Žè´¹
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  
  // è®¡ç®—æŠ˜æ‰£å‰æ€»ä»·
  let pre_discount_total = add(add(subtotal, total_shipping), tax_amount)
  
  // åº”ç”¨æŠ˜æ‰£ï¼ˆå¦‚æžœæ»¡è¶³æ¡ä»¶ï¼‰
  let final_total = if pre_discount_total > discount_threshold {
    add(pre_discount_total, -discount_amount)
  } else {
    pre_discount_total
  }
  
  assert_eq(3000, subtotal)
  assert_eq(180, total_shipping)
  assert_eq(240, tax_amount)
  assert_eq(3420, pre_discount_total)
  assert_eq(3270, final_total)
}