// æ–°å¢çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„å…¨é¢åŠŸèƒ½æµ‹è¯•

test "arithmetics_advanced_operations" {
  // é«˜çº§ç®—æœ¯è¿ç®—æµ‹è¯•
  let x = 15
  let y = 7
  
  // å¤åˆè¿ç®—
  let result1 = add(multiply(x, 2), divide_with_ceil(y, 3))
  assert_eq(32, result1)  // 15*2 + ceil(7/3) = 30 + 3 = 33
  
  // åµŒå¥—è¿ç®—
  let result2 = multiply(add(x, y), divide_with_ceil(x, y))
  assert_eq(44, result2)  // (15+7) * ceil(15/7) = 22 * 3 = 66
}

test "string_greeting_multilingual_support" {
  // å¤šè¯­è¨€é—®å€™æ”¯æŒæµ‹è¯•
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, Mundo!", greet("Mundo"))
  assert_eq_string("Hello, ĞœĞ¸Ñ€!", greet("ĞœĞ¸Ñ€"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
  assert_eq_string("Hello, JosÃ©!", greet("JosÃ©"))
}

test "divide_with_ceil_comprehensive_scenarios" {
  // å‘ä¸Šå–æ•´é™¤æ³•çš„å…¨é¢åœºæ™¯æµ‹è¯•
  // æ­£æ•°åœºæ™¯
  assert_eq(7, divide_with_ceil(40, 6))    // 40/6 = 6.666... -> 7
  assert_eq(10, divide_with_ceil(100, 10)) // 100/10 = 10 -> 10
  assert_eq(1, divide_with_ceil(3, 25))     // 3/25 = 0.12 -> 1
  
  // è´Ÿæ•°åœºæ™¯
  assert_eq(-6, divide_with_ceil(-35, 6))   // -35/6 = -5.833... -> -5
  assert_eq(-10, divide_with_ceil(-100, 10)) // -100/10 = -10 -> -10
  
  // æ··åˆç¬¦å·åœºæ™¯
  assert_eq(-5, divide_with_ceil(35, -6))   // 35/-6 = -5.833... -> -5
  assert_eq(7, divide_with_ceil(-35, -6))   // -35/-6 = 5.833... -> 6
}

test "business_inventory_calculation" {
  // åº“å­˜ä¸šåŠ¡è®¡ç®—æµ‹è¯•
  let product_a_qty = 45
  let product_b_qty = 32
  let product_c_qty = 18
  let box_capacity = 12
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_a = divide_with_ceil(product_a_qty, box_capacity)
  let boxes_b = divide_with_ceil(product_b_qty, box_capacity)
  let boxes_c = divide_with_ceil(product_c_qty, box_capacity)
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  
  assert_eq(4, boxes_a)   // ceil(45/12) = 4
  assert_eq(3, boxes_b)   // ceil(32/12) = 3
  assert_eq(2, boxes_c)   // ceil(18/12) = 2
  assert_eq(9, total_boxes) // 4 + 3 + 2 = 9
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—æµ‹è¯•
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼š1 + 3 + 5 + ... + 19 (å‰10ä¸ªå¥‡æ•°)
  let first_term = 1
  let common_diff = 2
  let num_terms = 10
  
  // ä½¿ç”¨æ±‚å’Œå…¬å¼ï¼šS = n/2 * (2a + (n-1)d)
  let sum = divide_with_ceil(
    multiply(num_terms, add(multiply(2, first_term), multiply(num_terms - 1, common_diff))),
    2
  )
  
  assert_eq(100, sum)  // 10/2 * (2 + 18) = 5 * 20 = 100
}

test "project_resource_allocation" {
  // é¡¹ç›®èµ„æºåˆ†é…æµ‹è¯•
  let total_budget = 5000
  let team_members = 8
  let project_duration_days = 15
  let daily_expenses = 75
  
  // è®¡ç®—äººå‘˜æˆæœ¬
  let personnel_cost = multiply(team_members, multiply(daily_expenses, project_duration_days))
  // è®¡ç®—å‰©ä½™é¢„ç®—
  let remaining_budget = add(total_budget, -personnel_cost)
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„é¢å¤–è®¾å¤‡æ•°é‡
  let equipment_cost = 250
  let equipment_count = divide_with_ceil(remaining_budget, equipment_cost)
  
  assert_eq(9000, personnel_cost)  // 8 * 75 * 15 = 9000
  assert_eq(-4000, remaining_budget)  // 5000 - 9000 = -4000
  assert_eq(0, equipment_count)  // ceil(-4000/250) = 0 (è´Ÿæ•°å¤„ç†)
}

test "edge_cases_boundary_values" {
  // è¾¹ç•Œå€¼å’Œæç«¯æƒ…å†µæµ‹è¯•
  // é›¶å€¼è¿ç®—
  assert_eq(0, add(0, 0))
  assert_eq(5, add(0, 5))
  assert_eq(0, multiply(0, 12345))
  assert_eq(0, divide_with_ceil(0, 100))
  
  // å•ä½è¿ç®—
  assert_eq(1, add(0, 1))
  assert_eq(1, multiply(1, 1))
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(100, divide_with_ceil(100, 1))
  
  // è´Ÿæ•°è¾¹ç•Œ
  assert_eq(0, add(5, -5))
  assert_eq(-1, multiply(1, -1))
  assert_eq(-1, divide_with_ceil(-1, 1))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—æµ‹è¯•
  let principal = 10000
  let interest_rate_percent = 8
  let tax_rate_percent = 20
  let years = 3
  
  // è®¡ç®—å¹´åˆ©æ¯
  let annual_interest = divide_with_ceil(multiply(principal, interest_rate_percent), 100)
  // è®¡ç®—ç¨ååˆ©æ¯
  let after_tax_interest = add(annual_interest, -divide_with_ceil(multiply(annual_interest, tax_rate_percent), 100))
  // è®¡ç®—ä¸‰å¹´åçš„æ€»é‡‘é¢
  let final_amount = add(principal, multiply(after_tax_interest, years))
  
  assert_eq(800, annual_interest)     // ceil(10000 * 8 / 100) = 800
  assert_eq(640, after_tax_interest)  // 800 - ceil(800 * 20 / 100) = 800 - 160 = 640
  assert_eq(11920, final_amount)      // 10000 + 640 * 3 = 10000 + 1920 = 11920
}

test "time_management_scheduling" {
  // æ—¶é—´ç®¡ç†è°ƒåº¦æµ‹è¯•
  let total_tasks = 67
  let tasks_per_day = 8
  let working_days_per_week = 5
  let meetings_per_day = 2
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œå¤©æ•°
  let days_needed = divide_with_ceil(total_tasks, tasks_per_day)
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(days_needed, working_days_per_week)
  // è®¡ç®—æ€»ä¼šè®®æ•°
  let total_meetings = multiply(days_needed, meetings_per_day)
  
  assert_eq(9, days_needed)    // ceil(67/8) = 9
  assert_eq(2, weeks_needed)   // ceil(9/5) = 2
  assert_eq(18, total_meetings) // 9 * 2 = 18
}

test "data_processing_batch_analysis" {
  // æ•°æ®å¤„ç†æ‰¹å¤„ç†åˆ†ææµ‹è¯•
  let data_records = 1250
  let batch_size = 100
  let processing_time_per_batch = 15  // åˆ†é’Ÿ
  let setup_time = 30  // åˆ†é’Ÿ
  
  // è®¡ç®—éœ€è¦çš„æ‰¹æ¬¡æ•°
  let batches_needed = divide_with_ceil(data_records, batch_size)
  // è®¡ç®—æ€»å¤„ç†æ—¶é—´
  let processing_time = multiply(batches_needed, processing_time_per_batch)
  // è®¡ç®—æ€»æ—¶é—´ï¼ˆåŒ…æ‹¬è®¾ç½®æ—¶é—´ï¼‰
  let total_time = add(processing_time, setup_time)
  
  assert_eq(13, batches_needed)    // ceil(1250/100) = 13
  assert_eq(195, processing_time)  // 13 * 15 = 195
  assert_eq(225, total_time)       // 195 + 30 = 225
}