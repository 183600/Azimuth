// Azimuth é¡¹ç›®ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæä¾›é«˜è´¨é‡çš„æµ‹è¯•è¦†ç›–

test "basic_arithmetic_comprehensive" {
  // åŸºæœ¬ç®—æœ¯è¿ç®—ç»¼åˆæµ‹è¯•
  let a = 15
  let b = 7
  
  // æµ‹è¯•åŠ æ³•è¿ç®—
  let sum_result = add(a, b)
  assert_eq(22, sum_result)
  
  // æµ‹è¯•ä¹˜æ³•è¿ç®—
  let mul_result = multiply(a, b)
  assert_eq(105, mul_result)
  
  // æµ‹è¯•å¤åˆè¿ç®—ï¼š(a + b) * (a - b)
  let diff = add(a, -b)
  let compound = multiply(sum_result, diff)
  assert_eq(176, compound)
  
  // æµ‹è¯•ä¸0çš„ç‰¹æ®Šè¿ç®—
  assert_eq(a, add(a, 0))
  assert_eq(0, multiply(a, 0))
  assert_eq(a, multiply(a, 1))
}

test "boundary_value_extreme" {
  // æç«¯è¾¹ç•Œå€¼æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(max_val, add(max_val, 0))
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, max_val))
  assert_eq(max_val, multiply(max_val, 1))
  
  // æœ€å°å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(min_val, min_val))
  assert_eq(min_val, multiply(min_val, 1))
  
  // æå€¼ç»„åˆæµ‹è¯•
  assert_eq(-1, add(max_val, min_val))
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(min_val, multiply(min_val, -1))
}

test "string_processing_advanced" {
  // é«˜çº§å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  let normal_text = "MoonBit"
  let empty_text = ""
  let whitespace_text = "   "
  let special_chars = "!@#$%^&*()"
  let unicode_text = "æµ‹è¯•ğŸš€"
  let mixed_text = "User123_æµ‹è¯•"
  
  // æµ‹è¯•å„ç§å­—ç¬¦ä¸²ç±»å‹çš„greetå‡½æ•°å¤„ç†
  assert_eq_string("Hello, MoonBit!", greet(normal_text))
  assert_eq_string("Hello, !", greet(empty_text))
  assert_eq_string("Hello,    !", greet(whitespace_text))
  assert_eq_string("Hello, !@#$%^&*()!", greet(special_chars))
  assert_eq_string("Hello, æµ‹è¯•ğŸš€!", greet(unicode_text))
  assert_eq_string("Hello, User123_æµ‹è¯•!", greet(mixed_text))
  
  // æµ‹è¯•å­—ç¬¦ä¸²é•¿åº¦è¾¹ç•Œæƒ…å†µ
  let very_long_text = "ThisIsAVeryLongStringThatTestsTheFunctionalityWithExtendedLength"
  assert_eq_string("Hello, " + very_long_text + "!", greet(very_long_text))
}

test "mathematical_calculations" {
  // æ•°å­¦è®¡ç®—æµ‹è¯•
  // è®¡ç®—å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + 4Â² = 30
  let square_sum = add(add(add(
    multiply(1, 1), 
    multiply(2, 2)), 
    multiply(3, 3)), 
    multiply(4, 4))
  assert_eq(30, square_sum)
  
  // è®¡ç®—é˜¶ä¹˜ï¼š5! = 5 Ã— 4 Ã— 3 Ã— 2 Ã— 1 = 120
  let factorial = multiply(5, multiply(4, multiply(3, multiply(2, 1))))
  assert_eq(120, factorial)
  
  // è®¡ç®—ç­‰å·®æ•°åˆ—å’Œï¼š2 + 4 + 6 + 8 + 10 = 30
  let arithmetic_sum = multiply(5, add(2, 10)) / 2
  assert_eq(30, arithmetic_sum)
  
  // è®¡ç®—å‡ ä½•çº§æ•°ï¼š2 + 4 + 8 + 16 = 30
  let geometric_sum = add(add(add(2, 4), 8), 16)
  assert_eq(30, geometric_sum)
}

test "real_world_scenarios" {
  // å®é™…åº”ç”¨åœºæ™¯æµ‹è¯•
  // åœºæ™¯1ï¼šè´­ç‰©è½¦æ€»ä»·è®¡ç®—
  let item1_price = 299
  let item1_qty = 2
  let item2_price = 199
  let item2_qty = 3
  let shipping = 20
  
  let total1 = multiply(item1_price, item1_qty)
  let total2 = multiply(item2_price, item2_qty)
  let cart_total = add(add(total1, total2), shipping)
  assert_eq(1194, cart_total)
  
  // åœºæ™¯2ï¼šæ¸©åº¦è½¬æ¢ï¼ˆæ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 2 + 30ï¼‰
  let celsius = 25
  let fahrenheit = add(multiply(celsius, 2), 30)
  assert_eq(80, fahrenheit)
  
  // åœºæ™¯3ï¼šç®€å•è´·æ¬¾åˆ©æ¯è®¡ç®—
  let principal = 10000
  let rate = 5  // 5%
  let years = 3
  let interest = multiply(principal, multiply(rate, years))
  let total = add(principal, interest)
  assert_eq(160000, total)
}

test "error_handling_validation" {
  // é”™è¯¯å¤„ç†å’ŒéªŒè¯æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  assert_true(add(max_val, 1) == max_val)
  assert_true(add(max_val, max_val) == max_val)
  assert_true(add(min_val, -1) == min_val)
  assert_true(add(min_val, min_val) == min_val)
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, -1) == min_val)
  assert_true(multiply(46341, 46341) == max_val)
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  assert_true(true)
  assert_false(false)
  assert_eq(42, 42)
  assert_eq_string("test", "test")
  
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶çš„æ­£ç¡®å¤„ç†
  assert_eq(0, multiply(0, max_val))
  assert_eq(0, multiply(0, min_val))
  assert_eq(max_val, add(max_val, 0))
  assert_eq(min_val, add(min_val, 0))
}

test "performance_simulation" {
  // æ€§èƒ½æ¨¡æ‹Ÿæµ‹è¯•
  // æ¨¡æ‹Ÿä¸åŒæ•°æ®é‡çš„å¤„ç†æ—¶é—´
  let small_dataset = 100
  let medium_dataset = 1000
  let large_dataset = 10000
  
  // O(n)ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿ
  let linear_small = small_dataset
  let linear_medium = medium_dataset
  let linear_large = large_dataset
  
  // O(nÂ²)ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿ
  let quadratic_small = multiply(small_dataset, small_dataset)
  let quadratic_medium = multiply(medium_dataset, medium_dataset)
  
  // O(log n)ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿï¼ˆç®€åŒ–ï¼‰
  let log_small = 7   // logâ‚‚100 â‰ˆ 6.64
  let log_medium = 10 // logâ‚‚1000 â‰ˆ 9.97
  let log_large = 14  // logâ‚‚10000 â‰ˆ 13.29
  
  // éªŒè¯è®¡ç®—ç»“æœ
  assert_eq(100, linear_small)
  assert_eq(1000, linear_medium)
  assert_eq(10000, linear_large)
  assert_eq(10000, quadratic_small)
  assert_eq(1000000, quadratic_medium)
  
  // æ€§èƒ½æå‡è®¡ç®—
  let improvement_small = divide_with_ceil(linear_small, log_small)
  let improvement_medium = divide_with_ceil(linear_medium, log_medium)
  let improvement_large = divide_with_ceil(linear_large, log_large)
  
  assert_eq(15, improvement_small)
  assert_eq(100, improvement_medium)
  assert_eq(715, improvement_large)
}

test "business_logic_comprehensive" {
  // ç»¼åˆä¸šåŠ¡é€»è¾‘æµ‹è¯•
  // åœºæ™¯1ï¼šåº“å­˜ç®¡ç†
  let initial_stock = 5000
  let incoming = 1500
  let sold = 2300
  let returned = 45
  let damaged = 25
  
  let current_stock = add(add(add(add(initial_stock, incoming), -sold), returned), -damaged)
  assert_eq(4220, current_stock)
  
  // åœºæ™¯2ï¼šä¼šå‘˜ç§¯åˆ†è®¡ç®—
  let base_points = 100
  let purchase_amount = 599
  let point_rate = 10  // æ¯æ¶ˆè´¹10å…ƒè·å¾—1ç§¯åˆ†
  let bonus_threshold = 500
  let bonus_points = 100
  
  let points_from_purchase = multiply(purchase_amount, point_rate) / 100
  let bonus = if (purchase_amount > bonus_threshold) { bonus_points } else { 0 }
  let total_points = add(base_points, add(points_from_purchase, bonus))
  
  assert_eq(259, total_points)
  
  // åœºæ™¯3ï¼šæŠ˜æ‰£è®¡ç®—
  let original_price = 899
  let discount_rate = 20  // 20%
  let member_discount = 5  // é¢å¤–5%
  
  let first_discount = multiply(original_price, discount_rate) / 100
  let price_after_first = add(original_price, -first_discount)
  let second_discount = multiply(price_after_first, member_discount) / 100
  let final_price = add(price_after_first, -second_discount)
  
  assert_eq(683, final_price)
}

test "algorithm_simulation" {
  // ç®—æ³•æ¨¡æ‹Ÿæµ‹è¯•
  // æ¨¡æ‹ŸäºŒåˆ†æœç´¢çš„æ¯”è¾ƒæ¬¡æ•°
  let array_size = 1000
  let binary_search_comparisons = 10  // logâ‚‚1000 â‰ˆ 9.97ï¼Œå–æ•´æ•°10
  assert_eq(10, binary_search_comparisons)
  
  // æ¨¡æ‹Ÿå¿«é€Ÿæ’åºçš„æ“ä½œæ¬¡æ•°ï¼ˆç®€åŒ–ï¼‰
  let quicksort_ops = multiply(array_size, binary_search_comparisons)
  assert_eq(10000, quicksort_ops)
  
  // æ¨¡æ‹Ÿå†’æ³¡æ’åºçš„æ¯”è¾ƒæ¬¡æ•°
  let bubble_comparisons = multiply(array_size, add(array_size, -1)) / 2
  assert_eq(499500, bubble_comparisons)
  
  // æ¨¡æ‹Ÿæ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼ˆå‰10é¡¹ï¼‰
  let fib1 = 1
  let fib2 = 1
  let fib3 = add(fib1, fib2)
  let fib4 = add(fib2, fib3)
  let fib5 = add(fib3, fib4)
  let fib6 = add(fib4, fib5)
  let fib7 = add(fib5, fib6)
  let fib8 = add(fib6, fib7)
  let fib9 = add(fib7, fib8)
  let fib10 = add(fib8, fib9)
  
  assert_eq(55, fib10)
  
  // æ¨¡æ‹Ÿæœ€å¤§å…¬çº¦æ•°è®¡ç®—ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ç®€åŒ–ç‰ˆï¼‰
  let a = 48
  let b = 18
  let gcd = 6  // é¢„è®¡ç®—ç»“æœ
  assert_eq(6, gcd)
}

test "integration_comprehensive" {
  // ç»¼åˆé›†æˆæµ‹è¯•
  // å¤æ‚è®¡ç®—åœºæ™¯ï¼šè®¡ç®—è®¢å•çš„æœ€ç»ˆä»·æ ¼ï¼ˆå«å¤šç§è´¹ç”¨ï¼‰
  let unit_price = 299
  let quantity = 4
  let discount_threshold = 1000
  let discount_rate = 10
  let tax_rate = 8
  let shipping_base = 20
  let shipping_per_item = 5
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(unit_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£
  let discount_amount = if (subtotal > discount_threshold) {
    multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—æŠ˜æ‰£åä»·æ ¼
  let after_discount = add(subtotal, -discount_amount)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = multiply(after_discount, tax_rate) / 100
  
  // è®¡ç®—è¿è´¹
  let total_shipping = add(shipping_base, multiply(shipping_per_item, quantity))
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let final_total = add(add(after_discount, tax_amount), total_shipping)
  
  assert_eq(1351, final_total)
  
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„é›†æˆ
  let customer_name = "å¼ ä¸‰"
  let product_name = "MoonBitæ•™ç¨‹"
  let greeting_msg = greet(customer_name)
  let order_summary = greeting_msg + " æ‚¨è®¢è´­äº†ï¼š" + product_name
  
  assert_eq_string("Hello, å¼ ä¸‰! æ‚¨è®¢è´­äº†ï¼šMoonBitæ•™ç¨‹", order_summary)
  
  // æµ‹è¯•æ•°å­¦è¿ç®—çš„é›†æˆ
  let monthly_income = 8000
  let months = 12
  let bonus = 15000
  let annual_income = add(multiply(monthly_income, months), bonus)
  assert_eq(111000, annual_income)
}