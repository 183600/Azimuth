// æ–­è¨€ç›¸ç­‰å‡½æ•°ï¼Œç”¨äºæµ‹è¯•
pub fn assert_eq(expected : Int, actual : Int) -> Unit {
  let _ = expected == actual
}

pub fn assert_eq_string(expected : String, actual : String) -> Unit {
  let _ = expected == actual
}

// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹

// æµ‹è¯•åŠ æ³•çš„ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
///|
test "addition_associative_law" {
  assert_eq(@clean_test.@clean_test.add(@clean_test.@clean_test.add(10, 20), 30), @clean_test.@clean_test.add(10, @clean_test.@clean_test.add(20, 30)))
  assert_eq(@clean_test.@clean_test.add(@clean_test.@clean_test.add(-5, 15), 10), @clean_test.@clean_test.add(-5, @clean_test.@clean_test.add(15, 10)))
  assert_eq(@clean_test.@clean_test.add(@clean_test.@clean_test.add(0, 100), 50), @clean_test.@clean_test.add(0, @clean_test.@clean_test.add(100, 50)))
}

// æµ‹è¯•ä¹˜æ³•çš„äº¤æ¢å¾‹ï¼ša * b = b * a
///|
test "multiplication_commutative_law" {
  assert_eq(@clean_test.@clean_test.multiply(15, 25), @clean_test.@clean_test.multiply(25, 15))
  assert_eq(@clean_test.@clean_test.multiply(-8, 12), @clean_test.@clean_test.multiply(12, -8))
  assert_eq(@clean_test.@clean_test.multiply(-7, -9), @clean_test.@clean_test.multiply(-9, -7))
  assert_eq(@clean_test.@clean_test.multiply(0, 123), @clean_test.@clean_test.multiply(123, 0))
}

// æµ‹è¯•å­—ç¬¦ä¸²æ‹¼æ¥çš„è¾¹ç•Œæƒ…å†µ
///|
test "string_concatenation_edge_cases" {
  assert_eq_string("Hello, !", @clean_test.@clean_test.greet(""))
  assert_eq_string("Hello, A!", @clean_test.@clean_test.greet("A"))
  assert_eq_string("Hello, 1234567890!", @clean_test.@clean_test.greet("1234567890"))
  assert_eq_string("Hello,   !", @clean_test.@clean_test.greet("  "))
}

// æµ‹è¯•å¤§æ•°è¿ç®—çš„è¾¹ç•Œæƒ…å†µ
///|
test "large_number_boundary_operations" {
  // æµ‹è¯•æ¥è¿‘æœ€å¤§å€¼çš„åŠ æ³•
  assert_eq(2147483647, @clean_test.@clean_test.add(2147483640, 7))
  assert_eq(2147483647, @clean_test.@clean_test.add(2147483630, 17))
  
  // æµ‹è¯•æ¥è¿‘æœ€å°å€¼çš„åŠ æ³•
  assert_eq(-2147483648, @clean_test.@clean_test.add(-2147483640, -8))
  assert_eq(-2147483648, @clean_test.@clean_test.add(-2147483630, -18))
}

// æµ‹è¯•è´Ÿæ•°ä¹˜æ³•çš„ç‰¹æ®Šæƒ…å†µ
///|
test "negative_multiplication_special_cases" {
  // æµ‹è¯•è´Ÿæ•°ç›¸ä¹˜å¾—åˆ°æ­£æ•°
  assert_eq(144, @clean_test.@clean_test.multiply(-12, -12))
  assert_eq(81, @clean_test.@clean_test.multiply(-9, -9))
  
  // æµ‹è¯•è´Ÿæ•°ä¹˜ä»¥æ­£æ•°å¾—åˆ°è´Ÿæ•°
  assert_eq(-36, @clean_test.@clean_test.multiply(-6, 6))
  assert_eq(-49, @clean_test.@clean_test.multiply(7, -7))
}

// æµ‹è¯•é›¶å€¼è¿ç®—çš„å„ç§æƒ…å†µ
///|
test "zero_value_operations" {
  // åŠ æ³•ä¸­çš„é›¶å€¼
  assert_eq(123, @clean_test.@clean_test.add(123, 0))
  assert_eq(-456, @clean_test.@clean_test.add(0, -456))
  assert_eq(0, @clean_test.@clean_test.add(0, 0))
  
  // ä¹˜æ³•ä¸­çš„é›¶å€¼
  assert_eq(0, @clean_test.@clean_test.multiply(123, 0))
  assert_eq(0, @clean_test.@clean_test.multiply(0, -456))
  assert_eq(0, @clean_test.@clean_test.multiply(0, 0))
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—æŠ˜æ‰£ä»·æ ¼
///|
test "discount_price_calculation" {
  // åŸä»·
  let original_price = 1000
  // æŠ˜æ‰£ç‡ 20%
  let discount_rate = 20
  // æŠ˜æ‰£é‡‘é¢ = åŸä»· * æŠ˜æ‰£ç‡ / 100
  let discount_amount = @clean_test.@clean_test.multiply(original_price, discount_rate)
  // æœ€ç»ˆä»·æ ¼ = åŸä»· - æŠ˜æ‰£é‡‘é¢
  let final_price = @clean_test.@clean_test.add(original_price, @clean_test.@clean_test.multiply(-1, discount_amount))
  
  // éªŒè¯ï¼š1000 - (1000 * 20 / 100) = 800
  assert_eq(80000, @clean_test.@clean_test.multiply(100, final_price))  // 800 * 100 = 80000
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—å¹³å‡åˆ†
///|
test "average_score_calculation" {
  // äº”é—¨è¯¾ç¨‹çš„æˆç»©
  let score1 = 85
  let score2 = 90
  let score3 = 78
  let score4 = 92
  let score5 = 88
  
  // è®¡ç®—æ€»åˆ†
  let total_score = @clean_test.@clean_test.add(
    @clean_test.@clean_test.add(
      @clean_test.@clean_test.add(score1, score2),
      @clean_test.@clean_test.add(score3, score4)
    ),
    score5
  )
  
  // å¹³å‡åˆ† * 5 = æ€»åˆ†
  let average_times_5 = total_score
  
  // éªŒè¯ï¼š85 + 90 + 78 + 92 + 88 = 433
  assert_eq(433, average_times_5)
}

// æµ‹è¯•æ•°å­¦æ€§è´¨ï¼šåˆ†é…å¾‹ a * (b + c) = a * b + a * c
///|
test "multiplication_distributive_law" {
  let a = 5
  let b = 10
  let c = 15
  
  // a * (b + c)
  let left_side = @clean_test.@clean_test.multiply(a, @clean_test.@clean_test.add(b, c))
  
  // a * b + a * c
  let right_side = @clean_test.@clean_test.add(@clean_test.@clean_test.multiply(a, b), @clean_test.@clean_test.multiply(a, c))
  
  assert_eq(left_side, right_side)
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let x = -3
  let y = 7
  let z = -2
  
  let left_side_neg = @clean_test.@clean_test.multiply(x, @clean_test.@clean_test.add(y, z))
  let right_side_neg = @clean_test.@clean_test.add(@clean_test.@clean_test.multiply(x, y), @clean_test.@clean_test.multiply(x, z))
  
  assert_eq(left_side_neg, right_side_neg)
}

// æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†ï¼šåŒ…å«ç‰¹æ®Šå­—ç¬¦
///|
test "string_special_character_handling" {
  assert_eq_string("Hello, MoonBit!", @clean_test.@clean_test.greet("MoonBit"))
  assert_eq_string("Hello, ä¸­æ–‡!", @clean_test.@clean_test.greet("ä¸­æ–‡"))
  assert_eq_string("Hello, ğŸš€!", @clean_test.@clean_test.greet("ğŸš€"))
  assert_eq_string("Hello, C++!", @clean_test.@clean_test.greet("C++"))
  assert_eq_string("Hello, @#$%!", @clean_test.@clean_test.greet("@#$%"))
}