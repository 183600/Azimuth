// æ—¥å¿—ä¸¥é‡çº§åˆ«ç»¼åˆæµ‹è¯•
// æµ‹è¯•Azimuthé¥æµ‹ç³»ç»Ÿä¸­æ—¥å¿—è®°å½•çš„å„ç§ä¸¥é‡çº§åˆ«å’Œåœºæ™¯

// æµ‹è¯•1: åŸºæœ¬æ—¥å¿—ä¸¥é‡çº§åˆ«æµ‹è¯•
pub test "åŸºæœ¬æ—¥å¿—ä¸¥é‡çº§åˆ«æµ‹è¯•" {
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "severity-test-logger")
  
  // åˆ›å»ºä¸åŒä¸¥é‡çº§åˆ«çš„æ—¥å¿—è®°å½•
  let trace_log = azimuth::LogRecord::new(azimuth::Trace, "Trace level message")
  let debug_log = azimuth::LogRecord::new(azimuth::Debug, "Debug level message")
  let info_log = azimuth::LogRecord::new(azimuth::Info, "Info level message")
  let warn_log = azimuth::LogRecord::new(azimuth::Warn, "Warning level message")
  let error_log = azimuth::LogRecord::new(azimuth::Error, "Error level message")
  let fatal_log = azimuth::LogRecord::new(azimuth::Fatal, "Fatal level message")
  
  // éªŒè¯ä¸¥é‡çº§åˆ«
  assert_eq(azimuth::LogRecord::severity_number(trace_log), azimuth::Trace)
  assert_eq(azimuth::LogRecord::severity_number(debug_log), azimuth::Debug)
  assert_eq(azimuth::LogRecord::severity_number(info_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(warn_log), azimuth::Warn)
  assert_eq(azimuth::LogRecord::severity_number(error_log), azimuth::Error)
  assert_eq(azimuth::LogRecord::severity_number(fatal_log), azimuth::Fatal)
  
  // éªŒè¯æ—¥å¿—æ¶ˆæ¯
  assert_eq(azimuth::LogRecord::body(trace_log), Some("Trace level message"))
  assert_eq(azimuth::LogRecord::body(debug_log), Some("Debug level message"))
  assert_eq(azimuth::LogRecord::body(info_log), Some("Info level message"))
  assert_eq(azimuth::LogRecord::body(warn_log), Some("Warning level message"))
  assert_eq(azimuth::LogRecord::body(error_log), Some("Error level message"))
  assert_eq(azimuth::LogRecord::body(fatal_log), Some("Fatal level message"))
  
  // å‘é€æ‰€æœ‰çº§åˆ«çš„æ—¥å¿—
  azimuth::Logger::emit(logger, trace_log)
  azimuth::Logger::emit(logger, debug_log)
  azimuth::Logger::emit(logger, info_log)
  azimuth::Logger::emit(logger, warn_log)
  azimuth::Logger::emit(logger, error_log)
  azimuth::Logger::emit(logger, fatal_log)
}

// æµ‹è¯•2: æ—¥å¿—ä¸¥é‡çº§åˆ«å±‚æ¬¡ç»“æ„æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«å±‚æ¬¡ç»“æ„æµ‹è¯•" {
  // éªŒè¯ä¸¥é‡çº§åˆ«çš„æ•°å€¼å±‚æ¬¡ç»“æ„
  // åœ¨OpenTelemetryä¸­ï¼Œä¸¥é‡çº§åˆ«æ•°å€¼è¶Šå°è¡¨ç¤ºä¸¥é‡ç¨‹åº¦è¶Šé«˜
  assert_true(azimuth::Trace.to_int() > azimuth::Debug.to_int())
  assert_true(azimuth::Debug.to_int() > azimuth::Info.to_int())
  assert_true(azimuth::Info.to_int() > azimuth::Warn.to_int())
  assert_true(azimuth::Warn.to_int() > azimuth::Error.to_int())
  assert_true(azimuth::Error.to_int() > azimuth::Fatal.to_int())
  
  // æµ‹è¯•ä¸¥é‡çº§åˆ«æ¯”è¾ƒ
  assert_true(azimuth::Trace.to_int() >= azimuth::Debug.to_int())
  assert_true(azimuth::Debug.to_int() >= azimuth::Info.to_int())
  assert_true(azimuth::Info.to_int() >= azimuth::Warn.to_int())
  assert_true(azimuth::Warn.to_int() >= azimuth::Error.to_int())
  assert_true(azimuth::Error.to_int() >= azimuth::Fatal.to_int())
  
  // åˆ›å»ºä¸¥é‡çº§åˆ«é€’å¢çš„æ—¥å¿—åºåˆ—
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "hierarchy-logger")
  let logs = []
  
  logs.push(azimuth::LogRecord::new(azimuth::Fatal, "Fatal - Highest severity"))
  logs.push(azimuth::LogRecord::new(azimuth::Error, "Error - High severity"))
  logs.push(azimuth::LogRecord::new(azimuth::Warn, "Warning - Medium-high severity"))
  logs.push(azimuth::LogRecord::new(azimuth::Info, "Info - Medium severity"))
  logs.push(azimuth::LogRecord::new(azimuth::Debug, "Debug - Low severity"))
  logs.push(azimuth::LogRecord::new(azimuth::Trace, "Trace - Lowest severity"))
  
  // éªŒè¯ä¸¥é‡çº§åˆ«é€’å¢é¡ºåº
  for i in 1..logs.length() {
    let prev_severity = azimuth::LogRecord::severity_number(logs[i-1])
    let curr_severity = azimuth::LogRecord::severity_number(logs[i])
    
    assert_true(prev_severity.to_int() <= curr_severity.to_int())
  }
  
  // å‘é€æ‰€æœ‰æ—¥å¿—
  for log in logs {
    azimuth::Logger::emit(logger, log)
  }
}

// æµ‹è¯•3: å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—ä¸¥é‡çº§åˆ«æµ‹è¯•
pub test "å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—ä¸¥é‡çº§åˆ«æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "context-severity-logger")
  
  // åˆ›å»ºå¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—è®°å½•
  let trace_log = azimuth::LogRecord::new_with_context(
    azimuth::Trace,
    Some("Trace with context"),
    Some(azimuth::Attributes::new()),
    Some(1735689600000000000L),
    Some(1735689600000000001L),
    Some("trace-12345"),
    Some("span-67890"),
    Some(azimuth::Context::root())
  )
  
  let error_log = azimuth::LogRecord::new_with_context(
    azimuth::Error,
    Some("Error with context"),
    Some(azimuth::Attributes::new()),
    Some(1735689600000000002L),
    Some(1735689600000000003L),
    Some("trace-12345"),
    Some("span-67890"),
    Some(azimuth::Context::root())
  )
  
  // éªŒè¯å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—ä¸¥é‡çº§åˆ«
  assert_eq(azimuth::LogRecord::severity_number(trace_log), azimuth::Trace)
  assert_eq(azimuth::LogRecord::severity_number(error_log), azimuth::Error)
  
  // éªŒè¯å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—å±æ€§
  assert_eq(azimuth::LogRecord::body(trace_log), Some("Trace with context"))
  assert_eq(azimuth::LogRecord::body(error_log), Some("Error with context"))
  
  assert_eq(azimuth::LogRecord::trace_id(trace_log), Some("trace-12345"))
  assert_eq(azimuth::LogRecord::span_id(trace_log), Some("span-67890"))
  assert_eq(azimuth::LogRecord::trace_id(error_log), Some("trace-12345"))
  assert_eq(azimuth::LogRecord::span_id(error_log), Some("span-67890"))
  
  assert_eq(azimuth::LogRecord::timestamp(trace_log), Some(1735689600000000000L))
  assert_eq(azimuth::LogRecord::timestamp(error_log), Some(1735689600000000002L))
  
  // å‘é€å¸¦ä¸Šä¸‹æ–‡çš„æ—¥å¿—
  azimuth::Logger::emit(logger, trace_log)
  azimuth::Logger::emit(logger, error_log)
}

// æµ‹è¯•4: ä¸åŒä¸¥é‡çº§åˆ«çš„æ—¥å¿—å±æ€§æµ‹è¯•
pub test "ä¸åŒä¸¥é‡çº§åˆ«çš„æ—¥å¿—å±æ€§æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "attributes-logger")
  
  // åˆ›å»ºå¸¦å±æ€§çš„æ—¥å¿—è®°å½•
  let info_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(info_attrs, "user.id", azimuth::StringValue("12345"))
  azimuth::Attributes::set(info_attrs, "operation", azimuth::StringValue("login"))
  
  let info_log = azimuth::LogRecord::new_with_context(
    azimuth::Info,
    Some("User login successful"),
    Some(info_attrs),
    Some(1735689600000000000L),
    None,
    None,
    None,
    None
  )
  
  let error_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(error_attrs, "error.code", azimuth::StringValue("E500"))
  azimuth::Attributes::set(error_attrs, "error.message", azimuth::StringValue("Database connection failed"))
  azimuth::Attributes::set(error_attrs, "retry.count", azimuth::IntValue(3))
  
  let error_log = azimuth::LogRecord::new_with_context(
    azimuth::Error,
    Some("Service error occurred"),
    Some(error_attrs),
    Some(1735689600000000001L),
    None,
    None,
    None,
    None
  )
  
  // éªŒè¯å¸¦å±æ€§çš„æ—¥å¿—ä¸¥é‡çº§åˆ«
  assert_eq(azimuth::LogRecord::severity_number(info_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(error_log), azimuth::Error)
  
  // éªŒè¯å¸¦å±æ€§çš„æ—¥å¿—å†…å®¹
  assert_eq(azimuth::LogRecord::body(info_log), Some("User login successful"))
  assert_eq(azimuth::LogRecord::body(error_log), Some("Service error occurred"))
  
  // å‘é€å¸¦å±æ€§çš„æ—¥å¿—
  azimuth::Logger::emit(logger, info_log)
  azimuth::Logger::emit(logger, error_log)
}

// æµ‹è¯•5: æ—¥å¿—ä¸¥é‡çº§åˆ«è¿‡æ»¤æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«è¿‡æ»¤æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "filter-logger")
  
  // åˆ›å»ºä¸åŒä¸¥é‡çº§åˆ«çš„æ—¥å¿—
  let logs = []
  
  logs.push(azimuth::LogRecord::new(azimuth::Trace, "Trace message"))
  logs.push(azimuth::LogRecord::new(azimuth::Debug, "Debug message"))
  logs.push(azimuth::LogRecord::new(azimuth::Info, "Info message"))
  logs.push(azimuth::LogRecord::new(azimuth::Warn, "Warning message"))
  logs.push(azimuth::LogRecord::new(azimuth::Error, "Error message"))
  logs.push(azimuth::LogRecord::new(azimuth::Fatal, "Fatal message"))
  
  // æ¨¡æ‹Ÿä¸¥é‡çº§åˆ«è¿‡æ»¤é€»è¾‘
  // åœ¨å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œä¼šæ ¹æ®é…ç½®çš„æœ€ä½ä¸¥é‡çº§åˆ«è¿‡æ»¤æ—¥å¿—
  
  // è¿‡æ»¤å‡ºERRORåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—
  let error_and_above = []
  for log in logs {
    let severity = azimuth::LogRecord::severity_number(log)
    if severity.to_int() <= azimuth::Error.to_int() {
      error_and_above.push(log)
    }
  }
  
  // éªŒè¯è¿‡æ»¤ç»“æœ
  assert_true(error_and_above.length() == 2)  // Errorå’ŒFatal
  
  for log in error_and_above {
    let severity = azimuth::LogRecord::severity_number(log)
    assert_true(severity.to_int() <= azimuth::Error.to_int())
  }
  
  // è¿‡æ»¤å‡ºWARNåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—
  let warn_and_above = []
  for log in logs {
    let severity = azimuth::LogRecord::severity_number(log)
    if severity.to_int() <= azimuth::Warn.to_int() {
      warn_and_above.push(log)
    }
  }
  
  // éªŒè¯è¿‡æ»¤ç»“æœ
  assert_true(warn_and_above.length() == 3)  // Warnã€Errorå’ŒFatal
  
  for log in warn_and_above {
    let severity = azimuth::LogRecord::severity_number(log)
    assert_true(severity.to_int() <= azimuth::Warn.to_int())
  }
  
  // å‘é€æ‰€æœ‰æ—¥å¿—ï¼ˆåœ¨å®é™…å®ç°ä¸­ï¼Œè¿‡æ»¤ä¼šåœ¨Loggerå±‚é¢è¿›è¡Œï¼‰
  for log in logs {
    azimuth::Logger::emit(logger, log)
  }
}

// æµ‹è¯•6: æ—¥å¿—ä¸¥é‡çº§åˆ«æ€§èƒ½æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«æ€§èƒ½æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "performance-logger")
  
  let start_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // åˆ›å»ºå¤§é‡ä¸åŒä¸¥é‡çº§åˆ«çš„æ—¥å¿—
  let logs = []
  for i in 0..1000 {
    let severity = match i % 6 {
      0 => azimuth::Trace,
      1 => azimuth::Debug,
      2 => azimuth::Info,
      3 => azimuth::Warn,
      4 => azimuth::Error,
      _ => azimuth::Fatal
    }
    
    let log = azimuth::LogRecord::new(severity, "Performance test log " + i.to_string())
    logs.push(log)
  }
  
  let creation_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // å‘é€æ‰€æœ‰æ—¥å¿—
  for log in logs {
    azimuth::Logger::emit(logger, log)
  }
  
  let emit_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // è®¡ç®—æ€§èƒ½æŒ‡æ ‡
  let creation_duration = creation_time - start_time
  let emit_duration = emit_time - creation_time
  let total_duration = emit_time - start_time
  
  // éªŒè¯æ€§èƒ½åœ¨åˆç†èŒƒå›´å†…
  assert_true(creation_duration < 3000000000L)  // åˆ›å»º1000ä¸ªæ—¥å¿—åº”åœ¨3ç§’å†…å®Œæˆ
  assert_true(emit_duration < 5000000000L)     // å‘é€1000ä¸ªæ—¥å¿—åº”åœ¨5ç§’å†…å®Œæˆ
  assert_true(total_duration < 8000000000L)    // æ€»æ“ä½œåº”åœ¨8ç§’å†…å®Œæˆ
  
  // è®¡ç®—å¹³å‡æ“ä½œæ—¶é—´
  let avg_creation_time = creation_duration.to_int() / 1000
  let avg_emit_time = emit_duration.to_int() / 1000
  
  // éªŒè¯å¹³å‡æ“ä½œæ—¶é—´åœ¨åˆç†èŒƒå›´å†…ï¼ˆçº³ç§’ï¼‰
  assert_true(avg_creation_time < 3000000)  // æ¯ä¸ªæ—¥å¿—åˆ›å»ºæ—¶é—´å°äº3æ¯«ç§’
  assert_true(avg_emit_time < 5000000)     // æ¯ä¸ªæ—¥å¿—å‘é€æ—¶é—´å°äº5æ¯«ç§’
  
  // éªŒè¯æ—¥å¿—æ•°é‡
  assert_true(logs.length() == 1000)
  
  // éªŒè¯æ—¥å¿—ä¸¥é‡çº§åˆ«åˆ†å¸ƒ
  let mut trace_count = 0
  let mut debug_count = 0
  let mut info_count = 0
  let mut warn_count = 0
  let mut error_count = 0
  let mut fatal_count = 0
  
  for log in logs {
    let severity = azimuth::LogRecord::severity_number(log)
    match severity {
      azimuth::Trace => trace_count = trace_count + 1,
      azimuth::Debug => debug_count = debug_count + 1,
      azimuth::Info => info_count = info_count + 1,
      azimuth::Warn => warn_count = warn_count + 1,
      azimuth::Error => error_count = error_count + 1,
      azimuth::Fatal => fatal_count = fatal_count + 1
    }
  }
  
  // éªŒè¯ä¸¥é‡çº§åˆ«åˆ†å¸ƒï¼ˆæ¯ç§çº§åˆ«åº”è¯¥å¤§çº¦167ä¸ªï¼‰
  assert_true(trace_count >= 160 && trace_count <= 170)
  assert_true(debug_count >= 160 && debug_count <= 170)
  assert_true(info_count >= 160 && info_count <= 170)
  assert_true(warn_count >= 160 && warn_count <= 170)
  assert_true(error_count >= 160 && error_count <= 170)
  assert_true(fatal_count >= 160 && fatal_count <= 170)
}

// æµ‹è¯•7: æ—¥å¿—ä¸¥é‡çº§åˆ«ä¸Spanå…³è”æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«ä¸Spanå…³è”æµ‹è¯•" {
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "span-log-tracer")
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "span-logger")
  
  // åˆ›å»ºSpan
  let span = azimuth::Tracer::start_span(tracer, "operation-with-logs")
  let span_ctx = azimuth::Span::span_context(span)
  
  // åˆ›å»ºä¸Spanå…³è”çš„æ—¥å¿—
  let trace_id = azimuth::SpanContext::trace_id(span_ctx)
  let span_id = azimuth::SpanContext::span_id(span_ctx)
  
  let info_log = azimuth::LogRecord::new_with_context(
    azimuth::Info,
    Some("Operation started"),
    Some(azimuth::Attributes::new()),
    Some(1735689600000000000L),
    None,
    Some(trace_id),
    Some(span_id),
    Some(azimuth::Context::root())
  )
  
  let warn_log = azimuth::LogRecord::new_with_context(
    azimuth::Warn,
    Some("Operation taking longer than expected"),
    Some(azimuth::Attributes::new()),
    Some(1735689600000000001L),
    None,
    Some(trace_id),
    Some(span_id),
    Some(azimuth::Context::root())
  )
  
  let error_log = azimuth::LogRecord::new_with_context(
    azimuth::Error,
    Some("Operation failed"),
    Some(azimuth::Attributes::new()),
    Some(1735689600000000002L),
    None,
    Some(trace_id),
    Some(span_id),
    Some(azimuth::Context::root())
  )
  
  // éªŒè¯æ—¥å¿—ä¸Spançš„å…³è”
  assert_eq(azimuth::LogRecord::trace_id(info_log), Some(trace_id))
  assert_eq(azimuth::LogRecord::span_id(info_log), Some(span_id))
  assert_eq(azimuth::LogRecord::trace_id(warn_log), Some(trace_id))
  assert_eq(azimuth::LogRecord::span_id(warn_log), Some(span_id))
  assert_eq(azimuth::LogRecord::trace_id(error_log), Some(trace_id))
  assert_eq(azimuth::LogRecord::span_id(error_log), Some(span_id))
  
  // éªŒè¯æ—¥å¿—ä¸¥é‡çº§åˆ«
  assert_eq(azimuth::LogRecord::severity_number(info_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(warn_log), azimuth::Warn)
  assert_eq(azimuth::LogRecord::severity_number(error_log), azimuth::Error)
  
  // éªŒè¯æ—¥å¿—æ—¶é—´é¡ºåº
  assert_true(azimuth::LogRecord::timestamp(info_log) < azimuth::LogRecord::timestamp(warn_log))
  assert_true(azimuth::LogRecord::timestamp(warn_log) < azimuth::LogRecord::timestamp(error_log))
  
  // å‘é€ä¸Spanå…³è”çš„æ—¥å¿—
  azimuth::Logger::emit(logger, info_log)
  azimuth::Logger::emit(logger, warn_log)
  azimuth::Logger::emit(logger, error_log)
  
  // ç»“æŸSpan
  azimuth::Span::end(span)
}

// æµ‹è¯•8: æ—¥å¿—ä¸¥é‡çº§åˆ«å›½é™…åŒ–æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«å›½é™…åŒ–æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "i18n-logger")
  
  // åˆ›å»ºä¸åŒè¯­è¨€çš„æ—¥å¿—æ¶ˆæ¯
  let english_logs = [
    azimuth::LogRecord::new(azimuth::Info, "Information message in English"),
    azimuth::LogRecord::new(azimuth::Warn, "Warning message in English"),
    azimuth::LogRecord::new(azimuth::Error, "Error message in English")
  ]
  
  let chinese_logs = [
    azimuth::LogRecord::new(azimuth::Info, "ä¸­æ–‡ä¿¡æ¯æ¶ˆæ¯"),
    azimuth::LogRecord::new(azimuth::Warn, "ä¸­æ–‡è­¦å‘Šæ¶ˆæ¯"),
    azimuth::LogRecord::new(azimuth::Error, "ä¸­æ–‡é”™è¯¯æ¶ˆæ¯")
  ]
  
  let japanese_logs = [
    azimuth::LogRecord::new(azimuth::Info, "æ—¥æœ¬èªæƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"),
    azimuth::LogRecord::new(azimuth::Warn, "æ—¥æœ¬èªè­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"),
    azimuth::LogRecord::new(azimuth::Error, "æ—¥æœ¬èªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸")
  ]
  
  // éªŒè¯ä¸åŒè¯­è¨€çš„æ—¥å¿—ä¸¥é‡çº§åˆ«
  for log in english_logs {
    let severity = azimuth::LogRecord::severity_number(log)
    assert_true(severity == azimuth::Info || severity == azimuth::Warn || severity == azimuth::Error)
  }
  
  for log in chinese_logs {
    let severity = azimuth::LogRecord::severity_number(log)
    assert_true(severity == azimuth::Info || severity == azimuth::Warn || severity == azimuth::Error)
  }
  
  for log in japanese_logs {
    let severity = azimuth::LogRecord::severity_number(log)
    assert_true(severity == azimuth::Info || severity == azimuth::Warn || severity == azimuth::Error)
  }
  
  // éªŒè¯ä¸åŒè¯­è¨€çš„æ—¥å¿—æ¶ˆæ¯
  assert_eq(azimuth::LogRecord::body(english_logs[0]), Some("Information message in English"))
  assert_eq(azimuth::LogRecord::body(chinese_logs[0]), Some("ä¸­æ–‡ä¿¡æ¯æ¶ˆæ¯"))
  assert_eq(azimuth::LogRecord::body(japanese_logs[0]), Some("æ—¥æœ¬èªæƒ…å ±ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"))
  
  // å‘é€ä¸åŒè¯­è¨€çš„æ—¥å¿—
  for log in english_logs {
    azimuth::Logger::emit(logger, log)
  }
  
  for log in chinese_logs {
    azimuth::Logger::emit(logger, log)
  }
  
  for log in japanese_logs {
    azimuth::Logger::emit(logger, log)
  }
}

// æµ‹è¯•9: æ—¥å¿—ä¸¥é‡çº§åˆ«ç‰¹æ®Šåœºæ™¯æµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«ç‰¹æ®Šåœºæ™¯æµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "special-scenario-logger")
  
  // æµ‹è¯•ç©ºæ¶ˆæ¯æ—¥å¿—
  let empty_info_log = azimuth::LogRecord::new(azimuth::Info, "")
  let empty_error_log = azimuth::LogRecord::new(azimuth::Error, "")
  
  assert_eq(azimuth::LogRecord::severity_number(empty_info_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(empty_error_log), azimuth::Error)
  assert_eq(azimuth::LogRecord::body(empty_info_log), Some(""))
  assert_eq(azimuth::LogRecord::body(empty_error_log), Some(""))
  
  // æµ‹è¯•æé•¿æ¶ˆæ¯æ—¥å¿—
  let long_message = "a".repeat(10000)
  let long_warn_log = azimuth::LogRecord::new(azimuth::Warn, long_message)
  
  assert_eq(azimuth::LogRecord::severity_number(long_warn_log), azimuth::Warn)
  assert_eq(azimuth::LogRecord::body(long_warn_log), Some(long_message))
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦æ¶ˆæ¯æ—¥å¿—
  let special_chars_message = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  let special_debug_log = azimuth::LogRecord::new(azimuth::Debug, special_chars_message)
  
  assert_eq(azimuth::LogRecord::severity_number(special_debug_log), azimuth::Debug)
  assert_eq(azimuth::LogRecord::body(special_debug_log), Some(special_chars_message))
  
  // æµ‹è¯•Unicodeæ¶ˆæ¯æ—¥å¿—
  let unicode_message = "æµ‹è¯•ä¸­æ–‡ğŸš€æ—¥å¿—æ¶ˆæ¯"
  let unicode_fatal_log = azimuth::LogRecord::new(azimuth::Fatal, unicode_message)
  
  assert_eq(azimuth::LogRecord::severity_number(unicode_fatal_log), azimuth::Fatal)
  assert_eq(azimuth::LogRecord::body(unicode_fatal_log), Some(unicode_message))
  
  // æµ‹è¯•è¾¹ç•Œæ—¶é—´æˆ³æ—¥å¿—
  let min_timestamp_log = azimuth::LogRecord::new_with_context(
    azimuth::Error,
    Some("Min timestamp log"),
    None,
    Some(0L),
    None,
    None,
    None,
    None
  )
  
  let max_timestamp_log = azimuth::LogRecord::new_with_context(
    azimuth::Error,
    Some("Max timestamp log"),
    None,
    Some(9223372036854775807L),
    None,
    None,
    None,
    None
  )
  
  assert_eq(azimuth::LogRecord::severity_number(min_timestamp_log), azimuth::Error)
  assert_eq(azimuth::LogRecord::severity_number(max_timestamp_log), azimuth::Error)
  assert_eq(azimuth::LogRecord::timestamp(min_timestamp_log), Some(0L))
  assert_eq(azimuth::LogRecord::timestamp(max_timestamp_log), Some(9223372036854775807L))
  
  // å‘é€ç‰¹æ®Šåœºæ™¯æ—¥å¿—
  azimuth::Logger::emit(logger, empty_info_log)
  azimuth::Logger::emit(logger, empty_error_log)
  azimuth::Logger::emit(logger, long_warn_log)
  azimuth::Logger::emit(logger, special_debug_log)
  azimuth::Logger::emit(logger, unicode_fatal_log)
  azimuth::Logger::emit(logger, min_timestamp_log)
  azimuth::Logger::emit(logger, max_timestamp_log)
}

// æµ‹è¯•10: æ—¥å¿—ä¸¥é‡çº§åˆ«æœ€ä½³å®è·µæµ‹è¯•
pub test "æ—¥å¿—ä¸¥é‡çº§åˆ«æœ€ä½³å®è·µæµ‹è¯•" {
  let logger = azimuth::LoggerProvider::get_logger(azimuth::LoggerProvider::default(), "best-practices-logger")
  
  // æ¨¡æ‹Ÿå®é™…åº”ç”¨åœºæ™¯çš„æ—¥å¿—è®°å½•
  
  // 1. ç³»ç»Ÿå¯åŠ¨å’Œå…³é—­ - INFOçº§åˆ«
  let startup_log = azimuth::LogRecord::new(azimuth::Info, "Application starting up")
  let shutdown_log = azimuth::LogRecord::new(azimuth::Info, "Application shutting down")
  
  // 2. ç”¨æˆ·æ“ä½œ - INFOçº§åˆ«
  let user_login_log = azimuth::LogRecord::new(azimuth::Info, "User logged in successfully")
  let user_logout_log = azimuth::LogRecord::new(azimuth::Info, "User logged out")
  
  // 3. ä¸šåŠ¡é€»è¾‘è­¦å‘Š - WARNçº§åˆ«
  let slow_query_log = azimuth::LogRecord::new(azimuth::Warn, "Database query took longer than expected")
  let cache_miss_log = azimuth::LogRecord::new(azimuth::Warn, "Cache miss rate is above threshold")
  
  // 4. ç³»ç»Ÿé”™è¯¯ - ERRORçº§åˆ«
  let db_error_log = azimuth::LogRecord::new(azimuth::Error, "Database connection failed")
  let network_error_log = azimuth::LogRecord::new(azimuth::Error, "Network timeout occurred")
  
  // 5. ä¸¥é‡ç³»ç»Ÿæ•…éšœ - FATALçº§åˆ«
  let out_of_memory_log = azimuth::LogRecord::new(azimuth::Fatal, "Out of memory error")
  let disk_full_log = azimuth::LogRecord::new(azimuth::Fatal, "Disk is full")
  
  // 6. è°ƒè¯•ä¿¡æ¯ - DEBUGçº§åˆ«
  let debug_variable_log = azimuth::LogRecord::new(azimuth::Debug, "Variable value: x = 42")
  let debug_function_log = azimuth::LogRecord::new(azimuth::Debug, "Entering function: process_data")
  
  // 7. è¯¦ç»†è·Ÿè¸ªä¿¡æ¯ - TRACEçº§åˆ«
  let trace_loop_log = azimuth::LogRecord::new(azimuth::Trace, "Loop iteration: i = 5")
  let trace_method_log = azimuth::LogRecord::new(azimuth::Trace, "Method call: service.process()")
  
  // éªŒè¯æ—¥å¿—ä¸¥é‡çº§åˆ«
  assert_eq(azimuth::LogRecord::severity_number(startup_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(shutdown_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(user_login_log), azimuth::Info)
  assert_eq(azimuth::LogRecord::severity_number(user_logout_log), azimuth::Info)
  
  assert_eq(azimuth::LogRecord::severity_number(slow_query_log), azimuth::Warn)
  assert_eq(azimuth::LogRecord::severity_number(cache_miss_log), azimuth::Warn)
  
  assert_eq(azimuth::LogRecord::severity_number(db_error_log), azimuth::Error)
  assert_eq(azimuth::LogRecord::severity_number(network_error_log), azimuth::Error)
  
  assert_eq(azimuth::LogRecord::severity_number(out_of_memory_log), azimuth::Fatal)
  assert_eq(azimuth::LogRecord::severity_number(disk_full_log), azimuth::Fatal)
  
  assert_eq(azimuth::LogRecord::severity_number(debug_variable_log), azimuth::Debug)
  assert_eq(azimuth::LogRecord::severity_number(debug_function_log), azimuth::Debug)
  
  assert_eq(azimuth::LogRecord::severity_number(trace_loop_log), azimuth::Trace)
  assert_eq(azimuth::LogRecord::severity_number(trace_method_log), azimuth::Trace)
  
  // éªŒè¯æ—¥å¿—æ¶ˆæ¯
  assert_eq(azimuth::LogRecord::body(startup_log), Some("Application starting up"))
  assert_eq(azimuth::LogRecord::body(shutdown_log), Some("Application shutting down"))
  assert_eq(azimuth::LogRecord::body(user_login_log), Some("User logged in successfully"))
  assert_eq(azimuth::LogRecord::body(user_logout_log), Some("User logged out"))
  
  assert_eq(azimuth::LogRecord::body(slow_query_log), Some("Database query took longer than expected"))
  assert_eq(azimuth::LogRecord::body(cache_miss_log), Some("Cache miss rate is above threshold"))
  
  assert_eq(azimuth::LogRecord::body(db_error_log), Some("Database connection failed"))
  assert_eq(azimuth::LogRecord::body(network_error_log), Some("Network timeout occurred"))
  
  assert_eq(azimuth::LogRecord::body(out_of_memory_log), Some("Out of memory error"))
  assert_eq(azimuth::LogRecord::body(disk_full_log), Some("Disk is full"))
  
  assert_eq(azimuth::LogRecord::body(debug_variable_log), Some("Variable value: x = 42"))
  assert_eq(azimuth::LogRecord::body(debug_function_log), Some("Entering function: process_data"))
  
  assert_eq(azimuth::LogRecord::body(trace_loop_log), Some("Loop iteration: i = 5"))
  assert_eq(azimuth::LogRecord::body(trace_method_log), Some("Method call: service.process()"))
  
  // å‘é€æœ€ä½³å®è·µæ—¥å¿—
  azimuth::Logger::emit(logger, startup_log)
  azimuth::Logger::emit(logger, user_login_log)
  azimuth::Logger::emit(logger, debug_function_log)
  azimuth::Logger::emit(logger, trace_method_log)
  azimuth::Logger::emit(logger, slow_query_log)
  azimuth::Logger::emit(logger, db_error_log)
  azimuth::Logger::emit(logger, out_of_memory_log)
  azimuth::Logger::emit(logger, user_logout_log)
  azimuth::Logger::emit(logger, shutdown_log)
}