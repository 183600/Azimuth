// Generated by moon test.

type Moonbit_Test_Driver_Internal_No_Args_Function = () -> Unit raise Error

type Moonbit_Test_Driver_Internal_With_Args_Function = (Moonbit_Test_Driver_Internal_Test_Arg) -> Unit raise Error

type Moonbit_Test_Driver_Internal_Async_Function = async (Moonbit_Test_Driver_Internal_Test_Arg) -> Unit raise

type Moonbit_Test_Driver_Internal_No_Args_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_No_Args_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

type Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_With_Args_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

type Moonbit_Test_Driver_Internal_TestDriver_Async_Map = @moonbitlang/core/builtin.Map[
  String,
  @moonbitlang/core/builtin.Map[
    Int,
    (
      Moonbit_Test_Driver_Internal_Async_Function,
      @moonbitlang/core/builtin.Array[String],
    ),
  ],
]

struct Moonbit_Test_Driver_Internal_Meta {
  filename : String
  index : Int
  attrs : @moonbitlang/core/builtin.Array[String]
}

enum Moonbit_Test_Driver_Internal__F {
  F0(Moonbit_Test_Driver_Internal_No_Args_Function)
  F1(Moonbit_Test_Driver_Internal_With_Args_Function)
  F2(Moonbit_Test_Driver_Internal_Async_Function)
}

struct Moonbit_Test_Driver_Internal__TestCase {
  f : Moonbit_Test_Driver_Internal__F
  meta : Moonbit_Test_Driver_Internal_Meta
}

let moonbit_test_driver_internal_no_args_tests : Moonbit_Test_Driver_Internal_No_Args_Map = {
  "new_focused_test_suite.mbt": {
    0: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_0, ["baggage propagation across service boundaries"]),
    1: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_1, ["span lifecycle management with nested operations"]),
    2: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_2, ["attribute value type conversion and validation"]),
    3: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_3, ["time series temporal operations"]),
    4: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_4, ["concurrent resource management"]),
    5: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_5, ["data serialization integrity"]),
    6: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_6, ["cross service consistency validation"]),
    7: (__test_6e65775f666f63757365645f746573745f73756974652e6d6274_7, ["instrumentation scope and hierarchy"]),
  },
  "new_enhanced_tests.mbt": {
    0: (__test_6e65775f656e68616e6365645f74657374732e6d6274_0, ["complex attributes operations"]),
    1: (__test_6e65775f656e68616e6365645f74657374732e6d6274_1, ["concurrency safety"]),
    2: (__test_6e65775f656e68616e6365645f74657374732e6d6274_2, ["error handling and boundary conditions"]),
    3: (__test_6e65775f656e68616e6365645f74657374732e6d6274_3, ["cross-service propagation"]),
    4: (__test_6e65775f656e68616e6365645f74657374732e6d6274_4, ["performance benchmark"]),
    5: (__test_6e65775f656e68616e6365645f74657374732e6d6274_5, ["internationalization"]),
    6: (__test_6e65775f656e68616e6365645f74657374732e6d6274_6, ["time series operations"]),
    7: (__test_6e65775f656e68616e6365645f74657374732e6d6274_7, ["resource management"]),
    8: (__test_6e65775f656e68616e6365645f74657374732e6d6274_8, ["data serialization"]),
    9: (__test_6e65775f656e68616e6365645f74657374732e6d6274_9, ["end-to-end business workflow"]),
  },
  "enhanced_test_suite.mbt": {
    0: (__test_656e68616e6365645f746573745f73756974652e6d6274_0, ["attributes operations with different value types"]),
    1: (__test_656e68616e6365645f746573745f73756974652e6d6274_1, ["span lifecycle management"]),
    2: (__test_656e68616e6365645f746573745f73756974652e6d6274_2, ["baggage propagation across contexts"]),
    3: (__test_656e68616e6365645f746573745f73756974652e6d6274_3, ["composite propagator injection and extraction"]),
    4: (__test_656e68616e6365645f746573745f73756974652e6d6274_4, ["resource operations and merging"]),
    5: (__test_656e68616e6365645f746573745f73756974652e6d6274_5, ["different instrument types and operations"]),
    6: (__test_656e68616e6365645f746573745f73756974652e6d6274_6, ["log record with context and trace information"]),
    7: (__test_656e68616e6365645f746573745f73756974652e6d6274_7, ["error boundary handling and edge cases"]),
  },
  "enhanced_quality_tests.mbt": {
    0: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_0, ["错误处理和边界条件测试"]),
    1: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_1, ["性能基准测试"]),
    2: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_2, ["跨服务一致性测试"]),
    3: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_3, ["数据序列化和完整性测试"]),
    4: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_4, ["时间序列和时序操作测试"]),
    5: (__test_656e68616e6365645f7175616c6974795f74657374732e6d6274_5, ["配置动态更新测试"]),
  },
  "azimuth_specialized_comprehensive_tests.mbt": {
    0: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_0, ["时间窗口聚合计算测试"]),
    1: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_1, ["异常处理和恢复机制测试"]),
    2: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_2, ["配置动态更新测试"]),
    3: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_3, ["分布式数据一致性验证测试"]),
    4: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_4, ["资源限制和边界条件测试"]),
    5: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_5, ["多格式数据导出测试"]),
    6: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_6, ["缓存性能和策略测试"]),
    7: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_7, ["安全性和权限控制测试"]),
    8: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_8, ["跨平台兼容性测试"]),
    9: (__test_617a696d7574685f7370656369616c697a65645f636f6d70726568656e736976655f74657374732e6d6274_9, ["性能基准测试"]),
  },
  "azimuth_premium_technical_tests.mbt": {
    0: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_0, ["resource management and merge strategy"]),
    1: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_1, ["advanced attribute operations"]),
    2: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_2, ["complex span operations"]),
    3: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_3, ["advanced baggage operations"]),
    4: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_4, ["metric operations with various instruments"]),
    5: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_5, ["advanced log operations"]),
    6: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_6, ["context propagation operations"]),
    7: (__test_617a696d7574685f7072656d69756d5f746563686e6963616c5f74657374732e6d6274_7, ["instrumentation scope management"]),
  },
  "azimuth_premium_comprehensive_tests.mbt": {
    0: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_0, ["遥测数据采样策略测试"]),
    1: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_1, ["异步遥测数据导出测试"]),
    2: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_2, ["遥测数据批处理测试"]),
    3: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_3, ["遥测系统故障恢复测试"]),
    4: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_4, ["遥测数据质量保证测试"]),
    5: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_5, ["平台特定遥测适配测试"]),
    6: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_6, ["遥测系统端到端集成测试"]),
    7: (__test_617a696d7574685f7072656d69756d5f636f6d70726568656e736976655f74657374732e6d6274_7, ["遥测数据序列化完整性测试"]),
  },
  "azimuth_new_tests.mbt": {
    0: (__test_617a696d7574685f6e65775f74657374732e6d6274_0, ["属性基本操作测试"]),
    1: (__test_617a696d7574685f6e65775f74657374732e6d6274_1, ["属性数组操作测试"]),
    2: (__test_617a696d7574685f6e65775f74657374732e6d6274_2, ["上下文操作测试"]),
    3: (__test_617a696d7574685f6e65775f74657374732e6d6274_3, ["Span上下文测试"]),
    4: (__test_617a696d7574685f6e65775f74657374732e6d6274_4, ["Baggage操作测试"]),
    5: (__test_617a696d7574685f6e65775f74657374732e6d6274_5, ["资源操作测试"]),
    6: (__test_617a696d7574685f6e65775f74657374732e6d6274_6, ["TextMapCarrier操作测试"]),
    7: (__test_617a696d7574685f6e65775f74657374732e6d6274_7, ["仪器化范围测试"]),
    8: (__test_617a696d7574685f6e65775f74657374732e6d6274_8, ["属性值类型转换测试"]),
    9: (__test_617a696d7574685f6e65775f74657374732e6d6274_9, ["复合场景测试"]),
  },
  "azimuth_new_test_suites.mbt": {
    0: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_0, ["error handling and boundary conditions"]),
    1: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_1, ["performance benchmarks"]),
    2: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_2, ["concurrent safety operations"]),
    3: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_3, ["data serialization and integrity"]),
    4: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_4, ["configuration management and dynamic updates"]),
    5: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_5, ["time series operations"]),
    6: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_6, ["resource management and merge strategies"]),
    7: (__test_617a696d7574685f6e65775f746573745f7375697465732e6d6274_7, ["cross-service propagation and consistency"]),
  },
  "azimuth_new_focused_tests.mbt": {
    0: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_0, ["edge case empty and null attributes"]),
    1: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_1, ["performance stress test metrics"]),
    2: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_2, ["integration end-to-end telemetry flow"]),
    3: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_3, ["edge case span lifecycle invalid states"]),
    4: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_4, ["performance large attribute sets"]),
    5: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_5, ["integration multi-service propagation"]),
    6: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_6, ["edge case resource merging conflicts"]),
    7: (__test_617a696d7574685f6e65775f666f63757365645f74657374732e6d6274_7, ["performance high frequency logging"]),
  },
  "azimuth_new_comprehensive_moonbit_tests.mbt": {
    0: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_0, ["span上下文基本操作测试"]),
    1: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_1, ["属性值类型转换测试"]),
    2: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_2, ["上下文值操作和传播测试"]),
    3: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_3, ["度量操作和仪器类型测试"]),
    4: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_4, ["日志记录和严重性级别测试"]),
    5: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_5, ["资源属性和合并操作测试"]),
    6: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_6, ["baggage操作和传播测试"]),
    7: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_7, ["span生命周期管理测试"]),
    8: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_8, ["http客户端和请求处理测试"]),
    9: (__test_617a696d7574685f6e65775f636f6d70726568656e736976655f6d6f6f6e6269745f74657374732e6d6274_9, ["时钟和随机数生成测试"]),
  },
  "azimuth_high_quality_security_tests.mbt": {
    0: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_0, ["输入验证和清理机制"]),
    1: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_1, ["认证和授权安全机制"]),
    2: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_2, ["加密和数据保护机制"]),
    3: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_3, ["审计日志和安全追踪"]),
    4: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_4, ["网络安全和通信保护"]),
    5: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_5, ["资源访问控制和隔离"]),
    6: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_6, ["数据完整性验证和校验"]),
    7: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_7, ["安全配置管理"]),
    8: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_8, ["安全监控和告警系统"]),
    9: (__test_617a696d7574685f686967685f7175616c6974795f73656375726974795f74657374732e6d6274_9, ["灾难恢复和备份机制"]),
  },
  "azimuth_focused_telemetry_tests.mbt": {
    0: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_0, ["trace span lifecycle management"]),
    1: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_1, ["metrics aggregation and measurement"]),
    2: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_2, ["structured logging with correlation"]),
    3: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_3, ["context propagation across service boundaries"]),
    4: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_4, ["resource management and attribute merging"]),
    5: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_5, ["baggage propagation and manipulation"]),
    6: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_6, ["span context validation"]),
    7: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_7, ["attribute operations"]),
    8: (__test_617a696d7574685f666f63757365645f74656c656d657472795f74657374732e6d6274_8, ["log record severity levels"]),
  },
  "azimuth_focused_moonbit_tests.mbt": {
    0: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_0, ["basic span creation with attributes"]),
    1: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_1, ["metric counter with various value types"]),
    2: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_2, ["logger with severity levels"]),
    3: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_3, ["resource with environment attributes"]),
    4: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_4, ["histogram metric with buckets"]),
    5: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_5, ["baggage propagation"]),
    6: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_6, ["span events"]),
    7: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_7, ["gauge metric operations"]),
    8: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_8, ["context propagation"]),
    9: (__test_617a696d7574685f666f63757365645f6d6f6f6e6269745f74657374732e6d6274_9, ["attribute type conversion"]),
  },
  "azimuth_enhanced_moonbit_tests.mbt": {
    0: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_0, ["span lifecycle management"]),
    1: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_1, ["tracer provider and tracer creation"]),
    2: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_2, ["histogram metric operations"]),
    3: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_3, ["updown counter metric operations"]),
    4: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_4, ["gauge metric operations"]),
    5: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_5, ["attribute operations with various types"]),
    6: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_6, ["baggage operations and propagation"]),
    7: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_7, ["composite propagator injection and extraction"]),
    8: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_8, ["resource operations and merging"]),
    9: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_9, ["context propagation with complex values"]),
    10: (__test_617a696d7574685f656e68616e6365645f6d6f6f6e6269745f74657374732e6d6274_10, ["log record with attributes and context"]),
  },
  "azimuth_enhanced_core_tests.mbt": {
    0: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_0, ["Span上下文传播测试"]),
    1: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_1, ["指标创建和记录功能测试"]),
    2: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_2, ["分布式追踪基础功能测试"]),
    3: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_3, ["日志级别和记录功能测试"]),
    4: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_4, ["遥测数据批量创建功能测试"]),
    5: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_5, ["时间相关功能测试"]),
    6: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_6, ["资源和属性管理功能测试"]),
    7: (__test_617a696d7574685f656e68616e6365645f636f72655f74657374732e6d6274_7, ["上下文传播和行李传递功能测试"]),
  },
  "azimuth_comprehensive_test_suite.mbt": {
    0: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_0, ["attribute value type conversion - string to int"]),
    1: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_1, ["attribute value type conversion - float and bool"]),
    2: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_2, ["attribute value type conversion - array types"]),
    3: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_3, ["span lifecycle - creation and basic properties"]),
    4: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_4, ["span lifecycle - status management"]),
    5: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_5, ["span lifecycle - events and ending"]),
    6: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_6, ["metrics dashboard - counter operations"]),
    7: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_7, ["metrics dashboard - histogram operations"]),
    8: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_8, ["metrics dashboard - updown counter and gauge"]),
    9: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_9, ["distributed tracing - span context validity"]),
    10: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_10, ["distributed tracing - span kind variations"]),
    11: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_11, ["cross-service propagation - context operations"]),
    12: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_12, ["cross-service propagation - baggage operations"]),
    13: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_13, ["cross-service propagation - text map carrier"]),
    14: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_14, ["log severity levels - basic severity numbers"]),
    15: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_15, ["log severity levels - log records with context"]),
    16: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_16, ["log severity levels - logger operations"]),
    17: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_17, ["resource merge strategy - basic resource operations"]),
    18: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_18, ["resource merge strategy - merge operations"]),
    19: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_19, ["concurrency safety - tracer provider operations"]),
    20: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_20, ["concurrency safety - meter provider operations"]),
    21: (__test_617a696d7574685f636f6d70726568656e736976655f746573745f73756974652e6d6274_21, ["concurrency safety - logger provider operations"]),
  },
  "azimuth_comprehensive_enhanced_tests.mbt": {
    0: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_0, ["attributes operations with different value types"]),
    1: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_1, ["span lifecycle management"]),
    2: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_2, ["baggage propagation across contexts"]),
    3: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_3, ["resource management and merging"]),
    4: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_4, ["composite propagator injection and extraction"]),
    5: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_5, ["advanced log record with full context"]),
    6: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_6, ["metrics operations with different instrument types"]),
    7: (__test_617a696d7574685f636f6d70726568656e736976655f656e68616e6365645f74657374732e6d6274_7, ["context chain propagation with multiple values"]),
  },
  "azimuth_advanced_telemetry_edge_cases_tests.mbt": {
    0: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_0, ["高并发场景下的遥测数据一致性测试"]),
    1: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_1, ["遥测数据压缩和优化测试"]),
    2: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_2, ["遥测系统故障恢复和弹性测试"]),
    3: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_3, ["跨服务遥测关联和传播测试"]),
    4: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_4, ["遥测数据采样策略和性能优化测试"]),
    5: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_5, ["遥测数据聚合和统计分析测试"]),
    6: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_6, ["遥测配置验证和约束检查测试"]),
    7: (__test_617a696d7574685f616476616e6365645f74656c656d657472795f656467655f63617365735f74657374732e6d6274_7, ["遥测数据质量验证和异常检测测试"]),
  },
  "azimuth_advanced_lifecycle_tests.mbt": {
    0: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_0, ["span lifecycle management"]),
    1: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_1, ["metric aggregation operations"]),
    2: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_2, ["log recording and filtering"]),
    3: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_3, ["baggage propagation"]),
    4: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_4, ["trace context management"]),
    5: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_5, ["instrumentation scope management"]),
    6: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_6, ["attribute deep nested operations"]),
    7: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_7, ["concurrent span operations"]),
    8: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_8, ["telemetry data serialization"]),
    9: (__test_617a696d7574685f616476616e6365645f6c6966656379636c655f74657374732e6d6274_9, ["system fault recovery"]),
  },
  "azimuth.mbt": {
  },
}
let moonbit_test_driver_internal_with_args_tests : Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map = { }  // WILL BE REPLACED
let moonbit_test_driver_internal_async_tests : Moonbit_Test_Driver_Internal_TestDriver_Async_Map = { }  // WILL BE REPLACED

fn moonbit_test_driver_internal_apply_filter(
  no_args_tests : Moonbit_Test_Driver_Internal_No_Args_Map,
  with_args_tests : Moonbit_Test_Driver_Internal_TestDriver_With_Args_Map,
  async_tests : Moonbit_Test_Driver_Internal_TestDriver_Async_Map,
  file_filter : String,
  index_filter : Int
) -> Option[Moonbit_Test_Driver_Internal__TestCase] {
  match no_args_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F0(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  match with_args_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F1(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  match async_tests.get(file_filter) {
    Some(index_func_map) if index_func_map.get(index_filter) is Some(func_attrs_tuple) => {
      let k = {
        f: Moonbit_Test_Driver_Internal__F::F2(func_attrs_tuple.0),
        meta: { filename: file_filter, index: index_filter, attrs: func_attrs_tuple.1 },
      }
      return Some(k)
    }
    _ => ()
  }

  None
}

pub fn moonbit_test_driver_internal_do_execute(
  async_tests : Array[async () -> Unit],
  filename : String,
  index : Int,
) -> Unit {
  let filtered_test = moonbit_test_driver_internal_apply_filter(
    moonbit_test_driver_internal_no_args_tests,
    moonbit_test_driver_internal_with_args_tests,
    moonbit_test_driver_internal_async_tests,
    filename,
    index
  )

  fn handle_result(
    test_name : String,
    file_name : String,
    message : String,
    skipped : Bool,
  ) {
    // In WASM, this function is called by the external test driver, but here
    // in native mode there's nothing that calls it, so we call it manually.
    if not(skipped) && MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE {
      
    }
    let file_name = file_name.escape()
    let test_name = test_name.escape()
    let message = message.escape()
    @moonbitlang/core/builtin.println("----- BEGIN MOON TEST RESULT -----")
    @moonbitlang/core/builtin.println(
      "{\"package\": \"azimuth/telemetry/azimuth_test\", \"filename\": \{file_name}, \"index\": \"\{index}\", \"test_name\": \{test_name}, \"message\": \{message}}",
    )
    @moonbitlang/core/builtin.println("----- END MOON TEST RESULT -----")
  }

  match filtered_test {
    Some(item) => {
      let attrs = item.meta.attrs
      let file_name = item.meta.filename
      let name = if attrs.is_empty() { "" } else { attrs[0] }
      let name = if name.length() == 0 {
        item.meta.index.to_string()
      } else {
        name
      }

      if MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE && attrs.iter().any(fn(attr) -> Bool {
        attr is [.."panic", ..]
      }) {
        @moonbitlang/core/builtin.println("skipped test block: \{file_name}: \{attrs[0]}")
        handle_result(name, file_name, "skipped test", true)
        return
      }

      fn on_err(err : Error) {
        match err {
          @moonbitlang/core/builtin.Failure(e)
          | @moonbitlang/core/builtin.InspectError(e)
          | @moonbitlang/core/builtin.SnapshotError(e)
          | MoonBitTestDriverInternalJsError(e) => {
            handle_result(name, file_name, e, false)
          }
          e => {
            let message = moonbit_test_driver_internal_error_to_string(e)
            handle_result(name, file_name, message, false)
          }
        }
      }

      match item.f {
        Moonbit_Test_Driver_Internal__F::F0(f) => {
          moonbit_test_driver_internal_catch_error(
            f,
            on_ok=() => handle_result(name, file_name, "", false),
            on_err~,
          )
        }
        Moonbit_Test_Driver_Internal__F::F1(f) => {
          moonbit_test_driver_internal_catch_error(
            () => f(moonbit_test_driver_internal_new_test_arg(name)),
            on_ok=() => handle_result(name, file_name, "", false),
            on_err~,
          )
        }
        Moonbit_Test_Driver_Internal__F::F2(f) =>
          async_tests.push(() => {
            try f(moonbit_test_driver_internal_new_test_arg(name)) catch {
              err if moonbit_test_driver_internal_is_being_cancelled() => raise err
              err => on_err(err)
            } noraise {
              _ => handle_result(name, file_name, "", false)
            }
          })
      }
    }
    _ => handle_result("", "", "skipped test", true)
  }
}

///|
let moonbit_test_driver_internal_max_concurrent_tests : Int = 10

#cfg(target="native")
#test_entry
fn main {
  let async_tests = []
  for arg in moonbit_test_driver_internal_native_parse_args() {
    moonbit_test_driver_internal_do_execute(async_tests, arg.0, arg.1)
  }
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(not(target="native"))
#test_entry
fn main {
  ()
}

#cfg(target="js")
pub fn moonbit_test_driver_internal_execute(
  tests : Array[MoonBitTestDriverInternalTestEntry],
) -> Unit {
  let async_tests = []
  for i in 0..<tests.length() {
    let entry = tests[i]
    moonbit_test_driver_internal_do_execute(async_tests, entry.filename(), entry.index())
  }
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(any(target="wasm", target="wasm-gc"))
pub fn moonbit_test_driver_internal_execute(
  filename : MoonbitTestDriverInternalExternString,
  index : Int,
) -> Unit {
  let filename = moonbit_test_driver_internal_get_file_name(filename)
  let async_tests = []
  moonbit_test_driver_internal_do_execute(async_tests, filename, index)
  moonbit_test_driver_internal_run_async_tests(async_tests)
}

#cfg(not(target="native"))
pub fn moonbit_test_driver_finish() -> Unit {
  
}
type Moonbit_Test_Driver_Internal_Test_Arg = Int

fn moonbit_test_driver_internal_new_test_arg(
  _ : String,
) -> Moonbit_Test_Driver_Internal_Test_Arg {
  42
}
///|
fn moonbit_test_driver_internal_run_async_tests(
  _tests : @moonbitlang/core/builtin.Array[async () -> Unit],
) -> Unit {
  @moonbitlang/core/builtin.ignore(moonbit_test_driver_internal_max_concurrent_tests)
}

///|
fn moonbit_test_driver_internal_is_being_cancelled() -> Bool {
  false
}
fn moonbit_test_driver_internal_error_to_string(x : Error) -> String = "%error.to_string"

#cfg(target="native")
fn string_get(s: String, index: Int) -> Int = "%string_get"

#cfg(not(target="js"))
fn moonbit_unsafe_char_from_int(x : Int) -> Char = "%identity"

#cfg(target="native")
const MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE = true

#cfg(not(target="native"))
const MOONBIT_TEST_DRIVER_INTERNAL_IS_NATIVE = false

// =========================================================
// ================== BEGIN WASM SPECIFIC ==================
// =========================================================

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_get_file_name(file_name : MoonbitTestDriverInternalExternString) -> String {
  moonbit_test_driver_internal_string_from_extern(file_name)
}

#cfg(any(target="wasm", target="wasm-gc"))
#external
type MoonbitTestDriverInternalStringReadHandle

#cfg(any(target="wasm", target="wasm-gc"))
#external
type MoonbitTestDriverInternalExternString

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_begin_read_string(s : MoonbitTestDriverInternalExternString) -> MoonbitTestDriverInternalStringReadHandle = "__moonbit_fs_unstable" "begin_read_string"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_string_read_char(handle : MoonbitTestDriverInternalStringReadHandle) -> Int = "__moonbit_fs_unstable" "string_read_char"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_finish_read_string(handle : MoonbitTestDriverInternalStringReadHandle) = "__moonbit_fs_unstable" "finish_read_string"

#cfg(any(target="wasm", target="wasm-gc"))
fn fixedarray_to_bytes(arr : FixedArray[Byte]) -> Bytes = "%identity"

#cfg(any(target="wasm", target="wasm-gc"))
fn moonbit_test_driver_internal_string_from_extern(e : MoonbitTestDriverInternalExternString) -> String {
  let buf = FixedArray::make(512, Byte::default())
  let mut len = 0
  let handle = moonbit_test_driver_internal_begin_read_string(e)
  while true {
    let ch = moonbit_test_driver_internal_string_read_char(handle)
    if ch == -1 {
      break
    } else {
      let written_bytes_len = buf.set_utf16le_char(len, moonbit_unsafe_char_from_int(ch))
      len += written_bytes_len
    }
  }
  moonbit_test_driver_internal_finish_read_string(handle)
  fixedarray_to_bytes(buf).to_unchecked_string(offset = 0, length = len).to_string()
}

// =========================================================
// =================== END WASM SPECIFIC ===================
// =========================================================

// =========================================================
// ================= BEGIN NATIVE SPECIFIC =================
// =========================================================
#cfg(target="native")
fn moonbit_test_driver_internal_native_parse_args() -> @moonbitlang/core/builtin.Array[(String, Int)] {
  fn moonbit_test_driver_internal_parse_int_(s : String) -> Int {
    let mut res = 0
    let len = s.length()
    for i = 0; i < len; i = i + 1 {
      res = res * 10 + (string_get(s, i) - '0')
    }
    res
  }

  fn moonbit_test_driver_internal_utf8_bytes_to_mbt_string(bytes : Bytes) -> String {
    let res = @moonbitlang/core/builtin.StringBuilder::new()
    let len = bytes.length()
    let mut i = 0
    while i < len {
      let mut c = bytes[i].to_int()
      if c < 0x80 {
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 1
      } else if c < 0xE0 {
        if i + 1 >= len {
          break
        }
        c = ((c & 0x1F) << 6) | (bytes[i + 1].to_int() & 0x3F)
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 2
      } else if c < 0xF0 {
        if i + 2 >= len {
          break
        }
        c = ((c & 0x0F) << 12) |
          ((bytes[i + 1].to_int() & 0x3F) << 6) |
          (bytes[i + 2].to_int() & 0x3F)
        res.write_char(moonbit_unsafe_char_from_int(c))
        i += 3
      } else {
        if i + 3 >= len {
          break
        }
        c = ((c & 0x07) << 18) |
          ((bytes[i + 1].to_int() & 0x3F) << 12) |
          ((bytes[i + 2].to_int() & 0x3F) << 6) |
          (bytes[i + 3].to_int() & 0x3F)
        c -= 0x10000
        res.write_char(moonbit_unsafe_char_from_int((c >> 10) + 0xD800))
        res.write_char(moonbit_unsafe_char_from_int((c & 0x3FF) + 0xDC00))
        i += 4
      }
    }
    res.to_string()
  }

  fn moonbit_test_driver_internal_get_cli_args_internal() -> @moonbitlang/core/builtin.Array[String] {
    let tmp = moonbit_test_driver_internal_get_cli_args_ffi()
    let res = @moonbitlang/core/builtin.Array::new(capacity=tmp.length())
    for i = 0; i < tmp.length(); i = i + 1 {
      res.push(moonbit_test_driver_internal_utf8_bytes_to_mbt_string(tmp[i]))
    }
    res
  }

  fn moonbit_test_driver_internal_split_mbt_string(s : String, sep : Char) -> @moonbitlang/core/builtin.Array[String] {
    let res = []
    let mut i = 0
    let mut start = 0
    while i < s.length() {
      if moonbit_unsafe_char_from_int(string_get(s, i)) == sep {
        res.push(s.unsafe_substring(start = start, end = i))
        start = i + 1
      }
      i += 1
    }
    if start < s.length() {
      res.push(s.unsafe_substring(start = start, end = s.length()))
    }
    res
  }

  let file_and_index = []

  let cli_args = moonbit_test_driver_internal_get_cli_args_internal()
  let test_args = moonbit_test_driver_internal_split_mbt_string(cli_args[1], '/')
  for arg in test_args {
    let file_and_range = moonbit_test_driver_internal_split_mbt_string(arg, ':')
    let file = file_and_range[0]
    let range = file_and_range[1]
    let start_and_end = moonbit_test_driver_internal_split_mbt_string(range, '-')
    let start = moonbit_test_driver_internal_parse_int_(start_and_end[0])
    let end = moonbit_test_driver_internal_parse_int_(start_and_end[1])
    for i = start; i < end; i = i + 1 {
      file_and_index.push((file, i))
    }
  }

  file_and_index
}

#cfg(target="native")
fn moonbit_test_driver_internal_get_cli_args_ffi() -> FixedArray[Bytes] = "$moonbit.get_cli_args"

// =========================================================
// ================== END NATIVE SPECIFIC ==================
// =========================================================

// =========================================================
// -================== BEGIN JS SPECIFIC ===================
// =========================================================

///|
#cfg(target="js")
#external
type MoonBitTestDriverInternalTestEntry

///|
#cfg(target="js")
extern "js" fn MoonBitTestDriverInternalTestEntry::filename(self : Self) -> String =
  #| (entry) => entry[0]

///|
#cfg(target="js")
extern "js" fn MoonBitTestDriverInternalTestEntry::index(self : Self) -> Int =
  #| (entry) => entry[1]

///|
pub(all) suberror MoonBitTestDriverInternalJsError String

///|
#cfg(target="js")
fn moonbit_test_driver_internal_catch_error(
  f : () -> Unit raise,
  on_ok~ : () -> Unit,
  on_err~ : (Error) -> Unit,
) -> Unit {
  moonbit_test_driver_internal_js_catch(
    on_err=(err_str) => on_err(MoonBitTestDriverInternalJsError(err_str)),
    () => {
      try f() catch {
        err => on_err(err)
      } noraise {
        _ => on_ok()
      }
    }
  )
}

///|
#cfg(target="js")
extern "js" fn moonbit_test_driver_internal_js_catch(
  f : () -> Unit,
  on_err~ : (String) -> Unit,
) =
  #| (f, on_err) => {
  #|   try {
  #|     f()
  #|   } catch (err) {
  #|     const msg = err.stack.toString()
  #|     on_err(msg)
  #|   }
  #| }

///|
#cfg(not(target="js"))
fn moonbit_test_driver_internal_catch_error(
  f : () -> Unit raise,
  on_ok~ : () -> Unit,
  on_err~ : (Error) -> Unit,
) -> Unit {
  try f() catch {
    err => on_err(err)
  } noraise {
    _ => on_ok()
  }
}

// =========================================================
// -=================== END JS SPECIFIC ====================
// =========================================================
