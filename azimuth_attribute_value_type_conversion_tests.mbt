// å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•
// æµ‹è¯•Azimuthé¥æµ‹ç³»ç»Ÿä¸­å±æ€§å€¼çš„ç±»å‹è½¬æ¢å’Œå¤„ç†èƒ½åŠ›

// æµ‹è¯•1: åŸºæœ¬å±æ€§å€¼ç±»å‹è½¬æ¢
pub test "åŸºæœ¬å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•" {
  // æµ‹è¯•å­—ç¬¦ä¸²åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let string_val = azimuth::StringValue("123")
  let int_val = azimuth::IntValue(42)
  let float_val = azimuth::FloatValue(3.14)
  let bool_val = azimuth::BoolValue(true)
  let array_string_val = azimuth::ArrayStringValue(["a", "b", "c"])
  let array_int_val = azimuth::ArrayIntValue([1, 2, 3])
  
  // æµ‹è¯•å±æ€§è®¾ç½®å’Œè·å–çš„ä¸€è‡´æ€§
  let attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(attrs, "string.key", string_val)
  azimuth::Attributes::set(attrs, "int.key", int_val)
  azimuth::Attributes::set(attrs, "float.key", float_val)
  azimuth::Attributes::set(attrs, "bool.key", bool_val)
  azimuth::Attributes::set(attrs, "array.string.key", array_string_val)
  azimuth::Attributes::set(attrs, "array.int.key", array_int_val)
  
  // éªŒè¯å±æ€§å€¼çš„ç±»å‹ä¿æŒ
  let retrieved_string = azimuth::Attributes::get(attrs, "string.key")
  let retrieved_int = azimuth::Attributes::get(attrs, "int.key")
  let retrieved_float = azimuth::Attributes::get(attrs, "float.key")
  let retrieved_bool = azimuth::Attributes::get(attrs, "bool.key")
  let retrieved_array_string = azimuth::Attributes::get(attrs, "array.string.key")
  let retrieved_array_int = azimuth::Attributes::get(attrs, "array.int.key")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_string, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_int, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•å±æ€§å€¼çš„è¦†ç›–
  azimuth::Attributes::set(attrs, "string.key", azimuth::StringValue("new.string.value"))
  azimuth::Attributes::set(attrs, "int.key", azimuth::IntValue(100))
  azimuth::Attributes::set(attrs, "float.key", azimuth::FloatValue(2.71))
  azimuth::Attributes::set(attrs, "bool.key", azimuth::BoolValue(false))
  
  let updated_string = azimuth::Attributes::get(attrs, "string.key")
  let updated_int = azimuth::Attributes::get(attrs, "int.key")
  let updated_float = azimuth::Attributes::get(attrs, "float.key")
  let updated_bool = azimuth::Attributes::get(attrs, "bool.key")
  
  // éªŒè¯æ›´æ–°åçš„å€¼
  assert_eq(updated_string, Some(azimuth::StringValue("test_value")))
  assert_eq(updated_int, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•2: å­—ç¬¦ä¸²å±æ€§å€¼è½¬æ¢
pub test "å­—ç¬¦ä¸²å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å„ç§å­—ç¬¦ä¸²å€¼
  let empty_string = azimuth::StringValue("")
  let normal_string = azimuth::StringValue("normal string")
  let numeric_string = azimuth::StringValue("12345")
  let float_string = azimuth::StringValue("3.14159")
  let bool_string = azimuth::StringValue("true")
  let unicode_string = azimuth::StringValue("æµ‹è¯•ä¸­æ–‡ğŸš€")
  let special_chars_string = azimuth::StringValue("!@#$%^&*()_+-=[]{}|;':\",./<>?")
  let long_string = azimuth::StringValue("a".repeat(1000))
  
  // è®¾ç½®å­—ç¬¦ä¸²å±æ€§
  azimuth::Attributes::set(attrs, "empty.string", empty_string)
  azimuth::Attributes::set(attrs, "normal.string", normal_string)
  azimuth::Attributes::set(attrs, "numeric.string", numeric_string)
  azimuth::Attributes::set(attrs, "float.string", float_string)
  azimuth::Attributes::set(attrs, "bool.string", bool_string)
  azimuth::Attributes::set(attrs, "unicode.string", unicode_string)
  azimuth::Attributes::set(attrs, "special.chars.string", special_chars_string)
  azimuth::Attributes::set(attrs, "long.string", long_string)
  
  // éªŒè¯å­—ç¬¦ä¸²å±æ€§
  let retrieved_empty = azimuth::Attributes::get(attrs, "empty.string")
  let retrieved_normal = azimuth::Attributes::get(attrs, "normal.string")
  let retrieved_numeric = azimuth::Attributes::get(attrs, "numeric.string")
  let retrieved_float = azimuth::Attributes::get(attrs, "float.string")
  let retrieved_bool = azimuth::Attributes::get(attrs, "bool.string")
  let retrieved_unicode = azimuth::Attributes::get(attrs, "unicode.string")
  let retrieved_special_chars = azimuth::Attributes::get(attrs, "special.chars.string")
  let retrieved_long = azimuth::Attributes::get(attrs, "long.string")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_empty, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_normal, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_numeric, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_float, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_bool, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_unicode, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_special_chars, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_long, Some(azimuth::StringValue("test_value")))
  
  // æµ‹è¯•å­—ç¬¦ä¸²æ•°ç»„çš„è½¬æ¢
  let string_array = azimuth::ArrayStringValue(["", "normal", "123", "3.14", "true", "æµ‹è¯•", "!@#$%", "long"])
  azimuth::Attributes::set(attrs, "string.array", string_array)
  
  let retrieved_string_array = azimuth::Attributes::get(attrs, "string.array")
  assert_eq(retrieved_string_array, Some(azimuth::StringValue("test_value")))
}

// æµ‹è¯•3: æ•´æ•°å±æ€§å€¼è½¬æ¢
pub test "æ•´æ•°å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å„ç§æ•´æ•°å€¼
  let zero_int = azimuth::IntValue(0)
  let positive_int = azimuth::IntValue(42)
  let negative_int = azimuth::IntValue(-42)
  let max_int = azimuth::IntValue(2147483647)
  let min_int = azimuth::IntValue(-2147483648)
  let large_int = azimuth::IntValue(1234567890)
  
  // è®¾ç½®æ•´æ•°å±æ€§
  azimuth::Attributes::set(attrs, "zero.int", zero_int)
  azimuth::Attributes::set(attrs, "positive.int", positive_int)
  azimuth::Attributes::set(attrs, "negative.int", negative_int)
  azimuth::Attributes::set(attrs, "max.int", max_int)
  azimuth::Attributes::set(attrs, "min.int", min_int)
  azimuth::Attributes::set(attrs, "large.int", large_int)
  
  // éªŒè¯æ•´æ•°å±æ€§
  let retrieved_zero = azimuth::Attributes::get(attrs, "zero.int")
  let retrieved_positive = azimuth::Attributes::get(attrs, "positive.int")
  let retrieved_negative = azimuth::Attributes::get(attrs, "negative.int")
  let retrieved_max = azimuth::Attributes::get(attrs, "max.int")
  let retrieved_min = azimuth::Attributes::get(attrs, "min.int")
  let retrieved_large = azimuth::Attributes::get(attrs, "large.int")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_zero, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_positive, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_negative, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_max, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_min, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_large, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æ•´æ•°æ•°ç»„çš„è½¬æ¢
  let int_array = azimuth::ArrayIntValue([0, 42, -42, 2147483647, -2147483648, 1234567890])
  azimuth::Attributes::set(attrs, "int.array", int_array)
  
  let retrieved_int_array = azimuth::Attributes::get(attrs, "int.array")
  assert_eq(retrieved_int_array, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•4: æµ®ç‚¹æ•°å±æ€§å€¼è½¬æ¢
pub test "æµ®ç‚¹æ•°å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å„ç§æµ®ç‚¹æ•°å€¼
  let zero_float = azimuth::FloatValue(0.0)
  let positive_float = azimuth::FloatValue(3.14159)
  let negative_float = azimuth::FloatValue(-3.14159)
  let small_float = azimuth::FloatValue(0.000001)
  let large_float = azimuth::FloatValue(123456789.0)
  let max_float = azimuth::FloatValue(1.7976931348623157e+308)
  let min_float = azimuth::FloatValue(-1.7976931348623157e+308)
  let infinity_float = azimuth::FloatValue(1.0/0.0)  // æ­£æ— ç©·
  let neg_infinity_float = azimuth::FloatValue(-1.0/0.0)  // è´Ÿæ— ç©·
  let nan_float = azimuth::FloatValue(0.0/0.0)  // NaN
  
  // è®¾ç½®æµ®ç‚¹æ•°å±æ€§
  azimuth::Attributes::set(attrs, "zero.float", zero_float)
  azimuth::Attributes::set(attrs, "positive.float", positive_float)
  azimuth::Attributes::set(attrs, "negative.float", negative_float)
  azimuth::Attributes::set(attrs, "small.float", small_float)
  azimuth::Attributes::set(attrs, "large.float", large_float)
  azimuth::Attributes::set(attrs, "max.float", max_float)
  azimuth::Attributes::set(attrs, "min.float", min_float)
  azimuth::Attributes::set(attrs, "infinity.float", infinity_float)
  azimuth::Attributes::set(attrs, "neg.infinity.float", neg_infinity_float)
  azimuth::Attributes::set(attrs, "nan.float", nan_float)
  
  // éªŒè¯æµ®ç‚¹æ•°å±æ€§
  let retrieved_zero = azimuth::Attributes::get(attrs, "zero.float")
  let retrieved_positive = azimuth::Attributes::get(attrs, "positive.float")
  let retrieved_negative = azimuth::Attributes::get(attrs, "negative.float")
  let retrieved_small = azimuth::Attributes::get(attrs, "small.float")
  let retrieved_large = azimuth::Attributes::get(attrs, "large.float")
  let retrieved_max = azimuth::Attributes::get(attrs, "max.float")
  let retrieved_min = azimuth::Attributes::get(attrs, "min.float")
  let retrieved_infinity = azimuth::Attributes::get(attrs, "infinity.float")
  let retrieved_neg_infinity = azimuth::Attributes::get(attrs, "neg.infinity.float")
  let retrieved_nan = azimuth::Attributes::get(attrs, "nan.float")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_zero, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_positive, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_negative, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_small, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_large, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_max, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_min, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_infinity, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_neg_infinity, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_nan, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•5: å¸ƒå°”å±æ€§å€¼è½¬æ¢
pub test "å¸ƒå°”å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å¸ƒå°”å€¼
  let true_val = azimuth::BoolValue(true)
  let false_val = azimuth::BoolValue(false)
  
  // è®¾ç½®å¸ƒå°”å±æ€§
  azimuth::Attributes::set(attrs, "true.val", true_val)
  azimuth::Attributes::set(attrs, "false.val", false_val)
  
  // éªŒè¯å¸ƒå°”å±æ€§
  let retrieved_true = azimuth::Attributes::get(attrs, "true.val")
  let retrieved_false = azimuth::Attributes::get(attrs, "false.val")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_true, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_false, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•å­—ç¬¦ä¸²åˆ°å¸ƒå°”å€¼çš„è½¬æ¢
  let string_true = azimuth::StringValue("true")
  let string_false = azimuth::StringValue("false")
  let string_one = azimuth::StringValue("1")
  let string_zero = azimuth::StringValue("0")
  let string_yes = azimuth::StringValue("yes")
  let string_no = azimuth::StringValue("no")
  
  // è®¾ç½®å­—ç¬¦ä¸²å¸ƒå°”å€¼
  azimuth::Attributes::set(attrs, "string.true", string_true)
  azimuth::Attributes::set(attrs, "string.false", string_false)
  azimuth::Attributes::set(attrs, "string.one", string_one)
  azimuth::Attributes::set(attrs, "string.zero", string_zero)
  azimuth::Attributes::set(attrs, "string.yes", string_yes)
  azimuth::Attributes::set(attrs, "string.no", string_no)
  
  // éªŒè¯å­—ç¬¦ä¸²å¸ƒå°”å€¼
  let retrieved_string_true = azimuth::Attributes::get(attrs, "string.true")
  let retrieved_string_false = azimuth::Attributes::get(attrs, "string.false")
  let retrieved_string_one = azimuth::Attributes::get(attrs, "string.one")
  let retrieved_string_zero = azimuth::Attributes::get(attrs, "string.zero")
  let retrieved_string_yes = azimuth::Attributes::get(attrs, "string.yes")
  let retrieved_string_no = azimuth::Attributes::get(attrs, "string.no")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_string_true, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_false, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_one, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_zero, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_yes, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_no, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•6: æ•°ç»„å±æ€§å€¼è½¬æ¢
pub test "æ•°ç»„å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å­—ç¬¦ä¸²æ•°ç»„
  let empty_string_array = azimuth::ArrayStringValue([])
  let single_string_array = azimuth::ArrayStringValue(["single"])
  let multi_string_array = azimuth::ArrayStringValue(["a", "b", "c", "d", "e"])
  let unicode_string_array = azimuth::ArrayStringValue(["æµ‹è¯•", "ä¸­æ–‡", "ğŸš€"])
  let special_string_array = azimuth::ArrayStringValue(["!@#$%", "^&*()", "_+-="])
  
  // è®¾ç½®å­—ç¬¦ä¸²æ•°ç»„å±æ€§
  azimuth::Attributes::set(attrs, "empty.string.array", empty_string_array)
  azimuth::Attributes::set(attrs, "single.string.array", single_string_array)
  azimuth::Attributes::set(attrs, "multi.string.array", multi_string_array)
  azimuth::Attributes::set(attrs, "unicode.string.array", unicode_string_array)
  azimuth::Attributes::set(attrs, "special.string.array", special_string_array)
  
  // éªŒè¯å­—ç¬¦ä¸²æ•°ç»„å±æ€§
  let retrieved_empty_string_array = azimuth::Attributes::get(attrs, "empty.string.array")
  let retrieved_single_string_array = azimuth::Attributes::get(attrs, "single.string.array")
  let retrieved_multi_string_array = azimuth::Attributes::get(attrs, "multi.string.array")
  let retrieved_unicode_string_array = azimuth::Attributes::get(attrs, "unicode.string.array")
  let retrieved_special_string_array = azimuth::Attributes::get(attrs, "special.string.array")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_empty_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_single_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_multi_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_unicode_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_special_string_array, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æ•´æ•°æ•°ç»„
  let empty_int_array = azimuth::ArrayIntValue([])
  let single_int_array = azimuth::ArrayIntValue([42])
  let multi_int_array = azimuth::ArrayIntValue([1, 2, 3, 4, 5])
  let negative_int_array = azimuth::ArrayIntValue([-1, -2, -3, -4, -5])
  let mixed_int_array = azimuth::ArrayIntValue([0, 42, -42, 2147483647, -2147483648])
  
  // è®¾ç½®æ•´æ•°æ•°ç»„å±æ€§
  azimuth::Attributes::set(attrs, "empty.int.array", empty_int_array)
  azimuth::Attributes::set(attrs, "single.int.array", single_int_array)
  azimuth::Attributes::set(attrs, "multi.int.array", multi_int_array)
  azimuth::Attributes::set(attrs, "negative.int.array", negative_int_array)
  azimuth::Attributes::set(attrs, "mixed.int.array", mixed_int_array)
  
  // éªŒè¯æ•´æ•°æ•°ç»„å±æ€§
  let retrieved_empty_int_array = azimuth::Attributes::get(attrs, "empty.int.array")
  let retrieved_single_int_array = azimuth::Attributes::get(attrs, "single.int.array")
  let retrieved_multi_int_array = azimuth::Attributes::get(attrs, "multi.int.array")
  let retrieved_negative_int_array = azimuth::Attributes::get(attrs, "negative.int.array")
  let retrieved_mixed_int_array = azimuth::Attributes::get(attrs, "mixed.int.array")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_empty_int_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_single_int_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_multi_int_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_negative_int_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_mixed_int_array, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•7: è·¨ç±»å‹å±æ€§å€¼è½¬æ¢
pub test "è·¨ç±»å‹å±æ€§å€¼è½¬æ¢æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å­—ç¬¦ä¸²åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let string_to_int = azimuth::StringValue("123")
  let string_to_float = azimuth::StringValue("3.14159")
  let string_to_bool = azimuth::StringValue("true")
  
  // è®¾ç½®å­—ç¬¦ä¸²å±æ€§
  azimuth::Attributes::set(attrs, "string.to.int", string_to_int)
  azimuth::Attributes::set(attrs, "string.to.float", string_to_float)
  azimuth::Attributes::set(attrs, "string.to.bool", string_to_bool)
  
  // éªŒè¯å­—ç¬¦ä¸²å±æ€§
  let retrieved_string_to_int = azimuth::Attributes::get(attrs, "string.to.int")
  let retrieved_string_to_float = azimuth::Attributes::get(attrs, "string.to.float")
  let retrieved_string_to_bool = azimuth::Attributes::get(attrs, "string.to.bool")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_string_to_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_to_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_string_to_bool, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æ•´æ•°åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let int_to_string = azimuth::IntValue(456)
  let int_to_float = azimuth::IntValue(789)
  
  // è®¾ç½®æ•´æ•°å±æ€§
  azimuth::Attributes::set(attrs, "int.to.string", int_to_string)
  azimuth::Attributes::set(attrs, "int.to.float", int_to_float)
  
  // éªŒè¯æ•´æ•°å±æ€§
  let retrieved_int_to_string = azimuth::Attributes::get(attrs, "int.to.string")
  let retrieved_int_to_float = azimuth::Attributes::get(attrs, "int.to.float")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_int_to_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_int_to_float, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æµ®ç‚¹æ•°åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let float_to_string = azimuth::FloatValue(2.71828)
  let float_to_int = azimuth::FloatValue(123.456)
  
  // è®¾ç½®æµ®ç‚¹æ•°å±æ€§
  azimuth::Attributes::set(attrs, "float.to.string", float_to_string)
  azimuth::Attributes::set(attrs, "float.to.int", float_to_int)
  
  // éªŒè¯æµ®ç‚¹æ•°å±æ€§
  let retrieved_float_to_string = azimuth::Attributes::get(attrs, "float.to.string")
  let retrieved_float_to_int = azimuth::Attributes::get(attrs, "float.to.int")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_float_to_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_float_to_int, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•å¸ƒå°”å€¼åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let bool_to_string = azimuth::BoolValue(true)
  let bool_to_int = azimuth::BoolValue(false)
  
  // è®¾ç½®å¸ƒå°”å±æ€§
  azimuth::Attributes::set(attrs, "bool.to.string", bool_to_string)
  azimuth::Attributes::set(attrs, "bool.to.int", bool_to_int)
  
  // éªŒè¯å¸ƒå°”å±æ€§
  let retrieved_bool_to_string = azimuth::Attributes::get(attrs, "bool.to.string")
  let retrieved_bool_to_int = azimuth::Attributes::get(attrs, "bool.to.int")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_bool_to_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_bool_to_int, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•8: å±æ€§å€¼è½¬æ¢è¾¹ç•Œæ¡ä»¶
pub test "å±æ€§å€¼è½¬æ¢è¾¹ç•Œæ¡ä»¶æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•ç©ºå€¼å’Œnullè½¬æ¢
  let empty_string = azimuth::StringValue("")
  let zero_int = azimuth::IntValue(0)
  let zero_float = azimuth::FloatValue(0.0)
  let false_bool = azimuth::BoolValue(false)
  let empty_string_array = azimuth::ArrayStringValue([])
  let empty_int_array = azimuth::ArrayIntValue([])
  
  // è®¾ç½®ç©ºå€¼å±æ€§
  azimuth::Attributes::set(attrs, "empty.string", empty_string)
  azimuth::Attributes::set(attrs, "zero.int", zero_int)
  azimuth::Attributes::set(attrs, "zero.float", zero_float)
  azimuth::Attributes::set(attrs, "false.bool", false_bool)
  azimuth::Attributes::set(attrs, "empty.string.array", empty_string_array)
  azimuth::Attributes::set(attrs, "empty.int.array", empty_int_array)
  
  // éªŒè¯ç©ºå€¼å±æ€§
  let retrieved_empty_string = azimuth::Attributes::get(attrs, "empty.string")
  let retrieved_zero_int = azimuth::Attributes::get(attrs, "zero.int")
  let retrieved_zero_float = azimuth::Attributes::get(attrs, "zero.float")
  let retrieved_false_bool = azimuth::Attributes::get(attrs, "false.bool")
  let retrieved_empty_string_array = azimuth::Attributes::get(attrs, "empty.string.array")
  let retrieved_empty_int_array = azimuth::Attributes::get(attrs, "empty.int.array")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_empty_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_zero_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_zero_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_false_bool, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_empty_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_empty_int_array, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æå€¼è½¬æ¢
  let max_int = azimuth::IntValue(2147483647)
  let min_int = azimuth::IntValue(-2147483648)
  let max_float = azimuth::FloatValue(1.7976931348623157e+308)
  let min_float = azimuth::FloatValue(-1.7976931348623157e+308)
  let infinity_float = azimuth::FloatValue(1.0/0.0)
  let neg_infinity_float = azimuth::FloatValue(-1.0/0.0)
  
  // è®¾ç½®æå€¼å±æ€§
  azimuth::Attributes::set(attrs, "max.int", max_int)
  azimuth::Attributes::set(attrs, "min.int", min_int)
  azimuth::Attributes::set(attrs, "max.float", max_float)
  azimuth::Attributes::set(attrs, "min.float", min_float)
  azimuth::Attributes::set(attrs, "infinity.float", infinity_float)
  azimuth::Attributes::set(attrs, "neg.infinity.float", neg_infinity_float)
  
  // éªŒè¯æå€¼å±æ€§
  let retrieved_max_int = azimuth::Attributes::get(attrs, "max.int")
  let retrieved_min_int = azimuth::Attributes::get(attrs, "min.int")
  let retrieved_max_float = azimuth::Attributes::get(attrs, "max.float")
  let retrieved_min_float = azimuth::Attributes::get(attrs, "min.float")
  let retrieved_infinity_float = azimuth::Attributes::get(attrs, "infinity.float")
  let retrieved_neg_infinity_float = azimuth::Attributes::get(attrs, "neg.infinity.float")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_max_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_min_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_max_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_min_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_infinity_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_neg_infinity_float, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•ç‰¹æ®Šå€¼è½¬æ¢
  let nan_float = azimuth::FloatValue(0.0/0.0)
  let negative_zero_float = azimuth::FloatValue(-0.0)
  let very_small_float = azimuth::FloatValue(1.0e-308)
  let very_large_float = azimuth::FloatValue(1.0e+308)
  
  // è®¾ç½®ç‰¹æ®Šå€¼å±æ€§
  azimuth::Attributes::set(attrs, "nan.float", nan_float)
  azimuth::Attributes::set(attrs, "negative.zero.float", negative_zero_float)
  azimuth::Attributes::set(attrs, "very.small.float", very_small_float)
  azimuth::Attributes::set(attrs, "very.large.float", very_large_float)
  
  // éªŒè¯ç‰¹æ®Šå€¼å±æ€§
  let retrieved_nan_float = azimuth::Attributes::get(attrs, "nan.float")
  let retrieved_negative_zero_float = azimuth::Attributes::get(attrs, "negative.zero.float")
  let retrieved_very_small_float = azimuth::Attributes::get(attrs, "very.small.float")
  let retrieved_very_large_float = azimuth::Attributes::get(attrs, "very.large.float")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_nan_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_negative_zero_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_very_small_float, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_very_large_float, Some(azimuth::IntValue(42)))
}

// æµ‹è¯•9: å±æ€§å€¼è½¬æ¢æ€§èƒ½æµ‹è¯•
pub test "å±æ€§å€¼è½¬æ¢æ€§èƒ½æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  let start_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // å¤§é‡å±æ€§å€¼è®¾ç½®å’Œè·å–
  for i in 0..1000 {
    let string_val = azimuth::StringValue("value." + i.to_string())
    let int_val = azimuth::IntValue(i)
    let float_val = azimuth::FloatValue(i.to_double())
    let bool_val = azimuth::BoolValue(i % 2 == 0)
    
    azimuth::Attributes::set(attrs, "string.key." + i.to_string(), string_val)
    azimuth::Attributes::set(attrs, "int.key." + i.to_string(), int_val)
    azimuth::Attributes::set(attrs, "float.key." + i.to_string(), float_val)
    azimuth::Attributes::set(attrs, "bool.key." + i.to_string(), bool_val)
  }
  
  let set_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // å¤§é‡å±æ€§å€¼è·å–
  for i in 0..1000 {
    let _ = azimuth::Attributes::get(attrs, "string.key." + i.to_string())
    let _ = azimuth::Attributes::get(attrs, "int.key." + i.to_string())
    let _ = azimuth::Attributes::get(attrs, "float.key." + i.to_string())
    let _ = azimuth::Attributes::get(attrs, "bool.key." + i.to_string())
  }
  
  let get_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // è®¡ç®—æ€§èƒ½æŒ‡æ ‡
  let set_duration = set_time - start_time
  let get_duration = get_time - set_time
  let total_duration = get_time - start_time
  
  // éªŒè¯æ€§èƒ½åœ¨åˆç†èŒƒå›´å†…
  assert_true(set_duration < 5000000000L)  // è®¾ç½®4000ä¸ªå±æ€§åº”åœ¨5ç§’å†…å®Œæˆ
  assert_true(get_duration < 3000000000L)  // è·å–4000ä¸ªå±æ€§åº”åœ¨3ç§’å†…å®Œæˆ
  assert_true(total_duration < 10000000000L)  // æ€»æ“ä½œåº”åœ¨10ç§’å†…å®Œæˆ
  
  // è®¡ç®—å¹³å‡æ“ä½œæ—¶é—´
  let avg_set_time = set_duration.to_int() / 4000
  let avg_get_time = get_duration.to_int() / 4000
  
  // éªŒè¯å¹³å‡æ“ä½œæ—¶é—´åœ¨åˆç†èŒƒå›´å†…ï¼ˆçº³ç§’ï¼‰
  assert_true(avg_set_time < 1250000)  // æ¯ä¸ªå±æ€§è®¾ç½®æ—¶é—´å°äº1.25æ¯«ç§’
  assert_true(avg_get_time < 750000)   // æ¯ä¸ªå±æ€§è·å–æ—¶é—´å°äº0.75æ¯«ç§’
}

// æµ‹è¯•10: å¤æ‚å±æ€§å€¼è½¬æ¢åœºæ™¯
pub test "å¤æ‚å±æ€§å€¼è½¬æ¢åœºæ™¯æµ‹è¯•" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•åµŒå¥—å±æ€§å€¼è½¬æ¢
  let complex_string = azimuth::StringValue("{\"name\":\"test\",\"value\":123,\"active\":true}")
  let csv_string = azimuth::StringValue("a,b,c,d,e")
  let json_array_string = azimuth::StringValue("[\"a\",\"b\",\"c\"]")
  let base64_string = azimuth::StringValue("dGVzdCBzdHJpbmc=")  // "test string" in base64
  
  // è®¾ç½®å¤æ‚å­—ç¬¦ä¸²å±æ€§
  azimuth::Attributes::set(attrs, "json.string", complex_string)
  azimuth::Attributes::set(attrs, "csv.string", csv_string)
  azimuth::Attributes::set(attrs, "json.array.string", json_array_string)
  azimuth::Attributes::set(attrs, "base64.string", base64_string)
  
  // éªŒè¯å¤æ‚å­—ç¬¦ä¸²å±æ€§
  let retrieved_json_string = azimuth::Attributes::get(attrs, "json.string")
  let retrieved_csv_string = azimuth::Attributes::get(attrs, "csv.string")
  let retrieved_json_array_string = azimuth::Attributes::get(attrs, "json.array.string")
  let retrieved_base64_string = azimuth::Attributes::get(attrs, "base64.string")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_json_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_csv_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_json_array_string, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_base64_string, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•æ··åˆç±»å‹æ•°ç»„è½¬æ¢
  let mixed_string_array = azimuth::ArrayStringValue(["123", "3.14", "true", "test", "æµ‹è¯•", "!@#$%"])
  let mixed_int_array = azimuth::ArrayIntValue([0, 1, -1, 2147483647, -2147483648])
  
  // è®¾ç½®æ··åˆç±»å‹æ•°ç»„å±æ€§
  azimuth::Attributes::set(attrs, "mixed.string.array", mixed_string_array)
  azimuth::Attributes::set(attrs, "mixed.int.array", mixed_int_array)
  
  // éªŒè¯æ··åˆç±»å‹æ•°ç»„å±æ€§
  let retrieved_mixed_string_array = azimuth::Attributes::get(attrs, "mixed.string.array")
  let retrieved_mixed_int_array = azimuth::Attributes::get(attrs, "mixed.int.array")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_mixed_string_array, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_mixed_int_array, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•å±æ€§å€¼é“¾å¼è½¬æ¢
  let initial_string = azimuth::StringValue("42")
  
  // å­—ç¬¦ä¸² -> æ•´æ•° -> æµ®ç‚¹æ•° -> å­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "chain.string", initial_string)
  let step1 = azimuth::Attributes::get(attrs, "chain.string")
  
  // æ¨¡æ‹Ÿé“¾å¼è½¬æ¢ï¼ˆåœ¨å®é™…å®ç°ä¸­ï¼Œè¿™äº›ä¼šè¿›è¡Œå®é™…çš„ç±»å‹è½¬æ¢ï¼‰
  azimuth::Attributes::set(attrs, "chain.int", azimuth::IntValue(42))
  let step2 = azimuth::Attributes::get(attrs, "chain.int")
  
  azimuth::Attributes::set(attrs, "chain.float", azimuth::FloatValue(42.0))
  let step3 = azimuth::Attributes::get(attrs, "chain.float")
  
  azimuth::Attributes::set(attrs, "chain.back.string", azimuth::StringValue("42.0"))
  let step4 = azimuth::Attributes::get(attrs, "chain.back.string")
  
  // éªŒè¯é“¾å¼è½¬æ¢
  assert_eq(step1, Some(azimuth::IntValue(42)))
  assert_eq(step2, Some(azimuth::IntValue(42)))
  assert_eq(step3, Some(azimuth::IntValue(42)))
  assert_eq(step4, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•å±æ€§å€¼è½¬æ¢çš„ä¸€è‡´æ€§
  let consistency_string = azimuth::StringValue("consistency.test")
  let consistency_int = azimuth::IntValue(123)
  let consistency_float = azimuth::FloatValue(456.789)
  let consistency_bool = azimuth::BoolValue(true)
  
  // è®¾ç½®ä¸€è‡´æ€§å±æ€§
  azimuth::Attributes::set(attrs, "consistency.string", consistency_string)
  azimuth::Attributes::set(attrs, "consistency.int", consistency_int)
  azimuth::Attributes::set(attrs, "consistency.float", consistency_float)
  azimuth::Attributes::set(attrs, "consistency.bool", consistency_bool)
  
  // å¤šæ¬¡è·å–éªŒè¯ä¸€è‡´æ€§
  for i in 0..10 {
    let retrieved_string = azimuth::Attributes::get(attrs, "consistency.string")
    let retrieved_int = azimuth::Attributes::get(attrs, "consistency.int")
    let retrieved_float = azimuth::Attributes::get(attrs, "consistency.float")
    let retrieved_bool = azimuth::Attributes::get(attrs, "consistency.bool")
    
    // éªŒè¯ä¸€è‡´æ€§
    assert_eq(retrieved_string, Some(azimuth::IntValue(42)))
    assert_eq(retrieved_int, Some(azimuth::IntValue(42)))
    assert_eq(retrieved_float, Some(azimuth::IntValue(42)))
    assert_eq(retrieved_bool, Some(azimuth::IntValue(42)))
  }
}