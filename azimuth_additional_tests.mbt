// Azimuth é¡¹ç›®é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œè¡¥å……ç°æœ‰æµ‹è¯•è¦†ç›–

test "complex_arithmetic_sequence" {
  // æµ‹è¯•å¤æ‚æ•°åˆ—è®¡ç®—ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—å‰10é¡¹å’Œ
  // 1, 1, 2, 3, 5, 8, 13, 21, 34, 55
  let f1 = 1
  let f2 = 1
  let f3 = add(f1, f2)  // 2
  let f4 = add(f2, f3)  // 3
  let f5 = add(f3, f4)  // 5
  let f6 = add(f4, f5)  // 8
  let f7 = add(f5, f6)  // 13
  let f8 = add(f6, f7)  // 21
  let f9 = add(f7, f8)  // 34
  let f10 = add(f8, f9) // 55
  
  // è®¡ç®—å‰10é¡¹å’Œ
  let sum = add(add(add(add(add(add(add(add(add(f1, f2), f3), f4), f5), f6), f7), f8), f9), f10)
  assert_eq(143, sum)
}

test "geometric_progression_sum" {
  // æµ‹è¯•ç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼š2 + 6 + 18 + 54 + 162
  let a1 = 2
  let r = 3
  let a2 = multiply(a1, r)  // 6
  let a3 = multiply(a2, r)  // 18
  let a4 = multiply(a3, r)  // 54
  let a5 = multiply(a4, r)  // 162
  
  let sum = add(add(add(add(a1, a2), a3), a4), a5)
  assert_eq(242, sum)
}

test "string_with_various_encodings" {
  // æµ‹è¯•ä¸åŒç¼–ç çš„å­—ç¬¦ä¸²å¤„ç†
  let ascii_name = "John"
  let unicode_name = "å¼ ä¸‰"
  let mixed_name = "Johnå¼ ä¸‰"
  let emoji_name = "ğŸŒŸ"
  let complex_name = "ğŸ‘‹Helloä¸–ç•Œ123"
  
  assert_eq_string("Hello, John!", greet(ascii_name))
  assert_eq_string("Hello, å¼ ä¸‰!", greet(unicode_name))
  assert_eq_string("Hello, Johnå¼ ä¸‰!", greet(mixed_name))
  assert_eq_string("Hello, ğŸŒŸ!", greet(emoji_name))
  assert_eq_string("Hello, ğŸ‘‹Helloä¸–ç•Œ123!", greet(complex_name))
}

test "temperature_conversion_precise" {
  // æµ‹è¯•ç²¾ç¡®çš„æ¸©åº¦è½¬æ¢ï¼ˆæ•´æ•°è¿‘ä¼¼ï¼‰
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32
  // ä½¿ç”¨æ•´æ•°è¿‘ä¼¼ï¼šF = C Ã— 2 + 30 - C/5
  
  let celsius = 25
  let rough_fahrenheit = add(multiply(celsius, 2), 30)
  let adjustment = celsius / 5
  let precise_fahrenheit = add(rough_fahrenheit, -adjustment)
  
  assert_eq(77, precise_fahrenheit)  // 25Â°C â‰ˆ 77Â°F
  
  // æµ‹è¯•å†°ç‚¹
  let freezing_c = 0
  let freezing_f = add(multiply(freezing_c, 2), 30)
  assert_eq(30, freezing_f)  // 0Â°C â‰ˆ 30Â°Fï¼ˆè¿‘ä¼¼ï¼‰
  
  // æµ‹è¯•æ²¸ç‚¹
  let boiling_c = 100
  let boiling_f = add(multiply(boiling_c, 2), 30)
  assert_eq(230, boiling_f)  // 100Â°C â‰ˆ 230Â°Fï¼ˆè¿‘ä¼¼ï¼‰
}

test "business_profit_calculation" {
  // æµ‹è¯•å•†ä¸šåˆ©æ¶¦è®¡ç®—
  let revenue = 50000
  let cost1 = 20000
  let cost2 = 15000
  let cost3 = 8000
  
  // è®¡ç®—æ€»æˆæœ¬
  let total_cost = add(add(cost1, cost2), cost3)
  // è®¡ç®—åˆ©æ¶¦
  let profit = add(revenue, -total_cost)
  
  assert_eq(7000, profit)
  
  // è®¡ç®—åˆ©æ¶¦ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let profit_margin = multiply(profit, 100) / revenue
  assert_eq(14, profit_margin)  // 7000/50000 Ã— 100 = 14%
}

test "nested_conditional_calculations" {
  // æµ‹è¯•åµŒå¥—æ¡ä»¶è®¡ç®—
  let x = 15
  let y = 25
  let z = 10
  
  // å¦‚æœ x < yï¼Œåˆ™è®¡ç®— x+zï¼Œå¦åˆ™è®¡ç®— x-z
  let condition1 = x < y
  let result1 = if condition1 { add(x, z) } else { add(x, -z) }
  assert_eq(25, result1)
  
  // å¦‚æœ result1 > 20ï¼Œåˆ™è®¡ç®— result1*yï¼Œå¦åˆ™è®¡ç®— result1+y
  let condition2 = result1 > 20
  let result2 = if condition2 { multiply(result1, y) } else { add(result1, y) }
  assert_eq(625, result2)
  
  // å¦‚æœ z æ˜¯å¶æ•°ï¼Œåˆ™è®¡ç®— result2-xï¼Œå¦åˆ™è®¡ç®— result2+x
  let condition3 = z % 2 == 0
  let result3 = if condition3 { add(result2, -x) } else { add(result2, x) }
  assert_eq(610, result3)
}

test "extreme_boundary_operations" {
  // æµ‹è¯•æå€¼è¾¹ç•Œæ“ä½œ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„è¿ç»­åŠ æ³•
  let result1 = add(add(max_val, 1), 2)
  assert_eq(max_val, result1)
  
  // æµ‹è¯•æœ€å°å€¼çš„è¿ç»­å‡æ³•
  let result2 = add(add(min_val, -1), -2)
  assert_eq(min_val, result2)
  
  // æµ‹è¯•æå€¼æ··åˆè¿ç®—
  let result3 = add(multiply(max_val, 0), min_val)
  assert_eq(min_val, result3)
  
  // æµ‹è¯•æå€¼ä¸1çš„è¿ç®—
  let result4 = add(multiply(min_val, 1), max_val)
  assert_eq(-1, result4)
}

test "array_index_manipulation" {
  // æµ‹è¯•æ•°ç»„ç´¢å¼•æ“ä½œï¼ˆæ¨¡æ‹Ÿï¼‰
  let rows = 5
  let cols = 4
  
  // è®¡ç®—äºŒç»´æ•°ç»„çš„ä¸€ç»´ç´¢å¼•
  let index_2d_to_1d = multiply(rows, cols)  // æ€»å®¹é‡
  assert_eq(20, index_2d_to_1d)
  
  // è®¡ç®—ç‰¹å®šä½ç½®çš„ç´¢å¼•ï¼š(row, col) -> row * cols + col
  let row = 2
  let col = 3
  let specific_index = add(multiply(row, cols), col)
  assert_eq(11, specific_index)
  
  // è®¡ç®—æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•
  let last_row = rows - 1
  let last_col = cols - 1
  let last_index = add(multiply(last_row, cols), last_col)
  assert_eq(19, last_index)
}

test "financial_compound_interest" {
  // æµ‹è¯•å¤åˆ©è®¡ç®—ï¼ˆæ•´æ•°è¿‘ä¼¼ï¼‰
  let principal = 10000
  let rate_percent = 8  // 8%å¹´åˆ©ç‡
  let years = 3
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—ï¼šA = P(1 + r/n)^(nt)
  // è¿™é‡Œç®€åŒ–ä¸ºï¼šA = P + P Ã— r Ã— tï¼ˆå•åˆ©è¿‘ä¼¼ï¼‰
  let simple_interest = multiply(principal, multiply(rate_percent, years)) / 100
  let total_simple = add(principal, simple_interest)
  assert_eq(12400, total_simple)
  
  // æ›´ç²¾ç¡®çš„å¤åˆ©è¿‘ä¼¼ï¼ˆä½¿ç”¨äºŒé¡¹å¼å±•å¼€çš„å‰å‡ é¡¹ï¼‰
  let year1_multiplier = add(100, rate_percent)  // 108
  let year2_multiplier = add(100, multiply(rate_percent, 2))  // 116
  let year3_multiplier = add(100, multiply(rate_percent, 3))  // 124
  
  let total_compound = multiply(principal, year3_multiplier) / 100
  assert_eq(12400, total_compound)
}

test "string_pattern_validation" {
  // æµ‹è¯•å­—ç¬¦ä¸²æ¨¡å¼éªŒè¯
  // æµ‹è¯•é‚®ç®±æ ¼å¼ï¼ˆç®€åŒ–ï¼‰
  let email1 = "user@example.com"
  let email2 = "test.email+tag@domain.co.uk"
  let email3 = "invalid-email"
  
  // é€šè¿‡greetå‡½æ•°éªŒè¯å­—ç¬¦ä¸²å¤„ç†èƒ½åŠ›
  assert_eq_string("Hello, user@example.com!", greet(email1))
  assert_eq_string("Hello, test.email+tag@domain.co.uk!", greet(email2))
  assert_eq_string("Hello, invalid-email!", greet(email3))
  
  // æµ‹è¯•ç”µè¯å·ç æ ¼å¼ï¼ˆç®€åŒ–ï¼‰
  let phone1 = "123-456-7890"
  let phone2 = "+1-555-123-4567"
  let phone3 = "555.123.4567"
  
  assert_eq_string("Hello, 123-456-7890!", greet(phone1))
  assert_eq_string("Hello, +1-555-123-4567!", greet(phone2))
  assert_eq_string("Hello, 555.123.4567!", greet(phone3))
  
  // æµ‹è¯•URLæ ¼å¼ï¼ˆç®€åŒ–ï¼‰
  let url1 = "https://www.example.com"
  let url2 = "http://subdomain.domain.org/path"
  let url3 = "ftp://files.server.net"
  
  assert_eq_string("Hello, https://www.example.com!", greet(url1))
  assert_eq_string("Hello, http://subdomain.domain.org/path!", greet(url2))
  assert_eq_string("Hello, ftp://files.server.net!", greet(url3))
}