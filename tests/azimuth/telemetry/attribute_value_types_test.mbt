// Azimuth Telemetry System - Attribute Value Types Comprehensive Test
// æµ‹è¯•Azimuthé¥æµ‹ç³»ç»Ÿçš„å±æ€§å€¼ç±»å‹å…¨é¢åŠŸèƒ½

test "å±æ€§å€¼ç±»å‹åŸºç¡€æµ‹è¯•" {
  // æµ‹è¯•æ‰€æœ‰AttributeValueæšä¸¾ç±»å‹çš„åˆ›å»ºå’ŒåŒ¹é…
  
  // å­—ç¬¦ä¸²å€¼ç±»å‹
  let string_val = StringValue("test_string")
  assert_eq(match string_val {
    StringValue(s) => s
    _ => "not_string"
  }, "test_string")
  
  // æ•´æ•°å€¼ç±»å‹
  let int_val = IntValue(42)
  assert_eq(match int_val {
    IntValue(i) => i
    _ => 0
  }, 42)
  
  // æµ®ç‚¹æ•°å€¼ç±»å‹
  let float_val = FloatValue(3.14159)
  assert_eq(match float_val {
    FloatValue(f) => f
    _ => 0.0
  }, 3.14159)
  
  // å¸ƒå°”å€¼ç±»å‹
  let bool_val = BoolValue(true)
  assert_eq(match bool_val {
    BoolValue(b) => b
    _ => false
  }, true)
  
  // å­—ç¬¦ä¸²æ•°ç»„å€¼ç±»å‹
  let string_array_val = ArrayStringValue(["item1", "item2", "item3"])
  assert_eq(match string_array_val {
    ArrayStringValue(arr) => arr.length()
    _ => 0
  }, 3)
  
  // æ•´æ•°æ•°ç»„å€¼ç±»å‹
  let int_array_val = ArrayIntValue([1, 2, 3, 4, 5])
  assert_eq(match int_array_val {
    ArrayIntValue(arr) => arr.length()
    _ => 0
  }, 5)
}

test "å±æ€§å€¼è¾¹ç•Œå€¼æµ‹è¯•" {
  // æµ‹è¯•è¾¹ç•Œå€¼å’Œç‰¹æ®Šå€¼
  
  // é›¶å€¼å’Œè´Ÿæ•°
  let zero_int = IntValue(0)
  let neg_int = IntValue(-42)
  let zero_float = FloatValue(0.0)
  let neg_float = FloatValue(-3.14)
  
  assert_eq(match zero_int { IntValue(i) => i _ => 0 }, 0)
  assert_eq(match neg_int { IntValue(i) => i _ => 0 }, -42)
  assert_eq(match zero_float { FloatValue(f) => f _ => 0.0 }, 0.0)
  assert_eq(match neg_float { FloatValue(f) => f _ => 0.0 }, -3.14)
  
  // æœ€å¤§å€¼å’Œæœ€å°å€¼
  let max_int = IntValue(2147483647)
  let min_int = IntValue(-2147483648)
  let max_float = FloatValue(1.7976931348623157e+308)
  let min_float = FloatValue(-1.7976931348623157e+308)
  
  assert_eq(match max_int { IntValue(i) => i _ => 0 }, 2147483647)
  assert_eq(match min_int { IntValue(i) => i _ => 0 }, -2147483648)
  assert_eq(match max_float { FloatValue(f) => f _ => 0.0 }, 1.7976931348623157e+308)
  assert_eq(match min_float { FloatValue(f) => f _ => 0.0 }, -1.7976931348623157e+308)
  
  // ç©ºæ•°ç»„å’Œå•å…ƒç´ æ•°ç»„
  let empty_string_array = ArrayStringValue([])
  let single_string_array = ArrayStringValue(["single"])
  let empty_int_array = ArrayIntValue([])
  let single_int_array = ArrayIntValue([42])
  
  assert_eq(match empty_string_array { ArrayStringValue(arr) => arr.length() _ => 0 }, 0)
  assert_eq(match single_string_array { ArrayStringValue(arr) => arr.length() _ => 0 }, 1)
  assert_eq(match empty_int_array { ArrayIntValue(arr) => arr.length() _ => 0 }, 0)
  assert_eq(match single_int_array { ArrayIntValue(arr) => arr.length() _ => 0 }, 1)
}

test "å±æ€§å€¼ç‰¹æ®Šå­—ç¬¦æµ‹è¯•" {
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²å€¼
  
  // åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = StringValue("ç‰¹æ®Šå­—ç¬¦: !@#$%^&*()_+-=[]{}|;':\",./<>?")
  let unicode_chars = StringValue("Unicode: ğŸš€ ğŸŒŸ ğŸ’» ğŸ“Š")
  let empty_string = StringValue("")
  let whitespace_string = StringValue("   \t\n\r   ")
  
  assert_eq(match special_chars { StringValue(s) => s.length() > 10 _ => false }, true)
  assert_eq(match unicode_chars { StringValue(s) => s.contains("ğŸš€") _ => false }, true)
  assert_eq(match empty_string { StringValue(s) => s.length() _ => 1 }, 0)
  assert_eq(match whitespace_string { StringValue(s) => s.trim().length() _ => 1 }, 0)
  
  // åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²æ•°ç»„
  let special_array = ArrayStringValue([
    "item with spaces",
    "item-with-dashes",
    "item_with_underscores",
    "item.with.dots",
    "item/with/slashes"
  ])
  
  assert_eq(match special_array { ArrayStringValue(arr) => arr.length() _ => 0 }, 5)
}

test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•" {
  // æµ‹è¯•å±æ€§å€¼ç±»å‹çš„é€»è¾‘è½¬æ¢
  
  // å¸ƒå°”å€¼çš„çœŸå€¼æµ‹è¯•
  let true_val = BoolValue(true)
  let false_val = BoolValue(false)
  
  assert_eq(match true_val { BoolValue(b) => b _ => false }, true)
  assert_eq(match false_val { BoolValue(b) => b _ => true }, false)
  
  // æ•°å€¼ç±»å‹çš„ç²¾åº¦æµ‹è¯•
  let precise_float = FloatValue(123.456789012345)
  let scientific_float = FloatValue(1.23e-4)
  let large_float = FloatValue(1.23e+10)
  
  assert_eq(match precise_float { FloatValue(f) => f > 123.0 _ => false }, true)
  assert_eq(match scientific_float { FloatValue(f) => f < 0.001 _ => false }, true)
  assert_eq(match large_float { FloatValue(f) => f > 10000000000.0 _ => false }, true)
  
  // æ•°ç»„å…ƒç´ çš„è®¿é—®æµ‹è¯•
  let string_array = ArrayStringValue(["first", "second", "third"])
  let int_array = ArrayIntValue([10, 20, 30, 40])
  
  let first_string = match string_array {
    ArrayStringValue(arr) => arr[0]
    _ => "default"
  }
  let last_int = match int_array {
    ArrayIntValue(arr) => arr[arr.length() - 1]
    _ => 0
  }
  
  assert_eq(first_string, "first")
  assert_eq(last_int, 40)
}

test "å±æ€§å€¼ç»„åˆæµ‹è¯•" {
  // æµ‹è¯•å±æ€§å€¼çš„ç»„åˆä½¿ç”¨
  
  // åˆ›å»ºå¤šç§ç±»å‹çš„å±æ€§å€¼
  let attributes = [
    ("string_attr", StringValue("string_value")),
    ("int_attr", IntValue(123)),
    ("float_attr", FloatValue(45.67)),
    ("bool_attr", BoolValue(true)),
    ("string_array_attr", ArrayStringValue(["a", "b", "c"])),
    ("int_array_attr", ArrayIntValue([1, 2, 3]))
  ]
  
  // éªŒè¯å±æ€§æ•°é‡
  assert_eq(attributes.length(), 6)
  
  // éªŒè¯æ¯ä¸ªå±æ€§çš„ç±»å‹å’Œå€¼
  for attr in attributes {
    match attr.1 {
      StringValue(s) => assert_eq(s, "string_value")
      IntValue(i) => assert_eq(i, 123)
      FloatValue(f) => assert_eq(f, 45.67)
      BoolValue(b) => assert_eq(b, true)
      ArrayStringValue(arr) => assert_eq(arr.length(), 3)
      ArrayIntValue(arr) => assert_eq(arr.length(), 3)
    }
  } else {
    assert_true(false) // ä¸åº”è¯¥åˆ°è¾¾è¿™é‡Œ
  }
}

test "å±æ€§å€¼æ€§èƒ½æµ‹è¯•" {
  // æµ‹è¯•å±æ€§å€¼çš„åˆ›å»ºå’ŒåŒ¹é…æ€§èƒ½
  
  // åˆ›å»ºå¤§é‡å±æ€§å€¼
  let mut string_values : Array[StringValue] = []
  let mut int_values : Array[IntValue] = []
  let mut float_values : Array[FloatValue] = []
  
  for i = 0; i < 100; i = i + 1 {
    string_values.push(StringValue("string_" + i.to_string()))
    int_values.push(IntValue(i))
    float_values.push(FloatValue(i.to_double() * 1.5))
  }
  
  // éªŒè¯æ•°é‡
  assert_eq(string_values.length(), 100)
  assert_eq(int_values.length(), 100)
  assert_eq(float_values.length(), 100)
  
  // éªŒè¯è¾¹ç•Œå€¼
  let first_string = match string_values[0] { StringValue(s) => s _ => "" }
  let last_int = match int_values[99] { IntValue(i) => i _ => 0 }
  let middle_float = match float_values[50] { FloatValue(f) => f _ => 0.0 }
  
  assert_eq(first_string, "string_0")
  assert_eq(last_int, 99)
  assert_eq(middle_float, 75.0)
}