// Azimuth é¡¹ç›®å¢å¼ºæµ‹è¯•å¥—ä»¶
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæä¾›é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹

// å®šä¹‰è¾…åŠ©å‡½æ•°ä»¥é¿å…å¯¼å…¥é—®é¢˜
fn add(a : Int, b : Int) -> Int {
  a + b
}

fn multiply(a : Int, b : Int) -> Int {
  a * b
}

fn greet(name : String) -> String {
  "Hello, " + name + "!"
}

fn assert_eq(expected : Int, actual : Int) -> Unit {
  if (expected == actual) {
    ()
  } else {
    let _ = 1 / 0
    ()
  }
}

fn assert_eq_string(expected : String, actual : String) -> Unit {
  if (expected == actual) {
    ()
  } else {
    let _ = 1 / 0
    ()
  }
}

test "addition_with_various_ranges" {
  // æµ‹è¯•ä¸åŒèŒƒå›´çš„åŠ æ³•è¿ç®—
  assert_eq(100, add(50, 50))
  assert_eq(0, add(-50, 50))
  assert_eq(-100, add(-50, -50))
  assert_eq(2147483647, add(2147483646, 1))
  assert_eq(-2147483648, add(-2147483647, -1))
}

test "multiplication_comprehensive" {
  // æµ‹è¯•å…¨é¢çš„ä¹˜æ³•è¿ç®—
  assert_eq(25, multiply(5, 5))
  assert_eq(-25, multiply(-5, 5))
  assert_eq(25, multiply(-5, -5))
  assert_eq(0, multiply(12345, 0))
  assert_eq(12345, multiply(12345, 1))
  assert_eq(2147483647, multiply(46341, 46341))
}

test "greet_function_international" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å›½é™…åŒ–æ”¯æŒ
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, JosÃ©!", greet("JosÃ©"))
  assert_eq_string("Hello, ğŸ‘‹!", greet("ğŸ‘‹"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, Ø¹Ø±Ø¨ÙŠ!", greet("Ø¹Ø±Ø¨ÙŠ"))
}

test "complex_business_calculations" {
  // æµ‹è¯•å¤æ‚çš„å•†ä¸šè®¡ç®—åœºæ™¯
  let unit_price = 199
  let quantity = 3
  let discount_rate = 10
  let tax_rate = 8
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  assert_eq(597, subtotal)
  
  // è®¡ç®—æŠ˜æ‰£
  let discount = multiply(subtotal, discount_rate) / 100
  assert_eq(59, discount)
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_total = add(subtotal, -discount)
  assert_eq(538, discounted_total)
  
  // è®¡ç®—ç¨è´¹
  let tax = multiply(discounted_total, tax_rate) / 100
  assert_eq(43, tax)
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let final_total = add(discounted_total, tax)
  assert_eq(581, final_total)
}

test "mathematical_sequence_calculations" {
  // æµ‹è¯•æ•°å­¦åºåˆ—è®¡ç®—
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—å‰10é¡¹çš„å’Œï¼ˆç®€åŒ–ç‰ˆï¼‰
  let fib1 = 1
  let fib2 = 1
  let fib3 = add(fib1, fib2)
  let fib4 = add(fib2, fib3)
  let fib5 = add(fib3, fib4)
  
  assert_eq(2, fib3)
  assert_eq(3, fib4)
  assert_eq(5, fib5)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—ï¼š2, 4, 8, 16, 32
  let geo1 = 2
  let geo2 = multiply(geo1, 2)
  let geo3 = multiply(geo2, 2)
  let geo4 = multiply(geo3, 2)
  let geo5 = multiply(geo4, 2)
  
  assert_eq(4, geo2)
  assert_eq(8, geo3)
  assert_eq(16, geo4)
  assert_eq(32, geo5)
}

test "geometry_practical_calculations" {
  // æµ‹è¯•å®ç”¨å‡ ä½•è®¡ç®—
  let length = 12
  let width = 8
  let height = 5
  
  // è®¡ç®—çŸ©å½¢é¢ç§¯
  let area = multiply(length, width)
  assert_eq(96, area)
  
  // è®¡ç®—çŸ©å½¢å‘¨é•¿
  let perimeter = add(multiply(2, length), multiply(2, width))
  assert_eq(40, perimeter)
  
  // è®¡ç®—é•¿æ–¹ä½“ä½“ç§¯
  let volume = multiply(area, height)
  assert_eq(480, volume)
  
  // è®¡ç®—è¡¨é¢ç§¯
  let side1 = multiply(length, width)
  let side2 = multiply(width, height)
  let side3 = multiply(length, height)
  let surface_area = multiply(2, add(add(side1, side2), side3))
  assert_eq(392, surface_area)
}

test "temperature_conversion_scenarios" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢åœºæ™¯
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32ï¼ˆç®€åŒ–ä¸ºæ•´æ•°è¿ç®—ï¼šF = C Ã— 2 + 30ï¼‰
  let celsius1 = 0
  let celsius2 = 10
  let celsius3 = 20
  
  let f1 = add(multiply(celsius1, 2), 30)
  let f2 = add(multiply(celsius2, 2), 30)
  let f3 = add(multiply(celsius3, 2), 30)
  
  assert_eq(30, f1)
  assert_eq(50, f2)
  assert_eq(70, f3)
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼šC = (F - 30) / 2
  let fahrenheit = 100
  let celsius = add(fahrenheit, -30) / 2
  assert_eq(35, celsius)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // æ•°æ®é›†ï¼š15, 25, 35, 45, 55
  let data1 = 15
  let data2 = 25
  let data3 = 35
  let data4 = 45
  let data5 = 55
  
  // è®¡ç®—æ€»å’Œ
  let sum = add(add(add(add(data1, data2), data3), data4), data5)
  assert_eq(175, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  assert_eq(35, average)
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let diff1 = add(data1, -average)
  let diff2 = add(data2, -average)
  let diff3 = add(data3, -average)
  let diff4 = add(data4, -average)
  let diff5 = add(data5, -average)
  
  let sq1 = multiply(diff1, diff1)
  let sq2 = multiply(diff2, diff2)
  let sq3 = multiply(diff3, diff3)
  let sq4 = multiply(diff4, diff4)
  let sq5 = multiply(diff5, diff5)
  
  let sum_squares = add(add(add(add(sq1, sq2), sq3), sq4), sq5)
  assert_eq(1000, sum_squares)
}

test "time_and_date_calculations" {
  // æµ‹è¯•æ—¶é—´å’Œæ—¥æœŸè®¡ç®—
  // æ—¶é—´è®¡ç®—ï¼šå°†2å°æ—¶30åˆ†é’Ÿè½¬æ¢ä¸ºæ€»åˆ†é’Ÿæ•°
  let hours = 2
  let minutes = 30
  let total_minutes = add(multiply(hours, 60), minutes)
  assert_eq(150, total_minutes)
  
  // è®¡ç®—æ—¶é—´å·®ï¼šä»9:00åˆ°17:30
  let start_hour = 9
  let start_minute = 0
  let end_hour = 17
  let end_minute = 30
  
  let start_total = add(multiply(start_hour, 60), start_minute)
  let end_total = add(multiply(end_hour, 60), end_minute)
  let duration = add(end_total, -start_total)
  
  assert_eq(510, duration)
  
  // è®¡ç®—å·¥ä½œæ—¥æ•°ï¼ˆå‡è®¾æ¯æœˆ22ä¸ªå·¥ä½œæ—¥ï¼‰
  let months = 3
  let work_days_per_month = 22
  let total_work_days = multiply(months, work_days_per_month)
  assert_eq(66, total_work_days)
}

test "error_handling_and_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•è¾¹ç•ŒåŠ æ³•
  assert_eq(max_val, add(max_val, 1))
  assert_eq(min_val, add(min_val, -1))
  assert_eq(-1, add(max_val, min_val))
  
  // æµ‹è¯•è¾¹ç•Œä¹˜æ³•
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
  
  // æµ‹è¯•ç‰¹æ®Šå€¼å¤„ç†
  assert_eq(0, multiply(0, 123456789))
  assert_eq(123456789, add(0, 123456789))
  assert_eq(-123456789, add(0, -123456789))
}