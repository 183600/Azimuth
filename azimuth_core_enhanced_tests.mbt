// Azimuth æ ¸å¿ƒåŠŸèƒ½å¢å¼ºæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "add_function_comprehensive" {
  // å…¨é¢æµ‹è¯•åŠ æ³•åŠŸèƒ½
  // æ­£æ•°ç›¸åŠ 
  assert_eq(100, add(50, 50))
  assert_eq(0, add(0, 0))
  
  // è´Ÿæ•°ç›¸åŠ 
  assert_eq(-100, add(-50, -50))
  assert_eq(0, add(-50, 50))
  
  // æ··åˆç¬¦å·ç›¸åŠ 
  assert_eq(25, add(100, -75))
  assert_eq(-25, add(-100, 75))
}

test "multiply_function_comprehensive" {
  // å…¨é¢æµ‹è¯•ä¹˜æ³•åŠŸèƒ½
  // æ­£æ•°ç›¸ä¹˜
  assert_eq(100, multiply(10, 10))
  assert_eq(0, multiply(100, 0))
  
  // è´Ÿæ•°ç›¸ä¹˜
  assert_eq(100, multiply(-10, -10))
  assert_eq(-100, multiply(-10, 10))
  
  // å¤§æ•°ç›¸ä¹˜
  assert_eq(1000000, multiply(1000, 1000))
  assert_eq(-1000000, multiply(-1000, 1000))
}

test "greet_function_comprehensive" {
  // å…¨é¢æµ‹è¯•é—®å€™å‡½æ•°
  // åŸºæœ¬ç”¨æ³•
  assert_eq_string("Hello, Alice!", greet("Alice"))
  assert_eq_string("Hello, Bob!", greet("Bob"))
  
  // ç‰¹æ®Šå­—ç¬¦
  assert_eq_string("Hello, John Doe!", greet("John Doe"))
  assert_eq_string("Hello, test@example.com!", greet("test@example.com"))
  
  // Unicode å­—ç¬¦
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
}

test "mathematical_expressions" {
  // æµ‹è¯•æ•°å­¦è¡¨è¾¾å¼è®¡ç®—
  let a = 12
  let b = 8
  let c = 5
  
  // (a + b) * c
  let sum_ab = add(a, b)
  let result1 = multiply(sum_ab, c)
  assert_eq(100, result1)
  
  // a * b + c
  let product_ab = multiply(a, b)
  let result2 = add(product_ab, c)
  assert_eq(101, result2)
  
  // (a - b) * (b - c)
  let diff_ab = add(a, -b)
  let diff_bc = add(b, -c)
  let result3 = multiply(diff_ab, diff_bc)
  assert_eq(12, result3)
}

test "real_world_calculations" {
  // æµ‹è¯•å®é™…åº”ç”¨è®¡ç®—
  // é¢ç§¯è®¡ç®—ï¼šçŸ©å½¢é¢ç§¯ = é•¿ Ã— å®½
  let length = 15
  let width = 8
  let area = multiply(length, width)
  assert_eq(120, area)
  
  // å‘¨é•¿è®¡ç®—ï¼šçŸ©å½¢å‘¨é•¿ = 2 Ã— (é•¿ + å®½)
  let perimeter = multiply(2, add(length, width))
  assert_eq(46, perimeter)
  
  // ä½“ç§¯è®¡ç®—ï¼šé•¿æ–¹ä½“ä½“ç§¯ = é•¿ Ã— å®½ Ã— é«˜
  let height = 6
  let volume = multiply(area, height)
  assert_eq(720, volume)
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—
  // ç®€å•åˆ©æ¯ï¼šæœ¬é‡‘ Ã— åˆ©ç‡ Ã— æ—¶é—´
  let principal = 10000
  let rate = 5  // 5%
  let time = 3   // 3å¹´
  let interest = multiply(principal, multiply(rate, time))
  assert_eq(150000, interest)
  
  // æœ¬æ¯åˆè®¡ï¼šæœ¬é‡‘ + åˆ©æ¯
  let total = add(principal, interest)
  assert_eq(160000, total)
  
  // æœˆä¾›è®¡ç®—ï¼ˆç®€åŒ–ï¼‰ï¼šæ€»é¢ / æœŸæ•°
  let months = 36
  let monthly_payment = total / months
  assert_eq(4444, monthly_payment)
}

test "boundary_value_stress" {
  // è¾¹ç•Œå€¼å‹åŠ›æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // è¾¹ç•Œå€¼åŠ æ³•æµ‹è¯•
  assert_eq(max_val, add(max_val, 100))
  assert_eq(max_val, add(max_val, max_val))
  assert_eq(min_val, add(min_val, -100))
  assert_eq(min_val, add(min_val, min_val))
  
  // è¾¹ç•Œå€¼ä¹˜æ³•æµ‹è¯•
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
  assert_eq(max_val, multiply(max_val, 1))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
}

test "string_processing_advanced" {
  // é«˜çº§å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  // é•¿å­—ç¬¦ä¸²å¤„ç†
  let long_string = "ThisIsAVeryLongStringThatContainsMultipleWordsAndShouldBeHandledCorrectly"
  let result1 = greet(long_string)
  assert_eq_string("Hello, " + long_string + "!", result1)
  
  // åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  let result2 = greet(special_chars)
  assert_eq_string("Hello, " + special_chars + "!", result2)
  
  // æ··åˆè¯­è¨€å­—ç¬¦ä¸²
  let mixed_lang = "Helloä¸–ç•Œ123"
  let result3 = greet(mixed_lang)
  assert_eq_string("Hello, " + mixed_lang + "!", result3)
}

test "algorithmic_calculations" {
  // ç®—æ³•è®¡ç®—æµ‹è¯•
  // è®¡ç®—ç­‰å·®æ•°åˆ—å‰né¡¹å’Œï¼šn Ã— (é¦–é¡¹ + æœ«é¡¹) / 2
  let n = 10
  let first_term = 1
  let last_term = 10
  let arithmetic_sum = multiply(n, add(first_term, last_term)) / 2
  assert_eq(55, arithmetic_sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å‰né¡¹å’Œï¼ˆç®€åŒ–ï¼‰ï¼ša Ã— (r^n - 1) / (r - 1)
  let a = 2
  let r = 3
  let n_geo = 4
  // ç®€åŒ–è®¡ç®—ï¼š2 + 6 + 18 + 54 = 80
  let geometric_sum = add(add(add(2, multiply(2, 3)), multiply(2, multiply(3, 3))), multiply(2, multiply(3, multiply(3, 3))))
  assert_eq(80, geometric_sum)
  
  // è®¡ç®—å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + 4Â² + 5Â²
  let square_sum = add(add(add(add(multiply(1, 1), multiply(2, 2)), multiply(3, 3)), multiply(4, 4)), multiply(5, 5))
  assert_eq(55, square_sum)
}

test "error_boundary_conditions" {
  // é”™è¯¯è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  assert_true(add(5, 3) == 8)
  assert_false(add(5, 3) == 9)
  assert_eq(8, add(5, 3))
  assert_eq_string("Hello, Test!", greet("Test"))
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤æ˜¯å¦æ­£ç¡®å·¥ä½œ
  assert_true(add(max_val, 1) == max_val)
  assert_true(add(min_val, -1) == min_val)
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, -1) == min_val)
  
  // æµ‹è¯•ç‰¹æ®Šå€¼å¤„ç†
  assert_eq(0, multiply(0, max_val))
  assert_eq(0, multiply(0, min_val))
  assert_eq(max_val, add(0, max_val))
  assert_eq(min_val, add(0, min_val))
}