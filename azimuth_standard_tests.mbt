// Azimuth é¡¹ç›®æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œæä¾›å¤šæ ·åŒ–çš„æµ‹è¯•åœºæ™¯

// å¯¼å…¥å¿…è¦çš„æ¨¡å—
use azimuth

test "integer_overflow_protection" {
  // æ•´æ•°æº¢å‡ºä¿æŠ¤æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  let overflow_add = azimuth.add(max_val, 1)
  @assertion.assert_eq(max_val, overflow_add)?
  
  let underflow_add = azimuth.add(min_val, -1)
  @assertion.assert_eq(min_val, underflow_add)?
  
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  let overflow_mul = azimuth.multiply(max_val, 2)
  @assertion.assert_eq(max_val, overflow_mul)?
  
  let underflow_mul = azimuth.multiply(min_val, -1)
  @assertion.assert_eq(min_val, underflow_mul)?
}

test "string_concatenation_unicode" {
  // å­—ç¬¦ä¸²è¿æ¥ä¸Unicodeå¤„ç†æµ‹è¯•
  let english_name = "World"
  let chinese_name = "ä¸–ç•Œ"
  let emoji_name = "ğŸŒ"
  let mixed_name = "Helloä¸–ç•ŒğŸŒ"
  
  // æµ‹è¯•è‹±æ–‡å­—ç¬¦ä¸²
  let english_result = azimuth.greet(english_name)
  @assertion.assert_eq_string("Hello, World!", english_result)?
  
  // æµ‹è¯•ä¸­æ–‡å­—ç¬¦ä¸²
  let chinese_result = azimuth.greet(chinese_name)
  @assertion.assert_eq_string("Hello, ä¸–ç•Œ!", chinese_result)?
  
  // æµ‹è¯•emojiå­—ç¬¦ä¸²
  let emoji_result = azimuth.greet(emoji_name)
  @assertion.assert_eq_string("Hello, ğŸŒ!", emoji_result)?
  
  // æµ‹è¯•æ··åˆå­—ç¬¦ä¸²
  let mixed_result = azimuth.greet(mixed_name)
  @assertion.assert_eq_string("Hello, Helloä¸–ç•ŒğŸŒ!", mixed_result)?
}

test "mathematical_properties" {
  // æ•°å­¦æ€§è´¨éªŒè¯æµ‹è¯•
  let a = 15
  let b = 7
  let c = 3
  
  // éªŒè¯åŠ æ³•äº¤æ¢å¾‹
  let commutative_add1 = azimuth.add(a, b)
  let commutative_add2 = azimuth.add(b, a)
  @assertion.assert_eq(commutative_add1, commutative_add2)?
  
  // éªŒè¯ä¹˜æ³•äº¤æ¢å¾‹
  let commutative_mul1 = azimuth.multiply(a, b)
  let commutative_mul2 = azimuth.multiply(b, a)
  @assertion.assert_eq(commutative_mul1, commutative_mul2)?
  
  // éªŒè¯åˆ†é…å¾‹
  let distributive1 = azimuth.multiply(a, azimuth.add(b, c))
  let distributive2 = azimuth.add(azimuth.multiply(a, b), azimuth.multiply(a, c))
  @assertion.assert_eq(distributive1, distributive2)?
}

test "financial_calculations" {
  // é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  let principal = 10000  // æœ¬é‡‘
  let rate = 5          // åˆ©ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰
  let years = 3         // å¹´æ•°
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼šåˆ©æ¯ = æœ¬é‡‘ Ã— åˆ©ç‡ Ã— å¹´æ•°
  let interest = azimuth.multiply(principal, azimuth.multiply(rate, years))
  
  // æœ¬æ¯å’Œ = æœ¬é‡‘ + åˆ©æ¯
  let total = azimuth.add(principal, interest)
  
  // éªŒè¯è®¡ç®—ç»“æœï¼š10000 + 10000Ã—5Ã—3 = 160000
  @assertion.assert_eq(160000, total)?
  
  // æµ‹è¯•å¤åˆ©è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šæœ¬æ¯å’Œ = æœ¬é‡‘ Ã— (1 + åˆ©ç‡Ã—å¹´æ•°)
  let compound_total = azimuth.multiply(principal, azimuth.add(1, azimuth.multiply(rate, years)))
  @assertion.assert_eq(160000, compound_total)?
}

test "geometry_calculations" {
  // å‡ ä½•è®¡ç®—æµ‹è¯•
  let length = 12  // çŸ©å½¢é•¿
  let width = 8    // çŸ©å½¢å®½
  let radius = 5   // åœ†åŠå¾„
  
  // è®¡ç®—çŸ©å½¢å‘¨é•¿ï¼š2 Ã— (é•¿ + å®½)
  let perimeter = azimuth.multiply(2, azimuth.add(length, width))
  @assertion.assert_eq(40, perimeter)?
  
  // è®¡ç®—çŸ©å½¢é¢ç§¯ï¼šé•¿ Ã— å®½
  let area = azimuth.multiply(length, width)
  @assertion.assert_eq(96, area)?
  
  // è®¡ç®—åœ†å‘¨é•¿ï¼ˆç®€åŒ–ï¼‰ï¼š2 Ã— Ï€ Ã— r â‰ˆ 2 Ã— 3 Ã— r
  let circumference = azimuth.multiply(azimuth.multiply(2, 3), radius)
  @assertion.assert_eq(30, circumference)?
  
  // è®¡ç®—åœ†é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šÏ€ Ã— rÂ² â‰ˆ 3 Ã— rÂ²
  let circle_area = azimuth.multiply(3, azimuth.multiply(radius, radius))
  @assertion.assert_eq(75, circle_area)?
}

test "temperature_conversion" {
  // æ¸©åº¦è½¬æ¢æµ‹è¯•
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šF = C Ã— 2 + 30
  
  // æµ‹è¯•å†°ç‚¹æ¸©åº¦
  let freezing_celsius = 0
  let freezing_fahrenheit = azimuth.add(azimuth.multiply(freezing_celsius, 2), 30)
  @assertion.assert_eq(30, freezing_fahrenheit)?
  
  // æµ‹è¯•å®¤æ¸©
  let room_celsius = 20
  let room_fahrenheit = azimuth.add(azimuth.multiply(room_celsius, 2), 30)
  @assertion.assert_eq(70, room_fahrenheit)?
  
  // æµ‹è¯•æ²¸ç‚¹æ¸©åº¦
  let boiling_celsius = 100
  let boiling_fahrenheit = azimuth.add(azimuth.multiply(boiling_celsius, 2), 30)
  @assertion.assert_eq(230, boiling_fahrenheit)?
}

test "shopping_cart_calculation" {
  // è´­ç‰©è½¦è®¡ç®—æµ‹è¯•
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let item3_price = 99
  let item3_quantity = 1
  let shipping_fee = 20
  let tax_rate = 8  // 8%
  
  // è®¡ç®—æ¯ç§å•†å“çš„æ€»ä»·
  let total1 = azimuth.multiply(item1_price, item1_quantity)
  let total2 = azimuth.multiply(item2_price, item2_quantity)
  let total3 = azimuth.multiply(item3_price, item3_quantity)
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = azimuth.add(azimuth.add(total1, total2), total3)
  
  // è®¡ç®—ç¨è´¹
  let tax = azimuth.multiply(subtotal, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let final_total = azimuth.add(azimuth.add(subtotal, tax), shipping_fee)
  
  // éªŒè¯æ€»ä»·ï¼š(299Ã—2 + 199Ã—3 + 99Ã—1) + ç¨è´¹ + è¿è´¹
  // = (598 + 597 + 99) + 1294Ã—8/100 + 20 = 1294 + 103 + 20 = 1417
  @assertion.assert_eq(1417, final_total)?
}

test "time_calculations" {
  // æ—¶é—´è®¡ç®—æµ‹è¯•
  let hours = 2
  let minutes = 45
  let seconds = 30
  
  // è½¬æ¢ä¸ºæ€»åˆ†é’Ÿæ•°
  let total_minutes = azimuth.add(azimuth.multiply(hours, 60), minutes)
  @assertion.assert_eq(165, total_minutes)?
  
  // è½¬æ¢ä¸ºæ€»ç§’æ•°
  let total_seconds = azimuth.multiply(total_minutes, 60)
  @assertion.assert_eq(9900, total_seconds)?
  
  // è®¡ç®—æ—¶é—´å·®
  let start_hour = 8   // 8:00 AM
  let start_minute = 0
  let end_hour = 17    // 5:00 PM
  let end_minute = 30
  
  let start_total = azimuth.add(azimuth.multiply(start_hour, 60), start_minute)
  let end_total = azimuth.add(azimuth.multiply(end_hour, 60), end_minute)
  let duration = azimuth.add(end_total, -start_total)
  
  @assertion.assert_eq(570, duration)?  // 9.5å°æ—¶ = 570åˆ†é’Ÿ
}

test "statistical_analysis" {
  // ç»Ÿè®¡åˆ†ææµ‹è¯•
  let data1 = 85
  let data2 = 90
  let data3 = 78
  let data4 = 92
  let data5 = 80
  
  // è®¡ç®—æ€»å’Œ
  let sum = azimuth.add(azimuth.add(azimuth.add(azimuth.add(data1, data2), data3), data4), data5)
  @assertion.assert_eq(425, sum)?
  
  // è®¡ç®—å¹³å‡å€¼
  let mean = sum / 5
  @assertion.assert_eq(85, mean)?
  
  // è®¡ç®—æå·®
  let max_val = 92
  let min_val = 78
  let range = azimuth.add(max_val, -min_val)
  @assertion.assert_eq(14, range)?
  
  // è®¡ç®—æ–¹å·®ï¼ˆç®€åŒ–ï¼‰
  let diff1 = azimuth.add(data1, -mean)
  let diff2 = azimuth.add(data2, -mean)
  let diff3 = azimuth.add(data3, -mean)
  let diff4 = azimuth.add(data4, -mean)
  let diff5 = azimuth.add(data5, -mean)
  
  let variance = azimuth.add(azimuth.add(azimuth.add(azimuth.add(
    azimuth.multiply(diff1, diff1), 
    azimuth.multiply(diff2, diff2)), 
    azimuth.multiply(diff3, diff3)), 
    azimuth.add(azimuth.multiply(diff4, diff4), azimuth.multiply(diff5, diff5))) / 5
  
  @assertion.assert_eq(26, variance)?
}

test "game_logic_simulation" {
  // æ¸¸æˆé€»è¾‘æ¨¡æ‹Ÿæµ‹è¯•
  let base_score = 1000
  let level = 5
  let combo_multiplier = 3
  let bonus_points = 500
  let penalty = 200
  
  // è®¡ç®—ç­‰çº§åŠ æˆ
  let level_bonus = azimuth.multiply(base_score, level)
  
  // è®¡ç®—è¿å‡»åŠ æˆ
  let combo_bonus = azimuth.multiply(level_bonus, combo_multiplier)
  
  // è®¡ç®—æœ€ç»ˆå¾—åˆ†
  let final_score = azimuth.add(azimuth.add(combo_bonus, bonus_points), -penalty)
  
  // éªŒè¯å¾—åˆ†ï¼š(1000Ã—5)Ã—3 + 500 - 200 = 15000 + 300 = 15300
  @assertion.assert_eq(15300, final_score)?
  
  // æµ‹è¯•æ’åè®¡ç®—ï¼ˆå‰10%é¢å¤–åŠ åˆ†ï¼‰
  let top_percentage = 10
  let rank_bonus = azimuth.multiply(final_score, top_percentage) / 100
  let rank_total = azimuth.add(final_score, rank_bonus)
  
  @assertion.assert_eq(16830, rank_total)?
}