// æ–°å¢ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•ï¼Œè¦†ç›–å„ç§æµ‹è¯•åœºæ™¯

test "bitwise_operations_simulation" {
  // é€šè¿‡ç®—æœ¯è¿ç®—æ¨¡æ‹Ÿä½è¿ç®—
  // æ¨¡æ‹Ÿå·¦ç§»æ“ä½œï¼šx << n = x * 2^n
  @azimuth.assert_eq(8, @azimuth.multiply(1, 8))  // 1 << 3 = 8
  @azimuth.assert_eq(16, @azimuth.multiply(2, 8)) // 2 << 3 = 16
  @azimuth.assert_eq(40, @azimuth.multiply(5, 8)) // 5 << 3 = 40
  
  // æ¨¡æ‹Ÿå³ç§»æ“ä½œï¼šx >> n = x / 2^n (å‘ä¸Šå–æ•´)
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(16, 8))  // 16 >> 3 = 2
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(10, 8))  // 10 >> 3 = 2 (å‘ä¸Šå–æ•´)
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(9, 8))   // 9 >> 3 = 2 (å‘ä¸Šå–æ•´)
}

test "string_encoding_and_length" {
  // æµ‹è¯•å­—ç¬¦ä¸²ç¼–ç å’Œé•¿åº¦ç›¸å…³çš„è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq_string("Hello, ASCII!", @azimuth.greet("ASCII"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡123!", @azimuth.greet("ä¸­æ–‡123"))
  @azimuth.assert_eq_string("Hello, ğŸŒŸğŸš€!", @azimuth.greet("ğŸŒŸğŸš€"))
  @azimuth.assert_eq_string("Hello, \n\t\r!", @azimuth.greet("\n\t\r"))
  @azimuth.assert_eq_string("Hello, \"\\!", @azimuth.greet("\"\\"))
  
  // æµ‹è¯•æç«¯é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ˆç›¸å¯¹ï¼‰
  let long_name = "TheQuickBrownFoxJumpsOverTheLazyDog"
  @azimuth.assert_eq_string("Hello, " + long_name + "!", @azimuth.greet(long_name))
}

test "numerical_range_validation" {
  // æ•°å€¼èŒƒå›´éªŒè¯æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // éªŒè¯åŠ æ³•ä¸ä¼šè¶…å‡ºèŒƒå›´
  let safe_add1 = @azimuth.add(1000000, 1000000)
  let safe_add2 = @azimuth.add(-1000000, -1000000)
  @azimuth.assert_eq(2000000, safe_add1)
  @azimuth.assert_eq(-2000000, safe_add2)
  
  // éªŒè¯ä¹˜æ³•ä¸ä¼šè¶…å‡ºèŒƒå›´
  let safe_mul1 = @azimuth.multiply(1000, 1000)
  let safe_mul2 = @azimuth.multiply(-1000, 1000)
  @azimuth.assert_eq(1000000, safe_mul1)
  @azimuth.assert_eq(-1000000, safe_mul2)
  
  // éªŒè¯è¾¹ç•Œå€¼å¤„ç†
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
}

test "financial_calculations" {
  // é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—å¤åˆ©
  let principal = 10000  // æœ¬é‡‘
  let rate = 2           // åˆ©ç‡ 50% (1/2)
  let years = 3          // å¹´æ•°
  
  // ç¬¬ä¸€å¹´ï¼š10000 * 1.5 = 15000
  let year1 = @azimuth.divide_with_ceil(@azimuth.multiply(principal, 3), 2)
  
  // ç¬¬äºŒå¹´ï¼š15000 * 1.5 = 22500
  let year2 = @azimuth.divide_with_ceil(@azimuth.multiply(year1, 3), 2)
  
  // ç¬¬ä¸‰å¹´ï¼š22500 * 1.5 = 33750
  let year3 = @azimuth.divide_with_ceil(@azimuth.multiply(year2, 3), 2)
  
  @azimuth.assert_eq(15000, year1)
  @azimuth.assert_eq(22500, year2)
  @azimuth.assert_eq(33750, year3)
  
  // åœºæ™¯ï¼šè´·æ¬¾åˆ†æœŸè®¡ç®—
  let loan_amount = 120000
  let months = 12
  let monthly_payment = @azimuth.divide_with_ceil(loan_amount, months)
  @azimuth.assert_eq(10000, monthly_payment)
}

test "mathematical_series" {
  // æ•°å­¦åºåˆ—æµ‹è¯•
  // æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let fib1 = 1
  let fib2 = 1
  let fib3 = @azimuth.add(fib1, fib2)      // 2
  let fib4 = @azimuth.add(fib2, fib3)      // 3
  let fib5 = @azimuth.add(fib3, fib4)      // 5
  let fib6 = @azimuth.add(fib4, fib5)      // 8
  
  @azimuth.assert_eq(2, fib3)
  @azimuth.assert_eq(3, fib4)
  @azimuth.assert_eq(5, fib5)
  @azimuth.assert_eq(8, fib6)
  
  // å¹³æ–¹æ•°åºåˆ—
  let square1 = @azimuth.multiply(1, 1)      // 1
  let square2 = @azimuth.multiply(2, 2)      // 4
  let square3 = @azimuth.multiply(3, 3)      // 9
  let square4 = @azimuth.multiply(4, 4)      // 16
  
  @azimuth.assert_eq(1, square1)
  @azimuth.assert_eq(4, square2)
  @azimuth.assert_eq(9, square3)
  @azimuth.assert_eq(16, square4)
}

test "error_boundary_conditions" {
  // é”™è¯¯è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºåçš„å‡½æ•°çŠ¶æ€
  let overflow_add = @azimuth.add(max_val, max_val)
  let overflow_mul = @azimuth.multiply(max_val, 2)
  
  // éªŒè¯æ­£å¸¸æ“ä½œä»ç„¶å·¥ä½œ
  let normal_add = @azimuth.add(42, 58)
  let normal_mul = @azimuth.multiply(6, 7)
  let normal_greet = @azimuth.greet("Test")
  
  @azimuth.assert_eq(100, normal_add)
  @azimuth.assert_eq(42, normal_mul)
  @azimuth.assert_eq_string("Hello, Test!", normal_greet)
  
  // éªŒè¯æº¢å‡ºç»“æœåœ¨è¾¹ç•Œå†…
  @azimuth.assert_true(overflow_add == max_val || overflow_add == min_val)
  @azimuth.assert_true(overflow_mul == max_val || overflow_mul == min_val)
}

test "performance_critical_operations" {
  // æ€§èƒ½å…³é”®æ“ä½œæµ‹è¯•
  let base = 100
  
  // è¿ç»­è¿ç®—æ€§èƒ½æµ‹è¯•
  let result1 = @azimuth.add(@azimuth.add(@azimuth.add(base, 50), 25), 10)
  let result2 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(base, 2), 3), 4)
  let result3 = @azimuth.divide_with_ceil(@azimuth.divide_with_ceil(@azimuth.divide_with_ceil(1000, 3), 2), 5)
  
  @azimuth.assert_eq(185, result1)  // 100 + 50 + 25 + 10
  @azimuth.assert_eq(2400, result2) // 100 * 2 * 3 * 4
  @azimuth.assert_eq(34, result3)   // ceil(ceil(ceil(1000/3)/2)/5)
  
  // å¤§æ•°è¿ç®—æ€§èƒ½æµ‹è¯•
  let large_num = 100000
  let large_result = @azimuth.add(@azimuth.multiply(large_num, 10), @azimuth.divide_with_ceil(large_num, 3))
  @azimuth.assert_eq(1033334, large_result)
}

test "internationalization_support" {
  // å›½é™…åŒ–æ”¯æŒæµ‹è¯•
  // æµ‹è¯•ä¸åŒè¯­è¨€çš„é—®å€™
  @azimuth.assert_eq_string("Hello, English!", @azimuth.greet("English"))
  @azimuth.assert_eq_string("Hello, ä¸­æ–‡!", @azimuth.greet("ä¸­æ–‡"))
  @azimuth.assert_eq_string("Hello, æ—¥æœ¬èª!", @azimuth.greet("æ—¥æœ¬èª"))
  @azimuth.assert_eq_string("Hello, í•œêµ­ì–´!", @azimuth.greet("í•œêµ­ì–´"))
  @azimuth.assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", @azimuth.greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  @azimuth.assert_eq_string("Hello, Ñ€ÑƒÑÑĞºĞ¸Ğ¹!", @azimuth.greet("Ñ€ÑƒÑÑĞºĞ¸Ğ¹"))
  @azimuth.assert_eq_string("Hello, espaÃ±ol!", @azimuth.greet("espaÃ±ol"))
  @azimuth.assert_eq_string("Hello, franÃ§ais!", @azimuth.greet("franÃ§ais"))
  @azimuth.assert_eq_string("Hello, portuguÃªs!", @azimuth.greet("portuguÃªs"))
  @azimuth.assert_eq_string("Hello, italiano!", @azimuth.greet("italiano"))
}

test "scientific_calculations" {
  // ç§‘å­¦è®¡ç®—æµ‹è¯•
  // åœºæ™¯ï¼šç‰©ç†å­¦è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let mass = 1000      // è´¨é‡
  let acceleration = 9 // åŠ é€Ÿåº¦
  let force = @azimuth.multiply(mass, acceleration)  // F = ma
  @azimuth.assert_eq(9000, force)
  
  // åœºæ™¯ï¼šåŒ–å­¦ååº”è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let concentration1 = 25
  let concentration2 = 75
  let total_concentration = @azimuth.add(concentration1, concentration2)
  let ratio1 = @azimuth.divide_with_ceil(@azimuth.multiply(concentration1, 100), total_concentration)
  let ratio2 = @azimuth.divide_with_ceil(@azimuth.multiply(concentration2, 100), total_concentration)
  
  @azimuth.assert_eq(100, total_concentration)
  @azimuth.assert_eq(25, ratio1)  // 25%
  @azimuth.assert_eq(75, ratio2)  // 75%
  
  // åœºæ™¯ï¼šç»Ÿè®¡å­¦è®¡ç®—
  let data1 = 85
  let data2 = 92
  let data3 = 78
  let data4 = 90
  let sum = @azimuth.add(@azimuth.add(@azimuth.add(data1, data2), data3), data4)
  let average = @azimuth.divide_with_ceil(sum, 4)
  
  @azimuth.assert_eq(345, sum)
  @azimuth.assert_eq(87, average)
}

test "algorithm_complexity_validation" {
  // ç®—æ³•å¤æ‚åº¦éªŒè¯æµ‹è¯•
  // çº¿æ€§å¤æ‚åº¦æ¨¡æ‹Ÿï¼šO(n)
  let n = 100
  let linear_sum = 0
  // æ¨¡æ‹Ÿçº¿æ€§ç´¯åŠ ï¼ˆå®é™…ä½¿ç”¨å¸¸æ•°æ—¶é—´æ“ä½œï¼‰
  let linear_result = @azimuth.multiply(n, 50)  // å‡è®¾æ¯ä¸ªå…ƒç´ å¹³å‡å€¼ä¸º50
  @azimuth.assert_eq(5000, linear_result)
  
  // å¹³æ–¹å¤æ‚åº¦æ¨¡æ‹Ÿï¼šO(nÂ²)
  let n_squared = @azimuth.multiply(n, n)
  let quadratic_result = @azimuth.divide_with_ceil(n_squared, 2)  // n*(n+1)/2 çš„ç®€åŒ–ç‰ˆ
  @azimuth.assert_eq(5000, quadratic_result)
  
  // å¯¹æ•°å¤æ‚åº¦æ¨¡æ‹Ÿï¼šO(log n)
  // æ¨¡æ‹ŸäºŒåˆ†æŸ¥æ‰¾çš„æ­¥éª¤æ•°
  let log_steps = @azimuth.divide_with_ceil(@azimuth.divide_with_ceil(n, 2), 2)
  @azimuth.assert_eq(25, log_steps)
}