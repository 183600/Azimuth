// Azimuth é¡¹ç›®æ–°å¢ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

// æµ‹è¯•ç”¨ä¾‹1: é€’å½’è®¡ç®—æ¨¡æ‹Ÿ - æ–æ³¢é‚£å¥‘æ•°åˆ—
test "fibonacci_sequence_calculation" {
  // è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—å‰å‡ é¡¹: F(0)=0, F(1)=1, F(2)=1, F(3)=2, F(4)=3, F(5)=5
  // ä½¿ç”¨å±•å¼€æ–¹å¼è®¡ç®—ï¼Œé¿å…é€’å½’
  let f0 = 0
  let f1 = 1
  let f2 = @azimuth.add(f0, f1)  // 1
  let f3 = @azimuth.add(f1, f2)  // 2
  let f4 = @azimuth.add(f2, f3)  // 3
  let f5 = @azimuth.add(f3, f4)  // 5
  
  @azimuth.assert_eq(0, f0)
  @azimuth.assert_eq(1, f1)
  @azimuth.assert_eq(1, f2)
  @azimuth.assert_eq(2, f3)
  @azimuth.assert_eq(3, f4)
  @azimuth.assert_eq(5, f5)
}

// æµ‹è¯•ç”¨ä¾‹2: æ¡ä»¶é€»è¾‘åˆ†æ”¯æµ‹è¯•
test "conditional_logic_branches" {
  // æµ‹è¯•åŸºäºä¸åŒæ¡ä»¶çš„è®¡ç®—è·¯å¾„
  let x = 10
  let y = 20
  
  // æ¡ä»¶1: x < y
  let result1 = if x < y {
    @azimuth.add(x, y)  // 30
  } else {
    @azimuth.multiply(x, y)
  }
  @azimuth.assert_eq(30, result1)
  
  // æ¡ä»¶2: x > y (false)
  let result2 = if x > y {
    @azimuth.add(x, y)
  } else {
    @azimuth.multiply(x, y)  // 200
  }
  @azimuth.assert_eq(200, result2)
  
  // æ¡ä»¶3: åµŒå¥—æ¡ä»¶
  let result3 = if x > 5 {
    if y > 15 {
      @azimuth.multiply(@azimuth.add(x, y), 2)  // (10+20)*2 = 60
    } else {
      @azimuth.add(x, y)
    }
  } else {
    @azimuth.multiply(x, y)
  }
  @azimuth.assert_eq(60, result3)
}

// æµ‹è¯•ç”¨ä¾‹3: å­—ç¬¦ä¸²å¤„ç†è¾¹ç•Œæƒ…å†µ
test "string_processing_edge_cases" {
  // æµ‹è¯•å„ç§å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  // ç©ºå­—ç¬¦ä¸²
  let empty_result = @azimuth.greet("")
  @azimuth.assert_eq_string("Hello, !", empty_result)
  
  // å•ä¸ªå­—ç¬¦
  let single_char_result = @azimuth.greet("A")
  @azimuth.assert_eq_string("Hello, A!", single_char_result)
  
  // åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  let spaced_result = @azimuth.greet(" John Doe ")
  @azimuth.assert_eq_string("Hello,  John Doe !", spaced_result)
  
  // åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars_result = @azimuth.greet("!@#$%^&*()")
  @azimuth.assert_eq_string("Hello, !@#$%^&*()!", special_chars_result)
  
  // åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  let unicode_result = @azimuth.greet("ğŸŒä¸–ç•Œ")
  @azimuth.assert_eq_string("Hello, ğŸŒä¸–ç•Œ!", unicode_result)
}

// æµ‹è¯•ç”¨ä¾‹4: æ•°å­¦å‡½æ•°ç»„åˆåº”ç”¨
test "mathematical_function_combinations" {
  // å¤æ‚æ•°å­¦è¡¨è¾¾å¼è®¡ç®—: (a+b)*(c-d) + e/f
  let a = 15
  let b = 10
  let c = 20
  let d = 8
  let e = 100
  let f = 5
  
  // åˆ†æ­¥è®¡ç®—
  let sum_ab = @azimuth.add(a, b)  // 25
  let diff_cd = @azimuth.add(c, -d)  // 12
  let product = @azimuth.multiply(sum_ab, diff_cd)  // 300
  let division = e / f  // 20
  let result = @azimuth.add(product, division)  // 320
  
  @azimuth.assert_eq(320, result)
  
  // å¦ä¸€ä¸ªå¤æ‚è¡¨è¾¾å¼: a*b + c*d - e/f
  let product1 = @azimuth.multiply(a, b)  // 150
  let product2 = @azimuth.multiply(c, d)  // 160
  let sum_products = @azimuth.add(product1, product2)  // 310
  let result2 = @azimuth.add(sum_products, -division)  // 290
  
  @azimuth.assert_eq(290, result2)
}

// æµ‹è¯•ç”¨ä¾‹5: è¾¹ç•Œå€¼ç»„åˆæµ‹è¯•
test "boundary_value_combinations" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼ä¸æœ€å°å€¼çš„è¿ç®—
  let sum_max_min = @azimuth.add(max_val, min_val)  // -1
  @azimuth.assert_eq(-1, sum_max_min)
  
  // æœ€å¤§å€¼ä¸è‡ªèº«ç›¸åŠ ï¼ˆåº”è¯¥æº¢å‡ºï¼‰
  let sum_max_max = @azimuth.add(max_val, max_val)  // åº”è¯¥è¿”å›max_val
  @azimuth.assert_eq(max_val, sum_max_max)
  
  // æœ€å°å€¼ä¸è‡ªèº«ç›¸åŠ ï¼ˆåº”è¯¥æº¢å‡ºï¼‰
  let sum_min_min = @azimuth.add(min_val, min_val)  // åº”è¯¥è¿”å›min_val
  @azimuth.assert_eq(min_val, sum_min_min)
  
  // æœ€å¤§å€¼ä¸1ç›¸ä¹˜
  let mul_max_one = @azimuth.multiply(max_val, 1)
  @azimuth.assert_eq(max_val, mul_max_one)
  
  // æœ€å°å€¼ä¸1ç›¸ä¹˜
  let mul_min_one = @azimuth.multiply(min_val, 1)
  @azimuth.assert_eq(min_val, mul_min_one)
  
  // æœ€å°å€¼ä¸-1ç›¸ä¹˜ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰
  let mul_min_neg_one = @azimuth.multiply(min_val, -1)
  @azimuth.assert_eq(min_val, mul_min_neg_one)
}

// æµ‹è¯•ç”¨ä¾‹6: å®é™…åº”ç”¨åœºæ™¯ - è´­ç‰©è½¦è®¡ç®—
test "shopping_cart_practical_calculation" {
  // å•†å“ä»·æ ¼å’Œæ•°é‡
  let item1_price = 299
  let item1_quantity = 2
  let item2_price = 199
  let item2_quantity = 3
  let item3_price = 99
  let item3_quantity = 1
  
  // æŠ˜æ‰£è§„åˆ™: æ»¡500å‡50
  let discount_threshold = 500
  let discount_amount = 50
  
  // è¿è´¹: æ»¡300å…è¿è´¹ï¼Œå¦åˆ™15å…ƒ
  let shipping_threshold = 300
  let shipping_fee = 15
  
  // è®¡ç®—å„å•†å“æ€»ä»·
  let total1 = @azimuth.multiply(item1_price, item1_quantity)  // 598
  let total2 = @azimuth.multiply(item2_price, item2_quantity)  // 597
  let total3 = @azimuth.multiply(item3_price, item3_quantity)  // 99
  
  // è®¡ç®—è´­ç‰©è½¦æ€»ä»·
  let subtotal = @azimuth.add(@azimuth.add(total1, total2), total3)  // 1294
  
  // åº”ç”¨æŠ˜æ‰£
  let final_discount = if subtotal > discount_threshold {
    discount_amount
  } else {
    0
  }
  let after_discount = @azimuth.add(subtotal, -final_discount)  // 1244
  
  // è®¡ç®—è¿è´¹
  let final_shipping = if after_discount > shipping_threshold {
    0
  } else {
    shipping_fee
  }
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let final_total = @azimuth.add(after_discount, final_shipping)  // 1244
  
  @azimuth.assert_eq(1244, final_total)
}

// æµ‹è¯•ç”¨ä¾‹7: æ•°å€¼èŒƒå›´éªŒè¯
test "numeric_range_validation" {
  // æµ‹è¯•æ­£æ•°èŒƒå›´
  let small_positive = 1
  let medium_positive = 1000
  let large_positive = 1000000
  
  @azimuth.assert_true(@azimuth.add(small_positive, medium_positive) > 0)
  @azimuth.assert_true(@azimuth.multiply(medium_positive, large_positive) > 0)
  
  // æµ‹è¯•è´Ÿæ•°èŒƒå›´
  let small_negative = -1
  let medium_negative = -1000
  let large_negative = -1000000
  
  @azimuth.assert_true(@azimuth.add(small_negative, medium_negative) < 0)
  @azimuth.assert_true(@azimuth.multiply(medium_negative, large_negative) > 0)  // è´Ÿè´Ÿå¾—æ­£
  
  // æµ‹è¯•æ··åˆç¬¦å·
  @azimuth.assert_true(@azimuth.add(small_positive, medium_negative) < 0)
  @azimuth.assert_true(@azimuth.multiply(small_positive, large_negative) < 0)
  
  // æµ‹è¯•é›¶å€¼
  @azimuth.assert_eq(0, @azimuth.multiply(0, large_positive))
  @azimuth.assert_eq(large_positive, @azimuth.add(0, large_positive))
  @azimuth.assert_eq(0, @azimuth.add(large_positive, -large_positive))
}

// æµ‹è¯•ç”¨ä¾‹8: å­—ç¬¦ä¸²æ ¼å¼åŒ–åœºæ™¯
test "string_formatting_scenarios" {
  // æµ‹è¯•ä¸åŒç±»å‹çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–
  // æ•°å­—å­—ç¬¦ä¸²
  let number_str = "12345"
  let number_greeting = @azimuth.greet(number_str)
  @azimuth.assert_eq_string("Hello, 12345!", number_greeting)
  
  // é‚®ç®±æ ¼å¼
  let email_str = "user@example.com"
  let email_greeting = @azimuth.greet(email_str)
  @azimuth.assert_eq_string("Hello, user@example.com!", email_greeting)
  
  // ç”µè¯å·ç æ ¼å¼
  let phone_str = "+86-138-0013-8000"
  let phone_greeting = @azimuth.greet(phone_str)
  @azimuth.assert_eq_string("Hello, +86-138-0013-8000!", phone_greeting)
  
  // IDæ ¼å¼
  let id_str = "USER-2023-001"
  let id_greeting = @azimuth.greet(id_str)
  @azimuth.assert_eq_string("Hello, USER-2023-001!", id_greeting)
  
  // ç‰ˆæœ¬å·æ ¼å¼
  let version_str = "v1.2.3-beta"
  let version_greeting = @azimuth.greet(version_str)
  @azimuth.assert_eq_string("Hello, v1.2.3-beta!", version_greeting)
}

// æµ‹è¯•ç”¨ä¾‹9: æ€§èƒ½è®¡ç®—åœºæ™¯
test "performance_calculation_scenarios" {
  // è®¡ç®—æ•°åˆ—å’Œ: 1+2+3+...+n
  let n = 100
  
  // ä½¿ç”¨å…¬å¼è®¡ç®—: n*(n+1)/2
  let series_sum = @azimuth.multiply(n, @azimuth.add(n, 1)) / 2
  @azimuth.assert_eq(5050, series_sum)
  
  // è®¡ç®—å¹³æ–¹å’Œ: 1Â²+2Â²+3Â²+...+nÂ²
  // ä½¿ç”¨å…¬å¼: n*(n+1)*(2n+1)/6
  let square_sum = @azimuth.multiply(@azimuth.multiply(n, @azimuth.add(n, 1)), @azimuth.add(@azimuth.multiply(2, n), 1)) / 6
  @azimuth.assert_eq(338350, square_sum)
  
  // è®¡ç®—ç«‹æ–¹å’Œ: 1Â³+2Â³+3Â³+...+nÂ³
  // ä½¿ç”¨å…¬å¼: (n*(n+1)/2)Â²
  let sum_to_n = @azimuth.multiply(n, @azimuth.add(n, 1)) / 2
  let cube_sum = @azimuth.multiply(sum_to_n, sum_to_n)
  @azimuth.assert_eq(25502500, cube_sum)
}

// æµ‹è¯•ç”¨ä¾‹10: é”™è¯¯å¤„ç†ä¸å¼‚å¸¸åœºæ™¯
test "error_handling_and_exception_scenarios" {
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µçš„æ­£ç¡®å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // ç¡®ä¿æº¢å‡ºè¢«æ­£ç¡®å¤„ç†
  @azimuth.assert_true(@azimuth.add(max_val, 1) == max_val)  // æ­£æº¢å‡º
  @azimuth.assert_true(@azimuth.add(min_val, -1) == min_val)  // è´Ÿæº¢å‡º
  @azimuth.assert_true(@azimuth.multiply(max_val, 2) == max_val)  // æ­£æº¢å‡º
  @azimuth.assert_true(@azimuth.multiply(min_val, -1) == min_val)  // ç‰¹æ®Šæƒ…å†µå¤„ç†
  
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_eq(42, 42)
  @azimuth.assert_eq_string("test", "test")
  
  // æµ‹è¯•æ­£å¸¸è¿ç®—
  @azimuth.assert_true(@azimuth.add(5, 3) == 8)
  @azimuth.assert_true(@azimuth.multiply(4, 6) == 24)
  @azimuth.assert_true(@azimuth.greet("Test") == "Hello, Test!")
  
  // æµ‹è¯•è¾¹ç•Œè¿ç®—
  @azimuth.assert_true(@azimuth.add(max_val, 0) == max_val)
  @azimuth.assert_true(@azimuth.add(min_val, 0) == min_val)
  @azimuth.assert_true(@azimuth.multiply(max_val, 0) == 0)
  @azimuth.assert_true(@azimuth.multiply(min_val, 0) == 0)
}