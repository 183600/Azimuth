// Azimuth å›½é™…åŒ–æ”¯æŒç»¼åˆæµ‹è¯•
// æµ‹è¯•å¤šè¯­è¨€ç¯å¢ƒä¸‹çš„é¥æµ‹ç³»ç»Ÿ

test "å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯å¤„ç†" {
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯çš„å¤„ç†
  
  // è®¾ç½®ä¸åŒè¯­è¨€ç¯å¢ƒ
  I18n::set_locale("en-US")
  let english_error = ErrorMessage::get("validation.failed")
  assert_eq(english_error, "Validation failed")
  
  I18n::set_locale("zh-CN")
  let chinese_error = ErrorMessage::get("validation.failed")
  assert_eq(chinese_error, "éªŒè¯å¤±è´¥")
  
  I18n::set_locale("ja-JP")
  let japanese_error = ErrorMessage::get("validation.failed")
  assert_eq(japanese_error, "æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ")
  
  I18n::set_locale("es-ES")
  let spanish_error = ErrorMessage::get("validation.failed")
  assert_eq(spanish_error, "ValidaciÃ³n fallida")
  
  I18n::set_locale("fr-FR")
  let french_error = ErrorMessage::get("validation.failed")
  assert_eq(french_error, "La validation a Ã©chouÃ©")
  
  // æµ‹è¯•å¸¦å‚æ•°çš„é”™è¯¯æ¶ˆæ¯
  I18n::set_locale("en-US")
  let english_param_error = ErrorMessage::format("parameter.required", ["username"])
  assert_eq(english_param_error, "Parameter 'username' is required")
  
  I18n::set_locale("zh-CN")
  let chinese_param_error = ErrorMessage::format("parameter.required", ["username"])
  assert_eq(chinese_param_error, "å‚æ•° 'username' æ˜¯å¿…éœ€çš„")
  
  I18n::set_locale("ja-JP")
  let japanese_param_error = ErrorMessage::format("parameter.required", ["username"])
  assert_eq(japanese_param_error, "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ 'username' ã¯å¿…é ˆã§ã™")
}

test "å¤šè¯­è¨€æ—¥å¿—è®°å½•" {
  // æµ‹è¯•å¤šè¯­è¨€æ—¥å¿—è®°å½•
  
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "i18n.test")
  
  // è®¾ç½®ä¸åŒè¯­è¨€ç¯å¢ƒå¹¶è®°å½•æ—¥å¿—
  I18n::set_locale("en-US")
  let english_log = LogRecord::new(Info, "User authentication successful")
  LogRecord::add_attribute(english_log, "locale", "en-US")
  LogRecord::add_attribute(english_log, "message", "User logged in successfully")
  LogRecord::add_attribute(english_log, "user.id", "user-12345")
  
  I18n::set_locale("zh-CN")
  let chinese_log = LogRecord::new(Info, "ç”¨æˆ·è®¤è¯æˆåŠŸ")
  LogRecord::add_attribute(chinese_log, "locale", "zh-CN")
  LogRecord::add_attribute(chinese_log, "message", "ç”¨æˆ·ç™»å½•æˆåŠŸ")
  LogRecord::add_attribute(chinese_log, "user.id", "user-67890")
  
  I18n::set_locale("ja-JP")
  let japanese_log = LogRecord::new(Info, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æˆåŠŸ")
  LogRecord::add_attribute(japanese_log, "locale", "ja-JP")
  LogRecord::add_attribute(japanese_log, "message", "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ")
  LogRecord::add_attribute(japanese_log, "user.id", "user-11111")
  
  // å‘å°„æ—¥å¿—
  Logger::emit(logger, english_log)
  Logger::emit(logger, chinese_log)
  Logger::emit(logger, japanese_log)
  
  // éªŒè¯æ—¥å¿—å†…å®¹
  assert_eq(LogRecord::body(english_log), Some("User authentication successful"))
  assert_eq(LogRecord::body(chinese_log), Some("ç”¨æˆ·è®¤è¯æˆåŠŸ"))
  assert_eq(LogRecord::body(japanese_log), Some("ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æˆåŠŸ"))
  
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯æ—¥å¿—
  I18n::set_locale("en-US")
  let english_error_log = LogRecord::new(Error, "Database connection failed")
  LogRecord::add_attribute(english_error_log, "error.code", "DB_CONN_001")
  LogRecord::add_attribute(english_error_log, "error.message", "Unable to connect to database server")
  
  I18n::set_locale("zh-CN")
  let chinese_error_log = LogRecord::new(Error, "æ•°æ®åº“è¿æ¥å¤±è´¥")
  LogRecord::add_attribute(chinese_error_log, "error.code", "DB_CONN_001")
  LogRecord::add_attribute(chinese_error_log, "error.message", "æ— æ³•è¿æ¥åˆ°æ•°æ®åº“æœåŠ¡å™¨")
  
  Logger::emit(logger, english_error_log)
  Logger::emit(logger, chinese_error_log)
}

test "å¤šè¯­è¨€Spanå±æ€§å’Œäº‹ä»¶" {
  // æµ‹è¯•å¤šè¯­è¨€Spanå±æ€§å’Œäº‹ä»¶
  
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "i18n.span.test")
  
  // åˆ›å»ºè‹±æ–‡Span
  I18n::set_locale("en-US")
  let english_span = Tracer::start_span(tracer, "user.authentication.process")
  Span::set_attribute(english_span, "locale", "en-US")
  Span::set_attribute(english_span, "service.name", "auth-service")
  Span::set_attribute(english_span, "operation.name", "User Authentication")
  Span::set_attribute(english_span, "description", "Process user login with email and password")
  
  // æ·»åŠ è‹±æ–‡äº‹ä»¶
  Span::add_event(english_span, "validation.started", [
    ("field", "email"),
    ("message", "Validating email format")
  ])
  
  Span::add_event(english_span, "validation.completed", [
    ("field", "email"),
    ("result", "success"),
    ("message", "Email format is valid")
  ])
  
  Span::add_event(english_span, "authentication.completed", [
    ("result", "success"),
    ("message", "User authenticated successfully")
  ])
  
  // åˆ›å»ºä¸­æ–‡Span
  I18n::set_locale("zh-CN")
  let chinese_span = Tracer::start_span(tracer, "ç”¨æˆ·è®¤è¯å¤„ç†")
  Span::set_attribute(chinese_span, "locale", "zh-CN")
  Span::set_attribute(chinese_span, "service.name", "auth-service")
  Span::set_attribute(chinese_span, "operation.name", "ç”¨æˆ·è®¤è¯")
  Span::set_attribute(chinese_span, "description", "ä½¿ç”¨é‚®ç®±å’Œå¯†ç å¤„ç†ç”¨æˆ·ç™»å½•")
  
  // æ·»åŠ ä¸­æ–‡äº‹ä»¶
  Span::add_event(chinese_span, "éªŒè¯å¼€å§‹", [
    ("field", "email"),
    ("message", "éªŒè¯é‚®ç®±æ ¼å¼")
  ])
  
  Span::add_event(chinese_span, "éªŒè¯å®Œæˆ", [
    ("field", "email"),
    ("result", "æˆåŠŸ"),
    ("message", "é‚®ç®±æ ¼å¼æœ‰æ•ˆ")
  ])
  
  Span::add_event(chinese_span, "è®¤è¯å®Œæˆ", [
    ("result", "æˆåŠŸ"),
    ("message", "ç”¨æˆ·è®¤è¯æˆåŠŸ")
  ])
  
  // åˆ›å»ºæ—¥æ–‡Span
  I18n::set_locale("ja-JP")
  let japanese_span = Tracer::start_span(tracer, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å‡¦ç†")
  Span::set_attribute(japanese_span, "locale", "ja-JP")
  Span::set_attribute(japanese_span, "service.name", "auth-service")
  Span::set_attribute(japanese_span, "operation.name", "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼")
  Span::set_attribute(japanese_span, "description", "ãƒ¡ãƒ¼ãƒ«ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³ã‚’å‡¦ç†")
  
  // æ·»åŠ æ—¥æ–‡äº‹ä»¶
  Span::add_event(japanese_span, "æ¤œè¨¼é–‹å§‹", [
    ("field", "email"),
    ("message", "ãƒ¡ãƒ¼ãƒ«å½¢å¼ã‚’æ¤œè¨¼")
  ])
  
  Span::add_event(japanese_span, "æ¤œè¨¼å®Œäº†", [
    ("field", "email"),
    ("result", "æˆåŠŸ"),
    ("message", "ãƒ¡ãƒ¼ãƒ«å½¢å¼ãŒæœ‰åŠ¹ã§ã™")
  ])
  
  Span::add_event(japanese_span, "èªè¨¼å®Œäº†", [
    ("result", "æˆåŠŸ"),
    ("message", "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãŒæˆåŠŸã—ã¾ã—ãŸ")
  ])
  
  // éªŒè¯Spanå±æ€§
  assert_eq(Span::name(english_span), "user.authentication.process")
  assert_eq(Span::name(chinese_span), "ç”¨æˆ·è®¤è¯å¤„ç†")
  assert_eq(Span::name(japanese_span), "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å‡¦ç†")
  
  Span::end(english_span)
  Span::end(chinese_span)
  Span::end(japanese_span)
}

test "å¤šè¯­è¨€åº¦é‡æ ‡ç­¾" {
  // æµ‹è¯•å¤šè¯­è¨€åº¦é‡æ ‡ç­¾
  
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "i18n.metrics.test")
  
  // åˆ›å»ºå¤šè¯­è¨€è®¡æ•°å™¨
  let request_counter = Meter::create_counter(meter, "http.requests.total", Some("Total HTTP requests"), Some("count"))
  
  // è®°å½•ä¸åŒè¯­è¨€çš„è¯·æ±‚
  I18n::set_locale("en-US")
  Counter::add_with_attributes(request_counter, 100.0, [
    ("locale", "en-US"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("status", "200"),
    ("region", "us-west-2")
  ])
  
  I18n::set_locale("zh-CN")
  Counter::add_with_attributes(request_counter, 50.0, [
    ("locale", "zh-CN"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("status", "200"),
    ("region", "ap-northeast-1")
  ])
  
  I18n::set_locale("ja-JP")
  Counter::add_with_attributes(request_counter, 30.0, [
    ("locale", "ja-JP"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("status", "200"),
    ("region", "ap-northeast-1")
  ])
  
  // åˆ›å»ºå¤šè¯­è¨€ç›´æ–¹å›¾
  let response_time_histogram = Meter::create_histogram(meter, "http.request.duration", Some("HTTP request duration"), Some("ms"))
  
  // è®°å½•ä¸åŒè¯­è¨€çš„å“åº”æ—¶é—´
  I18n::set_locale("en-US")
  Histogram::record_with_attributes(response_time_histogram, 125.5, [
    ("locale", "en-US"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("region", "us-west-2")
  ])
  
  I18n::set_locale("zh-CN")
  Histogram::record_with_attributes(response_time_histogram, 245.8, [
    ("locale", "zh-CN"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("region", "ap-northeast-1")
  ])
  
  I18n::set_locale("ja-JP")
  Histogram::record_with_attributes(response_time_histogram, 185.3, [
    ("locale", "ja-JP"),
    ("endpoint", "/api/users"),
    ("method", "GET"),
    ("region", "ap-northeast-1")
  ])
  
  // éªŒè¯åº¦é‡å±æ€§
  assert_eq(request_counter.name, "http.requests.total")
  assert_eq(response_time_histogram.name, "http.request.duration")
}

test "æ—¶åŒºå’Œæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–" {
  // æµ‹è¯•ä¸åŒæ—¶åŒºå’Œæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–
  
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "timezone.test")
  
  // è®¾ç½®UTCæ—¶åŒº
  TimeZone::set_timezone("UTC")
  let utc_span = Tracer::start_span(tracer, "utc.operation")
  Span::set_attribute(utc_span, "timezone", "UTC")
  Span::set_attribute(utc_span, "timestamp", DateTime::format_now("yyyy-MM-dd HH:mm:ss z"))
  
  // è®¾ç½®ç¾å›½ä¸œéƒ¨æ—¶åŒº
  TimeZone::set_timezone("America/New_York")
  let est_span = Tracer::start_span(tracer, "est.operation")
  Span::set_attribute(est_span, "timezone", "America/New_York")
  Span::set_attribute(est_span, "timestamp", DateTime::format_now("yyyy-MM-dd HH:mm:ss z"))
  
  // è®¾ç½®ä¸­å›½æ—¶åŒº
  TimeZone::set_timezone("Asia/Shanghai")
  let cst_span = Tracer::start_span(tracer, "cst.operation")
  Span::set_attribute(cst_span, "timezone", "Asia/Shanghai")
  Span::set_attribute(cst_span, "timestamp", DateTime::format_now("yyyy-MM-dd HH:mm:ss z"))
  
  // è®¾ç½®æ—¥æœ¬æ—¶åŒº
  TimeZone::set_timezone("Asia/Tokyo")
  let jst_span = Tracer::start_span(tracer, "jst.operation")
  Span::set_attribute(jst_span, "timezone", "Asia/Tokyo")
  Span::set_attribute(jst_span, "timestamp", DateTime::format_now("yyyy-MM-dd HH:mm:ss z"))
  
  // æµ‹è¯•ä¸åŒæ—¥æœŸæ ¼å¼
  I18n::set_locale("en-US")
  let us_date = DateTime::format_now("MM/dd/yyyy HH:mm:ss a")
  
  I18n::set_locale("zh-CN")
  let cn_date = DateTime::format_now("yyyyå¹´MMæœˆddæ—¥ HH:mm:ss")
  
  I18n::set_locale("ja-JP")
  let jp_date = DateTime::format_now("yyyyå¹´MMæœˆddæ—¥ HH:mm:ss")
  
  I18n::set_locale("de-DE")
  let de_date = DateTime::format_now("dd.MM.yyyy HH:mm:ss")
  
  // éªŒè¯æ—¥æœŸæ ¼å¼
  assert_true(us_date.contains("/"))
  assert_true(cn_date.contains("å¹´") && cn_date.contains("æœˆ") && cn_date.contains("æ—¥"))
  assert_true(jp_date.contains("å¹´") && jp_date.contains("æœˆ") && jp_date.contains("æ—¥"))
  assert_true(de_date.contains("."))
  
  Span::end(utc_span)
  Span::end(est_span)
  Span::end(cst_span)
  Span::end(jst_span)
}

test "å¤šè¯­è¨€èµ„æºåŒ…åŠ è½½" {
  // æµ‹è¯•å¤šè¯­è¨€èµ„æºåŒ…çš„åŠ è½½å’Œåˆ‡æ¢
  
  // åŠ è½½è‹±æ–‡èµ„æºåŒ…
  let en_bundle = ResourceBundle::load("en-US")
  assert_true(ResourceBundle::is_loaded(en_bundle))
  
  // åŠ è½½ä¸­æ–‡èµ„æºåŒ…
  let zh_bundle = ResourceBundle::load("zh-CN")
  assert_true(ResourceBundle::is_loaded(zh_bundle))
  
  // åŠ è½½æ—¥æ–‡èµ„æºåŒ…
  let ja_bundle = ResourceBundle::load("ja-JP")
  assert_true(ResourceBundle::is_loaded(ja_bundle))
  
  // æµ‹è¯•èµ„æºåŒ…åˆ‡æ¢
  I18n::set_resource_bundle(en_bundle)
  let en_message = ResourceBundle::get_string(en_bundle, "telemetry.span.created")
  assert_eq(en_message, "Span created")
  
  I18n::set_resource_bundle(zh_bundle)
  let zh_message = ResourceBundle::get_string(zh_bundle, "telemetry.span.created")
  assert_eq(zh_message, "Spanå·²åˆ›å»º")
  
  I18n::set_resource_bundle(ja_bundle)
  let ja_message = ResourceBundle::get_string(ja_bundle, "telemetry.span.created")
  assert_eq(ja_message, "SpanãŒä½œæˆã•ã‚Œã¾ã—ãŸ")
  
  // æµ‹è¯•èµ„æºåŒ…å›é€€æœºåˆ¶
  let fallback_bundle = ResourceBundle::load("fr-FR")
  I18n::set_resource_bundle(fallback_bundle)
  
  // å°è¯•è·å–ä¸å­˜åœ¨çš„é”®ï¼Œåº”è¯¥å›é€€åˆ°é»˜è®¤è¯­è¨€
  let fallback_message = ResourceBundle::get_string(fallback_bundle, "telemetry.span.created")
  assert_eq(fallback_message, "Span created")  // å›é€€åˆ°è‹±æ–‡
  
  // æµ‹è¯•èµ„æºåŒ…çƒ­é‡è½½
  let reloaded_bundle = ResourceBundle::reload("en-US")
  assert_true(ResourceBundle::is_loaded(reloaded_bundle))
  
  // éªŒè¯é‡è½½åçš„èµ„æº
  let reloaded_message = ResourceBundle::get_string(reloaded_bundle, "telemetry.span.created")
  assert_eq(reloaded_message, "Span created")
}

test "å¤šè¯­è¨€æ•°å­—å’Œè´§å¸æ ¼å¼åŒ–" {
  // æµ‹è¯•å¤šè¯­è¨€æ•°å­—å’Œè´§å¸æ ¼å¼åŒ–
  
  // è®¾ç½®ä¸åŒè¯­è¨€ç¯å¢ƒå¹¶æ ¼å¼åŒ–æ•°å­—
  I18n::set_locale("en-US")
  let us_number = NumberFormat::format(1234567.89, "decimal")
  let us_currency = NumberFormat::format(1234567.89, "currency")
  let us_percent = NumberFormat::format(0.8547, "percent")
  
  assert_eq(us_number, "1,234,567.89")
  assert_eq(us_currency, "$1,234,567.89")
  assert_eq(us_percent, "85.47%")
  
  I18n::set_locale("zh-CN")
  let cn_number = NumberFormat::format(1234567.89, "decimal")
  let cn_currency = NumberFormat::format(1234567.89, "currency")
  let cn_percent = NumberFormat::format(0.8547, "percent")
  
  assert_eq(cn_number, "1,234,567.89")
  assert_eq(cn_currency, "Â¥1,234,567.89")
  assert_eq(cn_percent, "85.47%")
  
  I18n::set_locale("ja-JP")
  let ja_number = NumberFormat::format(1234567.89, "decimal")
  let ja_currency = NumberFormat::format(1234567.89, "currency")
  let ja_percent = NumberFormat::format(0.8547, "percent")
  
  assert_eq(ja_number, "1,234,567.89")
  assert_eq(ja_currency, "Â¥1,234,568")
  assert_eq(ja_percent, "85.47%")
  
  I18n::set_locale("de-DE")
  let de_number = NumberFormat::format(1234567.89, "decimal")
  let de_currency = NumberFormat::format(1234567.89, "currency")
  let de_percent = NumberFormat::format(0.8547, "percent")
  
  assert_eq(de_number, "1.234.567,89")
  assert_eq(de_currency, "1.234.567,89 â‚¬")
  assert_eq(de_percent, "85,47 %")
  
  // åœ¨é¥æµ‹æ•°æ®ä¸­ä½¿ç”¨æ ¼å¼åŒ–æ•°å­—
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "formatting.test")
  
  let revenue_counter = Meter::create_counter(meter, "revenue.total", Some("Total revenue"), Some("currency"))
  
  I18n::set_locale("en-US")
  Counter::add_with_attributes(revenue_counter, 1234567.89, [
    ("locale", "en-US"),
    ("currency", "USD"),
    ("formatted_amount", "$1,234,567.89")
  ])
  
  I18n::set_locale("zh-CN")
  Counter::add_with_attributes(revenue_counter, 1234567.89, [
    ("locale", "zh-CN"),
    ("currency", "CNY"),
    ("formatted_amount", "Â¥1,234,567.89")
  ])
}

test "å¤šè¯­è¨€æ–‡æœ¬æ–¹å‘å’Œå¸ƒå±€" {
  // æµ‹è¯•å¤šè¯­è¨€æ–‡æœ¬æ–¹å‘å’Œå¸ƒå±€æ”¯æŒ
  
  // æµ‹è¯•ä»å·¦åˆ°å³çš„è¯­è¨€
  I18n::set_locale("en-US")
  let ltr_text = TextDirection::process("Hello World")
  assert_eq(TextDirection::get_direction(ltr_text), "LTR")
  
  I18n::set_locale("zh-CN")
  let ltr_text_cn = TextDirection::process("ä½ å¥½ä¸–ç•Œ")
  assert_eq(TextDirection::get_direction(ltr_text_cn), "LTR")
  
  // æµ‹è¯•ä»å³åˆ°å·¦çš„è¯­è¨€
  I18n::set_locale("ar-SA")
  let rtl_text = TextDirection::process("Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…")
  assert_eq(TextDirection::get_direction(rtl_text), "RTL")
  
  I18n::set_locale("he-IL")
  let rtl_text_he = TextDirection::process("×©×œ×•× ×¢×•×œ×")
  assert_eq(TextDirection::get_direction(rtl_text_he), "RTL")
  
  // æµ‹è¯•æ··åˆæ–¹å‘æ–‡æœ¬
  I18n::set_locale("en-US")
  let mixed_text = TextDirection::process("Hello Ù…Ø±Ø­Ø¨Ø§ World")
  assert_eq(TextDirection::get_direction(mixed_text), "LTR")
  
  // åœ¨Spanä¸­ä½¿ç”¨æ–‡æœ¬æ–¹å‘ä¿¡æ¯
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "text.direction.test")
  
  I18n::set_locale("en-US")
  let ltr_span = Tracer::start_span(tracer, "LTR Text Processing")
  Span::set_attribute(ltr_span, "text.direction", "LTR")
  Span::set_attribute(ltr_span, "text.sample", "Hello World")
  
  I18n::set_locale("ar-SA")
  let rtl_span = Tracer::start_span(tracer, "RTL Text Processing")
  Span::set_attribute(rtl_span, "text.direction", "RTL")
  Span::set_attribute(rtl_span, "text.sample", "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…")
  
  // éªŒè¯æ–‡æœ¬æ–¹å‘å±æ€§
  assert_eq(Span::name(ltr_span), "LTR Text Processing")
  assert_eq(Span::name(rtl_span), "RTL Text Processing")
  
  Span::end(ltr_span)
  Span::end(rtl_span)
}

test "å¤šè¯­è¨€å­—ç¬¦ç¼–ç å¤„ç†" {
  // æµ‹è¯•å¤šè¯­è¨€å­—ç¬¦ç¼–ç å¤„ç†
  
  // æµ‹è¯•ä¸åŒè¯­è¨€çš„å­—ç¬¦ä¸²
  let english_text = "Hello World"
  let chinese_text = "ä½ å¥½ä¸–ç•Œ"
  let japanese_text = "ã“ã‚“ã«ã¡ã¯ä¸–ç•Œ"
  let arabic_text = "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…"
  let russian_text = "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚ Ğ¼Ğ¸Ñ€"
  let emoji_text = "Hello ğŸŒ World ğŸš€"
  
  // æµ‹è¯•UTF-8ç¼–ç 
  let english_encoded = Encoding::encode_utf8(english_text)
  let chinese_encoded = Encoding::encode_utf8(chinese_text)
  let japanese_encoded = Encoding::encode_utf8(japanese_text)
  let arabic_encoded = Encoding::encode_utf8(arabic_text)
  let russian_encoded = Encoding::encode_utf8(russian_text)
  let emoji_encoded = Encoding::encode_utf8(emoji_text)
  
  // éªŒè¯ç¼–ç å’Œè§£ç 
  let english_decoded = Encoding::decode_utf8(english_encoded)
  let chinese_decoded = Encoding::decode_utf8(chinese_encoded)
  let japanese_decoded = Encoding::decode_utf8(japanese_encoded)
  let arabic_decoded = Encoding::decode_utf8(arabic_encoded)
  let russian_decoded = Encoding::decode_utf8(russian_encoded)
  let emoji_decoded = Encoding::decode_utf8(emoji_encoded)
  
  assert_eq(english_decoded, english_text)
  assert_eq(chinese_decoded, chinese_text)
  assert_eq(japanese_decoded, japanese_text)
  assert_eq(arabic_decoded, arabic_text)
  assert_eq(russian_decoded, russian_text)
  assert_eq(emoji_decoded, emoji_text)
  
  // åœ¨é¥æµ‹æ•°æ®ä¸­ä½¿ç”¨å¤šè¯­è¨€æ–‡æœ¬
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "encoding.test")
  
  let span = Tracer::start_span(tracer, "Multilingual Processing")
  
  Span::set_attribute(span, "english.text", english_text)
  Span::set_attribute(span, "chinese.text", chinese_text)
  Span::set_attribute(span, "japanese.text", japanese_text)
  Span::set_attribute(span, "arabic.text", arabic_text)
  Span::set_attribute(span, "russian.text", russian_text)
  Span::set_attribute(span, "emoji.text", emoji_text)
  
  // æ·»åŠ å¤šè¯­è¨€äº‹ä»¶
  Span::add_event(span, "multilingual.processing", [
    ("english", english_text),
    ("chinese", chinese_text),
    ("japanese", japanese_text),
    ("arabic", arabic_text),
    ("russian", russian_text),
    ("emoji", emoji_text)
  ])
  
  Span::end(span)
  
  // éªŒè¯å­—ç¬¦é•¿åº¦è®¡ç®—
  assert_eq(StringUtils::length(english_text), 11)
  assert_eq(StringUtils::length(chinese_text), 4)
  assert_eq(StringUtils::length(japanese_text), 7)
  assert_eq(StringUtils::length(arabic_text), 11)
  assert_eq(StringUtils::length(russian_text), 11)
  assert_eq(StringUtils::length(emoji_text), 15)
}