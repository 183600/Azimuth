// æ–°å¢ MoonBit æµ‹è¯•ç”¨ä¾‹

test "arithmetics_add_boundary_values" {
  // æµ‹è¯•åŠ æ³•è¾¹ç•Œå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  @test_only.assert_eq(@test_only.add(max_val, 0), max_val)
  @test_only.assert_eq(@test_only.add(min_val, 0), min_val)
  @test_only.assert_eq(@test_only.add(max_val, -max_val), 0)
}

test "arithmetics_multiply_edge_cases" {
  // æµ‹è¯•ä¹˜æ³•è¾¹ç•Œæƒ…å†µ
  @test_only.assert_eq(@test_only.multiply(-2147483648, 0), 0)
  @test_only.assert_eq(@test_only.multiply(2147483647, 1), 2147483647)
  @test_only.assert_eq(@test_only.multiply(-2147483648, 1), -2147483648)
}

test "string_greet_unicode_characters" {
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²å¤„ç†
  @test_only.assert_eq_string(@test_only.greet("ä¸–ç•Œ"), "Hello, ä¸–ç•Œ!")
  @test_only.assert_eq_string(@test_only.greet("ğŸŒŸ"), "Hello, ğŸŒŸ!")
  @test_only.assert_eq_string(@test_only.greet("CafÃ©"), "Hello, CafÃ©!")
}

test "arithmetics_sequence_operations" {
  // æµ‹è¯•åºåˆ—è¿ç®—ï¼š((a + b) * c) - d
  let a = 10
  let b = 20
  let c = 3
  let d = 15
  
  let sum = @test_only.add(a, b)
  let product = @test_only.multiply(sum, c)
  let result = @test_only.add(product, -d)
  
  @test_only.assert_eq(result, 75)  // ((10+20)*3)-15 = 90-15 = 75
}

test "arithmetics_fibonacci_calculation" {
  // æµ‹è¯•æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  // è®¡ç®— fib(8) = 21
  let n1 = 1
  let n2 = 1
  let n3 = @test_only.add(n1, n2)     // 2
  let n4 = @test_only.add(n2, n3)     // 3
  let n5 = @test_only.add(n3, n4)     // 5
  let n6 = @test_only.add(n4, n5)     // 8
  let n7 = @test_only.add(n5, n6)     // 13
  let n8 = @test_only.add(n6, n7)     // 21
  
  @test_only.assert_eq(n8, 21)
}

test "string_greet_with_spaces" {
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²å¤„ç†
  @test_only.assert_eq_string(@test_only.greet("John Doe"), "Hello, John Doe!")
  @test_only.assert_eq_string(@test_only.greet("  leading"), "Hello,   leading!")
  @test_only.assert_eq_string(@test_only.greet("trailing  "), "Hello, trailing  !")
}

test "arithmetics_power_simulation" {
  // æµ‹è¯•å¹‚è¿ç®—æ¨¡æ‹Ÿï¼ˆä½¿ç”¨ä¹˜æ³•ï¼‰
  // è®¡ç®— 2^5 = 32
  let base = 2
  let result1 = @test_only.multiply(base, base)      // 2^2 = 4
  let result2 = @test_only.multiply(result1, base)   // 2^3 = 8
  let result3 = @test_only.multiply(result2, base)   // 2^4 = 16
  let result4 = @test_only.multiply(result3, base)   // 2^5 = 32
  
  @test_only.assert_eq(result4, 32)
}

test "arithmetics_average_calculation" {
  // æµ‹è¯•å¹³å‡å€¼è®¡ç®—
  let num1 = 15
  let num2 = 25
  let num3 = 35
  let num4 = 45
  
  let sum = @test_only.add(@test_only.add(num1, num2), @test_only.add(num3, num4))
  // æ¨¡æ‹Ÿé™¤æ³•ï¼šä½¿ç”¨å‡æ³•æ¥éªŒè¯å¹³å‡å€¼
  let average_times_4 = sum
  let expected_sum = @test_only.multiply(30, 4)  // å¹³å‡å€¼30 * 4 = 120
  
  @test_only.assert_eq(average_times_4, expected_sum)
}

test "string_greet_numeric_strings" {
  // æµ‹è¯•æ•°å­—å­—ç¬¦ä¸²å¤„ç†
  @test_only.assert_eq_string(@test_only.greet("123"), "Hello, 123!")
  @test_only.assert_eq_string(@test_only.greet("-456"), "Hello, -456!")
  @test_only.assert_eq_string(@test_only.greet("3.14159"), "Hello, 3.14159!")
}

test "arithmetics_factorial_simulation" {
  // æµ‹è¯•é˜¶ä¹˜è®¡ç®—æ¨¡æ‹Ÿï¼ˆä½¿ç”¨ä¹˜æ³•ï¼‰
  // è®¡ç®— 5! = 120
  let n1 = 1
  let n2 = @test_only.multiply(n1, 2)  // 2! = 2
  let n3 = @test_only.multiply(n2, 3)  // 3! = 6
  let n4 = @test_only.multiply(n3, 4)  // 4! = 24
  let n5 = @test_only.multiply(n4, 5)  // 5! = 120
  
  @test_only.assert_eq(n5, 120)
}