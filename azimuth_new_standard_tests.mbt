// Azimuth é¡¹ç›®æ–°å¢ MoonBit æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œè¦†ç›–ä¸åŒåŠŸèƒ½åœºæ™¯

test "add_function_edge_cases" {
  // æµ‹è¯• add å‡½æ•°çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•é›¶å€¼åŠ æ³•
  assert_eq(100, azimuth.add(100, 0))
  assert_eq(100, azimuth.add(0, 100))
  assert_eq(0, azimuth.add(0, 0))
  
  // æµ‹è¯•æœ€å¤§å€¼è¾¹ç•Œ
  assert_eq(max_val, azimuth.add(max_val, 1))
  assert_eq(max_val, azimuth.add(max_val, max_val))
  
  // æµ‹è¯•æœ€å°å€¼è¾¹ç•Œ
  assert_eq(min_val, azimuth.add(min_val, -1))
  assert_eq(min_val, azimuth.add(min_val, min_val))
  
  // æµ‹è¯•æœ€å¤§å€¼ä¸æœ€å°å€¼ç›¸åŠ 
  assert_eq(-1, azimuth.add(max_val, min_val))
}

test "multiply_function_edge_cases" {
  // æµ‹è¯• multiply å‡½æ•°çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•é›¶å€¼ä¹˜æ³•
  assert_eq(0, azimuth.multiply(100, 0))
  assert_eq(0, azimuth.multiply(0, 100))
  assert_eq(0, azimuth.multiply(0, 0))
  
  // æµ‹è¯•å•ä½å€¼ä¹˜æ³•
  assert_eq(100, azimuth.multiply(100, 1))
  assert_eq(100, azimuth.multiply(1, 100))
  assert_eq(-100, azimuth.multiply(-100, 1))
  assert_eq(-100, azimuth.multiply(1, -100))
  
  // æµ‹è¯•è´Ÿä¸€ä¹˜æ³•
  assert_eq(-100, azimuth.multiply(100, -1))
  assert_eq(-100, azimuth.multiply(-1, 100))
  assert_eq(100, azimuth.multiply(-100, -1))
  
  // æµ‹è¯•æœ€å°å€¼ä¸è´Ÿä¸€ç›¸ä¹˜çš„ç‰¹æ®Šæƒ…å†µ
  assert_eq(min_val, azimuth.multiply(min_val, -1))
  
  // æµ‹è¯•æº¢å‡ºæƒ…å†µ
  assert_eq(max_val, azimuth.multiply(46341, 46341))
  assert_eq(min_val, azimuth.multiply(-46341, 46341))
}

test "greet_function_variations" {
  // æµ‹è¯• greet å‡½æ•°çš„å„ç§æƒ…å†µ
  // æµ‹è¯•æ™®é€šå­—ç¬¦ä¸²
  assert_eq_string("Hello, World!", azimuth.greet("World"))
  assert_eq_string("Hello, MoonBit!", azimuth.greet("MoonBit"))
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  assert_eq_string("Hello, !", azimuth.greet(""))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, John Doe!", azimuth.greet("John Doe"))
  assert_eq_string("Hello,  Leading Space!", azimuth.greet(" Leading Space"))
  assert_eq_string("Hello, Trailing Space !", azimuth.greet("Trailing Space "))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, test@example.com!", azimuth.greet("test@example.com"))
  assert_eq_string("Hello, user_123!", azimuth.greet("user_123"))
  
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  assert_eq_string("Hello, æµ‹è¯•!", azimuth.greet("æµ‹è¯•"))
  assert_eq_string("Hello, ğŸŒ!", azimuth.greet("ğŸŒ"))
}

test "complex_calculation_scenarios" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  // åœºæ™¯1ï¼šè®¡ç®—çŸ©å½¢å‘¨é•¿
  let length = 10
  let width = 5
  let perimeter = azimuth.add(azimuth.multiply(2, length), azimuth.multiply(2, width))
  assert_eq(30, perimeter)
  
  // åœºæ™¯2ï¼šè®¡ç®—çŸ©å½¢é¢ç§¯
  let area = azimuth.multiply(length, width)
  assert_eq(50, area)
  
  // åœºæ™¯3ï¼šè®¡ç®—å¹³å‡å€¼
  let num1 = 80
  let num2 = 90
  let num3 = 100
  let sum = azimuth.add(azimuth.add(num1, num2), num3)
  let average = sum / 3
  assert_eq(90, average)
  
  // åœºæ™¯4ï¼šè®¡ç®—æŠ˜æ‰£ä»·æ ¼
  let original_price = 200
  let discount_rate = 15  // 15%
  let discount_amount = azimuth.multiply(original_price, discount_rate) / 100
  let discounted_price = azimuth.add(original_price, -discount_amount)
  assert_eq(170, discounted_price)
}

test "mathematical_properties" {
  // æµ‹è¯•æ•°å­¦æ€§è´¨
  let a = 12
  let b = 8
  let c = 5
  
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  assert_eq(azimuth.add(a, b), azimuth.add(b, a))
  
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  let left_assoc = azimuth.add(azimuth.add(a, b), c)
  let right_assoc = azimuth.add(a, azimuth.add(b, c))
  assert_eq(left_assoc, right_assoc)
  
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹ï¼ša * b = b * a
  assert_eq(azimuth.multiply(a, b), azimuth.multiply(b, a))
  
  // æµ‹è¯•ä¹˜æ³•ç»“åˆå¾‹ï¼š(a * b) * c = a * (b * c)
  let left_mult_assoc = azimuth.multiply(azimuth.multiply(a, b), c)
  let right_mult_assoc = azimuth.multiply(a, azimuth.multiply(b, c))
  assert_eq(left_mult_assoc, right_mult_assoc)
  
  // æµ‹è¯•åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let distrib_left = azimuth.multiply(a, azimuth.add(b, c))
  let distrib_right = azimuth.add(azimuth.multiply(a, b), azimuth.multiply(a, c))
  assert_eq(distrib_left, distrib_right)
}

test "real_world_application_calculations" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯çš„è®¡ç®—
  // åœºæ™¯1ï¼šè´­ç‰©è½¦è®¡ç®—
  let item1_price = 199
  let item1_quantity = 2
  let item2_price = 299
  let item2_quantity = 1
  let shipping_fee = 20
  let tax_rate = 8  // 8%
  
  // è®¡ç®—å•†å“æ€»ä»·
  let item1_total = azimuth.multiply(item1_price, item1_quantity)
  let item2_total = azimuth.multiply(item2_price, item2_quantity)
  let subtotal = azimuth.add(item1_total, item2_total)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = azimuth.multiply(subtotal, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·
  let total = azimuth.add(azimuth.add(subtotal, tax_amount), shipping_fee)
  
  // éªŒè¯ç»“æœï¼š199*2 + 299*1 = 697ï¼Œç¨è´¹ = 697*8/100 = 55ï¼Œæ€»ä»· = 697 + 55 + 20 = 772
  assert_eq(772, total)
  
  // åœºæ™¯2ï¼šæ¸©åº¦è½¬æ¢ï¼ˆç®€åŒ–ç‰ˆï¼šF = C Ã— 2 + 30ï¼‰
  let celsius_temp = 25
  let fahrenheit_temp = azimuth.add(azimuth.multiply(celsius_temp, 2), 30)
  assert_eq(80, fahrenheit_temp)
  
  // åœºæ™¯3ï¼šè´·æ¬¾åˆ©æ¯è®¡ç®—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let principal = 10000
  let annual_rate = 5  // 5%
  let years = 3
  let simple_interest = azimuth.multiply(principal, azimuth.multiply(annual_rate, years))
  let total_repayment = azimuth.add(principal, simple_interest)
  assert_eq(160000, total_repayment)  // 10000 + 10000*5*3 = 160000
}

test "divide_with_ceil_function" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•å‡½æ•°
  // æµ‹è¯•æ•´é™¤æƒ…å†µ
  assert_eq(5, azimuth.divide_with_ceil(10, 2))
  assert_eq(3, azimuth.divide_with_ceil(9, 3))
  assert_eq(7, azimuth.divide_with_ceil(14, 2))
  
  // æµ‹è¯•æœ‰ä½™æ•°æƒ…å†µ
  assert_eq(6, azimuth.divide_with_ceil(11, 2))  // 11/2 = 5.5 â†’ 6
  assert_eq(4, azimuth.divide_with_ceil(10, 3))  // 10/3 â‰ˆ 3.33 â†’ 4
  assert_eq(3, azimuth.divide_with_ceil(8, 3))   // 8/3 â‰ˆ 2.67 â†’ 3
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  assert_eq(-5, azimuth.divide_with_ceil(-10, 2))
  assert_eq(-5, azimuth.divide_with_ceil(-11, 2))  // -11/2 = -5.5 â†’ -5ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  assert_eq(0, azimuth.divide_with_ceil(0, 5))
  assert_eq(1, azimuth.divide_with_ceil(1, 1))
  assert_eq(1, azimuth.divide_with_ceil(2, 2))
}

test "assertion_functions" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  // æµ‹è¯• assert_true
  azimuth.assert_true(true)
  azimuth.assert_true(5 > 3)
  azimuth.assert_true(azimuth.add(2, 3) == 5)
  
  // æµ‹è¯• assert_false
  azimuth.assert_false(false)
  azimuth.assert_false(5 < 3)
  azimuth.assert_false(azimuth.add(2, 3) == 6)
  
  // æµ‹è¯• assert_eq
  azimuth.assert_eq(5, azimuth.add(2, 3))
  azimuth.assert_eq(6, azimuth.multiply(2, 3))
  azimuth.assert_eq(0, azimuth.multiply(5, 0))
  
  // æµ‹è¯• assert_eq_string
  azimuth.assert_eq_string("Hello, World!", azimuth.greet("World"))
  azimuth.assert_eq_string("Hello, !", azimuth.greet(""))
  azimuth.assert_eq_string("Hello, æµ‹è¯•!", azimuth.greet("æµ‹è¯•"))
}

test "performance_and_optimization" {
  // æµ‹è¯•æ€§èƒ½å’Œä¼˜åŒ–ç›¸å…³çš„è®¡ç®—
  // æµ‹è¯•å¤§é‡æ•°æ®çš„ç´¯åŠ 
  let base = 100
  let count = 100
  
  // ä½¿ç”¨å…¬å¼ï¼šn Ã— (n + 1) / 2 è®¡ç®— 1+2+...+n çš„å’Œ
  let sum_formula = azimuth.multiply(count, azimuth.add(count, 1)) / 2
  let scaled_sum = azimuth.multiply(base, sum_formula)
  
  // éªŒè¯å‰å‡ é¡¹çš„è®¡ç®—
  let sum_first_10 = azimuth.multiply(10, 11) / 2
  let scaled_sum_10 = azimuth.multiply(base, sum_first_10)
  assert_eq(5500, scaled_sum_10)  // 100 Ã— (10 Ã— 11 / 2) = 5500
  
  // æµ‹è¯•æŒ‡æ•°å¢é•¿ï¼ˆ2çš„å¹‚ï¼‰
  let power_of_2_8 = azimuth.multiply(
    azimuth.multiply(azimuth.multiply(2, 2), azimuth.multiply(2, 2)),
    azimuth.multiply(azimuth.multiply(2, 2), azimuth.multiply(2, 2))
  )
  assert_eq(256, power_of_2_8)
  
  // æµ‹è¯•é˜¶ä¹˜è®¡ç®—ï¼ˆ5!ï¼‰
  let factorial_5 = azimuth.multiply(5, azimuth.multiply(4, azimuth.multiply(3, azimuth.multiply(2, 1))))
  assert_eq(120, factorial_5)
}

test "error_handling_and_boundary_conditions" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æº¢å‡ºä¿æŠ¤
  let overflow_add = azimuth.add(max_val, max_val)
  assert_eq(max_val, overflow_add)
  
  let underflow_add = azimuth.add(min_val, min_val)
  assert_eq(min_val, underflow_add)
  
  let overflow_mul = azimuth.multiply(max_val, 2)
  assert_eq(max_val, overflow_mul)
  
  let underflow_mul = azimuth.multiply(min_val, 2)
  assert_eq(min_val, underflow_mul)
  
  // æµ‹è¯•ç‰¹æ®Šå€¼çš„è¿ç®—
  assert_eq(min_val, azimuth.multiply(min_val, -1))
  assert_eq(min_val, azimuth.multiply(-1, min_val))
  assert_eq(max_val, azimuth.add(max_val, 1))
  assert_eq(min_val, azimuth.add(min_val, -1))
  
  // æµ‹è¯•é™¤ä»¥é›¶çš„ä¿æŠ¤ï¼ˆé€šè¿‡ divide_with_ceil å‡½æ•°çš„è°ƒç”¨ï¼‰
  // æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬ä¸ç›´æ¥æµ‹è¯•é™¤ä»¥é›¶ï¼Œå› ä¸ºä¼šå¯¼è‡´è¿è¡Œæ—¶é”™è¯¯
  // è€Œæ˜¯æµ‹è¯•æ­£å¸¸æƒ…å†µä¸‹çš„è¡Œä¸º
  assert_eq(10, azimuth.divide_with_ceil(100, 10))
  assert_eq(11, azimuth.divide_with_ceil(101, 10))
}