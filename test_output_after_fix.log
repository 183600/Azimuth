Build profile: -w ghc-9.14.1 -O1
In order, the following will be built (use -v for more details):
 - azimuth-0.1.0 (lib) (file src/Azimuth/Telemetry.hs changed)
 - azimuth-0.1.0 (test:azimuth-test) (dependency rebuilt)
Preprocessing library for azimuth-0.1.0...
Building library for azimuth-0.1.0...
[1 of 2] Compiling Azimuth.Telemetry ( src/Azimuth/Telemetry.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/build/Azimuth/Telemetry.o, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/build/Azimuth/Telemetry.dyn_o ) [Source file changed]
src/Azimuth/Telemetry.hs:62:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Char’ is redundant
      except perhaps to import instances from ‘Data.Char’
    To import instances alone, use: import Data.Char()
   |
62 | import Data.Char (intToDigit)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:63:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Numeric’ is redundant
      except perhaps to import instances from ‘Numeric’
    To import instances alone, use: import Numeric()
   |
63 | import Numeric (showHex)
   | ^^^^^^^^^^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:162:5: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘currentConfig’
    |
162 |     currentConfig <- readIORef globalConfig
    |     ^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:169:9: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘isFastMode’
    |
169 |     let isFastMode = not (enableDebugOutput config) || isTestMode
    |         ^^^^^^^^^^

src/Azimuth/Telemetry.hs:320:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘metricValuePure’
    |
320 | metricValuePure metric = unsafePerformIO (metricValue metric)
    | ^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:358:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘createMetric_’
    |
358 | createMetric_ name unit = do
    | ^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:407:5: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘isProductionTestMode’
    |
407 |     isProductionTestMode <- readIORef productionTestMode
    |     ^^^^^^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:492:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘unsafeRecordMetric’
    |
492 | unsafeRecordMetric metric value = unsafePerformIO $ do
    | ^^^^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:577:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘getSpanTraceId’
    |
577 | getSpanTraceId span = return (spanTraceId span)
    | ^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:577:16: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at src/Azimuth/Telemetry.hs:69:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
577 | getSpanTraceId span = return (spanTraceId span)
    |                ^^^^

src/Azimuth/Telemetry.hs:581:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘getSpanSpanId’
    |
581 | getSpanSpanId span = return (spanSpanId span)
    | ^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:581:15: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at src/Azimuth/Telemetry.hs:69:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
581 | getSpanSpanId span = return (spanSpanId span)
    |               ^^^^

src/Azimuth/Telemetry.hs:585:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘createMetrics’
    |
585 | createMetrics n name unit = sequence $ replicate n $ createMetric name unit
    | ^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:589:1: warning: [GHC-40910] [-Wunused-top-binds]
    Defined but not used: ‘sequenceRecordMetric’
    |
589 | sequenceRecordMetric metrics value = sequence_ $ map (`recordMetric` value) metrics
    | ^^^^^^^^^^^^^^^^^^^^

src/Azimuth/Telemetry.hs:618:5: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at src/Azimuth/Telemetry.hs:69:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
618 |     span <- createSpan name
    |     ^^^^

Preprocessing test suite 'azimuth-test' for azimuth-0.1.0...
Building test suite 'azimuth-test' for azimuth-0.1.0...
[ 6 of 61] Compiling AdditionalTestSpec2 ( test/AdditionalTestSpec2.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/AdditionalTestSpec2.o ) [Source file changed]
test/AdditionalTestSpec2.hs:8:47: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘evaluate’
    from module ‘Control.Exception’ is redundant
  |
8 | import Control.Exception (try, SomeException, evaluate)
  |                                               ^^^^^^^^

test/AdditionalTestSpec2.hs:11:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
11 | import qualified Data.Text as T (append)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/AdditionalTestSpec2.hs:12:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.List’ is redundant
      except perhaps to import instances from ‘Data.List’
    To import instances alone, use: import Data.List()
   |
12 | import Data.List (nub, sort, group)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/AdditionalTestSpec2.hs:13:61: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘MVar’ from module ‘Control.Concurrent’ is redundant
   |
13 | import Control.Concurrent (forkIO, threadDelay, killThread, MVar, newMVar, takeMVar, putMVar)
   |                                                             ^^^^

test/AdditionalTestSpec2.hs:14:23: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘replicateM, void, when’
    from module ‘Control.Monad’ is redundant
   |
14 | import Control.Monad (replicateM, replicateM_, when, void)
   |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/AdditionalTestSpec2.hs:18:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Maybe’ is redundant
      except perhaps to import instances from ‘Data.Maybe’
    To import instances alone, use: import Data.Maybe()
   |
18 | import Data.Maybe (isJust, isNothing)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/AdditionalTestSpec2.hs:58:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/AdditionalTestSpec2.hs:17:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
   |
58 |           span <- createSpan nameText
   |           ^^^^

test/AdditionalTestSpec2.hs:70:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/AdditionalTestSpec2.hs:17:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
   |
70 |           span <- createSpan nameText
   |           ^^^^

test/AdditionalTestSpec2.hs:162:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘loggerName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/AdditionalTestSpec2.hs:21:1-24
    |
162 |             loggerName = pack $ "ordering-test-" ++ show levelInt1 ++ "-" ++ show levelInt2
    |             ^^^^^^^^^^

test/AdditionalTestSpec2.hs:168:15: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘levelComparison’
    |
168 |           let levelComparison = compare level1 level2
    |               ^^^^^^^^^^^^^^^

test/AdditionalTestSpec2.hs:235:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/AdditionalTestSpec2.hs:17:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
235 |           span <- createSpan text
    |           ^^^^

test/AdditionalTestSpec2.hs:249:14: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/AdditionalTestSpec2.hs:17:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
249 |              span <- createSpan text
    |              ^^^^

test/AdditionalTestSpec2.hs:309:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/AdditionalTestSpec2.hs:17:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
309 |           span <- createSpan "leak-test-span"
    |           ^^^^

[15 of 61] Compiling CompatibilityCabalTestSpec ( test/CompatibilityCabalTestSpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/CompatibilityCabalTestSpec.o ) [Source file changed]
test/CompatibilityCabalTestSpec.hs:84:14: error: [GHC-83865]
    • Couldn't match expected type: [Char] -> Maybe Version
                  with actual type: ghc-internal-9.1401.0:GHC.Internal.Text.ParserCombinators.ReadP.ReadP
                                      Version
    • The function ‘parseVersion’ is applied to one visible argument,
        but its type ‘ghc-internal-9.1401.0:GHC.Internal.Text.ParserCombinators.ReadP.ReadP
                        Version’
        has none
      In the expression: parseVersion versionStr
      In a stmt of a 'do' block:
        case parseVersion versionStr of
          Just version
            -> do version `shouldSatisfy` (\ v -> showVersion v == versionStr)
          Nothing
            -> do pendingWith $ "Could not parse version: " ++ versionStr
   |
84 |         case parseVersion versionStr of
   |              ^^^^^^^^^^^^^^^^^^^^^^^

[17 of 61] Compiling ComprehensiveTestSpec ( test/ComprehensiveTestSpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/ComprehensiveTestSpec.o ) [Source file changed]
test/ComprehensiveTestSpec.hs:8:47: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘bracket, evaluate’
    from module ‘Control.Exception’ is redundant
  |
8 | import Control.Exception (try, SomeException, evaluate, bracket)
  |                                               ^^^^^^^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:9:61: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘MVar’ from module ‘Control.Concurrent’ is redundant
  |
9 | import Control.Concurrent (forkIO, threadDelay, killThread, MVar, newEmptyMVar, putMVar, takeMVar, modifyMVar_)
  |                                                             ^^^^

test/ComprehensiveTestSpec.hs:10:23: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘replicateM, void, when’
    from module ‘Control.Monad’ is redundant
   |
10 | import Control.Monad (replicateM, when, void, foldM)
   |                       ^^^^^^^^^^^^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:13:25: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘unpack’ from module ‘Data.Text’ is redundant
   |
13 | import Data.Text (pack, unpack)
   |                         ^^^^^^

test/ComprehensiveTestSpec.hs:15:24: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘group, sort’ from module ‘Data.List’ is redundant
   |
15 | import Data.List (nub, sort, group)
   |                        ^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Char’ is redundant
      except perhaps to import instances from ‘Data.Char’
    To import instances alone, use: import Data.Char()
   |
16 | import Data.Char (isAscii, isControl)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:82:9: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘spanName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/ComprehensiveTestSpec.hs:20:1-24
   |
82 |       \(spanName :: String) ->
   |         ^^^^^^^^

test/ComprehensiveTestSpec.hs:105:9: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘spanName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/ComprehensiveTestSpec.hs:20:1-24
    |
105 |       \(spanName :: String) ->
    |         ^^^^^^^^

test/ComprehensiveTestSpec.hs:214:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
214 |           span <- createSpan nameText
    |           ^^^^

test/ComprehensiveTestSpec.hs:242:39: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
242 |           let allHaveValidIds = all (\span -> 
    |                                       ^^^^

test/ComprehensiveTestSpec.hs:259:9: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘serviceName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/ComprehensiveTestSpec.hs:20:1-24
    |
259 |       \(serviceName :: String) (enableDebug :: Bool) ->
    |         ^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:269:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
269 |           span <- createSpan "config-test-span"
    |           ^^^^

test/ComprehensiveTestSpec.hs:330:27: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
330 |                     Right span -> span
    |                           ^^^^

test/ComprehensiveTestSpec.hs:332:43: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
332 |               let allHaveValidIds = all (\span -> 
    |                                           ^^^^

test/ComprehensiveTestSpec.hs:356:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/ComprehensiveTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
356 |             span <- createSpan "leak-test-span"
    |             ^^^^

test/ComprehensiveTestSpec.hs:465:27: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Double’ in the following constraints
        (Fractional a0)
          arising from the literal ‘0.4’
          at test/ComprehensiveTestSpec.hs:465:27-29
        (RealFrac a0)
          arising from a use of ‘round’
          at test/ComprehensiveTestSpec.hs:469:33-37
        (Num a0)
          arising from a use of ‘fromIntegral’
          at test/ComprehensiveTestSpec.hs:469:40-51
    • In the expression: 0.4
      In an equation for ‘metricRatio’: metricRatio = 0.4
      In a stmt of a 'do' block:
        let operations = 50
            metricRatio = 0.4
            loggerRatio = 0.3
            spanRatio = 0.3
            ....
    |
465 |             metricRatio = 0.4  -- 40% metric operations
    |                           ^^^

test/ComprehensiveTestSpec.hs:466:27: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Double’ in the following constraints
        (Fractional a0)
          arising from the literal ‘0.3’
          at test/ComprehensiveTestSpec.hs:466:27-29
        (RealFrac a0)
          arising from a use of ‘round’
          at test/ComprehensiveTestSpec.hs:470:33-37
        (Num a0)
          arising from a use of ‘fromIntegral’
          at test/ComprehensiveTestSpec.hs:470:40-51
    • In the expression: 0.3
      In an equation for ‘loggerRatio’: loggerRatio = 0.3
      In a stmt of a 'do' block:
        let operations = 50
            metricRatio = 0.4
            loggerRatio = 0.3
            spanRatio = 0.3
            ....
    |
466 |             loggerRatio = 0.3  -- 30% logger operations
    |                           ^^^

test/ComprehensiveTestSpec.hs:467:13: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘spanRatio’
    |
467 |             spanRatio = 0.3    -- 30% span operations
    |             ^^^^^^^^^

test/ComprehensiveTestSpec.hs:467:25: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Double’ in the following constraint
        Fractional a0 arising from the literal ‘0.3’
    • In the expression: 0.3
      In an equation for ‘spanRatio’: spanRatio = 0.3
      In a stmt of a 'do' block:
        let operations = 50
            metricRatio = 0.4
            loggerRatio = 0.3
            spanRatio = 0.3
            ....
    |
467 |             spanRatio = 0.3    -- 30% span operations
    |                         ^^^

test/ComprehensiveTestSpec.hs:476:53: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Show a0)
          arising from a use of ‘show’
          at test/ComprehensiveTestSpec.hs:476:53-56
        (Num a0)
          arising from the literal ‘1’
          at test/ComprehensiveTestSpec.hs:476:75
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. ’
          at test/ComprehensiveTestSpec.hs:476:74-78
    • In the second argument of ‘(++)’, namely ‘show index’
      In the second argument of ‘($)’, namely
        ‘"mixed-workload-" ++ show index’
      In the first argument of ‘createMetric’, namely
        ‘(pack $ "mixed-workload-" ++ show index)’
    |
476 |           createMetric (pack $ "mixed-workload-" ++ show index) "count") [1..] (replicate metricOps ())
    |                                                     ^^^^

test/ComprehensiveTestSpec.hs:486:32: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Integral a0)
          arising from a use of ‘fromIntegral’
          at test/ComprehensiveTestSpec.hs:486:32-43
        (Num a0)
          arising from the literal ‘1’
          at test/ComprehensiveTestSpec.hs:486:62
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. ’
          at test/ComprehensiveTestSpec.hs:486:61-65
    • In the second argument of ‘recordMetric’, namely
        ‘(fromIntegral index)’
      In a stmt of a 'do' block: recordMetric metric (fromIntegral index)
      In the expression: do recordMetric metric (fromIntegral index)
    |
486 |           recordMetric metric (fromIntegral index)) metrics [1..]
    |                                ^^^^^^^^^^^^

test/ComprehensiveTestSpec.hs:489:71: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Show a0)
          arising from a use of ‘show’
          at test/ComprehensiveTestSpec.hs:489:71-74
        (Num a0)
          arising from the literal ‘1’
          at test/ComprehensiveTestSpec.hs:489:93
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. ’
          at test/ComprehensiveTestSpec.hs:489:92-96
    • In the second argument of ‘(++)’, namely ‘show index’
      In the second argument of ‘($)’, namely
        ‘"mixed workload message " ++ show index’
      In the third argument of ‘logMessage’, namely
        ‘(pack $ "mixed workload message " ++ show index)’
    |
489 |           logMessage logger Info (pack $ "mixed workload message " ++ show index)) loggers [1..]
    |                                                                       ^^^^

[22 of 61] Compiling DataIntegrityCabalTestSpec ( test/DataIntegrityCabalTestSpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/DataIntegrityCabalTestSpec.o ) [Source file changed]
test/DataIntegrityCabalTestSpec.hs:7:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Exception’ is redundant
      except perhaps to import instances from ‘Control.Exception’
    To import instances alone, use: import Control.Exception()
  |
7 | import Control.Exception (try, SomeException, evaluate)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:10:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.List’ is redundant
      except perhaps to import instances from ‘Data.List’
    To import instances alone, use: import Data.List()
   |
10 | import Data.List (nub, sort, group, sortBy, find)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:11:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Ord’ is redundant
      except perhaps to import instances from ‘Data.Ord’
    To import instances alone, use: import Data.Ord()
   |
11 | import Data.Ord (comparing)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:12:36: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘MVar, killThread, threadDelay’
    from module ‘Control.Concurrent’ is redundant
   |
12 | import Control.Concurrent (forkIO, threadDelay, killThread, MVar, newEmptyMVar, putMVar, takeMVar)
   |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:13:48: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘unless, void’
    from module ‘Control.Monad’ is redundant
   |
13 | import Control.Monad (replicateM, when, forM_, void, unless)
   |                                                ^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Function’ is redundant
      except perhaps to import instances from ‘Data.Function’
    To import instances alone, use: import Data.Function()
   |
16 | import Data.Function (on)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:49:17: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘unitChecksum’
   |
49 |                 unitChecksum = calculateChecksum (metricUnit metric)
   |                 ^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:54:27: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/DataIntegrityCabalTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
   |
54 |         , validateSpan = \span -> do
   |                           ^^^^

test/DataIntegrityCabalTestSpec.hs:55:17: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘nameChecksum’
   |
55 |             let nameChecksum = calculateChecksum (spanName span)
   |                 ^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:147:11: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘finalValue’
    |
147 |           finalValue <- metricValue metric
    |           ^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:156:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘spanName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/DataIntegrityCabalTestSpec.hs:21:1-24
    |
156 |         let spanName = pack $ take 20 (show name)
    |             ^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:160:11: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/DataIntegrityCabalTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
160 |           span <- createSpan spanName
    |           ^^^^

test/DataIntegrityCabalTestSpec.hs:178:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘loggerName’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/DataIntegrityCabalTestSpec.hs:21:1-24
    |
178 |         let loggerName = pack $ take 15 (show name)
    |             ^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:180:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘loggerLevel’ shadows the existing binding
      imported from ‘Azimuth.Telemetry’ at test/DataIntegrityCabalTestSpec.hs:21:1-24
    |
180 |             loggerLevel = levels !! (abs level `mod` 4)
    |             ^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:210:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘threads’
    |
210 |       threads <- mapM (\i -> forkIO $ do
    |       ^^^^^^^

test/DataIntegrityCabalTestSpec.hs:210:25: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘i’
    |
210 |       threads <- mapM (\i -> forkIO $ do
    |                         ^

test/DataIntegrityCabalTestSpec.hs:234:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘threads’
    |
234 |       threads <- mapM (\i -> forkIO $ do
    |       ^^^^^^^

test/DataIntegrityCabalTestSpec.hs:235:9: warning: [GHC-62161] [-Wincomplete-patterns]
    Pattern match(es) are non-exhaustive
    In a case alternative:
        Patterns of type ‘Int’ not matched:
            p where p is not one of {2, 0, 1}
    |
235 |         case i `mod` 3 of
    |         ^^^^^^^^^^^^^^^^^...

test/DataIntegrityCabalTestSpec.hs:240:13: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/DataIntegrityCabalTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
240 |             span <- createSpan (pack $ "concurrent-span-" ++ show i)
    |             ^^^^

test/DataIntegrityCabalTestSpec.hs:290:9: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/DataIntegrityCabalTestSpec.hs:18:1-26
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
290 |         span <- createSpan packedText
    |         ^^^^

test/DataIntegrityCabalTestSpec.hs:344:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘isEmptyValid’
    |
344 |       isEmptyValid <- validateMetric validator emptyMetric
    |       ^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:363:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘isEmptyValid’
    |
363 |       isEmptyValid <- validateSpan validator emptySpan
    |       ^^^^^^^^^^^^

test/DataIntegrityCabalTestSpec.hs:422:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘threads’
    |
422 |       threads <- mapM (\i -> forkIO $ do
    |       ^^^^^^^

test/DataIntegrityCabalTestSpec.hs:422:25: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘i’
    |
422 |       threads <- mapM (\i -> forkIO $ do
    |                         ^

[29 of 61] Compiling EnhancedTelemetrySpec ( test/EnhancedTelemetrySpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/EnhancedTelemetrySpec.o ) [Source file changed]
test/EnhancedTelemetrySpec.hs:27:7: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘value’ shadows the existing binding
      bound at test/EnhancedTelemetrySpec.hs:22:7
   |
27 |       value <- metricValue metric
   |       ^^^^^

test/EnhancedTelemetrySpec.hs:33:7: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘value’ shadows the existing binding
      bound at test/EnhancedTelemetrySpec.hs:27:7
   |
33 |       value <- metricValue metric
   |       ^^^^^

test/EnhancedTelemetrySpec.hs:47:7: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘value’ shadows the existing binding
      bound at test/EnhancedTelemetrySpec.hs:41:7
   |
47 |       value <- metricValue metric
   |       ^^^^^

test/EnhancedTelemetrySpec.hs:53:7: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘value’ shadows the existing binding
      bound at test/EnhancedTelemetrySpec.hs:47:7
   |
53 |       value <- metricValue metric
   |       ^^^^^

[38 of 61] Compiling MetricAggregationCabalTestSpec ( test/MetricAggregationCabalTestSpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/MetricAggregationCabalTestSpec.o ) [Source file changed]
test/MetricAggregationCabalTestSpec.hs:8:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Exception’ is redundant
      except perhaps to import instances from ‘Control.Exception’
    To import instances alone, use: import Control.Exception()
  |
8 | import Control.Exception (try, SomeException, evaluate)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:9:25: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘unpack’ from module ‘Data.Text’ is redundant
  |
9 | import Data.Text (pack, unpack)
  |                         ^^^^^^

test/MetricAggregationCabalTestSpec.hs:10:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
10 | import qualified Data.Text as Text
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:11:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.List’ is redundant
      except perhaps to import instances from ‘Data.List’
    To import instances alone, use: import Data.List()
   |
11 | import Data.List (nub, sort, group, sortBy)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:12:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Ord’ is redundant
      except perhaps to import instances from ‘Data.Ord’
    To import instances alone, use: import Data.Ord()
   |
12 | import Data.Ord (comparing)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:13:49: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘MVar, killThread’
    from module ‘Control.Concurrent’ is redundant
   |
13 | import Control.Concurrent (forkIO, threadDelay, killThread, MVar, newEmptyMVar, putMVar, takeMVar)
   |                                                 ^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:14:35: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘when’ from module ‘Control.Monad’ is redundant
   |
14 | import Control.Monad (replicateM, when, forM, forM_)
   |                                   ^^^^

test/MetricAggregationCabalTestSpec.hs:17:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Function’ is redundant
      except perhaps to import instances from ‘Data.Function’
    To import instances alone, use: import Data.Function()
   |
17 | import Data.Function (on)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:38:30: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Integral a0)
          arising from a use of ‘fromIntegral’
          at test/MetricAggregationCabalTestSpec.hs:38:30-41
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:37:19
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. ’
          at test/MetricAggregationCabalTestSpec.hs:37:18-22
    • In the second argument of ‘recordMetric’, namely
        ‘(fromIntegral i)’
      In a stmt of a 'do' block: recordMetric metric (fromIntegral i)
      In the expression: do recordMetric metric (fromIntegral i)
   |
38 |         recordMetric metric (fromIntegral i)
   |                              ^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:132:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘threads’
    |
132 |       threads <- mapM (\_ -> forkIO $ do
    |       ^^^^^^^

test/MetricAggregationCabalTestSpec.hs:155:24: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:155:24
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. 10’
          at test/MetricAggregationCabalTestSpec.hs:155:23-29
        (Show a0)
          arising from a use of ‘show’
          at test/MetricAggregationCabalTestSpec.hs:155:79-82
    • In the expression: 1
      In the first argument of ‘forM’, namely ‘[1 .. 10]’
      In the first argument of ‘($)’, namely ‘forM [1 .. 10]’
    |
155 |       metrics <- forM [1..10] $ \i -> createMetric (pack $ "average-test-" ++ show i) "value"
    |                        ^

test/MetricAggregationCabalTestSpec.hs:159:30: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Integral a0)
          arising from a use of ‘fromIntegral’
          at test/MetricAggregationCabalTestSpec.hs:159:30-41
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:158:19
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. ’
          at test/MetricAggregationCabalTestSpec.hs:158:18-22
    • In the second argument of ‘recordMetric’, namely
        ‘(fromIntegral i)’
      In a stmt of a 'do' block: recordMetric metric (fromIntegral i)
      In the expression: do recordMetric metric (fromIntegral i)
    |
159 |         recordMetric metric (fromIntegral i)
    |                              ^^^^^^^^^^^^

test/MetricAggregationCabalTestSpec.hs:173:24: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:173:24
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. 5’
          at test/MetricAggregationCabalTestSpec.hs:173:23-28
        (Show a0)
          arising from a use of ‘show’
          at test/MetricAggregationCabalTestSpec.hs:173:77-80
    • In the expression: 1
      In the first argument of ‘forM’, namely ‘[1 .. 5]’
      In the first argument of ‘($)’, namely ‘forM [1 .. 5]’
    |
173 |       metrics <- forM [1..5] $ \i -> createMetric (pack $ "minmax-test-" ++ show i) "value"
    |                        ^

test/MetricAggregationCabalTestSpec.hs:239:24: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:239:24
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. numMetrics’
          at test/MetricAggregationCabalTestSpec.hs:239:23-37
        (Show a0)
          arising from a use of ‘show’
          at test/MetricAggregationCabalTestSpec.hs:239:91-94
        (Num a0)
          arising from the literal ‘10’
          at test/MetricAggregationCabalTestSpec.hs:235:24-25
    • In the expression: 1
      In the first argument of ‘forM’, namely ‘[1 .. numMetrics]’
      In the first argument of ‘($)’, namely ‘forM [1 .. numMetrics]’
    |
239 |       metrics <- forM [1..numMetrics] $ \i -> createMetric (pack $ "performance-test-" ++ show i) "count"
    |                        ^

test/MetricAggregationCabalTestSpec.hs:299:24: warning: [GHC-18042] [-Wtype-defaults]
    • Defaulting the type variable ‘a0’ to type ‘Integer’ in the following constraints
        (Num a0)
          arising from the literal ‘1’
          at test/MetricAggregationCabalTestSpec.hs:299:24
        (Enum a0)
          arising from the arithmetic sequence ‘1 .. 5’
          at test/MetricAggregationCabalTestSpec.hs:299:23-28
        (Show a0)
          arising from a use of ‘show’
          at test/MetricAggregationCabalTestSpec.hs:299:82-85
    • In the expression: 1
      In the first argument of ‘forM’, namely ‘[1 .. 5]’
      In the first argument of ‘($)’, namely ‘forM [1 .. 5]’
    |
299 |       metrics <- forM [1..5] $ \i -> createMetric (pack $ "consistency-test-" ++ show i) "count"
    |                        ^

[44 of 61] Compiling NewTelemetrySpec ( test/NewTelemetrySpec.hs, dist-newstyle/build/x86_64-linux/ghc-9.14.1/azimuth-0.1.0/t/azimuth-test/build/azimuth-test/azimuth-test-tmp/NewTelemetrySpec.o ) [Source file changed]
test/NewTelemetrySpec.hs:8:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Exception’ is redundant
      except perhaps to import instances from ‘Control.Exception’
    To import instances alone, use: import Control.Exception()
  |
8 | import Control.Exception (try, SomeException)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:9:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Control.Concurrent’ is redundant
      except perhaps to import instances from ‘Control.Concurrent’
    To import instances alone, use: import Control.Concurrent()
  |
9 | import Control.Concurrent (threadDelay, forkIO)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:10:48: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘when’ from module ‘Control.Monad’ is redundant
   |
10 | import Control.Monad (replicateM, replicateM_, when)
   |                                                ^^^^

test/NewTelemetrySpec.hs:12:1: warning: [GHC-66111] [-Wunused-imports]
    The qualified import of ‘Data.Text’ is redundant
      except perhaps to import instances from ‘Data.Text’
    To import instances alone, use: import Data.Text()
   |
12 | import qualified Data.Text as Text
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:13:25: warning: [GHC-38856] [-Wunused-imports]
    The import of ‘unpack’ from module ‘Data.Text’ is redundant
   |
13 | import Data.Text (pack, unpack)
   |                         ^^^^^^

test/NewTelemetrySpec.hs:14:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘System.IO.Unsafe’ is redundant
      except perhaps to import instances from ‘System.IO.Unsafe’
    To import instances alone, use: import System.IO.Unsafe()
   |
14 | import System.IO.Unsafe (unsafePerformIO)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:16:1: warning: [GHC-66111] [-Wunused-imports]
    The import of ‘Data.Char’ is redundant
      except perhaps to import instances from ‘Data.Char’
    To import instances alone, use: import Data.Char()
   |
16 | import Data.Char (ord, chr)
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:198:7: warning: [GHC-40910] [-Wunused-matches]
    Defined but not used: ‘span’
    |
198 |       span <- createSpan "cleanup-span"
    |       ^^^^

test/NewTelemetrySpec.hs:198:7: warning: [GHC-63397] [-Wname-shadowing]
    This binding for ‘span’ shadows the existing binding
      imported from ‘Prelude’ at test/NewTelemetrySpec.hs:4:8-23
      (and originally defined in ‘ghc-internal-9.1401.0:GHC.Internal.List’)
    |
198 |       span <- createSpan "cleanup-span"
    |       ^^^^

test/NewTelemetrySpec.hs:233:13: warning: [GHC-40910] [-Wunused-local-binds]
    Defined but not used: ‘serializedValues’
    |
233 |         let serializedValues = map show values
    |             ^^^^^^^^^^^^^^^^

test/NewTelemetrySpec.hs:269:29: warning: [GHC-63394] [-Wx-partial]
    In the use of ‘head’
    (imported from Prelude, but defined in GHC.Internal.List):
    "This is a partial function, it throws an error on empty lists. Use pattern matching, 'Data.List.uncons' or 'Data.Maybe.listToMaybe' instead. Consider refactoring to use "Data.List.NonEmpty"."
    |
269 |           allSame = all (== head traceIds) (tail traceIds)
    |                             ^^^^

test/NewTelemetrySpec.hs:269:45: warning: [GHC-63394] [-Wx-partial]
    In the use of ‘tail’
    (imported from Prelude, but defined in GHC.Internal.List):
    "This is a partial function, it throws an error on empty lists. Replace it with 'drop' 1, or use pattern matching or 'GHC.Internal.Data.List.uncons' instead. Consider refactoring to use "Data.List.NonEmpty"."
    |
269 |           allSame = all (== head traceIds) (tail traceIds)
    |                                             ^^^^

