// MoonBit æ ‡å‡†æµ‹è¯•ç”¨ä¾‹ - é’ˆå¯¹ azimuth åº“æ ¸å¿ƒåŠŸèƒ½çš„å…¨é¢æµ‹è¯•
// åŒ…å«åŸºç¡€åŠŸèƒ½ã€è¾¹ç•Œæƒ…å†µå’Œå®é™…åº”ç”¨åœºæ™¯

test "azimuth_add_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  let a = 42
  let b = 17
  assert_eq(add(a, b), add(b, a))
  
  // æµ‹è¯•åŒ…å«é›¶çš„æƒ…å†µ
  assert_eq(add(a, 0), a)
  assert_eq(add(0, b), b)
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  assert_eq(add(-5, 10), add(10, -5))
}

test "azimuth_multiply_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let a = 7
  let b = 12
  let c = 8
  
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  
  assert_eq(left_side, right_side)
}

test "azimuth_divide_with_ceil_precision" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„ç²¾åº¦
  // æ­£æ•°æƒ…å†µ
  assert_eq(4, divide_with_ceil(10, 3))  // 3.333... -> 4
  assert_eq(3, divide_with_ceil(9, 3))   // 3 -> 3
  assert_eq(1, divide_with_ceil(1, 100)) // 0.01 -> 1
  
  // è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(-10, 3))  // -3.333... -> -3
  assert_eq(3, divide_with_ceil(10, -3))   // -3.333... -> -3
  assert_eq(4, divide_with_ceil(-10, -3))  // 3.333... -> 4
  
  // è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(5, 0))    // é™¤æ•°ä¸ºé›¶
  assert_eq(0, divide_with_ceil(0, 5))    // è¢«é™¤æ•°ä¸ºé›¶
}

test "azimuth_greet_unicode_handling" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ Unicode å­—ç¬¦å¤„ç†
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, Î±Î²Î³!", greet("Î±Î²Î³"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  
  // ç‰¹æ®Šå­—ç¬¦å’Œæ•°å­—
  assert_eq_string("Hello, User123!", greet("User123"))
  assert_eq_string("Hello, test@example.com!", greet("test@example.com"))
  
  // ç©ºå­—ç¬¦ä¸²å’Œç©ºæ ¼
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,   !", greet("  "))
}

test "azimuth_complex_business_calculation" {
  // å¤æ‚ä¸šåŠ¡è®¡ç®—ï¼šè®¢å•æ€»ä»·è®¡ç®—
  let unit_price = 89
  let quantity = 4
  let tax_rate = 8  // 8%
  let shipping = 15
  let discount = 20
  
  // è®¡ç®—å°è®¡
  let subtotal = multiply(unit_price, quantity)
  
  // è®¡ç®—ç¨è´¹ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let tax_amount = divide_with_ceil(multiply(subtotal, tax_rate), 100)
  
  // è®¡ç®—æ€»ä»·
  let total_before_discount = add(add(subtotal, tax_amount), shipping)
  let final_total = add(total_before_discount, -discount)
  
  assert_eq(356, subtotal)
  assert_eq(29, tax_amount)  // ceil(356 * 8 / 100) = ceil(28.48) = 29
  assert_eq(400, total_before_discount)
  assert_eq(380, final_total)
}

test "azimuth_packaging_optimization" {
  // åŒ…è£…ä¼˜åŒ–é—®é¢˜ï¼šè®¡ç®—æœ€å°‘éœ€è¦çš„åŒ…è£…ç®±æ•°é‡
  let items_per_box = 24
  
  // ä¸åŒæ•°é‡çš„å•†å“
  let order1_items = 100
  let order2_items = 250
  let order3_items = 1000
  
  let boxes1 = divide_with_ceil(order1_items, items_per_box)
  let boxes2 = divide_with_ceil(order2_items, items_per_box)
  let boxes3 = divide_with_ceil(order3_items, items_per_box)
  
  let total_boxes = add(add(boxes1, boxes2), boxes3)
  
  assert_eq(5, boxes1)   // ceil(100/24) = 5
  assert_eq(11, boxes2)  // ceil(250/24) = 11
  assert_eq(42, boxes3)  // ceil(1000/24) = 42
  assert_eq(58, total_boxes)
}

test "azimuth_mathematical_series" {
  // æ•°å­¦çº§æ•°ï¼šè®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œ
  let first_term = 3
  let common_difference = 2
  let number_of_terms = 10
  
  // ä½¿ç”¨å…¬å¼ï¼šS = n/2 * (2a + (n-1)d)
  let sum_formula = divide_with_ceil(
    multiply(number_of_terms, add(multiply(2, first_term), multiply(number_of_terms - 1, common_difference))),
    2
  )
  
  assert_eq(120, sum_formula)  // 10/2 * (6 + 18) = 5 * 24 = 120
}

test "azimuth_resource_allocation" {
  // èµ„æºåˆ†é…ï¼šé¡¹ç›®é¢„ç®—åˆ†é…
  let total_budget = 10000
  let project_costs = multiply(1200, 6)
  let remaining_budget = add(total_budget, -project_costs)
  
  // è®¡ç®—å¯ä»¥æ”¯æŒçš„å°é¡¹ç›®æ•°é‡
  let small_project_cost = 800
  let small_projects = divide_with_ceil(remaining_budget, small_project_cost)
  
  assert_eq(7200, project_costs)
  assert_eq(2800, remaining_budget)
  assert_eq(4, small_projects)
}

test "azimuth_time_management" {
  // æ—¶é—´ç®¡ç†ï¼šä»»åŠ¡å®Œæˆæ—¶é—´è®¡ç®—
  let tasks_per_day = 8
  let total_tasks = 67
  
  let workdays_needed = divide_with_ceil(total_tasks, tasks_per_day)
  let total_work_hours = multiply(workdays_needed, 8)
  
  // è®¡ç®—å‰©ä½™æ—¶é—´ï¼ˆå‡è®¾æ¯å¤©è¿˜æœ‰2å°æ—¶é¢å¤–å·¥ä½œï¼‰
  let extra_hours = multiply(workdays_needed, 2)
  let total_hours_including_extra = add(total_work_hours, extra_hours)
  
  assert_eq(9, workdays_needed)      // ceil(67/8) = 9
  assert_eq(72, total_work_hours)    // 9 * 8 = 72
  assert_eq(90, total_hours_including_extra)
}

test "azimuth_financial_compound_interest" {
  // é‡‘èè®¡ç®—ï¼šç®€åŒ–å¤åˆ©è®¡ç®—
  let principal = 5000
  let rate_percent = 6
  let years = 3
  
  // ç¬¬ä¸€å¹´
  let amount_year1 = add(principal, divide_with_ceil(multiply(principal, rate_percent), 100))
  
  // ç¬¬äºŒå¹´
  let amount_year2 = add(amount_year1, divide_with_ceil(multiply(amount_year1, rate_percent), 100))
  
  // ç¬¬ä¸‰å¹´
  let amount_year3 = add(amount_year2, divide_with_ceil(multiply(amount_year2, rate_percent), 100))
  
  assert_eq(5300, amount_year1)  // 5000 + ceil(5000*6/100) = 5000 + 300 = 5300
  assert_eq(5618, amount_year2)  // 5300 + ceil(5300*6/100) = 5300 + 318 = 5618
  assert_eq(5955, amount_year3)  // 5618 + ceil(5618*6/100) = 5618 + 337 = 5955
}