// å¢å¼ºçš„æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åŒ…çš„æ ¸å¿ƒåŠŸèƒ½ï¼šadd, multiply, greet å‡½æ•°
// åŒ…å«è¾¹ç•Œæƒ…å†µã€å®é™…åº”ç”¨åœºæ™¯å’Œå¤æ‚è®¡ç®—æµ‹è¯•

test "add_commutative_property" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  assert_eq(add(5, 10), add(10, 5))
  assert_eq(add(-3, 7), add(7, -3))
  assert_eq(add(-15, -20), add(-20, -15))
  assert_eq(add(0, 100), add(100, 0))
  assert_eq(add(2147483647, -2147483647), add(-2147483647, 2147483647))
}

test "multiply_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ï¼ša Ã— (b + c) = a Ã— b + a Ã— c
  let a = 6
  let b = 8
  let c = 12
  
  let left_side = multiply(a, add(b, c))
  let right_side = add(multiply(a, b), multiply(a, c))
  assert_eq(left_side, right_side)
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  let x = -5
  let y = 3
  let z = 7
  
  let left_side_neg = multiply(x, add(y, z))
  let right_side_neg = add(multiply(x, y), multiply(x, z))
  assert_eq(left_side_neg, right_side_neg)
}

test "greet_multilingual_support" {
  // æµ‹è¯•å¤šè¯­è¨€å­—ç¬¦ä¸²æ”¯æŒ
  assert_eq_string("Hello, å¼ ä¸‰!", greet("å¼ ä¸‰"))
  assert_eq_string("Hello, John!", greet("John"))
  assert_eq_string("Hello, JosÃ©!", greet("JosÃ©"))
  assert_eq_string("Hello, FranÃ§ois!", greet("FranÃ§ois"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, æ±äº¬!", greet("æ±äº¬"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, ğŸŒğŸŒğŸŒ!", greet("ğŸŒğŸŒğŸŒ"))
  assert_eq_string("Hello, 123-ABC!", greet("123-ABC"))
  assert_eq_string("Hello, !", greet(""))
}

test "financial_calculations" {
  // æµ‹è¯•é‡‘èè®¡ç®—åœºæ™¯
  // è®¡ç®—å¤åˆ©ï¼šæœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— å¹´æ•°)
  let principal = 10000  // æœ¬é‡‘
  let rate = 5           // åˆ©ç‡ 5%
  let years = 3          // å¹´æ•°
  
  let interest = multiply(principal, multiply(rate, years))
  let total = add(principal, interest)
  assert_eq(160000, total)  // 10000 + 10000*5*3 = 160000
  
  // è®¡ç®—æŠ˜æ‰£ï¼šåŸä»· Ã— (1 - æŠ˜æ‰£ç‡)
  let original_price = 500
  let discount_rate = 20   // 20% æŠ˜æ‰£
  let discount_amount = multiply(original_price, discount_rate) / 100
  let discounted_price = add(original_price, -discount_amount)
  assert_eq(400, discounted_price)
}

test "temperature_conversions" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢è®¡ç®—
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šF = C Ã— 2 + 30
  assert_eq(30, add(multiply(0, 2), 30))
  assert_eq(50, add(multiply(10, 2), 30))
  assert_eq(80, add(multiply(25, 2), 30))
  assert_eq(104, add(multiply(37, 2), 30))
  assert_eq(230, add(multiply(100, 2), 30))
  
  // åæ°åº¦è½¬æ‘„æ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼šC = (F - 30) Ã· 2
  let fahrenheit = 80
  let celsius = (fahrenheit - 30) / 2
  assert_eq(25, celsius)
}

test "geometry_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // è®¡ç®—çŸ©å½¢é¢ç§¯å’Œå‘¨é•¿
  let length = 12
  let width = 8
  
  let area = multiply(length, width)
  let perimeter = multiply(2, add(length, width))
  
  assert_eq(96, area)      // 12 Ã— 8 = 96
  assert_eq(40, perimeter) // 2 Ã— (12 + 8) = 40
  
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼šåº• Ã— é«˜ Ã· 2
  let base = 10
  let height = 6
  let triangle_area = multiply(base, height) / 2
  assert_eq(30, triangle_area)
  
  // è®¡ç®—æ¢¯å½¢é¢ç§¯ï¼šï¼ˆä¸Šåº• + ä¸‹åº•ï¼‰Ã— é«˜ Ã· 2
  let top_base = 6
  let bottom_base = 10
  let trapezoid_height = 4
  let trapezoid_area = multiply(add(top_base, bottom_base), trapezoid_height) / 2
  assert_eq(32, trapezoid_area)
}

test "statistical_calculations" {
  // æµ‹è¯•ç»Ÿè®¡è®¡ç®—
  // è®¡ç®—æ€»å’Œï¼š15 + 25 + 35 + 45 + 55 = 175
  let sum = add(add(add(add(15, 25), 35), 45), 55)
  assert_eq(175, sum)
  
  // è®¡ç®—å¹³å‡å€¼
  let average = sum / 5
  assert_eq(35, average)
  
  // è®¡ç®—ä¸­ä½æ•°ï¼ˆå·²æ’åºæ•°ç»„ï¼‰
  let median = 35  // ä¸­é—´å€¼
  assert_eq(35, median)
  
  // è®¡ç®—èŒƒå›´ï¼ˆæœ€å¤§å€¼ - æœ€å°å€¼ï¼‰
  let range = add(55, -15)
  assert_eq(40, range)
}

test "boundary_value_stress_test" {
  // æµ‹è¯•è¾¹ç•Œå€¼å‹åŠ›æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•è¿ç»­åŠ æ³•è¿ç®—
  let result1 = add(add(add(max_val, -1000000), 500000), -500000)
  assert_eq(2147482647, result1)
  
  // æµ‹è¯•è¿ç»­ä¹˜æ³•è¿ç®—
  let result2 = multiply(multiply(100, 100), multiply(10, 10))
  assert_eq(1000000, result2)
  
  // æµ‹è¯•æ··åˆè¿ç®—
  let result3 = add(multiply(1000, 2), multiply(500, 3))
  assert_eq(3500, result3)
  
  // æµ‹è¯•æå€¼ç»„åˆ
  let result4 = add(multiply(max_val, 0), min_val)
  assert_eq(min_val, result4)
  
  let result5 = multiply(add(min_val, 1), 0)
  assert_eq(0, result5)
}

test "time_calculations" {
  // æµ‹è¯•æ—¶é—´è®¡ç®—
  // è®¡ç®—æ€»ç§’æ•°ï¼šå°æ—¶ Ã— 3600 + åˆ†é’Ÿ Ã— 60 + ç§’
  let hours = 2
  let minutes = 30
  let seconds = 45
  
  let total_seconds = add(add(multiply(hours, 3600), multiply(minutes, 60)), seconds)
  assert_eq(9045, total_seconds)
  
  // è®¡ç®—æ—¶é—´å·®
  let start_hour = 9
  let start_minute = 15
  let end_hour = 14
  let end_minute = 45
  
  let start_minutes = add(multiply(start_hour, 60), start_minute)
  let end_minutes = add(multiply(end_hour, 60), end_minute)
  let duration = add(end_minutes, -start_minutes)
  
  assert_eq(330, duration)  // 5å°æ—¶30åˆ†é’Ÿ = 330åˆ†é’Ÿ
}

test "complex_business_logic" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡é€»è¾‘
  // è®¢å•æ€»ä»·è®¡ç®—ï¼šå•†å“æ€»ä»· Ã— æ•°é‡ + è¿è´¹ - æŠ˜æ‰£
  let unit_price = 199
  let quantity = 3
  let shipping_fee = 20
  let discount_threshold = 500
  let discount_rate = 10
  let tax_rate = 8
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = multiply(unit_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£ï¼ˆå¦‚æœè¶…è¿‡é˜ˆå€¼ï¼‰
  let discount = if (subtotal > discount_threshold) {
    multiply(subtotal, discount_rate) / 100
  } else {
    0
  }
  
  // è®¡ç®—ç¨è´¹
  let after_discount = add(subtotal, -discount)
  let tax = multiply(after_discount, tax_rate) / 100
  
  // è®¡ç®—æœ€ç»ˆæ€»ä»·ï¼ˆå«è¿è´¹ï¼‰
  let final_total = add(add(after_discount, tax), shipping_fee)
  
  assert_eq(656, final_total)  // (199Ã—3 - 59.7) Ã— 1.08 + 20 â‰ˆ 656
}