// å¢å¼ºçš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹å±•ç¤ºäº†å¯¹ azimuth æ¨¡å—åŠŸèƒ½çš„å…¨é¢æµ‹è¯•

// å¯¼å…¥ azimuth æ¨¡å—
use azimuth

test "enhanced_arithmetic_operations" {
  // æµ‹è¯•å¢å¼ºçš„ç®—æœ¯è¿ç®—
  let a = 42
  let b = 17
  
  // åŸºæœ¬åŠ æ³•æµ‹è¯•
  assert_eq(59, add(a, b))
  
  // è´Ÿæ•°åŠ æ³•æµ‹è¯•
  assert_eq(25, add(a, -b))
  
  // é›¶å€¼åŠ æ³•æµ‹è¯•
  assert_eq(a, add(a, 0))
  assert_eq(b, add(0, b))
  
  // åŸºæœ¬ä¹˜æ³•æµ‹è¯•
  assert_eq(714, multiply(a, b))
  
  // è´Ÿæ•°ä¹˜æ³•æµ‹è¯•
  assert_eq(-714, multiply(a, -b))
  assert_eq(714, multiply(-a, -b))
}

test "enhanced_boundary_value_testing" {
  // æµ‹è¯•å¢å¼ºçš„è¾¹ç•Œå€¼å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æœ€å¤§å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(max_val, add(max_val, 1))
  assert_eq(max_val, add(max_val, max_val))
  assert_eq(max_val, multiply(max_val, 1))
  
  // æœ€å°å€¼è¾¹ç•Œæµ‹è¯•
  assert_eq(min_val, add(min_val, -1))
  assert_eq(min_val, add(min_val, min_val))
  assert_eq(min_val, multiply(min_val, 1))
  assert_eq(min_val, multiply(min_val, -1))
  
  // æ··åˆè¾¹ç•Œæµ‹è¯•
  assert_eq(-1, add(max_val, min_val))
  assert_eq(0, multiply(max_val, 0))
  assert_eq(0, multiply(min_val, 0))
}

test "enhanced_string_processing" {
  // æµ‹è¯•å¢å¼ºçš„å­—ç¬¦ä¸²å¤„ç†
  // åŸºæœ¬é—®å€™æµ‹è¯•
  assert_eq_string("Hello, MoonBit!", greet("MoonBit"))
  
  // ç©ºå­—ç¬¦ä¸²æµ‹è¯•
  assert_eq_string("Hello, !", greet(""))
  
  // ç‰¹æ®Šå­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, @#$%^&*()!", greet("@#$%^&*()"))
  
  // Unicode å­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, ğŸŒŸ!", greet("ğŸŒŸ"))
  assert_eq_string("Hello, æµ‹è¯•!", greet("æµ‹è¯•"))
  
  // æ•°å­—å­—ç¬¦ä¸²æµ‹è¯•
  assert_eq_string("Hello, 2024!", greet("2024"))
  
  // æ··åˆå†…å®¹æµ‹è¯•
  assert_eq_string("Hello, User123_æµ‹è¯•!", greet("User123_æµ‹è¯•"))
}

test "enhanced_mathematical_formulas" {
  // æµ‹è¯•å¢å¼ºçš„æ•°å­¦å…¬å¼
  let x = 12
  let y = 8
  let z = 5
  
  // å¤åˆè¿ç®—ï¼š(x + y) * z
  let result1 = multiply(add(x, y), z)
  assert_eq(100, result1)
  
  // åˆ†é…å¾‹éªŒè¯ï¼šx * (y + z) = x * y + x * z
  let distributive_left = multiply(x, add(y, z))
  let distributive_right = add(multiply(x, y), multiply(x, z))
  assert_eq(distributive_left, distributive_right)
  
  // ç»“åˆå¾‹éªŒè¯ï¼š(x + y) + z = x + (y + z)
  let associative_left = add(add(x, y), z)
  let associative_right = add(x, add(y, z))
  assert_eq(associative_left, associative_right)
}

test "enhanced_real_world_scenarios" {
  // æµ‹è¯•å¢å¼ºçš„å®é™…åº”ç”¨åœºæ™¯
  // è´­ç‰©è½¦è®¡ç®—
  let item1_price = 199
  let item1_qty = 2
  let item2_price = 299
  let item2_qty = 1
  let discount = 50
  let shipping = 20
  
  let subtotal = add(multiply(item1_price, item1_qty), multiply(item2_price, item2_qty))
  let total = add(add(subtotal, -discount), shipping)
  assert_eq(637, total)
  
  // æ¸©åº¦è½¬æ¢ï¼šæ‘„æ°åº¦è½¬åæ°åº¦ï¼ˆç®€åŒ–ç‰ˆï¼šF = C * 2 + 30ï¼‰
  let celsius = 25
  let fahrenheit = add(multiply(celsius, 2), 30)
  assert_eq(80, fahrenheit)
  
  // ç®€å•åˆ©æ¯è®¡ç®—ï¼šæœ¬é‡‘ * (1 + åˆ©ç‡ * æ—¶é—´)
  let principal = 10000
  let rate = 5
  let time = 3
  let interest = multiply(principal, multiply(rate, time))
  let total_amount = add(principal, interest)
  assert_eq(160000, total_amount)
}

test "enhanced_error_handling" {
  // æµ‹è¯•å¢å¼ºçš„é”™è¯¯å¤„ç†
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æº¢å‡ºä¿æŠ¤æµ‹è¯•
  assert_true(add(max_val, 100) == max_val)
  assert_true(add(min_val, -100) == min_val)
  assert_true(multiply(max_val, 2) == max_val)
  assert_true(multiply(min_val, 2) == min_val)
  
  // æ–­è¨€å‡½æ•°æµ‹è¯•
  assert_true(true)
  assert_false(false)
  assert_eq(42, 42)
  assert_eq_string("test", "test")
  
  // è¾¹ç•Œæ¡ä»¶æ–­è¨€
  assert_true(add(0, 0) == 0)
  assert_true(multiply(1, 1) == 1)
  assert_true(multiply(0, 12345) == 0)
}

test "enhanced_performance_calculations" {
  // æµ‹è¯•å¢å¼ºçš„æ€§èƒ½è®¡ç®—
  // ç­‰å·®æ•°åˆ—æ±‚å’Œï¼š1 + 2 + ... + 100 = 100 * 101 / 2
  let n = 100
  let arithmetic_sum = multiply(n, add(n, 1)) / 2
  assert_eq(5050, arithmetic_sum)
  
  // ç­‰æ¯”æ•°åˆ—æ±‚å’Œï¼š1 + 2 + 4 + 8 + 16 = 31
  let geometric_sum = add(add(add(add(1, 2), 4), 8), 16)
  assert_eq(31, geometric_sum)
  
  // å¹³æ–¹å’Œï¼š1Â² + 2Â² + 3Â² + 4Â² + 5Â² = 55
  let square_sum = add(add(add(add(multiply(1, 1), multiply(2, 2)), multiply(3, 3)), multiply(4, 4)), multiply(5, 5))
  assert_eq(55, square_sum)
  
  // é˜¶ä¹˜è®¡ç®—ï¼š5! = 120
  let factorial = multiply(5, multiply(4, multiply(3, multiply(2, 1))))
  assert_eq(120, factorial)
}

test "enhanced_division_operations" {
  // æµ‹è¯•å¢å¼ºçš„é™¤æ³•è¿ç®—
  // åŸºæœ¬å‘ä¸Šå–æ•´é™¤æ³•
  assert_eq(3, divide_with_ceil(10, 4))
  assert_eq(3, divide_with_ceil(11, 4))
  assert_eq(3, divide_with_ceil(12, 4))
  assert_eq(4, divide_with_ceil(13, 4))
  
  // è´Ÿæ•°é™¤æ³•æµ‹è¯•
  assert_eq(-2, divide_with_ceil(-7, 4))
  assert_eq(-1, divide_with_ceil(-4, 4))
  assert_eq(0, divide_with_ceil(-3, 4))
  
  // é›¶é™¤æ•°è¾¹ç•Œæµ‹è¯•
  assert_eq(0, divide_with_ceil(0, 5))
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(1, divide_with_ceil(5, 5))
  
  // å¤§æ•°é™¤æ³•æµ‹è¯•
  assert_eq(1000000, divide_with_ceil(1000000, 1))
  assert_eq(500000, divide_with_ceil(1000000, 2))
  assert_eq(333334, divide_with_ceil(1000000, 3))
}

test "enhanced_complex_scenarios" {
  // æµ‹è¯•å¢å¼ºçš„å¤æ‚åœºæ™¯
  // å¤šæ­¥éª¤è®¡ç®—ï¼š((a + b) * (c - d)) + (e * f)
  let a = 15
  let b = 25
  let c = 30
  let d = 10
  let e = 8
  let f = 12
  
  let step1 = add(a, b)  // 40
  let step2 = add(c, -d)  // 20
  let step3 = multiply(step1, step2)  // 800
  let step4 = multiply(e, f)  // 96
  let final_result = add(step3, step4)  // 896
  
  assert_eq(896, final_result)
  
  // æ¡ä»¶è®¡ç®—ï¼šå¦‚æœ x > yï¼Œåˆ™è®¡ç®— x * yï¼Œå¦åˆ™è®¡ç®— x + y
  let x = 20
  let y = 15
  let conditional_result = if (x > y) { multiply(x, y) } else { add(x, y) }
  assert_eq(300, conditional_result)
  
  // åµŒå¥—è®¡ç®—ï¼ša * (b + (c * (d + e)))
  let nested_result = multiply(a, add(b, multiply(c, add(d, e))))
  assert_eq(1275, nested_result)
}

test "enhanced_data_validation" {
  // æµ‹è¯•å¢å¼ºçš„æ•°æ®éªŒè¯
  let test_values = [0, 1, -1, 42, -42, 1000, -1000, 2147483647, -2147483648]
  
  // éªŒè¯åŠ æ³•å•ä½å…ƒ
  for value in test_values {
    assert_eq(value, add(value, 0))
    assert_eq(value, add(0, value))
  }
  
  // éªŒè¯ä¹˜æ³•å•ä½å…ƒ
  for value in test_values {
    assert_eq(value, multiply(value, 1))
    assert_eq(value, multiply(1, value))
  }
  
  // éªŒè¯ä¹˜æ³•é›¶å…ƒ
  for value in test_values {
    assert_eq(0, multiply(value, 0))
    assert_eq(0, multiply(0, value))
  }
  
  // éªŒè¯å­—ç¬¦ä¸²å¤„ç†ä¸€è‡´æ€§
  let test_strings = ["", "a", "test", "123", "æµ‹è¯•", "ğŸŒŸ", "mix123æµ‹è¯•"]
  for str in test_strings {
    let expected = "Hello, " + str + "!"
    assert_eq_string(expected, greet(str))
  }
}