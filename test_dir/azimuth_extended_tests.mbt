// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•ï¼Œä¸º azimuth æ¨¡å—æä¾›é¢å¤–çš„æµ‹è¯•è¦†ç›–

// å¯¼å…¥ä¸»æ¨¡å—ä¸­çš„å‡½æ•°
use azimuth

test "arithmetics_zero_handling" {
  // æµ‹è¯•é›¶å€¼åœ¨ç®—æœ¯è¿ç®—ä¸­çš„å¤„ç†
  assert_eq(0, add(0, 0))
  assert_eq(5, add(5, 0))
  assert_eq(-5, add(-5, 0))
  assert_eq(0, multiply(0, 0))
  assert_eq(0, multiply(0, 5))
  assert_eq(0, multiply(5, 0))
}

test "arithmetics_negative_numbers" {
  // æµ‹è¯•è´Ÿæ•°ç®—æœ¯è¿ç®—
  assert_eq(-10, add(-5, -5))
  assert_eq(15, add(20, -5))
  assert_eq(-15, add(-20, 5))
  assert_eq(25, multiply(-5, -5))
  assert_eq(-30, multiply(6, -5))
  assert_eq(30, multiply(-6, -5))
}

test "greet_function_special_cases" {
  // æµ‹è¯• greet å‡½æ•°çš„ç‰¹æ®Šæƒ…å†µ
  assert_eq_string("Hello, MoonBit!", greet("MoonBit"))
  assert_eq_string("Hello, ğŸŒ™!", greet("ğŸŒ™"))
  assert_eq_string("Hello,   !", greet("   "))
  assert_eq_string("Hello, a_b_c!", greet("a_b_c"))
  assert_eq_string("Hello, line1
line2!", greet("line1
line2"))
}

test "combined_operations_complex" {
  // æµ‹è¯•å¤æ‚çš„ç»„åˆè¿ç®—
  let x = 7
  let y = 11
  let z = 13
  
  // (x * y) + (x * z)
  let result1 = add(multiply(x, y), multiply(x, z))
  assert_eq(168, result1)
  
  // (x + y) * (x + z)
  let result2 = multiply(add(x, y), add(x, z))
  assert_eq(324, result2)
  
  // x * y * z
  let result3 = multiply(multiply(x, y), z)
  assert_eq(1001, result3)
}

test "practical_calculations" {
  // æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯çš„è®¡ç®—
  // è®¡ç®—ä¸‰è§’å½¢é¢ç§¯ï¼šåº• * é«˜ / 2
  let base = 12
  let height = 8
  let triangle_area = multiply(base, height) / 2
  assert_eq(48, triangle_area)
  
  // è®¡ç®—å¹³å‡æ•°ï¼š(a + b + c) / 3
  let a = 15
  let b = 25
  let c = 35
  let sum = add(add(a, b), c)
  let average = sum / 3
  assert_eq(25, average)
}

test "string_boundary_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•å•ä¸ªå­—ç¬¦
  assert_eq_string("Hello, x!", greet("x"))
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²
  assert_eq_string("Hello, !", greet(""))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_string = "ThisIsAVeryLongStringThatMightCauseIssues"
  assert_eq_string("Hello, ThisIsAVeryLongStringThatMightCauseIssues!", greet(long_string))
}

test "mathematical_identities" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰å¼
  let a = 42
  
  // åŠ æ³•å•ä½å…ƒ
  assert_eq(a, add(a, 0))
  assert_eq(a, add(0, a))
  
  // ä¹˜æ³•å•ä½å…ƒ
  assert_eq(a, multiply(a, 1))
  assert_eq(a, multiply(1, a))
  
  // ä¹˜æ³•é›¶å…ƒ
  assert_eq(0, multiply(a, 0))
  assert_eq(0, multiply(0, a))
}

test "overflow_behavior" {
  // æµ‹è¯•æº¢å‡ºè¡Œä¸º
  let max_int = 2147483647
  let min_int = -2147483648
  
  // ç¡®ä¿æº¢å‡ºè¢«æ­£ç¡®å¤„ç†ï¼ˆä¸å´©æºƒï¼‰
  let overflow_add = add(max_int, max_int)
  let overflow_mul = multiply(max_int, 2)
  let underflow_add = add(min_int, min_int)
  let underflow_mul = multiply(min_int, 2)
  
  // éªŒè¯ç»“æœåœ¨åˆç†èŒƒå›´å†…ï¼ˆä¸ä¼šå´©æºƒï¼‰
  assert_true(overflow_add <= max_int)
  assert_true(overflow_mul <= max_int)
  assert_true(underflow_add >= min_int)
  assert_true(underflow_mul >= min_int)
}