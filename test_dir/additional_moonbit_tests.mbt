// é¢å¤–çš„ MoonBit æµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹è¦†ç›–äº† azimuth æ¨¡å—çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•

// å¯¼å…¥ä¸»æ¨¡å—ä¸­çš„å‡½æ•°
use azimuth

test "string_handling_with_unicode" {
  // æµ‹è¯• Unicode å­—ç¬¦ä¸²å¤„ç†
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, naÃ¯ve!", greet("naÃ¯ve"))
}

test "mathematical_identity_properties" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰æ€§è´¨
  let x = 42
  
  // åŠ æ³•æ’ç­‰å¾‹ï¼šx + 0 = x
  assert_eq(x, add(x, 0))
  assert_eq(x, add(0, x))
  
  // ä¹˜æ³•æ’ç­‰å¾‹ï¼šx * 1 = x
  assert_eq(x, multiply(x, 1))
  assert_eq(x, multiply(1, x))
  
  // ä¹˜æ³•é›¶å¾‹ï¼šx * 0 = 0
  assert_eq(0, multiply(x, 0))
  assert_eq(0, multiply(0, x))
}

test "complex_business_calculations" {
  // æµ‹è¯•å¤æ‚ä¸šåŠ¡è®¡ç®—åœºæ™¯
  // è®¡ç®—æŠ˜æ‰£å•†å“æ€»ä»·ï¼šåŸä»· Ã— æ•°é‡ Ã— (1 - æŠ˜æ‰£ç‡)
  let original_price = 150
  let quantity = 4
  let discount_rate = 20  // 20% æŠ˜æ‰£
  
  let subtotal = multiply(original_price, quantity)
  let discount_amount = multiply(subtotal, discount_rate) / 100
  let final_price = add(subtotal, -discount_amount)
  
  assert_eq(480, final_price)  // 150*4 - 150*4*20/100 = 600 - 120 = 480
}

test "temperature_conversion_scenarios" {
  // æµ‹è¯•æ¸©åº¦è½¬æ¢åœºæ™¯
  // æ‘„æ°åº¦è½¬åæ°åº¦ï¼šF = C Ã— 9/5 + 32
  // ç®€åŒ–ä¸ºæ•´æ•°è¿ç®—ï¼šF = C Ã— 2 + 30
  
  let freezing_celsius = 0
  let freezing_fahrenheit = add(multiply(freezing_celsius, 2), 30)
  assert_eq(30, freezing_fahrenheit)
  
  let room_celsius = 20
  let room_fahrenheit = add(multiply(room_celsius, 2), 30)
  assert_eq(70, room_fahrenheit)
  
  let boiling_celsius = 100
  let boiling_fahrenheit = add(multiply(boiling_celsius, 2), 30)
  assert_eq(230, boiling_fahrenheit)
}

test "array_arithmetic_progression" {
  // æµ‹è¯•ç­‰å·®æ•°åˆ—è®¡ç®—
  // è®¡ç®—å‰ n ä¸ªå¥‡æ•°çš„å’Œï¼š1 + 3 + 5 + ... + (2n-1) = nÂ²
  let n = 7
  
  // ä½¿ç”¨å…¬å¼ï¼šn Ã— n
  let sum_of_odds = multiply(n, n)
  assert_eq(49, sum_of_odds)
  
  // éªŒè¯å‰5ä¸ªå¥‡æ•°çš„å’Œ
  let first_five = multiply(5, 5)
  assert_eq(25, first_five)
}

test "financial_compound_interest" {
  // æµ‹è¯•å¤åˆ©è®¡ç®—
  // æœ¬é‡‘ Ã— (1 + åˆ©ç‡ Ã— æœŸæ•°)
  let principal = 10000
  let annual_rate = 8  // 8%
  let years = 5
  
  let total_interest = multiply(principal, multiply(annual_rate, years))
  let total_amount = add(principal, total_interest)
  
  assert_eq(500000, total_amount)  // 10000 + 10000*8*5 = 10000 + 400000 = 410000
}

test "geometric_calculations" {
  // æµ‹è¯•å‡ ä½•è®¡ç®—
  // è®¡ç®—ç«‹æ–¹ä½“è¡¨é¢ç§¯ï¼š6 Ã— è¾¹é•¿Â²
  let side_length = 5
  let surface_area = multiply(6, multiply(side_length, side_length))
  assert_eq(150, surface_area)
  
  // è®¡ç®—ç«‹æ–¹ä½“ä½“ç§¯ï¼šè¾¹é•¿Â³
  let volume = multiply(side_length, multiply(side_length, side_length))
  assert_eq(125, volume)
  
  // è®¡ç®—åœ†æŸ±ä½“è¡¨é¢ç§¯ï¼ˆç®€åŒ–ï¼‰ï¼š2Ï€rh + 2Ï€rÂ² â‰ˆ 6rh + 6rÂ²
  let radius = 3
  let height = 10
  let cylinder_surface = add(multiply(6, multiply(radius, height)), multiply(6, multiply(radius, radius)))
  assert_eq(234, cylinder_surface)
}

test "boundary_value_stress_test" {
  // æµ‹è¯•è¾¹ç•Œå€¼å‹åŠ›æµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼çš„å„ç§è¿ç®—
  assert_eq(max_val, add(max_val, 0))
  assert_eq(max_val, add(max_val, -min_val))  // max + (-min) = max + max = max (æº¢å‡ºä¿æŠ¤)
  assert_eq(min_val, multiply(max_val, -1))
  
  // æµ‹è¯•æœ€å°å€¼çš„å„ç§è¿ç®—
  assert_eq(min_val, add(min_val, 0))
  assert_eq(min_val, add(min_val, max_val))   // min + max = -1
  assert_eq(min_val, multiply(min_val, 1))
  
  // æµ‹è¯•è¿ç»­è¿ç®—
  let chain_result = add(multiply(add(max_val, min_val), 2), max_val)
  assert_eq(max_val, chain_result)
}

test "string_processing_edge_cases" {
  // æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  // æµ‹è¯•åŒ…å«å„ç§ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  let special_chars = "!@#$%^&*()_+-=[]{}|;':\",./<>?"
  assert_eq_string("Hello, !@#$%^&*()_+-=[]{}|;':\",./<>?!", greet(special_chars))
  
  // æµ‹è¯•åŒ…å«æ•°å­—å’Œå­—æ¯æ··åˆçš„å­—ç¬¦ä¸²
  let alphanumeric = "User123_Admin456"
  assert_eq_string("Hello, User123_Admin456!", greet(alphanumeric))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å­—ç¬¦ä¸²
  let spaced = "  Leading and trailing spaces  "
  assert_eq_string("Hello,   Leading and trailing spaces  !", greet(spaced))
}

test "algorithm_complexity_simulation" {
  // æµ‹è¯•ç®—æ³•å¤æ‚åº¦æ¨¡æ‹Ÿ
  // æ¨¡æ‹Ÿ O(nÂ²) ç®—æ³•çš„è®¡ç®—é‡ï¼šn Ã— (n + 1) / 2
  let n = 100
  
  let complexity_calculation = multiply(n, add(n, 1)) / 2
  assert_eq(5050, complexity_calculation)
  
  // æ¨¡æ‹Ÿ O(nÂ³) ç®—æ³•çš„è®¡ç®—é‡ï¼šnÂ² Ã— (n + 1) / 2
  let cubic_complexity = multiply(multiply(n, n), add(n, 1)) / 2
  assert_eq(505000, cubic_complexity)
  
  // æ¨¡æ‹Ÿ O(log n) ç®—æ³•çš„è¿­ä»£æ¬¡æ•°ï¼ˆç®€åŒ–ï¼‰
  let log_iterations = 7  // logâ‚‚(100) â‰ˆ 6.64ï¼Œå‘ä¸Šå–æ•´ä¸º7
  assert_eq(7, log_iterations)
}