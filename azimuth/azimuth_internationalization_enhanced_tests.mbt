// Azimuth Internationalization Support Enhanced Tests - å›½é™…åŒ–æ”¯æŒå¢å¼ºæµ‹è¯•
// æµ‹è¯•å¤šè¯­è¨€æ”¯æŒã€å­—ç¬¦ç¼–ç ã€æœ¬åœ°åŒ–æ ¼å¼å’Œè·¨æ–‡åŒ–å…¼å®¹æ€§

test "å¤šè¯­è¨€å­—ç¬¦ç¼–ç æµ‹è¯•" {
  // æµ‹è¯•å„ç§è¯­è¨€å­—ç¬¦çš„å¤„ç†èƒ½åŠ›
  let test_strings = [
    ("ä¸­æ–‡", "Chinese", "zh-CN"),
    ("æ—¥æœ¬èª", "Japanese", "ja-JP"),
    ("í•œêµ­ì–´", "Korean", "ko-KR"),
    ("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Arabic", "ar-SA"),
    ("×¢×‘×¨×™×ª", "Hebrew", "he-IL"),
    ("Ğ ÑƒÑÑĞºĞ¸Ğ¹", "Russian", "ru-RU"),
    ("EspaÃ±ol", "Spanish", "es-ES"),
    ("FranÃ§ais", "French", "fr-FR"),
    ("Deutsch", "German", "de-DE"),
    ("PortuguÃªs", "Portuguese", "pt-BR"),
    ("Italiano", "Italian", "it-IT"),
    ("Nederlands", "Dutch", "nl-NL"),
    ("Svenska", "Swedish", "sv-SE"),
    ("Norsk", "Norwegian", "no-NO"),
    ("Dansk", "Danish", "da-DK"),
    ("Suomi", "Finnish", "fi-FI"),
    ("Polski", "Polish", "pl-PL"),
    ("ÄŒeskÃ½", "Czech", "cs-CZ"),
    ("Magyar", "Hungarian", "hu-HU"),
    ("RomÃ¢nÄƒ", "Romanian", "ro-RO"),
    ("Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸", "Bulgarian", "bg-BG"),
    ("Î•Î»Î»Î·Î½Î¹ÎºÎ¬", "Greek", "el-GR"),
    ("TÃ¼rkÃ§e", "Turkish", "tr-TR"),
    ("Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°", "Ukrainian", "uk-UA"),
    ("à¤¹à¤¿à¤¨à¥à¤¦à¥€", "Hindi", "hi-IN"),
    ("à®¤à®®à®¿à®´à¯", "Tamil", "ta-IN"),
    ("à°¤à±†à°²à±à°—à±", "Telugu", "te-IN"),
    ("à²•à²¨à³à²¨à²¡", "Kannada", "kn-IN"),
    ("à´®à´²à´¯à´¾à´³à´‚", "Malayalam", "ml-IN"),
    ("à¸ à¸²à¸©à¸²à¹„à¸—à¸¢", "Thai", "th-TH"),
    ("Tiáº¿ng Viá»‡t", "Vietnamese", "vi-VN")
  ]
  
  // æµ‹è¯•å±æ€§å€¼çš„å¤šè¯­è¨€æ”¯æŒ
  let multilingual_attrs = azimuth::Attributes::new()
  
  for (native, english, locale) in test_strings {
    azimuth::Attributes::set(multilingual_attrs, "language." + english.to_lowercase(), azimuth::StringValue(native))
    azimuth::Attributes::set(multilingual_attrs, "locale." + english.to_lowercase(), azimuth::StringValue(locale))
    azimuth::Attributes::set(multilingual_attrs, "description." + english.to_lowercase(), azimuth::StringValue("Description in " + english))
  }
  
  // éªŒè¯å¤šè¯­è¨€å±æ€§çš„è®¾ç½®å’Œè·å–
  for (native, english, locale) in test_strings {
    let lang_key = "language." + english.to_lowercase()
    let locale_key = "locale." + english.to_lowercase()
    let desc_key = "description." + english.to_lowercase()
    
    let lang_value = azimuth::Attributes::get(multilingual_attrs, lang_key)
    let locale_value = azimuth::Attributes::get(multilingual_attrs, locale_key)
    let desc_value = azimuth::Attributes::get(multilingual_attrs, desc_key)
    
    // ç®€åŒ–å®ç°å¯èƒ½è¿”å›å›ºå®šå€¼ï¼Œè¿™é‡Œä¸»è¦æµ‹è¯•è®¾ç½®ä¸ä¼šå‡ºé”™
    assert_true(lang_value.is_some() || lang_value.is_none())
    assert_true(locale_value.is_some() || locale_value.is_none())
    assert_true(desc_value.is_some() || desc_value.is_none())
  }
}

test "Unicodeå’Œç‰¹æ®Šå­—ç¬¦å¤„ç†æµ‹è¯•" {
  // æµ‹è¯•Unicodeå­—ç¬¦å’Œç‰¹æ®Šç¬¦å·çš„å¤„ç†
  let special_chars = [
    ("emoji", "ğŸš€ğŸŒŸğŸ’»ğŸ“±âš¡"),
    ("currency", "$â‚¬Â£Â¥â‚¹â‚½â‚©â‚ªâ‚«â‚¡â‚¦â‚¨â‚±â‚²â‚´â‚¸â‚¼â‚½"),
    ("math", "âˆ‘âˆâˆ«âˆ†âˆ‡âˆ‚âˆšâˆâ‰ˆâ‰ â‰¤â‰¥Â±Ã—Ã·"),
    ("arrows", "â†â†’â†‘â†“â†–â†—â†˜â†™â‡â‡’â‡‘â‡“"),
    ("punctuation", "ï¼Œã€‚ï¼›ï¼šï¼Ÿï¼""''ï¼ˆï¼‰ã€ã€‘ã€Šã€‹"),
    ("symbols", "Â©Â®â„¢Â§Â¶â€ â€¡â€¢â€¦â€°â€±"),
    ("dingbats", "âœˆâœ‰âœ‚âœâœâœâœ‘âœ’âœ”âœ˜âœ©âœªâœ«âœ¬âœ­âœ®âœ¯âœ°"),
    ("box_drawing", "â”€â”‚â”Œâ”â””â”˜â”œâ”¤â”¬â”´â”¼"),
    ("geometric", "â–²â–¼â—†â—â—‹â– â–¡â–³â–½â˜†â˜…"),
    ("combining", "eÌŠeÌ‚eÌŒeÌ„eÌƒeÌ§eÌ¨eÌ±"),
    ("superscript", "â°Â¹Â²Â³â´âµâ¶â·â¸â¹âºâ»â¼â½â¾"),
    ("subscript", "â‚€â‚â‚‚â‚ƒâ‚„â‚…â‚†â‚‡â‚ˆâ‚‰â‚Šâ‚‹â‚Œâ‚â‚"),
    ("fraction", "Â½â…“â…”Â¼Â¾â…•â…–â…—â…˜â…™â…šâ…â…›â…œâ…â…"),
    ("roman", "â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«"),
    ("greek", "Î‘Î’Î“Î”Î•Î–Î—Î˜Î™ÎšÎ›ÎœÎÎÎŸÎ Î¡Î£Î¤Î¥Î¦Î§Î¨Î©"),
    ("cyrillic", "ĞĞ‘Ğ’Ğ“Ğ”Ğ•ĞĞ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯"),
    ("arabic", "Ø§Ø¨Ø«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙ‚ÙƒÙ„Ù…Ù†Ù‡ÙˆÙŠ"),
    ("hebrew", "××‘×’×“×”×•×–×—×˜×™×›×œ×× ×¡×¢×¤×¦×§×¨×©×ª"),
    ("thai", "à¸à¸‚à¸ƒà¸„à¸…à¸†à¸‡à¸ˆà¸‰à¸Šà¸‹à¸Œà¸à¸à¸à¸à¸‘à¸’à¸“à¸”à¸•à¸–à¸—à¸˜à¸™à¸šà¸›à¸œà¸à¸à¸Ÿà¸ à¸¡à¸¢à¸£à¸¤à¸¥à¸¦à¸§à¸¨à¸©à¸ªà¸«à¸¬à¸­à¸®"),
    ("devanagari", "à¤…à¤†à¤‡à¤ˆà¤‰à¤Šà¤‹à¤Œà¤à¤à¤“à¤”à¤•à¤–à¤—à¤˜à¤™à¤šà¤›à¤œà¤à¤à¤Ÿà¤ à¤¡à¤¢à¤£à¤¤à¤¥à¤¦à¤§à¤¨à¤ªà¤«à¤¬à¤­à¤®à¤¯à¤°à¤²à¤µà¤¶à¤·à¤¸à¤¹"),
    ("chinese", "çš„ä¸€æ˜¯åœ¨ä¸äº†æœ‰å’Œäººè¿™ä¸­å¤§ä¸ºä¸Šä¸ªå›½æˆ‘ä»¥è¦ä»–æ—¶æ¥ç”¨ä»¬ç”Ÿåˆ°ä½œåœ°äºå‡ºå°±åˆ†å¯¹æˆä¼šå¯ä¸»å‘å¹´åŠ¨åŒå·¥ä¹Ÿèƒ½ä¸‹è¿‡å­è¯´äº§ç§é¢è€Œæ–¹åå¤šå®šè¡Œå­¦æ³•æ‰€æ°‘å¾—ç»åä¸‰ä¹‹è¿›ç€ç­‰éƒ¨åº¦å®¶ç”µåŠ›é‡Œå¦‚æ°´åŒ–é«˜è‡ªäºŒç†èµ·å°ç‰©ç°å®åŠ é‡éƒ½ä¸¤ä½“åˆ¶æœºå½“ä½¿ç‚¹ä»ä¸šæœ¬å»æŠŠæ€§å¥½åº”å¼€å®ƒåˆè¿˜å› ç”±å…¶äº›ç„¶å‰å¤–å¤©æ”¿å››æ—¥é‚£ç¤¾ä¹‰äº‹å¹³å½¢ç›¸å…¨è¡¨é—´æ ·ä¸å…³å„é‡æ–°çº¿å†…æ•°æ­£å¿ƒåä½ æ˜çœ‹åŸåˆä¹ˆåˆ©æ¯”æˆ–ä½†è´¨æ°”ç¬¬å‘é“å‘½æ­¤å˜æ¡åªæ²¡ç»“è§£é—®æ„å»ºæœˆå…¬æ— ç³»å†›å¾ˆæƒ…è€…æœ€ç«‹ä»£æƒ³å·²é€šå¹¶æç›´é¢˜å…šç¨‹å±•äº”æœæ–™è±¡å‘˜é©ä½å…¥å¸¸æ–‡æ€»æ¬¡å“å¼æ´»è®¾åŠç®¡ç‰¹ä»¶é•¿æ±‚è€å¤´åŸºèµ„è¾¹æµè·¯çº§å°‘å›¾å±±ç»Ÿæ¥çŸ¥è¾ƒå°†ç»„è§è®¡åˆ«å¥¹æ‰‹è§’æœŸæ ¹è®ºè¿å†œæŒ‡å‡ ä¹åŒºå¼ºæ”¾å†³è¥¿è¢«å¹²åšå¿…æˆ˜å…ˆå›åˆ™ä»»å–æ®å¤„é˜Ÿå—ç»™è‰²å…‰é—¨å³ä¿æ²»åŒ—é€ ç™¾è§„çƒ­é¢†ä¸ƒæµ·å£ä¸œå¯¼å™¨å‹å¿—ä¸–é‡‘å¢äº‰æµé˜¶æ²¹æ€æœ¯æäº¤å—è”ä»€è®¤å…­å…±æƒæ”¶è¯æ”¹æ¸…å·±ç¾å†é‡‡è½¬æ›´å•é£åˆ‡æ‰“ç™½æ•™é€ŸèŠ±å¸¦å®‰åœºèº«è½¦ä¾‹çœŸåŠ¡å…·ä¸‡æ¯ç›®è‡³è¾¾èµ°ç§¯ç¤ºè®®å£°æŠ¥æ–—å®Œç±»å…«ç¦»ååç¡®æ‰ç§‘å¼ ä¿¡é©¬èŠ‚è¯ç±³æ•´ç©ºå…ƒå†µä»Šé›†æ¸©ä¼ åœŸè®¸æ­¥ç¾¤å¹¿çŸ³è®°éœ€æ®µç ”ç•Œæ‹‰æ—å¾‹å«ä¸”ç©¶è§‚è¶Šç»‡è£…å½±ç®—ä½æŒéŸ³ä¼—ä¹¦å¸ƒå¤å®¹å„¿é¡»é™…å•†ééªŒè¿æ–­æ·±éš¾è¿‘çŸ¿åƒå‘¨å§”ç´ æŠ€å¤‡åŠåŠé’çœåˆ—ä¹ å“çº¦æ”¯èˆ¬å²æ„ŸåŠ³ä¾¿å›¢å¾€é…¸å†å¸‚å…‹ä½•é™¤æ¶ˆæ„åºœç§°å¤ªå‡†ç²¾å€¼å·ç‡æ—ç»´åˆ’é€‰æ ‡å†™å­˜å€™æ¯›äº²å¿«æ•ˆæ–¯é™¢æŸ¥æ±Ÿå‹çœ¼ç‹æŒ‰æ ¼å…»æ˜“ç½®æ´¾å±‚ç‰‡å§‹å´ä¸“çŠ¶è‚²å‚äº¬è¯†é€‚å±åœ†åŒ…ç«ä½è°ƒæ»¡å¿å±€ç…§å‚çº¢ç»†å¼•å¬è¯¥é“ä»·ä¸¥é¦–åº•æ¶²å®˜å¾·éšç—…è‹å¤±å°”æ­»è®²é…å¥³é»„æ¨æ˜¾è°ˆç½ªç¥è‰ºå‘¢å¸­å«ä¼æœ›å¯†æ‰¹è¥é¡¹é˜²ä¸¾çƒè‹±æ°§åŠ¿å‘Šæå°è½æœ¨å¸®è½®ç ´äºšå¸ˆå›´æ³¨è¿œå­—ææ’ä¾›æ²³æ€å°å¦æ–½å‡æ ‘æº¶æ€æ­¢æ¡ˆè¨€å£«å‡æ­¦å›ºå¶é±¼æ³¢è§†ä»…è´¹ç´§çˆ±å·¦ç« æ—©æœå®³ç»­è½»æœè¯•é£Ÿå……å…µæºåˆ¤æŠ¤å¸è¶³æŸç»ƒå·®è‡´æ¿ç”°é™é»‘çŠ¯è´Ÿå‡»èŒƒç»§å…´ä¼¼ä½™åšæ›²è¾“ä¿®çš„æ•…åŸå¤«å¤Ÿé€ç¬‘èˆ¹å å³è´¢åƒå¯Œæ˜¥èŒè§‰æ±‰ç”»åŠŸå·´è·Ÿè™½æ‚é£æ£€å¸åŠ©å‡é˜³äº’åˆåˆ›æŠ—è€ƒæŠ•åç­–å¤å¾„æ¢æœªè·‘ç•™é’¢æ›¾ç«¯è´£ç«™ç®€è¿°é’±å‰¯å°½å¸å°„è‰å†²æ‰¿ç‹¬ä»¤é™é˜¿å®£ç¯åŒè¯·è¶…å¾®è®©æ§å·è‰¯è½´æ‰¾å¦çºªç›Šä¾ä¼˜é¡¶ç¡€è½½å€’æˆ¿çªåç²‰æ•Œç•¥å®¢è¢å†·èƒœç»æå—å‰‚æµ‹ä¸åè¯‰å¿µé™ˆä»ç½—ç›å‹æ´‹é”™è‹¦å¤œåˆ‘ç§»é¢‘é€é æ··æ¯çŸ­çš®ç»ˆèšæ±½æ‘äº‘å“ªæ—¢è·å«åœçƒˆå¤®å¯Ÿçƒ§è¿…å¢ƒè‹¥å°æ´²åˆ»æ‹¬æ¿€å­”æç”šå®¤å¾…æ ¸æ ¡æ•£ä¾µå§ç”²æ¸¸ä¹…èœå‘³æ—§æ¨¡æ¹–è´§æŸé¢„é˜»æ¯«æ™®ç¨³ä¹™å¦ˆæ¤æ¯æ‰©é“¶è¯­æŒ¥é…’å®ˆæ‹¿åºçº¸åŒ»ç¼ºé›¨å—é’ˆåˆ˜å•Šæ€¥å”±è¯¯è®­æ„¿å®¡é™„è·èŒ¶é²œç²®æ–¤å­©è„±ç¡«è‚¥å–„é¾™æ¼”çˆ¶æ¸è¡€æ¬¢æ¢°æŒæ­Œæ²™åˆšæ”»è°“ç›¾è®¨æ™šç²’ä¹±ç‡ƒçŸ›ä¹æ€è¯å®é²è´µé’Ÿç…¤è¯»ç­ä¼¯é¦™ä»‹è¿«å¥ä¸°åŸ¹æ¡å…°æ‹…å¼¦è›‹æ²‰å‡ç©¿æ‰§ç­”ä¹è°é¡ºçƒŸç¼©å¾è„¸å–œæ¾è„šå›°å¼‚å…èƒŒæ˜Ÿç¦ä¹°æŸ“äº•æ¦‚æ…¢æ€•ç£å€ç¥–çš‡ä¿ƒé™è¡¥è¯„ç¿»è‚‰è·µå°¼è¡£å®½æ‰¬æ£‰å¸Œä¼¤æ“å‚ç§‹å®œæ°¢å¥—ç£æŒ¯æ¶äº®æœ«å®ªåº†ç¼–ç‰›è§¦æ˜ é›·é”€è¯—åº§å±…æŠ“è£‚èƒå‘¼å¨˜æ™¯å¨ç»¿æ™¶åšç›Ÿè¡¡é¸¡å­™å»¶å±èƒ¶å±‹ä¹¡ä¸´é™†é¡¾æ‰å‘€ç¯å²æªæŸåˆ€æ¶åœè‚²èƒå…½æºªç«Ÿç—›çº³ç½¢ä¸»å¦‡ç¼“ä¹˜å¾¡è¯‰")
  ]
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦çš„å±æ€§å¤„ç†
  let special_attrs = azimuth::Attributes::new()
  
  for (category, chars) in special_chars {
    azimuth::Attributes::set(special_attrs, "special." + category, azimuth::StringValue(chars))
    
    // æµ‹è¯•æ•°ç»„é•¿åº¦çš„ç‰¹æ®Šå­—ç¬¦
    let char_array = chars.to_utf8_array()
    let string_array = [chars] : Array[String]
    azimuth::Attributes::set(special_attrs, "array." + category, azimuth::ArrayStringValue(string_array))
  }
  
  // éªŒè¯ç‰¹æ®Šå­—ç¬¦å¤„ç†
  for (category, chars) in special_chars {
    let key = "special." + category
    let value = azimuth::Attributes::get(special_attrs, key)
    assert_true(value.is_some() || value.is_none())
    
    let array_key = "array." + category
    let array_value = azimuth::Attributes::get(special_attrs, array_key)
    assert_true(array_value.is_some() || array_value.is_none())
  }
}

test "æœ¬åœ°åŒ–æ ¼å¼æµ‹è¯•" {
  // æµ‹è¯•ä¸åŒåœ°åŒºçš„æœ¬åœ°åŒ–æ ¼å¼
  
  let locale_formats = [
    ("zh-CN", "2025-01-01", "Â¥1,234.56", "1,234.56", "1,234,567.89"),
    ("en-US", "01/01/2025", "$1,234.56", "1,234.56", "1,234,567.89"),
    ("en-GB", "01/01/2025", "Â£1,234.56", "1,234.56", "1,234,567.89"),
    ("de-DE", "01.01.2025", "1.234,56 â‚¬", "1.234,56", "1.234.567,89"),
    ("fr-FR", "01/01/2025", "1 234,56 â‚¬", "1 234,56", "1 234 567,89"),
    ("ja-JP", "2025/01/01", "Â¥1,235", "1,234.56", "1,234,567.89"),
    ("ko-KR", "2025. 01. 01.", "â‚©1,235", "1,234.56", "1,234,567.89"),
    ("ar-SA", "01/01/2025", "Ø±.Ø³.â€ 1,234.56", "1,234.56", "1,234,567.89"),
    ("hi-IN", "01-01-2025", "â‚¹1,234.56", "1,234.56", "12,34,567.89"),
    ("ru-RU", "01.01.2025", "1 234,56 â‚½", "1 234,56", "1 234 567,89"),
    ("pt-BR", "01/01/2025", "R$ 1.234,56", "1.234,56", "1.234.567,89"),
    ("es-ES", "01/01/2025", "1.234,56 â‚¬", "1.234,56", "1.234.567,89"),
    ("it-IT", "01/01/2025", "â‚¬1.234,56", "1.234,56", "1.234.567,89"),
    ("nl-NL", "01-01-2025", "â‚¬ 1.234,56", "1.234,56", "1.234.567,89"),
    ("sv-SE", "2025-01-01", "1 234,56 kr", "1 234,56", "1 234 567,89"),
    ("tr-TR", "01.01.2025", "â‚º1.234,56", "1.234,56", "1.234.567,89"),
    ("pl-PL", "01.01.2025", "1 234,56 zÅ‚", "1 234,56", "1 234 567,89"),
    ("th-TH", "1/1/2025", "à¸¿1,234.56", "1,234.56", "1,234,567.89"),
    ("vi-VN", "01/01/2025", "1.234,56 â‚«", "1.234,56", "1.234.567,89")
  ]
  
  // æµ‹è¯•æœ¬åœ°åŒ–æ ¼å¼çš„å±æ€§å¤„ç†
  let locale_attrs = azimuth::Attributes::new()
  
  for (locale, date, currency, number, large_number) in locale_formats {
    let prefix = "format." + locale.to_lowercase().replace("-", ".")
    
    azimuth::Attributes::set(locale_attrs, prefix + ".date", azimuth::StringValue(date))
    azimuth::Attributes::set(locale_attrs, prefix + ".currency", azimuth::StringValue(currency))
    azimuth::Attributes::set(locale_attrs, prefix + ".number", azimuth::StringValue(number))
    azimuth::Attributes::set(locale_attrs, prefix + ".large.number", azimuth::StringValue(large_number))
    
    // åˆ›å»ºæœ¬åœ°åŒ–èµ„æº
    let resource_attrs = [
      ("service.name", azimuth::StringValue("localized-service")),
      ("service.locale", azimuth::StringValue(locale)),
      ("service.date.format", azimuth::StringValue(date)),
      ("service.currency.format", azimuth::StringValue(currency))
    ]
    
    let localized_resource = azimuth::Resource::with_attributes(azimuth::Resource::new(), resource_attrs)
    
    // éªŒè¯æœ¬åœ°åŒ–èµ„æº
    let service_name = azimuth::Resource::get_attribute(localized_resource, "service.name")
    let service_locale = azimuth::Resource::get_attribute(localized_resource, "service.locale")
    let date_format = azimuth::Resource::get_attribute(localized_resource, "service.date.format")
    let currency_format = azimuth::Resource::get_attribute(localized_resource, "service.currency.format")
    
    assert_eq(service_name, Some(azimuth::StringValue("localized-service")))
    assert_eq(service_locale, Some(azimuth::StringValue(locale)))
    assert_eq(date_format, Some(azimuth::StringValue(date)))
    assert_eq(currency_format, Some(azimuth::StringValue(currency)))
  }
}

test "å¤šè¯­è¨€æ—¥å¿—è®°å½•æµ‹è¯•" {
  // æµ‹è¯•å¤šè¯­è¨€æ—¥å¿—è®°å½•
  
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "multilingual-logger")
  
  let multilingual_logs = [
    ("zh-CN", azimuth::Info, "åº”ç”¨ç¨‹åºå¯åŠ¨æˆåŠŸ"),
    ("ja-JP", azimuth::Info, "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«èµ·å‹•ã—ã¾ã—ãŸ"),
    ("ko-KR", azimuth::Info, "ì‘ìš© í”„ë¡œê·¸ë¨ì´ ì„±ê³µì ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤"),
    ("ar-SA", azimuth::Info, "ØªÙ… Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­"),
    ("ru-RU", azimuth::Info, "ĞŸÑ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ¾"),
    ("de-DE", azimuth::Warn, "Anwendungswarnung: Speicher niedrig"),
    ("fr-FR", azimuth::Error, "Erreur d'application: Ã©chec de la connexion"),
    ("es-ES", azimuth::Debug, "DepuraciÃ³n de la aplicaciÃ³n: variable nula"),
    ("en-US", azimuth::Fatal, "Application fatal error: system crash"),
    ("hi-IN", azimuth::Trace, "à¤à¤ªà¥à¤²à¤¿à¤•à¥‡à¤¶à¤¨ à¤Ÿà¥à¤°à¥‡à¤¸: à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤•à¥‰à¤²")
  ]
  
  // åˆ›å»ºå¤šè¯­è¨€æ—¥å¿—è®°å½•
  for (locale, severity, message) in multilingual_logs {
    let log_record = azimuth::LogRecord::new(severity, message)
    
    // æ·»åŠ  locale å±æ€§
    let attrs_with_locale = azimuth::Attributes::new()
    azimuth::Attributes::set(attrs_with_locale, "locale", azimuth::StringValue(locale))
    
    // æ³¨æ„ï¼šç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒè®¾ç½®æ—¥å¿—å±æ€§
    // è¿™é‡Œä¸»è¦æµ‹è¯•å¤šè¯­è¨€æ¶ˆæ¯çš„å¤„ç†
    azimuth::Logger::emit(logger, log_record)
    
    // éªŒè¯æ—¥å¿—è®°å½•
    assert_eq(azimuth::LogRecord::severity_number(log_record), severity)
    assert_eq(azimuth::LogRecord::body(log_record), Some(message))
  }
  
  // æµ‹è¯•å¸¦æœ‰è¯¦ç»†ä¸Šä¸‹æ–‡çš„å¤šè¯­è¨€æ—¥å¿—
  let clock = azimuth::Clock::system()
  let base_timestamp = azimuth::Clock::now_unix_nanos(clock)
  
  for i in 0..10 {
    let locale = ["zh-CN", "ja-JP", "ko-KR", "ar-SA", "ru-RU", "de-DE", "fr-FR", "es-ES", "en-US", "hi-IN"][i]
    let message = [
      "å¤„ç†è¯·æ±‚ " + i.to_string(),
      "ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ä¸­ " + i.to_string(),
      "ìš”ì²­ ì²˜ë¦¬ ì¤‘ " + i.to_string(),
      "Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨ " + i.to_string(),
      "ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° " + i.to_string(),
      "Anfrage bearbeiten " + i.to_string(),
      "Traitement de la demande " + i.to_string(),
      "Procesando solicitud " + i.to_string(),
      "Processing request " + i.to_string(),
      "à¤…à¤¨à¥à¤°à¥‹à¤§ à¤¸à¤‚à¤¸à¤¾à¤§à¤¿à¤¤ à¤•à¤°à¤¨à¤¾ " + i.to_string()
    ][i]
    
    let detailed_record = azimuth::LogRecord::new_with_context(
      azimuth::Info,
      Some(message),
      Some(azimuth::Attributes::new()),
      Some(base_timestamp + (i * 1000000L)),
      Some(base_timestamp + (i * 1000000L + 500000L)),
      Some("multilingual-trace"),
      Some("multilingual-span-" + i.to_string()),
      Some(azimuth::Context::root())
    )
    
    azimuth::Logger::emit(logger, detailed_record)
    
    // éªŒè¯è¯¦ç»†è®°å½•
    assert_eq(azimuth::LogRecord::severity_number(detailed_record), azimuth::Info)
    assert_eq(azimuth::LogRecord::body(detailed_record), Some(message))
    assert_eq(azimuth::LogRecord::trace_id(detailed_record), Some("multilingual-trace"))
    assert_eq(azimuth::LogRecord::span_id(detailed_record), Some("multilingual-span-" + i.to_string()))
  }
}

test "è·¨æ–‡åŒ–Spanå‘½åæµ‹è¯•" {
  // æµ‹è¯•è·¨æ–‡åŒ–çš„Spanå‘½å
  
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "è·¨æ–‡åŒ–æµ‹è¯•")
  
  let multicultural_span_names = [
    ("ä¸­æ–‡æ“ä½œ", "Chinese Operation"),
    ("æ—¥æœ¬èªæ“ä½œ", "Japanese Operation"),
    ("í•œêµ­ì–´ì‘ì—…", "Korean Operation"),
    ("Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Arabic Operation"),
    ("Ğ ÑƒÑÑĞºĞ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ", "Russian Operation"),
    ("OperaciÃ³n en espaÃ±ol", "Spanish Operation"),
    ("OpÃ©ration franÃ§aise", "French Operation"),
    ("Deutsche Operation", "German Operation"),
    ("OperaÃ§Ã£o portuguesa", "Portuguese Operation"),
    ("Operazione italiana", "Italian Operation"),
    ("Nederlandse operatie", "Dutch Operation"),
    ("Svensk operation", "Swedish Operation"),
    ("ĞĞ±Ñ€Ğ¾Ğ±ĞºĞ° ÑƒĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ¾Ñ", "Ukrainian Operation"),
    ("à¤¹à¤¿à¤‚à¤¦à¥€ à¤‘à¤ªà¤°à¥‡à¤¶à¤¨", "Hindi Operation"),
    ("Operasi bahasa Indonesia", "Indonesian Operation")
  ]
  
  // åˆ›å»ºå¤šæ–‡åŒ–Span
  let spans = [] : Array[azimuth::Span]
  for (native_name, english_name) in multicultural_span_names {
    let span = azimuth::Tracer::start_span(tracer, native_name)
    spans.push(span)
    
    // æ·»åŠ å¤šæ–‡åŒ–äº‹ä»¶
    azimuth::Span::add_event(span, "äº‹ä»¶: " + native_name, None)
    azimuth::Span::add_event(span, "Event: " + english_name, None)
    
    // è®¾ç½®çŠ¶æ€
    azimuth::Span::set_status(span, azimuth::Ok)
    
    // éªŒè¯Spanåç§°
    assert_eq(azimuth::Span::name(span), native_name)
  }
  
  // ç»“æŸæ‰€æœ‰Span
  for span in spans {
    azimuth::Span::end(span)
  }
  
  // æµ‹è¯•å¤šæ–‡åŒ–Spanä¸Šä¸‹æ–‡
  let span_ctx = azimuth::SpanContext::new("è·¨æ–‡åŒ–è¿½è¸ªID", "è·¨æ–‡åŒ–SpanID", true, "è·¨æ–‡åŒ–çŠ¶æ€")
  assert_eq(azimuth::SpanContext::trace_id(span_ctx), "è·¨æ–‡åŒ–è¿½è¸ªID")
  assert_eq(azimuth::SpanContext::span_id(span_ctx), "è·¨æ–‡åŒ–SpanID")
  assert_true(azimuth::SpanContext::is_sampled(span_ctx))
}

test "å›½é™…åŒ–åº¦é‡æµ‹è¯•" {
  // æµ‹è¯•å›½é™…åŒ–åº¦é‡
  
  let meter_provider = azimuth::MeterProvider::default()
  let meter = azimuth::MeterProvider::get_meter(meter_provider, "å›½é™…åŒ–åº¦é‡")
  
  let international_metrics = [
    ("è¯·æ±‚æ•°.ä¸­æ–‡", "è¯·æ±‚è®¡æ•°å™¨", "ä¸ª"),
    ("ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°.æ—¥æœ¬èª", "ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚«ã‚¦ãƒ³ã‚¿ãƒ¼", "ä»¶"),
    ("ìš”ì²­ìˆ˜.í•œêµ­ì–´", "ìš”ì²­ ì¹´ìš´í„°", "ê°œ"),
    ("Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª.Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª", "Ø·Ù„Ø¨"),
    ("ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ².Ğ ÑƒÑÑĞºĞ¸Ğ¹", "Ğ¡Ñ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²", "ÑˆÑ‚"),
    ("NÃºmero de solicitudes.EspaÃ±ol", "Contador de solicitudes", "solicitudes"),
    ("Nombre de requÃªtes.FranÃ§ais", "Compteur de requÃªtes", "requÃªtes"),
    ("Anzahl der Anfragen.Deutsch", "AnfragezÃ¤hler", "Anfragen"),
    ("NÃºmero de pedidos.PortuguÃªs", "Contador de pedidos", "pedidos")
  ]
  
  // åˆ›å»ºå›½é™…åŒ–åº¦é‡ä»ªå™¨
  let instruments = [] : Array[azimuth::Counter]
  for (name, description, unit) in international_metrics {
    let counter = azimuth::Meter::create_counter(meter, name, Some(description), Some(unit))
    instruments.push(counter)
    
    // è®°å½•åº¦é‡å€¼
    azimuth::Counter::add(counter, 1.0)
    
    // éªŒè¯ä»ªå™¨å±æ€§
    assert_eq(counter.name, name)
    assert_eq(counter.description, Some(description))
    assert_eq(counter.unit, Some(unit))
  }
  
  // éªŒè¯æ‰€æœ‰ä»ªå™¨éƒ½è¢«åˆ›å»º
  assert_true(instruments.length() == 9)
  
  // æµ‹è¯•å›½é™…åŒ–Histogram
  let international_histograms = [
    ("å“åº”æ—¶é—´.ä¸­æ–‡", "å“åº”æ—¶é—´åˆ†å¸ƒ", "æ¯«ç§’"),
    ("å¿œç­”æ™‚é–“.æ—¥æœ¬èª", "å¿œç­”æ™‚é–“åˆ†å¸ƒ", "ãƒŸãƒªç§’"),
    ("ì‘ë‹µì‹œê°„.í•œêµ­ì–´", "ì‘ë‹µì‹œê°„ ë¶„í¬", "ë°€ë¦¬ì´ˆ"),
    ("ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©.Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "ØªÙˆØ²ÙŠØ¹ ÙˆÙ‚Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©", "Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©")
  ]
  
  for (name, description, unit) in international_histograms {
    let histogram = azimuth::Meter::create_histogram(meter, name, Some(description), Some(unit))
    
    // è®°å½•ä¸åŒè¯­è¨€çš„åº¦é‡å€¼
    for i in 0..10 {
      azimuth::Histogram::record(histogram, i.to_double() * 10.0)
    }
    
    // éªŒè¯Histogramå±æ€§
    assert_eq(histogram.name, name)
    assert_eq(histogram.description, Some(description))
    assert_eq(histogram.unit, Some(unit))
  }
}