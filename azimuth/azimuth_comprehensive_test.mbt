// æ–°çš„ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

// æµ‹è¯•ç”¨ä¾‹1: divide_with_ceil å‡½æ•°çš„é™¤é›¶å¤„ç†
test divide_with_ceil_zero_division {
  // æµ‹è¯•é™¤æ•°ä¸ºé›¶çš„æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(5, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-5, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))
}

// æµ‹è¯•ç”¨ä¾‹2: å¤æ‚çš„å‡½æ•°ç»„åˆè¿ç®—
test complex_function_composition {
  // è®¡ç®— (a + b) * c - d / e çš„æ¨¡æ‹Ÿï¼ˆä½¿ç”¨ç°æœ‰å‡½æ•°ï¼‰
  let a = 10
  let b = 15
  let c = 3
  let d = 20
  let e = 4
  
  // (a + b) * c
  let sum_ab = @azimuth.add(a, b)
  let product_abc = @azimuth.multiply(sum_ab, c)
  
  // æ¨¡æ‹Ÿå‡æ³•ï¼šåŠ ä¸Šè´Ÿæ•°
  let negate_d = @azimuth.multiply(d, -1)
  let result1 = @azimuth.add(product_abc, negate_d)
  
  // æœ€ç»ˆç»“æœåº”è¯¥æ˜¯ (10 + 15) * 3 - 20 = 55
  @azimuth.assert_eq(55, result1)
  
  // æµ‹è¯•å¦ä¸€ä¸ªå¤æ‚è¡¨è¾¾å¼ï¼ša * b + c * d
  let product_ab = @azimuth.multiply(a, b)
  let product_cd = @azimuth.multiply(c, d)
  let result2 = @azimuth.add(product_ab, product_cd)
  
  // 10 * 15 + 3 * 20 = 150 + 60 = 210
  @azimuth.assert_eq(210, result2)
}

// æµ‹è¯•ç”¨ä¾‹3: greet å‡½æ•°çš„å­—ç¬¦ä¸²è¾¹ç•Œæµ‹è¯•
test greet_string_boundary_tests {
  // æµ‹è¯•ç©ºç™½å­—ç¬¦
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
  @azimuth.assert_eq_string("Hello, 	!", @azimuth.greet("\t"))
  @azimuth.assert_eq_string("Hello, 
!", @azimuth.greet("\n"))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet("\r"))
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, \"quoted\"!", @azimuth.greet("\"quoted\""))
  @azimuth.assert_eq_string("Hello, 'single'!", @azimuth.greet("'single'"))
  @azimuth.assert_eq_string("Hello, \\backslash!", @azimuth.greet("\\backslash"))
  
  // æµ‹è¯•æ•°å­—å’Œå­—æ¯æ··åˆ
  @azimuth.assert_eq_string("Hello, test123!", @azimuth.greet("test123"))
  @azimuth.assert_eq_string("Hello, 123test!", @azimuth.greet("123test"))
}

// æµ‹è¯•ç”¨ä¾‹4: è´Ÿæ•°è¾¹ç•Œå€¼çš„ä¹˜æ³•æµ‹è¯•
test negative_boundary_multiplication {
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å°å€¼çš„ç‰¹æ®Šä¹˜æ³•æƒ…å†µ
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(1, min_val))
  @azimuth.assert_eq(min_val, @azimuth.multiply(-1, min_val))
  
  // æµ‹è¯•å…¶ä»–è´Ÿæ•°è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(2147483647, @azimuth.multiply(-1, -2147483647))
  @azimuth.assert_eq(-2147483648, @azimuth.multiply(-2, 1073741824))
  @azimuth.assert_eq(-2147483648, @azimuth.multiply(1073741824, -2))
}

// æµ‹è¯•ç”¨ä¾‹5: divide_with_ceil çš„æ­£è´Ÿæ•°æ··åˆæµ‹è¯•
test divide_with_ceil_mixed_signs {
  // æ­£æ•°é™¤ä»¥è´Ÿæ•°
  @azimuth.assert_eq(-2, @azimuth.divide_with_ceil(5, -3))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(3, -3))
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(11, -3))
  
  // è´Ÿæ•°é™¤ä»¥æ­£æ•°
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(-5, 3))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(-3, 3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-11, 3))
  
  // è´Ÿæ•°é™¤ä»¥è´Ÿæ•°
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(-5, -3))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-3, -3))
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(-11, -3))
}

// æµ‹è¯•ç”¨ä¾‹6: å®é™…åº”ç”¨åœºæ™¯ - è®¢å•è®¡ç®—
test order_calculation_scenario {
  // æ¨¡æ‹Ÿè®¢å•è®¡ç®—åœºæ™¯
  let item1_price = 199
  let item2_price = 299
  let item3_price = 399
  let quantity1 = 2
  let quantity2 = 1
  let quantity3 = 3
  let discount = -100  // æŠ˜æ‰£
  
  // è®¡ç®—æ¯ä¸ªé¡¹ç›®çš„æ€»ä»·
  let total1 = @azimuth.multiply(item1_price, quantity1)
  let total2 = @azimuth.multiply(item2_price, quantity2)
  let total3 = @azimuth.multiply(item3_price, quantity3)
  
  // è®¡ç®—å°è®¡
  let subtotal = @azimuth.add(total1, total2)
  subtotal = @azimuth.add(subtotal, total3)
  
  // åº”ç”¨æŠ˜æ‰£
  let final_total = @azimuth.add(subtotal, discount)
  
  // éªŒè¯æœ€ç»ˆæ€»ä»·ï¼š199*2 + 299*1 + 399*3 - 100 = 398 + 299 + 1197 - 100 = 1794
  @azimuth.assert_eq(1794, final_total)
  
  // ä¸ºä¸åŒå®¢æˆ·ç”Ÿæˆä¸ªæ€§åŒ–é—®å€™
  let vip_greeting = @azimuth.greet("VIPå®¢æˆ·")
  let regular_greeting = @azimuth.greet("æ™®é€šå®¢æˆ·")
  
  @azimuth.assert_eq_string("Hello, VIPå®¢æˆ·!", vip_greeting)
  @azimuth.assert_eq_string("Hello, æ™®é€šå®¢æˆ·!", regular_greeting)
}

// æµ‹è¯•ç”¨ä¾‹7: æ•°å­¦æ’ç­‰å¼éªŒè¯
test mathematical_identities {
  // æµ‹è¯•åŠ æ³•æ’ç­‰å¼
  let x = 42
  let y = 17
  
  // äº¤æ¢å¾‹ï¼ša + b = b + a
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
  
  // ç»“åˆå¾‹æ¨¡æ‹Ÿï¼š(a + b) + c = a + (b + c)
  let z = 23
  let left_assoc = @azimuth.add(@azimuth.add(x, y), z)
  let right_assoc = @azimuth.add(x, @azimuth.add(y, z))
  @azimuth.assert_eq(left_assoc, right_assoc)
  
  // ä¹˜æ³•äº¤æ¢å¾‹ï¼ša * b = b * a
  @azimuth.assert_eq(@azimuth.multiply(x, y), @azimuth.multiply(y, x))
  
  // åˆ†é…å¾‹æ¨¡æ‹Ÿï¼ša * (b + c) = a * b + a * c
  let distrib_left = @azimuth.multiply(x, @azimuth.add(y, z))
  let distrib_right = @azimuth.add(@azimuth.multiply(x, y), @azimuth.multiply(x, z))
  @azimuth.assert_eq(distrib_left, distrib_right)
}

// æµ‹è¯•ç”¨ä¾‹8: æå€¼æƒ…å†µä¸‹çš„è¿ç®—ç¨³å®šæ€§
test extreme_value_stability {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æœ€å¤§å€¼åŠ é›¶çš„ç¨³å®šæ€§
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.add(0, max_val))
  
  // æµ‹è¯•æœ€å°å€¼åŠ é›¶çš„ç¨³å®šæ€§
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(0, min_val))
  
  // æµ‹è¯•æœ€å¤§å€¼ä¹˜ä»¥1çš„ç¨³å®šæ€§
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(max_val, @azimuth.multiply(1, max_val))
  
  // æµ‹è¯•æœ€å°å€¼ä¹˜ä»¥1çš„ç¨³å®šæ€§
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(1, min_val))
  
  // æµ‹è¯•é›¶ä¹˜ä»¥æå€¼çš„ç¨³å®šæ€§
  @azimuth.assert_eq(0, @azimuth.multiply(0, max_val))
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, min_val))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, 0))
}

// æµ‹è¯•ç”¨ä¾‹9: divide_with_ceil çš„ç²¾åº¦æµ‹è¯•
test divide_with_ceil_precision_tests {
  // æµ‹è¯•æ¥è¿‘æ•´æ•°çš„é™¤æ³•
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(9, 3))
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(10, 3))
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(11, 3))
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(12, 3))
  
  // æµ‹è¯•å¤§æ•°é™¤æ³•
  @azimuth.assert_eq(1000000, @azimuth.divide_with_ceil(3000000, 3))
  @azimuth.assert_eq(1000001, @azimuth.divide_with_ceil(3000001, 3))
  
  // æµ‹è¯•å°æ•°é™¤æ³•ï¼ˆæ•´æ•°ç»“æœï¼‰
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(2, 2))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(100, 100))
  
  // æµ‹è¯•è´Ÿæ•°ç²¾åº¦
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-9, 3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(-11, 3))
}

// æµ‹è¯•ç”¨ä¾‹10: å­—ç¬¦ä¸²å¤„ç†æ€§èƒ½å’Œé•¿åº¦æµ‹è¯•
test greet_string_performance_tests {
  // æµ‹è¯•éå¸¸é•¿çš„å­—ç¬¦ä¸²
  let very_long_name = "ThisIsAnExtremelyLongUserNameThatMightBeUsedInSomeSystemToTestThePerformanceAndStabilityOfTheGreetFunctionWhenHandlingLongStrings"
  let long_result = @azimuth.greet(very_long_name)
  let expected_long = "Hello, " + very_long_name + "!"
  @azimuth.assert_eq_string(expected_long, long_result)
  
  // æµ‹è¯•åŒ…å«å„ç§Unicodeå­—ç¬¦çš„å­—ç¬¦ä¸²
  let unicode_name = "ç”¨æˆ·ğŸŒ™MoonBitæµ‹è¯•123"
  let unicode_result = @azimuth.greet(unicode_name)
  let expected_unicode = "Hello, " + unicode_name + "!"
  @azimuth.assert_eq_string(expected_unicode, unicode_result)
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼çš„å¤åˆåç§°
  let full_name = "John Doe Jr."
  let full_result = @azimuth.greet(full_name)
  @azimuth.assert_eq_string("Hello, John Doe Jr.!", full_result)
}