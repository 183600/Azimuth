// Internationalization and Globalization Tests for Azimuth Telemetry System
// Focus on multi-language support, locale-specific formatting, and cultural conventions

test "å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯æµ‹è¯•" {
  let attrs = Attributes::new()
  
  // æµ‹è¯•ä¸­æ–‡é”™è¯¯æ¶ˆæ¯
  Attributes::set(attrs, "error.message.zh", StringValue("ç”¨æˆ·éªŒè¯å¤±è´¥"))
  Attributes::set(attrs, "error.code.zh", StringValue("AUTH_FAILED"))
  Attributes::set(attrs, "error.description.zh", StringValue("æä¾›çš„ç”¨æˆ·å‡­æ®æ— æ•ˆï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "))
  
  // æµ‹è¯•è‹±æ–‡é”™è¯¯æ¶ˆæ¯
  Attributes::set(attrs, "error.message.en", StringValue("User authentication failed"))
  Attributes::set(attrs, "error.code.en", StringValue("AUTH_FAILED"))
  Attributes::set(attrs, "error.description.en", StringValue("Invalid user credentials provided, please check username and password"))
  
  // æµ‹è¯•æ—¥æ–‡é”™è¯¯æ¶ˆæ¯
  Attributes::set(attrs, "error.message.ja", StringValue("ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ"))
  Attributes::set(attrs, "error.code.ja", StringValue("AUTH_FAILED"))
  Attributes::set(attrs, "error.description.ja", StringValue("ç„¡åŠ¹ãªãƒ¦ãƒ¼ã‚¶ãƒ¼è³‡æ ¼æƒ…å ±ãŒæä¾›ã•ã‚Œã¾ã—ãŸã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„"))
  
  // éªŒè¯ä¸­æ–‡é”™è¯¯æ¶ˆæ¯
  let zh_message = Attributes::get(attrs, "error.message.zh")
  match zh_message {
    Some(StringValue(value)) => assert_eq(value, "ç”¨æˆ·éªŒè¯å¤±è´¥")
    _ => assert_true(false)
  }
  
  // éªŒè¯è‹±æ–‡é”™è¯¯æ¶ˆæ¯
  let en_message = Attributes::get(attrs, "error.message.en")
  match en_message {
    Some(StringValue(value)) => assert_eq(value, "User authentication failed")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ—¥æ–‡é”™è¯¯æ¶ˆæ¯
  let ja_message = Attributes::get(attrs, "error.message.ja")
  match ja_message {
    Some(StringValue(value)) => assert_eq(value, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ")
    _ => assert_true(false)
  }
}

test "æœ¬åœ°åŒ–æ—¶é—´æ ¼å¼æµ‹è¯•" {
  let timestamp = 1735689600000000000L // 2025å¹´1æœˆ1æ—¥çš„æ—¶é—´æˆ³
  
  // åˆ›å»ºä¸åŒè¯­è¨€çš„æ—¥å¿—è®°å½•
  let zh_log = LogRecord::new_with_context(
    Info,
    Some("ç³»ç»Ÿå¯åŠ¨å®Œæˆ - 2025å¹´01æœˆ01æ—¥ 00:00:00"),
    None,
    Some(timestamp),
    None,
    None,
    None,
    None
  )
  
  let en_log = LogRecord::new_with_context(
    Info,
    Some("System startup completed - 01/01/2025 00:00:00"),
    None,
    Some(timestamp),
    None,
    None,
    None,
    None
  )
  
  let ja_log = LogRecord::new_with_context(
    Info,
    Some("ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•å®Œäº† - 2025å¹´01æœˆ01æ—¥ 00:00:00"),
    None,
    Some(timestamp),
    None,
    None,
    None,
    None
  )
  
  // éªŒè¯ä¸åŒè¯­è¨€çš„æ—¥å¿—æ¶ˆæ¯
  match LogRecord::body(zh_log) {
    Some(message) => assert_true(message.contains("2025å¹´01æœˆ01æ—¥"))
    None => assert_true(false)
  }
  
  match LogRecord::body(en_log) {
    Some(message) => assert_true(message.contains("01/01/2025"))
    None => assert_true(false)
  }
  
  match LogRecord::body(ja_log) {
    Some(message) => assert_true(message.contains("2025å¹´01æœˆ01æ—¥"))
    None => assert_true(false)
  }
}

test "å¤šè¯­è¨€èµ„æºå±æ€§æµ‹è¯•" {
  let resource_attrs = [
    // ä¸­æ–‡èµ„æºå±æ€§
    ("service.name.zh", StringValue("æ–¹ä½è§’é¥æµ‹ç³»ç»Ÿ")),
    ("service.description.zh", StringValue("ä¸ºMoonBitæä¾›OpenTelemetryé£æ ¼çš„é¥æµ‹åŠŸèƒ½")),
    ("service.version.zh", StringValue("ç‰ˆæœ¬ 1.0.0")),
    
    // è‹±æ–‡èµ„æºå±æ€§
    ("service.name.en", StringValue("Azimuth Telemetry System")),
    ("service.description.en", StringValue("OpenTelemetry-style telemetry functionality for MoonBit")),
    ("service.version.en", StringValue("Version 1.0.0")),
    
    // æ—¥æ–‡èµ„æºå±æ€§
    ("service.name.ja", StringValue("ã‚¢ã‚¸ãƒã‚¹ãƒ†ã‚£ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚·ã‚¹ãƒ†ãƒ ")),
    ("service.description.ja", StringValue("MoonBitå‘ã‘ã®OpenTelemetryã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼æ©Ÿèƒ½")),
    ("service.version.ja", StringValue("ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0")),
    
    // æ³•æ–‡èµ„æºå±æ€§
    ("service.name.fr", StringValue("SystÃ¨me de TÃ©lÃ©mÃ©trie Azimuth")),
    ("service.description.fr", StringValue("FonctionnalitÃ© de tÃ©lÃ©mÃ©trie style OpenTelemetry pour MoonBit")),
    ("service.version.fr", StringValue("Version 1.0.0"))
  ]
  
  let resource = Resource::with_attributes(Resource::new(), resource_attrs)
  
  // éªŒè¯ä¸­æ–‡æœåŠ¡åç§°
  let zh_name = Resource::get_attribute(resource, "service.name.zh")
  match zh_name {
    Some(StringValue(value)) => assert_eq(value, "æ–¹ä½è§’é¥æµ‹ç³»ç»Ÿ")
    _ => assert_true(false)
  }
  
  // éªŒè¯è‹±æ–‡æœåŠ¡æè¿°
  let en_description = Resource::get_attribute(resource, "service.description.en")
  match en_description {
    Some(StringValue(value)) => assert_eq(value, "OpenTelemetry-style telemetry functionality for MoonBit")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ—¥æ–‡ç‰ˆæœ¬ä¿¡æ¯
  let ja_version = Resource::get_attribute(resource, "service.version.ja")
  match ja_version {
    Some(StringValue(value)) => assert_eq(value, "ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.0.0")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ³•æ–‡æœåŠ¡åç§°
  let fr_name = Resource::get_attribute(resource, "service.name.fr")
  match fr_name {
    Some(StringValue(value)) => assert_eq(value, "SystÃ¨me de TÃ©lÃ©mÃ©trie Azimuth")
    _ => assert_true(false)
  }
}

test "æœ¬åœ°åŒ–æ•°å­—å’Œè´§å¸æ ¼å¼æµ‹è¯•" {
  let attrs = Attributes::new()
  
  // æµ‹è¯•ä¸åŒåœ°åŒºçš„æ•°å­—æ ¼å¼
  Attributes::set(attrs, "metric.value.us", StringValue("1,234.56")) // ç¾å›½æ ¼å¼
  Attributes::set(attrs, "metric.value.eu", StringValue("1.234,56")) // æ¬§æ´²æ ¼å¼
  Attributes::set(attrs, "metric.value.cn", StringValue("1,234.56")) // ä¸­å›½æ ¼å¼
  Attributes::set(attrs, "metric.value.in", StringValue("1,23,456.78")) // å°åº¦æ ¼å¼
  
  // æµ‹è¯•è´§å¸æ ¼å¼
  Attributes::set(attrs, "price.usd", StringValue("$1,234.56"))
  Attributes::set(attrs, "price.eur", StringValue("1.234,56 â‚¬"))
  Attributes::set(attrs, "price.cny", StringValue("Â¥1,234.56"))
  Attributes::set(attrs, "price.jpy", StringValue("Â¥1,235")) // æ—¥å…ƒæ²¡æœ‰å°æ•°
  
  // éªŒè¯ç¾å›½æ•°å­—æ ¼å¼
  let us_value = Attributes::get(attrs, "metric.value.us")
  match us_value {
    Some(StringValue(value)) => assert_eq(value, "1,234.56")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ¬§æ´²æ•°å­—æ ¼å¼
  let eu_value = Attributes::get(attrs, "metric.value.eu")
  match eu_value {
    Some(StringValue(value)) => assert_eq(value, "1.234,56")
    _ => assert_true(false)
  }
  
  // éªŒè¯ä¸­å›½è´§å¸æ ¼å¼
  let cny_price = Attributes::get(attrs, "price.cny")
  match cny_price {
    Some(StringValue(value)) => assert_eq(value, "Â¥1,234.56")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ—¥å…ƒæ ¼å¼
  let jpy_price = Attributes::get(attrs, "price.jpy")
  match jpy_price {
    Some(StringValue(value)) => assert_eq(value, "Â¥1,235")
    _ => assert_true(false)
  }
}

test "å¤šè¯­è¨€Spanåç§°å’Œæè¿°æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "i18n.test.tracer")
  
  // åˆ›å»ºå¤šè¯­è¨€Span
  let zh_span = Tracer::start_span(tracer, "ç”¨æˆ·è®¤è¯æµç¨‹")
  let en_span = Tracer::start_span(tracer, "user_authentication_flow")
  let ja_span = Tracer::start_span(tracer, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ•ãƒ­ãƒ¼")
  let fr_span = Tracer::start_span(tracer, "flux_d_authentification_utilisateur")
  
  // éªŒè¯Spanåç§°
  assert_eq(Span::name(zh_span), "ç”¨æˆ·è®¤è¯æµç¨‹")
  assert_eq(Span::name(en_span), "user_authentication_flow")
  assert_eq(Span::name(ja_span), "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ•ãƒ­ãƒ¼")
  assert_eq(Span::name(fr_span), "flux_d_authentification_utilisateur")
  
  // ä¸ºSpanæ·»åŠ å¤šè¯­è¨€äº‹ä»¶
  Span::add_event(zh_span, "ç”¨æˆ·ç™»å½•æˆåŠŸ", Some([("ç”¨æˆ·ID", StringValue("12345"))]))
  Span::add_event(en_span, "user_login_success", Some([("user_id", StringValue("12345"))]))
  Span::add_event(ja_span, "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ", Some([("ãƒ¦ãƒ¼ã‚¶ãƒ¼ID", StringValue("12345"))]))
  Span::add_event(fr_span, "succÃ¨s_connexion_utilisateur", Some([("id_utilisateur", StringValue("12345"))]))
  
  // ç»“æŸSpan
  Span::end(zh_span)
  Span::end(en_span)
  Span::end(ja_span)
  Span::end(fr_span)
}

test "å›½é™…åŒ–Baggageæ¡ç›®æµ‹è¯•" {
  let baggage = Baggage::new()
  
  // è®¾ç½®å¤šè¯­è¨€Baggageæ¡ç›®
  let baggage1 = Baggage::set_entry(baggage, "locale.zh", "zh-CN")
  let baggage2 = Baggage::set_entry(baggage1, "locale.en", "en-US")
  let baggage3 = Baggage::set_entry(baggage2, "locale.ja", "ja-JP")
  let baggage4 = Baggage::set_entry(baggage3, "locale.fr", "fr-FR")
  let baggage5 = Baggage::set_entry(baggage4, "timezone", "Asia/Shanghai")
  
  // éªŒè¯å„åœ°åŒºè®¾ç½®
  let zh_locale = Baggage::get_entry(baggage5, "locale.zh")
  match zh_locale {
    Some(value) => assert_eq(value, "zh-CN")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½è¿”å›None
  }
  
  let en_locale = Baggage::get_entry(baggage5, "locale.en")
  match en_locale {
    Some(value) => assert_eq(value, "en-US")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½è¿”å›None
  }
  
  let ja_locale = Baggage::get_entry(baggage5, "locale.ja")
  match ja_locale {
    Some(value) => assert_eq(value, "ja-JP")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½è¿”å›None
  }
  
  let fr_locale = Baggage::get_entry(baggage5, "locale.fr")
  match fr_locale {
    Some(value) => assert_eq(value, "fr-FR")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½è¿”å›None
  }
  
  let timezone = Baggage::get_entry(baggage5, "timezone")
  match timezone {
    Some(value) => assert_eq(value, "Asia/Shanghai")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½è¿”å›None
  }
}

test "å¤šè¯­è¨€Metricåç§°å’Œå•ä½æµ‹è¯•" {
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "i18n.metrics")
  
  // åˆ›å»ºå¤šè¯­è¨€Counter
  let zh_counter = Meter::create_counter(meter, "è¯·æ±‚è®¡æ•°", Some("æ€»è¯·æ±‚æ•°"), Some("ä¸ª"))
  let en_counter = Meter::create_counter(meter, "request_count", Some("Total number of requests"), Some("requests"))
  let ja_counter = Meter::create_counter(meter, "ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°", Some("ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°"), Some("ä»¶"))
  
  // éªŒè¯Counterå±æ€§
  assert_eq(zh_counter.name, "è¯·æ±‚è®¡æ•°")
  assert_eq(zh_counter.description, Some("æ€»è¯·æ±‚æ•°"))
  assert_eq(zh_counter.unit, Some("ä¸ª"))
  
  assert_eq(en_counter.name, "request_count")
  assert_eq(en_counter.description, Some("Total number of requests"))
  assert_eq(en_counter.unit, Some("requests"))
  
  assert_eq(ja_counter.name, "ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°")
  assert_eq(ja_counter.description, Some("ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°"))
  assert_eq(ja_counter.unit, Some("ä»¶"))
  
  // åˆ›å»ºå¤šè¯­è¨€Histogram
  let zh_histogram = Meter::create_histogram(meter, "å“åº”æ—¶é—´", Some("å“åº”æ—¶é—´åˆ†å¸ƒ"), Some("æ¯«ç§’"))
  let en_histogram = Meter::create_histogram(meter, "response_time", Some("Response time distribution"), Some("milliseconds"))
  let ja_histogram = Meter::create_histogram(meter, "å¿œç­”æ™‚é–“", Some("å¿œç­”æ™‚é–“åˆ†å¸ƒ"), Some("ãƒŸãƒªç§’"))
  
  // éªŒè¯Histogramå±æ€§
  assert_eq(zh_histogram.name, "å“åº”æ—¶é—´")
  assert_eq(zh_histogram.description, Some("å“åº”æ—¶é—´åˆ†å¸ƒ"))
  assert_eq(zh_histogram.unit, Some("æ¯«ç§’"))
  
  assert_eq(en_histogram.name, "response_time")
  assert_eq(en_histogram.description, Some("Response time distribution"))
  assert_eq(en_histogram.unit, Some("milliseconds"))
  
  assert_eq(ja_histogram.name, "å¿œç­”æ™‚é–“")
  assert_eq(ja_histogram.description, Some("å¿œç­”æ™‚é–“åˆ†å¸ƒ"))
  assert_eq(ja_histogram.unit, Some("ãƒŸãƒªç§’"))
}

test "æœ¬åœ°åŒ–HTTPè¯·æ±‚å’Œå“åº”æµ‹è¯•" {
  // åˆ›å»ºå¤šè¯­è¨€HTTPè¯·æ±‚
  let zh_headers = [
    ("Accept-Language", "zh-CN,zh;q=0.9"),
    ("Content-Type", "application/json; charset=utf-8"),
    ("User-Agent", "æ–¹ä½è§’é¥æµ‹ç³»ç»Ÿ/1.0.0")
  ]
  
  let en_headers = [
    ("Accept-Language", "en-US,en;q=0.9"),
    ("Content-Type", "application/json; charset=utf-8"),
    ("User-Agent", "Azimuth-Telemetry/1.0.0")
  ]
  
  let ja_headers = [
    ("Accept-Language", "ja-JP,ja;q=0.9"),
    ("Content-Type", "application/json; charset=utf-8"),
    ("User-Agent", "ã‚¢ã‚¸ãƒã‚¹ãƒ†ã‚£ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚·ã‚¹ãƒ†ãƒ /1.0.0")
  ]
  
  let zh_request = HttpRequest::new("POST", "https://api.example.com/zh/endpoint", zh_headers, Some("{\"æ“ä½œ\":\"æŸ¥è¯¢\"}"))
  let en_request = HttpRequest::new("POST", "https://api.example.com/en/endpoint", en_headers, Some("{\"operation\":\"query\"}"))
  let ja_request = HttpRequest::new("POST", "https://api.example.com/ja/endpoint", ja_headers, Some("{\"æ“ä½œ\":\"ã‚¯ã‚¨ãƒª\"}"))
  
  // éªŒè¯è¯·æ±‚å±æ€§
  assert_eq(HttpRequest::url(zh_request), "https://api.example.com/zh/endpoint")
  assert_eq(HttpRequest::url(en_request), "https://api.example.com/en/endpoint")
  assert_eq(HttpRequest::url(ja_request), "https://api.example.com/ja/endpoint")
  
  // åˆ›å»ºå¤šè¯­è¨€HTTPå“åº”
  let zh_response_headers = [("Content-Language", "zh-CN")]
  let en_response_headers = [("Content-Language", "en-US")]
  let ja_response_headers = [("Content-Language", "ja-JP")]
  
  let zh_response = HttpResponse::new(200, zh_response_headers, Some("{\"æ¶ˆæ¯\":\"æ“ä½œæˆåŠŸ\"}"))
  let en_response = HttpResponse::new(200, en_response_headers, Some("{\"message\":\"Operation successful\"}"))
  let ja_response = HttpResponse::new(200, ja_response_headers, Some("{\"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\":\"æ“ä½œãŒæˆåŠŸã—ã¾ã—ãŸ\"}"))
  
  // éªŒè¯å“åº”çŠ¶æ€ç 
  assert_eq(HttpResponse::status_code(zh_response), 200)
  assert_eq(HttpResponse::status_code(en_response), 200)
  assert_eq(HttpResponse::status_code(ja_response), 200)
}

test "Unicodeå’Œç‰¹æ®Šå­—ç¬¦æ”¯æŒæµ‹è¯•" {
  let attrs = Attributes::new()
  
  // æµ‹è¯•å„ç§Unicodeå­—ç¬¦
  Attributes::set(attrs, "chinese.text", StringValue("ä¸­æ–‡æµ‹è¯•æ–‡æœ¬"))
  Attributes::set(attrs, "japanese.text", StringValue("æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ"))
  Attributes::set(attrs, "korean.text", StringValue("í•œêµ­ì–´ í…ìŠ¤íŠ¸"))
  Attributes::set(attrs, "arabic.text", StringValue("Ù†Øµ Ø¹Ø±Ø¨ÙŠ"))
  Attributes::set(attrs, "russian.text", StringValue("Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚"))
  Attributes::set(attrs, "emoji.text", StringValue("æµ‹è¯•ğŸš€emojiå’Œç‰¹æ®Šå­—ç¬¦âœ¨"))
  Attributes::set(attrs, "math.symbols", StringValue("âˆ‘âˆâˆ«âˆ†âˆ‡âˆ‚"))
  Attributes::set(attrs, "currency.symbols", StringValue("Â¥â‚¬Â£$â‚¹â‚½â‚©"))
  
  // éªŒè¯ä¸­æ–‡æ–‡æœ¬
  let chinese_result = Attributes::get(attrs, "chinese.text")
  match chinese_result {
    Some(StringValue(value)) => assert_eq(value, "ä¸­æ–‡æµ‹è¯•æ–‡æœ¬")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ—¥æ–‡æ–‡æœ¬
  let japanese_result = Attributes::get(attrs, "japanese.text")
  match japanese_result {
    Some(StringValue(value)) => assert_eq(value, "æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ")
    _ => assert_true(false)
  }
  
  // éªŒè¯éŸ©æ–‡æ–‡æœ¬
  let korean_result = Attributes::get(attrs, "korean.text")
  match korean_result {
    Some(StringValue(value)) => assert_eq(value, "í•œêµ­ì–´ í…ìŠ¤íŠ¸")
    _ => assert_true(false)
  }
  
  // éªŒè¯é˜¿æ‹‰ä¼¯æ–‡æ–‡æœ¬
  let arabic_result = Attributes::get(attrs, "arabic.text")
  match arabic_result {
    Some(StringValue(value)) => assert_eq(value, "Ù†Øµ Ø¹Ø±Ø¨ÙŠ")
    _ => assert_true(false)
  }
  
  // éªŒè¯ä¿„æ–‡æ–‡æœ¬
  let russian_result = Attributes::get(attrs, "russian.text")
  match russian_result {
    Some(StringValue(value)) => assert_eq(value, "Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚")
    _ => assert_true(false)
  }
  
  // éªŒè¯emojiæ–‡æœ¬
  let emoji_result = Attributes::get(attrs, "emoji.text")
  match emoji_result {
    Some(StringValue(value)) => assert_eq(value, "æµ‹è¯•ğŸš€emojiå’Œç‰¹æ®Šå­—ç¬¦âœ¨")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ•°å­¦ç¬¦å·
  let math_result = Attributes::get(attrs, "math.symbols")
  match math_result {
    Some(StringValue(value)) => assert_eq(value, "âˆ‘âˆâˆ«âˆ†âˆ‡âˆ‚")
    _ => assert_true(false)
  }
  
  // éªŒè¯è´§å¸ç¬¦å·
  let currency_result = Attributes::get(attrs, "currency.symbols")
  match currency_result {
    Some(StringValue(value)) => assert_eq(value, "Â¥â‚¬Â£$â‚¹â‚½â‚©")
    _ => assert_true(false)
  }
}

test "æ–‡åŒ–ç‰¹å®šçš„æ—¥æœŸå’Œæ—¶é—´æ ¼å¼æµ‹è¯•" {
  let attrs = Attributes::new()
  
  // æµ‹è¯•ä¸åŒæ–‡åŒ–çš„æ—¥æœŸæ ¼å¼
  Attributes::set(attrs, "date.us", StringValue("12/31/2024")) // æœˆ/æ—¥/å¹´
  Attributes::set(attrs, "date.uk", StringValue("31/12/2024")) // æ—¥/æœˆ/å¹´
  Attributes::set(attrs, "date.cn", StringValue("2024å¹´12æœˆ31æ—¥")) // å¹´æœˆæ—¥
  Attributes::set(attrs, "date.jp", StringValue("2024å¹´12æœˆ31æ—¥")) // å¹´æœˆæ—¥
  Attributes::set(attrs, "date.iso", StringValue("2024-12-31")) // ISOæ ¼å¼
  
  // æµ‹è¯•æ—¶é—´æ ¼å¼
  Attributes::set(attrs, "time.us", StringValue("2:30:45 PM")) // 12å°æ—¶åˆ¶
  Attributes::set(attrs, "time.eu", StringValue("14:30:45")) // 24å°æ—¶åˆ¶
  Attributes::set(attrs, "time.cn", StringValue("14æ—¶30åˆ†45ç§’")) // ä¸­æ–‡æ ¼å¼
  Attributes::set(attrs, "time.jp", StringValue("14æ™‚30åˆ†45ç§’")) // æ—¥æ–‡æ ¼å¼
  
  // éªŒè¯ç¾å›½æ—¥æœŸæ ¼å¼
  let us_date = Attributes::get(attrs, "date.us")
  match us_date {
    Some(StringValue(value)) => assert_eq(value, "12/31/2024")
    _ => assert_true(false)
  }
  
  // éªŒè¯è‹±å›½æ—¥æœŸæ ¼å¼
  let uk_date = Attributes::get(attrs, "date.uk")
  match uk_date {
    Some(StringValue(value)) => assert_eq(value, "31/12/2024")
    _ => assert_true(false)
  }
  
  // éªŒè¯ä¸­å›½æ—¥æœŸæ ¼å¼
  let cn_date = Attributes::get(attrs, "date.cn")
  match cn_date {
    Some(StringValue(value)) => assert_eq(value, "2024å¹´12æœˆ31æ—¥")
    _ => assert_true(false)
  }
  
  // éªŒè¯ç¾å›½æ—¶é—´æ ¼å¼
  let us_time = Attributes::get(attrs, "time.us")
  match us_time {
    Some(StringValue(value)) => assert_eq(value, "2:30:45 PM")
    _ => assert_true(false)
  }
  
  // éªŒè¯æ¬§æ´²æ—¶é—´æ ¼å¼
  let eu_time = Attributes::get(attrs, "time.eu")
  match eu_time {
    Some(StringValue(value)) => assert_eq(value, "14:30:45")
    _ => assert_true(false)
  }
  
  // éªŒè¯ä¸­å›½æ—¶é—´æ ¼å¼
  let cn_time = Attributes::get(attrs, "time.cn")
  match cn_time {
    Some(StringValue(value)) => assert_eq(value, "14æ—¶30åˆ†45ç§’")
    _ => assert_true(false)
  }
}