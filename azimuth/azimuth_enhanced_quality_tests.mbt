// é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹ - ä¸“é—¨æµ‹è¯•è¾¹ç•Œæ¡ä»¶å’Œå®é™…åº”ç”¨åœºæ™¯
// ä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œè¦†ç›–ç‡

test "add_function_overflow_boundary" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„è¾¹ç•Œæƒ…å†µå’Œæ½œåœ¨æº¢å‡º
  assert_eq(2147483647, add(2147483646, 1))
  assert_eq(-2147483648, add(-2147483647, -1))
  assert_eq(0, add(-2147483648, 2147483648))
}

test "multiply_function_precision" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„ç²¾åº¦å’Œè¾¹ç•Œæƒ…å†µ
  assert_eq(1, multiply(1, 1))
  assert_eq(-1, multiply(-1, 1))
  assert_eq(-1, multiply(1, -1))
  assert_eq(1, multiply(-1, -1))
  assert_eq(2147483647, multiply(46340, 46341))
}

test "divide_with_ceil_comprehensive" {
  // å…¨é¢æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 5))
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(-1, divide_with_ceil(-1, 1))
  assert_eq(-1, divide_with_ceil(1, -1))
  assert_eq(1, divide_with_ceil(-1, -1))
  assert_eq(0, divide_with_ceil(0, -1))
}

test "greet_function_unicode_comprehensive" {
  // å…¨é¢æµ‹è¯• greet å‡½æ•°çš„ Unicode å­—ç¬¦å¤„ç†
  assert_eq_string("Hello, ä¸­æ–‡!", greet("ä¸­æ–‡"))
  assert_eq_string("Hello, Ã±Ã¡Ã©Ã­Ã³Ãº!", greet("Ã±Ã¡Ã©Ã­Ã³Ãº"))
  assert_eq_string("Hello, ğŸŒŸğŸŒ™!", greet("ğŸŒŸğŸŒ™"))
  assert_eq_string("Hello, ğŸ¯!", greet("ğŸ¯"))
}

test "complex_calculation_pipeline" {
  // æµ‹è¯•å¤æ‚è®¡ç®—ç®¡é“
  let initial_value = 10
  let step1 = add(initial_value, 5)
  let step2 = multiply(step1, 3)
  let step3 = divide_with_ceil(step2, 4)
  let final_result = add(step3, 2)
  
  // ((10 + 5) * 3) / 4 + 2 = (15 * 3) / 4 + 2 = 45 / 4 + 2 = 12 + 2 = 14
  assert_eq(14, final_result)
}

test "error_handling_scenarios" {
  // æµ‹è¯•é”™è¯¯å¤„ç†åœºæ™¯
  assert_eq(0, divide_with_ceil(5, 0))
  assert_eq(0, divide_with_ceil(-5, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, multiply(0, 0))
}

test "performance_related_operations" {
  // æµ‹è¯•æ€§èƒ½ç›¸å…³çš„æ“ä½œæ¨¡å¼
  let base = 100
  let result = add(multiply(base, 2), divide_with_ceil(multiply(base, 3), 4))
  // 100 * 2 + (100 * 3) / 4 = 200 + 300 / 4 = 200 + 75 = 275
  assert_eq(275, result)
}

test "real_world_inventory_calculation" {
  // ç°å®ä¸–ç•Œåº“å­˜è®¡ç®—åœºæ™¯
  let total_products = 157
  let box_capacity = 24
  let boxes_needed = divide_with_ceil(total_products, box_capacity)
  
  // 157 / 24 = 6.54ï¼Œéœ€è¦7ä¸ªç®±å­
  assert_eq(7, boxes_needed)
  
  // è®¡ç®—å‰©ä½™ç©ºé—´
  let total_space = multiply(boxes_needed, box_capacity)
  let remaining_space = add(total_space, -total_products)
  assert_eq(11, remaining_space)  // 7*24 - 157 = 168 - 157 = 11
}

test "mathematical_series_calculation" {
  // æ•°å­¦çº§æ•°è®¡ç®—
  let n = 5
  let sum = 0
  let sum_step1 = add(sum, 1)
  let sum_step2 = add(sum_step1, 2)
  let sum_step3 = add(sum_step2, 3)
  let sum_step4 = add(sum_step3, 4)
  let sum_step5 = add(sum_step4, 5)
  
  // 1 + 2 + 3 + 4 + 5 = 15
  assert_eq(15, sum_step5)
  
  // è®¡ç®—å¹³å‡å€¼çš„å‘ä¸Šå–æ•´
  let average_ceil = divide_with_ceil(sum_step5, n)
  assert_eq(3, average_ceil)  // ceil(15/5) = 3
}

test "string_processing_edge_cases" {
  // å­—ç¬¦ä¸²å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
  assert_eq_string("Hello, a!", greet("a"))
  assert_eq_string("Hello, ABCdef!", greet("ABCdef"))
  assert_eq_string("Hello, 123456!", greet("123456"))
  assert_eq_string("Hello, !@#$%^!", greet("!@#$%^"))
  assert_eq_string("Hello,   spaced   !", greet("  spaced   "))
}