// Azimuth å¢å¼ºæµ‹è¯•ç”¨ä¾‹ - 10ä¸ªé«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç¼˜æƒ…å†µ

// å¯¼å…¥ azimuth åº“
use azimuth

test "add_function_comprehensive_boundary" {
  // å…¨é¢æµ‹è¯•åŠ æ³•å‡½æ•°çš„è¾¹ç•Œæƒ…å†µ
  assert_eq(0, add(0, 0))
  assert_eq(1, add(1, 0))
  assert_eq(-1, add(-1, 0))
  assert_eq(2147483647, add(2147483646, 1))
  assert_eq(-2147483648, add(-2147483647, -1))
  assert_eq(0, add(2147483647, -2147483647))
}

test "multiply_function_precision_test" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„ç²¾åº¦å’Œå¤§æ•°å¤„ç†
  assert_eq(1, multiply(1, 1))
  assert_eq(-1, multiply(-1, 1))
  assert_eq(1, multiply(-1, -1))
  assert_eq(46340, multiply(46340, 1))  // sqrt(INT_MAX)
  assert_eq(1000000000, multiply(10000, 100000))
  assert_eq(-1000000000, multiply(-10000, 100000))
}

test "divide_with_ceil_edge_scenarios" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç¼˜åœºæ™¯
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(1, divide_with_ceil(-1, -1))
  assert_eq(-1, divide_with_ceil(1, -1))
  assert_eq(0, divide_with_ceil(-1, 1))
  assert_eq(1000000, divide_with_ceil(999999, 1))
  assert_eq(1, divide_with_ceil(999999, 999999))
}

test "greet_function_character_encoding" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å­—ç¬¦ç¼–ç å¤„ç†
  assert_eq_string("Hello, ğŸŒ™!", greet("ğŸŒ™"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, ğŸ³ï¸â€ğŸŒˆ!", greet("ğŸ³ï¸â€ğŸŒˆ"))
  assert_eq_string("Hello, ä¸­æ–‡!", greet("ä¸­æ–‡"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  let principal = 50000
  let interest_rate = 8  // 8%
  let years = 5
  
  // è®¡ç®—å¤åˆ©ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let year1 = add(principal, divide_with_ceil(multiply(principal, interest_rate), 100))
  let year2 = add(year1, divide_with_ceil(multiply(year1, interest_rate), 100))
  let year3 = add(year2, divide_with_ceil(multiply(year2, interest_rate), 100))
  let year4 = add(year3, divide_with_ceil(multiply(year3, interest_rate), 100))
  let year5 = add(year4, divide_with_ceil(multiply(year4, interest_rate), 100))
  
  assert_eq(54000, year1)  // 50000 + 8%
  assert_eq(58320, year2)  // 54000 + 8%
  assert_eq(62986, year3)  // 58320 + 8%
  assert_eq(68025, year4)  // 62986 + 8%
  assert_eq(73467, year5)  // 68025 + 8%
  
  // è®¡ç®—æœˆä¾›
  let total_months = multiply(years, 12)
  let monthly_payment = divide_with_ceil(year5, total_months)
  assert_eq(1223, monthly_payment)  // ceil(73467/60)
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–æµ‹è¯•
  let total_resources = 12345
  let departments = 7
  let min_per_dept = divide_with_ceil(total_resources, departments)
  
  assert_eq(1764, min_per_dept)  // ceil(12345/7)
  
  // éªŒè¯åˆ†é…ç»“æœ
  let total_allocated = multiply(min_per_dept, departments)
  assert_eq(12348, total_allocated)
  
  // è®¡ç®—èµ„æºæµªè´¹
  let waste = subtract(total_allocated, total_resources)
  assert_eq(3, waste)
  
  // ä¼˜åŒ–ç­–ç•¥ï¼šå¢åŠ ä¸€ä¸ªéƒ¨é—¨
  let optimized_departments = add(departments, 1)
  let optimized_per_dept = divide_with_ceil(total_resources, optimized_departments)
  assert_eq(1544, optimized_per_dept)  // ceil(12345/8)
}

test "mathematical identities_verification" {
  // æ•°å­¦æ’ç­‰å¼éªŒè¯æµ‹è¯•
  let a = 42
  let b = 17
  let c = 23
  
  // åŠ æ³•æ’ç­‰å¼
  assert_eq(a, add(a, 0))
  assert_eq(add(a, b), add(b, a))  // äº¤æ¢å¾‹
  assert_eq(add(add(a, b), c), add(a, add(b, c)))  // ç»“åˆå¾‹
  
  // ä¹˜æ³•æ’ç­‰å¼
  assert_eq(a, multiply(a, 1))
  assert_eq(0, multiply(a, 0))
  assert_eq(multiply(a, b), multiply(b, a))  // äº¤æ¢å¾‹
  assert_eq(multiply(multiply(a, b), c), multiply(a, multiply(b, c)))  // ç»“åˆå¾‹
  
  // åˆ†é…å¾‹
  assert_eq(multiply(a, add(b, c)), add(multiply(a, b), multiply(a, c)))
}

test "logistics_packaging_optimization" {
  // ç‰©æµåŒ…è£…ä¼˜åŒ–æµ‹è¯•
  // äº§å“Aï¼š156ä¸ªï¼Œæ¯ç®±24ä¸ª
  let product_a_qty = 156
  let product_a_capacity = 24
  let boxes_a = divide_with_ceil(product_a_qty, product_a_capacity)
  
  // äº§å“Bï¼š89ä¸ªï¼Œæ¯ç®±12ä¸ª
  let product_b_qty = 89
  let product_b_capacity = 12
  let boxes_b = divide_with_ceil(product_b_qty, product_b_capacity)
  
  // äº§å“Cï¼š234ä¸ªï¼Œæ¯ç®±36ä¸ª
  let product_c_qty = 234
  let product_c_capacity = 36
  let boxes_c = divide_with_ceil(product_c_qty, product_c_capacity)
  
  assert_eq(7, boxes_a)   // ceil(156/24)
  assert_eq(8, boxes_b)   // ceil(89/12)
  assert_eq(7, boxes_c)   // ceil(234/36)
  
  // è®¡ç®—æ€»ç®±æ•°å’Œæ€»å®¹é‡
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  let total_capacity = add(
    multiply(boxes_a, product_a_capacity),
    add(multiply(boxes_b, product_b_capacity), multiply(boxes_c, product_c_capacity))
  )
  
  assert_eq(22, total_boxes)
  assert_eq(516, total_capacity)
}

test "error_handling_robustness" {
  // é”™è¯¯å¤„ç†å¥å£®æ€§æµ‹è¯•
  // é™¤é›¶é”™è¯¯çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(2147483647, 0))
  assert_eq(0, divide_with_ceil(-2147483648, 0))
  
  // æå€¼è¿ç®—
  assert_eq(2147483647, add(2147483646, 1))
  assert_eq(-2147483648, add(-2147483647, -1))
  assert_eq(0, multiply(2147483647, 0))
  assert_eq(0, multiply(-2147483648, 0))
}

test "real_world_project_management" {
  // çœŸå®ä¸–ç•Œé¡¹ç›®ç®¡ç†æµ‹è¯•
  let project_tasks = 127
  let team_members = 8
  let working_days = 15
  let tasks_per_person_per_day = 2
  
  // è®¡ç®—å›¢é˜Ÿæ—¥äº§èƒ½
  let daily_capacity = multiply(team_members, tasks_per_person_per_day)
  assert_eq(16, daily_capacity)
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œæ—¥
  let days_needed = divide_with_ceil(project_tasks, daily_capacity)
  assert_eq(8, days_needed)  // ceil(127/16)
  
  // éªŒè¯é¡¹ç›®æ˜¯å¦èƒ½åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ
  assert_true(days_needed <= working_days)
  
  // è®¡ç®—å®é™…å®Œæˆæ—¶é—´
  let total_capacity = multiply(days_needed, daily_capacity)
  let buffer_tasks = subtract(total_capacity, project_tasks)
  
  assert_eq(128, total_capacity)
  assert_eq(1, buffer_tasks)
  
  // è®¡ç®—èµ„æºåˆ©ç”¨ç‡
  let utilization = divide_with_ceil(multiply(project_tasks, 100), total_capacity)
  assert_eq(100, utilization)  // ceil(12700/128) = 100%
}