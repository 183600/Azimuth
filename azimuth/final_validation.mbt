// ç›´æ¥è¿è¡Œæµ‹è¯•æ¥éªŒè¯ advanced_test_suite.mbt ä¸­çš„æµ‹è¯•é€»è¾‘
// è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„éªŒè¯æ–‡ä»¶

// å¯¼å…¥å¿…è¦çš„å‡½æ•°
use "azimuth"

test "test_advanced_test_suite_logic" {
  // éªŒè¯ advanced_test_suite.mbt ä¸­çš„æ ¸å¿ƒæµ‹è¯•é€»è¾‘
  
  // 1. æ€§èƒ½å‹åŠ›æµ‹è¯•çš„ç®€åŒ–ç‰ˆæœ¬
  let base = 1000
  let mut sum = 0
  for i = 1; i <= 10; i = i + 1 {
    sum = add(sum, i)
  }
  assert_eq(55, sum)
  
  let mut product = 1
  for i = 1; i <= 3; i = i + 1 {
    product = multiply(product, i)
  }
  assert_eq(6, product)
  
  // 2. æç«¯è¾¹ç•Œå€¼ç»„åˆæµ‹è¯•
  let max_val = 2147483647
  let min_val = -2147483648
  
  let result1 = add(max_val, min_val)
  let result2 = multiply(max_val, 0)
  let result3 = multiply(max_val, 1)
  let result4 = multiply(max_val, -1)
  
  assert_eq(-1, result1)
  assert_eq(0, result2)
  assert_eq(max_val, result3)
  assert_eq(-2147483647, result4)
  
  // 3. å®é™…é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  let principal = 10000
  let rate = 5
  let year1 = add(principal, divide_with_ceil(multiply(principal, 1), rate))
  assert_eq(12000, year1)
  
  // 4. é«˜çº§å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  assert_eq_string("Hello, ğŸš€ğŸŒŸâ­!", greet("ğŸš€ğŸŒŸâ­"))
  assert_eq_string("Hello, æ•°å­¦å…¬å¼âˆ‘âˆâˆ«!", greet("æ•°å­¦å…¬å¼âˆ‘âˆâˆ«"))
  
  // 5. æ•°å­¦åºåˆ—éªŒè¯æµ‹è¯•
  let fib1 = 1
  let fib2 = 1
  let fib3 = add(fib1, fib2)
  let fib4 = add(fib2, fib3)
  let fib5 = add(fib3, fib4)
  
  assert_eq(2, fib3)
  assert_eq(3, fib4)
  assert_eq(5, fib5)
  
  // 6. è¯¯å·®è¾¹ç•Œå’Œæ¢å¤æµ‹è¯•
  let overflow1 = add(max_val, 1000)
  let overflow2 = multiply(max_val, 100)
  let normal1 = add(100, 200)
  let normal2 = multiply(10, 20)
  
  assert_eq(max_val, overflow1)
  assert_eq(max_val, overflow2)
  assert_eq(300, normal1)
  assert_eq(200, normal2)
  
  // 7. ç²¾åº¦å’Œå‡†ç¡®æ€§éªŒè¯æµ‹è¯•
  assert_eq(1, divide_with_ceil(1, 2))
  assert_eq(1, divide_with_ceil(2, 3))
  assert_eq(1, divide_with_ceil(3, 4))
  assert_eq(333334, divide_with_ceil(1000000, 3))
  
  // 8. å¤æ‚ä¸šåŠ¡é€»è¾‘æµ‹è¯•
  let item_price = 199
  let quantity = 3
  let subtotal = multiply(item_price, quantity)
  assert_eq(597, subtotal)
  
  let tax_amount = divide_with_ceil(subtotal, 10)
  let final_total = add(subtotal, tax_amount)
  assert_eq(657, final_total)
}