// æ–°çš„ MoonBit æµ‹è¯•ç”¨ä¾‹ - ä¸º azimuth é¡¹ç›®æ·»åŠ çš„é«˜è´¨é‡æµ‹è¯•
// è¿™äº›æµ‹è¯•ç”¨ä¾‹ä¸“æ³¨äºŽå®žé™…åº”ç”¨åœºæ™¯å’Œè¾¹ç¼˜æƒ…å†µ

// æµ‹è¯•ç”¨ä¾‹ 1: å¤æ‚æ•°å­¦è¿ç®—ç»„åˆ
test "complex_mathematical_expressions" {
  // æµ‹è¯•å¤æ‚çš„æ•°å­¦è¡¨è¾¾å¼è®¡ç®—
  let x = 10
  let y = 15
  let z = 3
  
  // å¤åˆè¿ç®—: (x + y) * z / 4 çš„å‘ä¸Šå–æ•´
  let result = divide_with_ceil(multiply(add(x, y), z), 4)
  assert_eq(19, result)  // ceil((10+15)*3/4) = ceil(75/4) = 19
  
  // åµŒå¥—è¿ç®—: x * (y + z) + (x + y + z)
  let nested_result = add(multiply(x, add(y, z)), add(add(x, y), z))
  assert_eq(103, nested_result)  // 10*(15+3) + (10+15+3) = 180 + 28 = 208
}

// æµ‹è¯•ç”¨ä¾‹ 2: å®žé™…ä¸šåŠ¡åœºæ™¯ - åº“å­˜ç®¡ç†
test "inventory_management_scenario" {
  // åœºæ™¯: ä»“åº“åº“å­˜ç®¡ç†ï¼Œè®¡ç®—éœ€è¦çš„å­˜å‚¨ç©ºé—´
  let product_a_qty = 125
  let product_b_qty = 87
  let product_c_qty = 156
  
  let box_capacity_a = 12
  let box_capacity_b = 8
  let box_capacity_c = 15
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_a = divide_with_ceil(product_a_qty, box_capacity_a)
  let boxes_b = divide_with_ceil(product_b_qty, box_capacity_b)
  let boxes_c = divide_with_ceil(product_c_qty, box_capacity_c)
  
  assert_eq(11, boxes_a)   // ceil(125/12) = 11
  assert_eq(11, boxes_b)   // ceil(87/8) = 11
  assert_eq(11, boxes_c)   // ceil(156/15) = 11
  
  // è®¡ç®—æ€»ç®±å­æ•°å’Œæ€»å®¹é‡
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  let total_capacity = add(
    multiply(boxes_a, box_capacity_a),
    add(multiply(boxes_b, box_capacity_b), multiply(boxes_c, box_capacity_c))
  )
  
  assert_eq(33, total_boxes)
  assert_eq(420, total_capacity)
}

// æµ‹è¯•ç”¨ä¾‹ 3: å­—ç¬¦ä¸²å¤„ç†çš„é«˜çº§åœºæ™¯
test "advanced_string_processing" {
  // æµ‹è¯•å„ç§å¤æ‚çš„å­—ç¬¦ä¸²è¾“å…¥åœºæ™¯
  assert_eq_string("Hello, emoji ðŸŽ‰ðŸš€!", greet("emoji ðŸŽ‰ðŸš€"))
  assert_eq_string("Hello, mixed123ABC!", greet("mixed123ABC"))
  assert_eq_string("Hello,   spaces   !", greet("   spaces   "))
  assert_eq_string("Hello, newline\n!", greet("newline\n"))
  assert_eq_string("Hello, tab\tcharacter!", greet("tab\tcharacter"))
  
  // æµ‹è¯•ç‰¹æ®ŠUnicodeå­—ç¬¦
  assert_eq_string("Hello, æ•°å­¦å…¬å¼âˆ‘âˆâˆ«!", greet("æ•°å­¦å…¬å¼âˆ‘âˆâˆ«"))
  assert_eq_string("Hello, currencyâ‚¬Â¥Â£!", greet("currencyâ‚¬Â¥Â£"))
}

// æµ‹è¯•ç”¨ä¾‹ 4: è¾¹ç•Œæ¡ä»¶å’Œæžå€¼æµ‹è¯•
test "extreme_boundary_conditions" {
  // æµ‹è¯•æžå€¼æƒ…å†µ
  let large_positive = 1000000
  let large_negative = -1000000
  let small_positive = 1
  let small_negative = -1
  let zero = 0
  
  // å¤§æ•°è¿ç®—
  assert_eq(2000000, add(large_positive, large_positive))
  assert_eq(0, add(large_positive, large_negative))
  assert_eq(1000000000000, multiply(large_positive, large_positive))
  
  // æžå°å€¼è¿ç®—
  assert_eq(0, add(zero, zero))
  assert_eq(0, multiply(zero, large_positive))
  assert_eq(-1, multiply(small_negative, small_positive))
  
  // é™¤æ³•çš„æžå€¼æƒ…å†µ
  assert_eq(1000000, divide_with_ceil(large_positive, small_positive))
  assert_eq(-1000000, divide_with_ceil(large_negative, small_positive))
  assert_eq(0, divide_with_ceil(zero, large_positive))
  assert_eq(0, divide_with_ceil(large_positive, zero))
}

// æµ‹è¯•ç”¨ä¾‹ 5: æ•°è®ºå’Œæ•°å­¦æ€§è´¨éªŒè¯
test "number_theory_properties" {
  // æµ‹è¯•æ•°è®ºä¸­çš„åŸºæœ¬æ€§è´¨
  let a = 24
  let b = 18
  let c = 6
  
  // éªŒè¯æœ€å¤§å…¬çº¦æ•°ç›¸å…³çš„æ€§è´¨ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let sum_ab = add(a, b)
  let sum_bc = add(b, c)
  let sum_ac = add(a, c)
  
  // éªŒè¯ç»“åˆå¾‹
  assert_eq(add(add(a, b), c), add(a, add(b, c)))
  
  // éªŒè¯åˆ†é…å¾‹
  assert_eq(multiply(c, add(a, b)), add(multiply(c, a), multiply(c, b)))
  
  // éªŒè¯ä¸€äº›æ•°å­¦æ’ç­‰å¼
  let identity = add(multiply(a, 2), multiply(b, 3))
  let alternative = multiply(add(multiply(a, 2), multiply(b, 3)), 1)
  assert_eq(identity, alternative)
}

// æµ‹è¯•ç”¨ä¾‹ 6: æ—¶é—´å’Œæ—¥æœŸè®¡ç®—åœºæ™¯
test "time_calculation_scenario" {
  // åœºæ™¯: é¡¹ç›®æ—¶é—´ç®¡ç†å’ŒæŽ’æœŸ
  let total_work_hours = 480  // æ€»å·¥æ—¶
  let work_hours_per_day = 8   // æ¯å¤©å·¥ä½œå°æ—¶æ•°
  let work_days_per_week = 5   // æ¯å‘¨å·¥ä½œå¤©æ•°
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œå¤©æ•°
  let work_days_needed = divide_with_ceil(total_work_hours, work_hours_per_day)
  assert_eq(60, work_days_needed)  // ceil(480/8) = 60
  
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(work_days_needed, work_days_per_week)
  assert_eq(12, weeks_needed)  // ceil(60/5) = 12
  
  // è®¡ç®—æ€»çš„å·¥ä½œå‘¨æ•°ï¼ˆè€ƒè™‘å¯èƒ½çš„åŠ ç­ï¼‰
  let total_weeks = multiply(weeks_needed, 1)
  let total_days = multiply(total_weeks, work_days_per_week)
  let total_capacity = multiply(total_days, work_hours_per_day)
  
  assert_eq(12, total_weeks)
  assert_eq(60, total_days)
  assert_eq(480, total_capacity)
}

// æµ‹è¯•ç”¨ä¾‹ 7: èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜
test "resource_allocation_optimization" {
  // åœºæ™¯: æœ‰é™èµ„æºçš„ä¼˜åŒ–åˆ†é…
  let total_budget = 50000
  let departments = 7
  let min_budget_per_dept = 5000
  
  // è®¡ç®—æ¯ä¸ªéƒ¨é—¨çš„åŸºæœ¬é¢„ç®—
  let base_budget_per_dept = divide_with_ceil(total_budget, departments)
  assert_eq(7143, base_budget_per_dept)  // ceil(50000/7) = 7143
  
  // éªŒè¯æ€»é¢„ç®—åˆ†é…
  let total_allocated = multiply(base_budget_per_dept, departments)
  assert_eq(50001, total_allocated)
  
  // è®¡ç®—é¢„ç®—ä½™ç¼º
  let budget_surplus = subtract(total_allocated, total_budget)
  assert_eq(1, budget_surplus)
  
  // éªŒè¯æ¯ä¸ªéƒ¨é—¨çš„é¢„ç®—éƒ½æ»¡è¶³æœ€ä½Žè¦æ±‚
  assert_true(base_budget_per_dept >= min_budget_per_dept)
}

// æµ‹è¯•ç”¨ä¾‹ 8: å­—ç¬¦ä¸²é•¿åº¦å’Œæ€§èƒ½æµ‹è¯•
test "string_length_performance_test" {
  // æµ‹è¯•ä¸åŒé•¿åº¦å­—ç¬¦ä¸²çš„å¤„ç†æ€§èƒ½
  let short_name = "A"
  let medium_name = "MoonBit"
  let long_name = "This is a very long name for testing purposes"
  
  // æµ‹è¯•çŸ­å­—ç¬¦ä¸²
  let short_greeting = greet(short_name)
  assert_eq_string("Hello, A!", short_greeting)
  
  // æµ‹è¯•ä¸­ç­‰é•¿åº¦å­—ç¬¦ä¸²
  let medium_greeting = greet(medium_name)
  assert_eq_string("Hello, MoonBit!", medium_greeting)
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_greeting = greet(long_name)
  assert_eq_string("Hello, This is a very long name for testing purposes!", long_greeting)
  
  // æµ‹è¯•æ•°å­—å­—ç¬¦ä¸²
  let numeric_name = "1234567890"
  let numeric_greeting = greet(numeric_name)
  assert_eq_string("Hello, 1234567890!", numeric_greeting)
}

// æµ‹è¯•ç”¨ä¾‹ 9: è´¢åŠ¡è®¡ç®—åœºæ™¯
test "financial_calculation_scenario" {
  // åœºæ™¯: è´·æ¬¾å’ŒæŠ•èµ„è®¡ç®—
  let principal = 100000  // æœ¬é‡‘
  let interest_rate = 5   // åˆ©çŽ‡ç™¾åˆ†æ¯”
  let years = 10          // å¹´æ•°
  
  // è®¡ç®—ç®€å•åˆ©æ¯ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
  let annual_interest = divide_with_ceil(multiply(principal, interest_rate), 100)
  assert_eq(5000, annual_interest)  // ceil(100000*5/100) = 5000
  
  // è®¡ç®—æ€»åˆ©æ¯
  let total_interest = multiply(annual_interest, years)
  assert_eq(50000, total_interest)
  
  // è®¡ç®—æœ€ç»ˆé‡‘é¢
  let final_amount = add(principal, total_interest)
  assert_eq(150000, final_amount)
  
  // è®¡ç®—æœˆä¾›ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰
  let total_months = multiply(years, 12)
  let monthly_payment = divide_with_ceil(final_amount, total_months)
  assert_eq(1250, monthly_payment)  // ceil(150000/120) = 1250
}

// æµ‹è¯•ç”¨ä¾‹ 10: æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†
test "data_validation_error_handling" {
  // æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†
  let normal_cases = [(1, 1), (10, 3), (100, 25)]
  let edge_cases = [(0, 1), (1, 0), (0, 0)]
  let negative_cases = [(-10, 3), (10, -3), (-10, -3)]
  
  // æµ‹è¯•æ­£å¸¸æƒ…å†µ
  assert_eq(1, divide_with_ceil(normal_cases[0].0, normal_cases[0].1))
  assert_eq(4, divide_with_ceil(normal_cases[1].0, normal_cases[1].1))
  assert_eq(4, divide_with_ceil(normal_cases[2].0, normal_cases[2].1))
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  assert_eq(0, divide_with_ceil(edge_cases[0].0, edge_cases[0].1))
  assert_eq(0, divide_with_ceil(edge_cases[1].0, edge_cases[1].1))
  assert_eq(0, divide_with_ceil(edge_cases[2].0, edge_cases[2].1))
  
  // æµ‹è¯•è´Ÿæ•°æƒ…å†µ
  assert_eq(-3, divide_with_ceil(negative_cases[0].0, negative_cases[0].1))
  assert_eq(-3, divide_with_ceil(negative_cases[1].0, negative_cases[1].1))
  assert_eq(4, divide_with_ceil(negative_cases[2].0, negative_cases[2].1))
  
  // æµ‹è¯•å­—ç¬¦ä¸²éªŒè¯
  let valid_inputs = ["Hello", "World", "Test", "123", "ABC"]
  let invalid_inputs = ["", "   ", "\n", "\t"]
  
  // æ‰€æœ‰è¾“å…¥éƒ½åº”è¯¥èƒ½æ­£å¸¸å¤„ç†
  assert_eq_string("Hello, Hello!", greet(valid_inputs[0]))
  assert_eq_string("Hello, World!", greet(valid_inputs[1]))
  assert_eq_string("Hello, Test!", greet(valid_inputs[2]))
  assert_eq_string("Hello, 123!", greet(valid_inputs[3]))
  assert_eq_string("Hello, ABC!", greet(valid_inputs[4]))
  
  // ç‰¹æ®Šè¾“å…¥ä¹Ÿåº”è¯¥èƒ½æ­£å¸¸å¤„ç†
  assert_eq_string("Hello, !", greet(invalid_inputs[0]))
  assert_eq_string("Hello,    !", greet(invalid_inputs[1]))
  assert_eq_string("Hello, \n!", greet(invalid_inputs[2]))
  assert_eq_string("Hello, \t!", greet(invalid_inputs[3]))
}

// è¾…åŠ©å‡½æ•°ï¼šå‡æ³•ï¼ˆç”¨äºŽæµ‹è¯•ï¼‰
fn subtract(a : Int, b : Int) -> Int {
  a - b
}

// è¾…åŠ©å‡½æ•°ï¼šå¸ƒå°”æ–­è¨€ï¼ˆç”¨äºŽæµ‹è¯•ï¼‰
fn assert_true(condition : Bool) -> Unit {
  if condition {
    ()
  } else {
    let _ = "Boolean assertion failed"
  }
}