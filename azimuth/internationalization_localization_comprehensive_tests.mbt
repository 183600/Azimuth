// å›½é™…åŒ–æ”¯æŒå’Œæœ¬åœ°åŒ–æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•é¥æµ‹ç³»ç»Ÿåœ¨ä¸åŒè¯­è¨€ç¯å¢ƒä¸‹çš„å…¼å®¹æ€§å’Œæœ¬åœ°åŒ–æ”¯æŒ

test "å¤šè¯­è¨€å±æ€§å€¼å¤„ç†æµ‹è¯•" {
  let attrs = Attributes::new()
  
  // æµ‹è¯•ä¸­æ–‡å±æ€§å€¼
  Attributes::set(attrs, "æœåŠ¡åç§°", StringValue("é¥æµ‹æœåŠ¡"))
  Attributes::set(attrs, "æœåŠ¡ç‰ˆæœ¬", StringValue("1.0.0"))
  Attributes::set(attrs, "æè¿°", StringValue("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨çš„é¥æµ‹æœåŠ¡"))
  
  let chinese_service_name = Attributes::get(attrs, "æœåŠ¡åç§°")
  match chinese_service_name {
    Some(StringValue(value)) => assert_eq(value, "é¥æµ‹æœåŠ¡")
    _ => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒä¸­æ–‡é”®
  }
  
  // æµ‹è¯•è‹±æ–‡å±æ€§å€¼
  Attributes::set(attrs, "service.name", StringValue("telemetry-service"))
  Attributes::set(attrs, "service.version", StringValue("1.0.0"))
  Attributes::set(attrs, "description", StringValue("This is a test telemetry service"))
  
  let english_service_name = Attributes::get(attrs, "service.name")
  match english_service_name {
    Some(StringValue(value)) => assert_eq(value, "telemetry-service")
    _ => assert_true(false)
  }
  
  // æµ‹è¯•æ—¥æ–‡å±æ€§å€¼
  Attributes::set(attrs, "ã‚µãƒ¼ãƒ“ã‚¹å", StringValue("ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚µãƒ¼ãƒ“ã‚¹"))
  Attributes::set(attrs, "èª¬æ˜", StringValue("ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªã‚µãƒ¼ãƒ“ã‚¹ã§ã™"))
  
  // æµ‹è¯•éŸ©æ–‡å±æ€§å€¼
  Attributes::set(attrs, "ì„œë¹„ìŠ¤ì´ë¦„", StringValue("ì›ê²©ì¸¡ì •ì„œë¹„ìŠ¤"))
  Attributes::set(attrs, "ì„¤ëª…", StringValue("ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ìš© ì›ê²©ì¸¡ì • ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤"))
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡å±æ€§å€¼
  Attributes::set(attrs, "Ø§Ø³Ù…_Ø§Ù„Ø®Ø¯Ù…Ø©", StringValue("Ø®Ø¯Ù…Ø©_Ø§Ù„Ù‚ÙŠØ§Ø³_Ø¹Ù†_Ø¨Ø¹Ø¯"))
  Attributes::set(attrs, "Ø§Ù„ÙˆØµÙ", StringValue("Ù‡Ø°Ù‡ Ø®Ø¯Ù…Ø© Ù‚ÙŠØ§Ø³ Ø¹Ù† Ø¨Ø¹Ø¯ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±"))
  
  // æµ‹è¯•ä¿„æ–‡å±æ€§å€¼
  Attributes::set(attrs, "Ğ¸Ğ¼Ñ_ÑĞ»ÑƒĞ¶Ğ±Ñ‹", StringValue("ÑĞ»ÑƒĞ¶Ğ±Ğ°_Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ğ¸"))
  Attributes::set(attrs, "Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ", StringValue("Ğ­Ñ‚Ğ¾ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ°Ñ ÑĞ»ÑƒĞ¶Ğ±Ğ° Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ğ¸"))
  
  // æµ‹è¯•æ··åˆè¯­è¨€å±æ€§å€¼
  Attributes::set(attrs, "mixed.language", StringValue="ä¸­æ–‡Englishæ—¥æœ¬èªí•œêµ­Ø§Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©Ğ ÑƒÑÑĞºĞ¸Ğ¹")
  
  let mixed_value = Attributes::get(attrs, "mixed.language")
  match mixed_value {
    Some(StringValue(value)) => assert_eq(value, "ä¸­æ–‡Englishæ—¥æœ¬èªí•œêµ­Ø§Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©Ğ ÑƒÑÑĞºĞ¸Ğ¹")
    _ => assert_true(false)
  }
  
  assert_true(true)
}

test "å¤šè¯­è¨€LogRecordå¤„ç†æµ‹è¯•" {
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "å›½é™…åŒ–æµ‹è¯•")
  
  // æµ‹è¯•ä¸­æ–‡æ—¥å¿—æ¶ˆæ¯
  let chinese_log = LogRecord::new(Info, "è¿™æ˜¯ä¸€ä¸ªä¸­æ–‡ä¿¡æ¯æ—¥å¿—")
  Logger::emit(logger, chinese_log)
  assert_eq(LogRecord::severity_number(chinese_log), Info)
  match LogRecord::body(chinese_log) {
    Some(body) => assert_eq(body, "è¿™æ˜¯ä¸€ä¸ªä¸­æ–‡ä¿¡æ¯æ—¥å¿—")
    None => assert_true(false)
  }
  
  // æµ‹è¯•è‹±æ–‡æ—¥å¿—æ¶ˆæ¯
  let english_log = LogRecord::new(Warn, "This is an English warning log")
  Logger::emit(logger, english_log)
  assert_eq(LogRecord::severity_number(english_log), Warn)
  match LogRecord::body(english_log) {
    Some(body) => assert_eq(body, "This is an English warning log")
    None => assert_true(false)
  }
  
  // æµ‹è¯•æ—¥æ–‡æ—¥å¿—æ¶ˆæ¯
  let japanese_log = LogRecord::new(Error, "ã“ã‚Œã¯æ—¥æœ¬èªã®ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã§ã™")
  Logger::emit(logger, japanese_log)
  
  // æµ‹è¯•éŸ©æ–‡æ—¥å¿—æ¶ˆæ¯
  let korean_log = LogRecord::new(Debug, "ì´ê²ƒì€ í•œêµ­ì–´ ë””ë²„ê·¸ ë¡œê·¸ì…ë‹ˆë‹¤")
  Logger::emit(logger, korean_log)
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡æ—¥å¿—æ¶ˆæ¯
  let arabic_log = LogRecord::new(Fatal, "Ù‡Ø°Ø§ Ø³Ø¬Ù„ Ø®Ø·Ø£ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  Logger::emit(logger, arabic_log)
  
  // æµ‹è¯•ä¿„æ–‡æ—¥å¿—æ¶ˆæ¯
  let russian_log = LogRecord::new(Trace, "Ğ­Ñ‚Ğ¾ Ñ€ÑƒÑÑĞºĞ°Ñ Ñ‚Ñ€Ğ°ÑÑĞ¸Ñ€Ğ¾Ğ²Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ")
  Logger::emit(logger, russian_log)
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦å’Œemojiçš„æ—¥å¿—æ¶ˆæ¯
  let emoji_log = LogRecord::new(Info, "æµ‹è¯•æ—¥å¿— ğŸš€ åŒ…å« emoji å’Œç‰¹æ®Šå­—ç¬¦ !@#$%^&*()")
  Logger::emit(logger, emoji_log)
  
  // æµ‹è¯•å¸¦æœ‰å¤šè¯­è¨€å±æ€§çš„å¤æ‚æ—¥å¿—è®°å½•
  let multilingual_attrs = Attributes::new()
  Attributes::set(multilingual_attrs, "ç”¨æˆ·ID", StringValue("ç”¨æˆ·123"))
  Attributes::set(multilingual_attrs, "æ“ä½œç±»å‹", StringValue="ãƒ‡ãƒ¼ã‚¿æ›´æ–°")
  Attributes::set(multilingual_attrs, "ìƒíƒœ", StringValue="ì™„ë£Œ"))
  Attributes::set(multilingual_attrs, "Ø§Ù„Ø­Ø§Ù„Ø©", StringValue="Ù…ÙƒØªÙ…Ù„"))
  Attributes::set(multilingual_attrs, "ÑÑ‚Ğ°Ñ‚ÑƒÑ", StringValue="Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¾"))
  
  let complex_log = LogRecord::new_with_context(
    Error,
    Some("å¤åˆå¤šè¯­è¨€é”™è¯¯æ—¥å¿—ï¼šç”¨æˆ·æ“ä½œå¤±è´¥"),
    Some(multilingual_attrs),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("å¤šè¯­è¨€è¿½è¸ªID"),
    Some("å¤šè¯­è¨€SpanID"),
    Some(Context::root())
  )
  
  Logger::emit(logger, complex_log)
  
  assert_true(true)
}

test "å¤šè¯­è¨€Spanæ“ä½œæµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "å¤šè¯­è¨€æµ‹è¯•è¿½è¸ªå™¨")
  
  // æµ‹è¯•ä¸­æ–‡Spanåç§°
  let chinese_span = Tracer::start_span(tracer, "ä¸­æ–‡æ“ä½œSpan")
  assert_eq(Span::name(chinese_span), "ä¸­æ–‡æ“ä½œSpan")
  
  // æ·»åŠ ä¸­æ–‡äº‹ä»¶
  Span::add_event(chinese_span, "ç”¨æˆ·ç™»å½•", Some([
    ("ç”¨æˆ·å", StringValue="å¼ ä¸‰"),
    ("ç™»å½•æ–¹å¼", StringValue="å¯†ç "),
    ("IPåœ°å€", StringValue="192.168.1.100")
  ]))
  
  Span::set_status(chinese_span, Ok)
  Span::end(chinese_span)
  
  // æµ‹è¯•æ—¥æ–‡Spanåç§°
  let japanese_span = Tracer::start_span(tracer, "æ—¥æœ¬èªæ“ä½œã‚¹ãƒ‘ãƒ³")
  assert_eq(Span::name(japanese_span), "æ—¥æœ¬èªæ“ä½œã‚¹ãƒ‘ãƒ³")
  
  // æ·»åŠ æ—¥æ–‡äº‹ä»¶
  Span::add_event(japanese_span, "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³", Some([
    ("ãƒ¦ãƒ¼ã‚¶ãƒ¼å", StringValue="ç”°ä¸­å¤ªéƒ"),
    ("ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•", StringValue="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"),
    ("IPã‚¢ãƒ‰ãƒ¬ã‚¹", StringValue="192.168.1.101")
  ]))
  
  Span::set_status(japanese_span, Error)
  Span::end(japanese_span)
  
  // æµ‹è¯•éŸ©æ–‡Spanåç§°
  let korean_span = Tracer::start_span(tracer, "í•œêµ­ì–´ ì‘ì—… ìŠ¤íŒ¬")
  assert_eq(Span::name(korean_span), "í•œêµ­ì–´ ì‘ì—… ìŠ¤íŒ¬")
  
  // æµ‹è¯•é˜¿æ‹‰ä¼¯æ–‡Spanåç§°
  let arabic_span = Tracer::start_span(tracer, "Ø¹Ù…Ù„ÙŠØ© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  assert_eq(Span::name(arabic_span), "Ø¹Ù…Ù„ÙŠØ© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  
  // æµ‹è¯•ä¿„æ–‡Spanåç§°
  let russian_span = Tracer::start_span(tracer, "Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
  assert_eq(Span::name(russian_span), "Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
  
  // æµ‹è¯•æ··åˆè¯­è¨€Spanåç§°å’Œäº‹ä»¶
  let mixed_span = Tracer::start_span(tracer, "Mixed Language Span æ··åˆè¯­è¨€ã‚¹ãƒ‘ãƒ³ í˜¼í•©ì–¸ì–´")
  
  Span::add_event(mixed_span, "å¤šè¯­è¨€äº‹ä»¶", Some([
    ("ä¸­æ–‡å±æ€§", StringValue="ä¸­æ–‡å€¼"),
    ("English Attribute", StringValue="English Value"),
    ("æ—¥æœ¬èªå±æ€§", StringValue="æ—¥æœ¬èªå€¤"),
    ("í•œêµ­ì–´ ì†ì„±", StringValue="í•œêµ­ì–´ ê°’"),
    ("Ø§Ù„Ø®Ø§ØµÙŠØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", StringValue="Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"),
    ("Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ğ°Ñ‚Ñ€Ğ¸Ğ±ÑƒÑ‚", StringValue="Ğ ÑƒÑÑĞºĞ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ")
  ]))
  
  Span::end(mixed_span)
  
  assert_true(true)
}

test "å¤šè¯­è¨€Resourceå’ŒInstrumentationScopeæµ‹è¯•" {
  // æµ‹è¯•å¤šè¯­è¨€Resourceå±æ€§
  let resource = Resource::new()
  
  let multilingual_attributes = [
    ("æœåŠ¡åç§°", StringValue("é¥æµ‹æœåŠ¡")),
    ("service.name", StringValue("telemetry-service")),
    ("ã‚µãƒ¼ãƒ“ã‚¹å", StringValue="ãƒ†ãƒ¬ãƒ¡ãƒˆãƒªãƒ¼ã‚µãƒ¼ãƒ“ã‚¹")),
    ("ì„œë¹„ìŠ¤ì´ë¦„", StringValue="ì›ê²©ì¸¡ì •ì„œë¹„ìŠ¤")),
    ("Ø§Ø³Ù…_Ø§Ù„Ø®Ø¯Ù…Ø©", StringValue="Ø®Ø¯Ù…Ø©_Ø§Ù„Ù‚ÙŠØ§Ø³_Ø¹Ù†_Ø¨Ø¹Ø¯")),
    ("Ğ¸Ğ¼Ñ_ÑĞ»ÑƒĞ¶Ğ±Ñ‹", StringValue("ÑĞ»ÑƒĞ¶Ğ±Ğ°_Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ğ¸")),
    ("æœåŠ¡ç‰ˆæœ¬", StringValue("1.0.0")),
    ("æœåŠ¡æè¿°", StringValue="æ”¯æŒå¤šè¯­è¨€çš„é¥æµ‹æœåŠ¡")),
    ("æœåŠ¡ç¯å¢ƒ", StringValue="ç”Ÿäº§ç¯å¢ƒ")
  ]
  
  let resource_with_i18n = Resource::with_attributes(resource, multilingual_attributes)
  
  // éªŒè¯å„ç§è¯­è¨€çš„å±æ€§å¯ä»¥æ­£ç¡®è·å–
  let chinese_service_name = Resource::get_attribute(resource_with_i18n, "æœåŠ¡åç§°")
  match chinese_service_name {
    Some(StringValue(value)) => assert_eq(value, "é¥æµ‹æœåŠ¡")
    _ => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒ
  }
  
  let english_service_name = Resource::get_attribute(resource_with_i18n, "service.name")
  match english_service_name {
    Some(StringValue(value)) => assert_eq(value, "telemetry-service")
    _ => assert_true(false)
  }
  
  // æµ‹è¯•å¤šè¯­è¨€InstrumentationScope
  let scope_chinese = InstrumentationScope::{
    name: "ä¸­æ–‡æ£€æµ‹å™¨",
    version: Some("1.0.0"),
    schema_url: Some("https://example.com/schema")
  }
  
  let scope_japanese = InstrumentationScope::{
    name: "æ—¥æœ¬èªã‚¤ãƒ³ã‚¹ãƒ„ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—",
    version: Some("2.0.0"),
    schema_url: Some("https://example.co.jp/schema")
  }
  
  let scope_korean = InstrumentationScope::{
    name: "í•œêµ­ì–´ ê³„ì¸¡ ë²”ìœ„",
    version: Some("3.0.0"),
    schema_url: Some("https://example.co.kr/schema")
  }
  
  // éªŒè¯å¤šè¯­è¨€Scopeçš„å±æ€§
  assert_eq(scope_chinese.name, "ä¸­æ–‡æ£€æµ‹å™¨")
  assert_eq(scope_japanese.name, "æ—¥æœ¬èªã‚¤ãƒ³ã‚¹ãƒ„ãƒ«ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚³ãƒ¼ãƒ—")
  assert_eq(scope_korean.name, "í•œêµ­ì–´ ê³„ì¸¡ ë²”ìœ„")
  
  assert_true(true)
}

test "å¤šè¯­è¨€Contextå’ŒBaggageæµ‹è¯•" {
  // æµ‹è¯•å¤šè¯­è¨€Contexté”®å€¼å¯¹
  let ctx = Context::root()
  
  let chinese_key = ContextKey::new("ä¸­æ–‡ä¸Šä¸‹æ–‡é”®")
  let ctx_with_chinese = Context::with_value(ctx, chinese_key, "ä¸­æ–‡ä¸Šä¸‹æ–‡å€¼")
  
  let chinese_value = Context::get(ctx_with_chinese, chinese_key)
  match chinese_value {
    Some(value) => assert_eq(value, "ä¸­æ–‡ä¸Šä¸‹æ–‡å€¼")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒ
  }
  
  let japanese_key = ContextKey::new("æ—¥æœ¬èªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚­ãƒ¼")
  let ctx_with_japanese = Context::with_value(ctx_with_chinese, japanese_key, "æ—¥æœ¬èªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå€¤")
  
  let korean_key = ContextKey::new("í•œêµ­ì–´ ì»¨í…ìŠ¤íŠ¸ í‚¤")
  let ctx_with_korean = Context::with_value(ctx_with_japanese, korean_key, "í•œêµ­ì–´ ì»¨í…ìŠ¤íŠ¸ ê°’")
  
  let arabic_key = ContextKey::new("Ù…ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ§Ù‚ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  let ctx_with_arabic = Context::with_value(ctx_with_korean, arabic_key, "Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  
  let russian_key = ContextKey::new("ĞºĞ»ÑÑ‡ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
  let ctx_with_russian = Context::with_value(ctx_with_arabic, russian_key, "Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
  
  // éªŒè¯å¤šè¯­è¨€Contextå€¼
  let russian_value = Context::get(ctx_with_russian, russian_key)
  match russian_value {
    Some(value) => assert_eq(value, "Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
    None => assert_true(false)
  }
  
  // æµ‹è¯•å¤šè¯­è¨€Baggage
  let baggage = Baggage::new()
  
  let baggage_with_chinese = Baggage::set_entry(baggage, "ä¸­æ–‡æ¡ç›®", "ä¸­æ–‡å€¼")
  let baggage_with_japanese = Baggage::set_entry(baggage_with_chinese, "æ—¥æœ¬èªã‚¨ãƒ³ãƒˆãƒª", "æ—¥æœ¬èªå€¤")
  let baggage_with_korean = Baggage::set_entry(baggage_with_japanese, "í•œêµ­ì–´ í•­ëª©", "í•œêµ­ì–´ ê°’")
  let baggage_with_arabic = Baggage::set_entry(baggage_with_korean, "Ø¨Ù†Ø¯ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ù‚ÙŠÙ…Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  let baggage_with_russian = Baggage::set_entry(baggage_with_arabic, "Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ", "Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")
  
  // éªŒè¯å¤šè¯­è¨€Baggageæ¡ç›®
  let chinese_entry = Baggage::get_entry(baggage_with_russian, "ä¸­æ–‡æ¡ç›®")
  match chinese_entry {
    Some(value) => assert_eq(value, "ä¸­æ–‡å€¼")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒ
  }
  
  let japanese_entry = Baggage::get_entry(baggage_with_russian, "æ—¥æœ¬èªã‚¨ãƒ³ãƒˆãƒª")
  match japanese_entry {
    Some(value) => assert_eq(value, "æ—¥æœ¬èªå€¤")
    None => assert_true(false)
  }
  
  assert_true(true)
}

test "å¤šè¯­è¨€Propagationæµ‹è¯•" {
  // æµ‹è¯•å¤šè¯­è¨€Contextçš„ä¼ æ’­
  let propagator = W3CTraceContextPropagator::new()
  let composite = CompositePropagator::new([propagator])
  
  let ctx = Context::root()
  
  // æ·»åŠ å¤šè¯­è¨€ä¸Šä¸‹æ–‡å€¼
  let ctx_with_multilingual = Context::with_value(
    Context::with_value(
      Context::with_value(
        Context::with_value(
          Context::with_value(ctx, ContextKey::new("ä¸­æ–‡ä¿¡æ¯"), "è¿™æ˜¯ä¸­æ–‡ä¿¡æ¯"),
          ContextKey::new("English Info"), "This is English info"
        ),
        ContextKey::new("æ—¥æœ¬èªæƒ…å ±"), "ã“ã‚Œã¯æ—¥æœ¬èªã®æƒ…å ±ã§ã™"
      ),
      ContextKey::new("í•œêµ­ì–´ ì •ë³´"), "ì´ê²ƒì€ í•œêµ­ì–´ ì •ë³´ì…ë‹ˆë‹¤"
    ),
    ContextKey::new("Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ø±Ø¨ÙŠØ©"), "Ù‡Ø°Ù‡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"
  )
  
  // åˆ›å»ºè½½ä½“å¹¶æ³¨å…¥å¤šè¯­è¨€ä¸Šä¸‹æ–‡
  let carrier = TextMapCarrier::new()
  CompositePropagator::inject(composite, ctx_with_multilingual, carrier)
  
  // æ·»åŠ è‡ªå®šä¹‰çš„å¤šè¯­è¨€å¤´éƒ¨
  TextMapCarrier::set(carrier, "X-ä¸­æ–‡-å¤´éƒ¨", "ä¸­æ–‡å¤´éƒ¨å€¼")
  TextMapCarrier::set(carrier, "X-English-Header", "English header value")
  TextMapCarrier::set(carrier, "X-æ—¥æœ¬èª-ãƒ˜ãƒƒãƒ€ãƒ¼", "æ—¥æœ¬èªãƒ˜ãƒƒãƒ€ãƒ¼å€¤")
  TextMapCarrier::set(carrier, "X-í•œêµ­ì–´-í—¤ë”", "í•œêµ­ì–´ í—¤ë” ê°’")
  TextMapCarrier::set(carrier, "X-Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©-Ø±Ø£Ø³", "Ù‚ÙŠÙ…Ø© Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")
  TextMapCarrier::set(carrier, "X-Ğ ÑƒÑÑĞºĞ¸Ğ¹-Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº", "Ğ ÑƒÑÑĞºĞ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ°")
  
  // éªŒè¯æ³¨å…¥çš„å¤šè¯­è¨€å¤´éƒ¨
  let chinese_header = TextMapCarrier::get(carrier, "X-ä¸­æ–‡-å¤´éƒ¨")
  match chinese_header {
    Some(value) => assert_eq(value, "ä¸­æ–‡å¤´éƒ¨å€¼")
    None => assert_true(false) // ç®€åŒ–å®ç°å¯èƒ½ä¸æ”¯æŒ
  }
  
  let english_header = TextMapCarrier::get(carrier, "X-English-Header")
  match english_header {
    Some(value) => assert_eq(value, "English header value")
    None => assert_true(false)
  }
  
  // ä»è½½ä½“ä¸­æå–ä¸Šä¸‹æ–‡
  let extracted_ctx = CompositePropagator::extract(composite, carrier)
  
  // éªŒè¯æå–çš„ä¸Šä¸‹æ–‡
  let extracted_value = Context::get(extracted_ctx, ContextKey::new("extracted"))
  match extracted_value {
    Some(value) => assert_eq(value, "true")
    None => assert_true(false)
  }
  
  assert_true(true)
}

test "æœ¬åœ°åŒ–æ—¶é—´æˆ³å’Œæ ¼å¼åŒ–æµ‹è¯•" {
  let clock = Clock::system()
  let timestamp = Clock::now_unix_nanos(clock)
  
  // æµ‹è¯•ä¸åŒè¯­è¨€ç¯å¢ƒçš„æ—¶é—´æˆ³è¡¨ç¤º
  let log_record_chinese = LogRecord::new_with_context(
    Info,
    Some("ä¸­æ–‡æ—¥å¿—è®°å½•ï¼Œæ—¶é—´æˆ³ï¼š" + timestamp.to_string()),
    None,
    Some(timestamp),
    Some(timestamp + 1000000L),
    Some("ä¸­æ–‡è¿½è¸ªID"),
    Some("ä¸­æ–‡SpanID"),
    Some(Context::root())
  )
  
  let log_record_english = LogRecord::new_with_context(
    Info,
    Some("English log record, timestamp: " + timestamp.to_string()),
    None,
    Some(timestamp),
    Some(timestamp + 1000000L),
    Some("English TraceID"),
    Some("English SpanID"),
    Some(Context::root())
  )
  
  let log_record_japanese = LogRecord::new_with_context(
    Info,
    Some("æ—¥æœ¬èªãƒ­ã‚°è¨˜éŒ²ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼š" + timestamp.to_string()),
    None,
    Some(timestamp),
    Some(timestamp + 1000000L),
    Some("æ—¥æœ¬èªãƒˆãƒ¬ãƒ¼ã‚¹ID"),
    Some("æ—¥æœ¬èªã‚¹ãƒ‘ãƒ³ID"),
    Some(Context::root())
  )
  
  // éªŒè¯ä¸åŒè¯­è¨€ç¯å¢ƒçš„æ—¥å¿—è®°å½•
  assert_eq(LogRecord::trace_id(log_record_chinese), Some("ä¸­æ–‡è¿½è¸ªID"))
  assert_eq(LogRecord::trace_id(log_record_english), Some("English TraceID"))
  assert_eq(LogRecord::trace_id(log_record_japanese), Some("æ—¥æœ¬èªãƒˆãƒ¬ãƒ¼ã‚¹ID"))
  
  match LogRecord::body(log_record_chinese) {
    Some(body) => assert_true(body.contains("ä¸­æ–‡æ—¥å¿—è®°å½•"))
    None => assert_true(false)
  }
  
  match LogRecord::body(log_record_english) {
    Some(body) => assert_true(body.contains("English log record"))
    None => assert_true(false)
  }
  
  match LogRecord::body(log_record_japanese) {
    Some(body) => assert_true(body.contains("æ—¥æœ¬èªãƒ­ã‚°è¨˜éŒ²"))
    None => assert_true(false)
  }
  
  assert_true(true)
}

test "å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯å’ŒçŠ¶æ€å¤„ç†æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "å¤šè¯­è¨€é”™è¯¯æµ‹è¯•")
  
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯çŠ¶æ€å’Œæ¶ˆæ¯
  let error_span_chinese = Tracer::start_span(tracer, "ä¸­æ–‡é”™è¯¯æ“ä½œ")
  Span::add_event(error_span_chinese, "é”™è¯¯å‘ç”Ÿ", Some([
    ("é”™è¯¯ä»£ç ", StringValue="E001"),
    ("é”™è¯¯æ¶ˆæ¯", StringValue="ç”¨æˆ·è®¤è¯å¤±è´¥"),
    ("é”™è¯¯è¯¦æƒ…", StringValue="ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®")
  ]))
  Span::set_status(error_span_chinese, Error)
  Span::end(error_span_chinese)
  
  let error_span_english = Tracer::start_span(tracer, "English Error Operation")
  Span::add_event(error_span_english, "Error Occurred", Some([
    ("Error Code", StringValue="E001"),
    ("Error Message", StringValue="User authentication failed"),
    ("Error Details", StringValue="Username or password is incorrect")
  ]))
  Span::set_status(error_span_english, Error)
  Span::end(error_span_english)
  
  let error_span_japanese = Tracer::start_span(tracer, "æ—¥æœ¬èªã‚¨ãƒ©ãƒ¼æ“ä½œ")
  Span::add_event(error_span_japanese, "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ", Some([
    ("ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰", StringValue="E001"),
    ("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸", StringValue="ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å¤±æ•—"),
    ("ã‚¨ãƒ©ãƒ¼è©³ç´°", StringValue="ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“")
  ]))
  Span::set_status(error_span_japanese, Error)
  Span::end(error_span_japanese)
  
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯æ—¥å¿—
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "å¤šè¯­è¨€é”™è¯¯æ—¥å¿—")
  
  let error_log_chinese = LogRecord::new_with_context(
    Error,
    Some("ä¸¥é‡é”™è¯¯ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("é”™è¯¯è¿½è¸ªID"),
    Some("é”™è¯¯SpanID"),
    Some(Context::root())
  )
  
  let error_log_english = LogRecord::new_with_context(
    Error,
    Some("Critical error: Database connection failed"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("Error TraceID"),
    Some("Error SpanID"),
    Some(Context::root())
  )
  
  let error_log_japanese = LogRecord::new_with_context(
    Error,
    Some("é‡å¤§ãªã‚¨ãƒ©ãƒ¼ï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("ã‚¨ãƒ©ãƒ¼ãƒˆãƒ¬ãƒ¼ã‚¹ID"),
    Some("ã‚¨ãƒ©ãƒ¼ã‚¹ãƒ‘ãƒ³ID"),
    Some(Context::root())
  )
  
  Logger::emit(logger, error_log_chinese)
  Logger::emit(logger, error_log_english)
  Logger::emit(logger, error_log_japanese)
  
  assert_true(true)
}

test "Unicodeå’Œç‰¹æ®Šå­—ç¬¦å¤„ç†æµ‹è¯•" {
  // æµ‹è¯•å„ç§Unicodeå­—ç¬¦å’Œç‰¹æ®Šç¬¦å·çš„å¤„ç†
  let attrs = Attributes::new()
  
  // æµ‹è¯•å„ç§Unicodeå­—ç¬¦
  Attributes::set(attrs, "emoji.test", StringValue("æµ‹è¯•emoji ğŸš€ğŸ‰ğŸ’»ğŸ“±âš¡"))
  Attributes::set(attrs, "math.symbols", StringValue("æ•°å­¦ç¬¦å·: âˆ‘âˆâˆ«âˆ†âˆ‡âˆ‚âˆšâˆâ‰ˆâ‰ â‰¤â‰¥"))
  Attributes::set(attrs, "currency.symbols", StringValue="è´§å¸ç¬¦å·: $Â¥â‚¬Â£Â¢â‚¹â‚½â‚©"))
  Attributes::set(attrs, "arrows.symbols", StringValue("ç®­å¤´ç¬¦å·: â†â†’â†‘â†“â†–â†—â†˜â†™â‡â‡’â‡‘â‡“"))
  Attributes::set(attrs, "punctuation.symbols", StringValue="æ ‡ç‚¹ç¬¦å·: ï¼Œã€‚ï¼›ï¼šï¼Ÿï¼""''ï¼ˆï¼‰ã€ã€‘ã€Šã€‹"))
  
  // æµ‹è¯•å¤åˆè„šæœ¬æ–‡æœ¬
  Attributes::set(attrs, "mixed.script", StringValue="Englishä¸­æ–‡æ—¥æœ¬èªí•œêµ­Ø§Ø§Ù„Ø¹Ø¨ÙŠØ©Ğ ÑƒÑÑĞºĞ¸Ğ¹")
  
  // æµ‹è¯•å³ä¾§åˆ°å·¦ä¾§çš„æ–‡æœ¬
  Attributes::set(attrs, "rtl.text", StringValue="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù†Øµ Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø±"))
  
  // æµ‹è¯•ç»„åˆå­—ç¬¦
  Attributes::set(attrs, "combining.chars", StringValue="ç»„åˆå­—ç¬¦æµ‹è¯•: eÌ = e + Ì")
  
  // éªŒè¯ç‰¹æ®Šå­—ç¬¦å¯ä»¥æ­£ç¡®å¤„ç†
  let emoji_test = Attributes::get(attrs, "emoji.test")
  match emoji_test {
    Some(StringValue(value)) => assert_true(value.contains("ğŸš€"))
    None => assert_true(false)
  }
  
  let math_symbols = Attributes::get(attrs, "math.symbols")
  match math_symbols {
    Some(StringValue(value)) => assert_true(value.contains("âˆ‘"))
    None => assert_true(false)
  }
  
  // æµ‹è¯•åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„Spanå’Œæ—¥å¿—
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "ç‰¹æ®Šå­—ç¬¦æµ‹è¯•")
  
  let special_span = Tracer::start_span(tracer, "Special Characters Span ğŸŒŸ")
  Span::add_event(special_span, "ç‰¹æ®Šå­—ç¬¦äº‹ä»¶", Some([
    ("emoji", StringValue="ğŸ‰ğŸš€ğŸ’¯"),
    ("æ•°å­¦", StringValue="âˆ‘âˆâˆ«âˆ†âˆ‡"),
    ("ç®­å¤´", StringValue="â†â†’â†‘â†“")
  ]))
  Span::end(special_span)
  
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "ç‰¹æ®Šå­—ç¬¦æ—¥å¿—")
  
  let special_log = LogRecord::new(Info, "ç‰¹æ®Šå­—ç¬¦æ—¥å¿—è®°å½• ğŸŠ åŒ…å«å„ç§ç¬¦å·: âˆ‘âˆâˆ« â†â†’â†‘â†“ $Â¥â‚¬Â£")
  Logger::emit(logger, special_log)
  
  assert_true(true)
}