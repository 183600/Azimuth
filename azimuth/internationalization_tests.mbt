// Azimuth Telemetry System - Internationalization Tests
// å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æµ‹è¯•ç”¨ä¾‹

test "unicode_attribute_handling" {
  // Test handling of Unicode characters in attributes
  let attrs = Attributes::new()
  
  // Test various Unicode scripts
  Attributes::set(attrs, "chinese.text", StringValue("ä¸­æ–‡æµ‹è¯•æ–‡æœ¬"))
  Attributes::set(attrs, "japanese.text", StringValue("æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ"))
  Attributes::set(attrs, "korean.text", StringValue("í•œêµ­ì–´ í…ìŠ¤íŠ¸"))
  Attributes::set(attrs, "arabic.text", StringValue("Ù†Øµ Ø¹Ø±Ø¨ÙŠ"))
  Attributes::set(attrs, "hebrew.text", StringValue("×˜×§×¡×˜ ×¢×‘×¨×™"))
  Attributes::set(attrs, "russian.text", StringValue("Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚"))
  Attributes::set(attrs, "thai.text", StringValue("à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ à¸²à¸©à¸²à¹„à¸—à¸¢"))
  Attributes::set(attrs, "emoji.text", StringValue("ğŸš€ğŸŒŸğŸ’«âœ¨ğŸ¯"))
  
  // Verify Unicode attributes can be retrieved correctly
  let chinese_result = Attributes::get(attrs, "chinese.text")
  match chinese_result {
    Some(StringValue(value)) => assert_eq(value, "ä¸­æ–‡æµ‹è¯•æ–‡æœ¬")
    _ => assert_true(false)
  }
  
  let emoji_result = Attributes::get(attrs, "emoji.text")
  match emoji_result {
    Some(StringValue(value)) => assert_eq(value, "ğŸš€ğŸŒŸğŸ’«âœ¨ğŸ¯")
    _ => assert_true(false)
  }
  
  let arabic_result = Attributes::get(attrs, "arabic.text")
  match arabic_result {
    Some(StringValue(value)) => assert_eq(value, "Ù†Øµ Ø¹Ø±Ø¨ÙŠ")
    _ => assert_true(false)
  }
}

test "multilingual_error_messages" {
  // Test multilingual error messages in logs
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "i18n-logger")
  
  // Create error messages in different languages
  let log_record_en = LogRecord::new(Error, "Connection failed to remote server")
  let log_record_zh = LogRecord::new(Error, "è¿æ¥è¿œç¨‹æœåŠ¡å™¨å¤±è´¥")
  let log_record_ja = LogRecord::new(Error, "ãƒªãƒ¢ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ")
  let log_record_ko = LogRecord::new(Error, "ì›ê²© ì„œë²„ ì—°ê²° ì‹¤íŒ¨")
  
  Logger::emit(logger, log_record_en)
  Logger::emit(logger, log_record_zh)
  Logger::emit(logger, log_record_ja)
  Logger::emit(logger, log_record_ko)
  
  // Verify error messages
  match LogRecord::body(log_record_en) {
    Some(body) => assert_true(body.contains("Connection"))
    None => assert_true(false)
  }
  
  match LogRecord::body(log_record_zh) {
    Some(body) => assert_true(body.contains("è¿æ¥"))
    None => assert_true(false)
  }
}

test "locale_specific_span_names" {
  // Test locale-specific span names
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "i18n-tracer")
  
  // Create spans with names in different languages
  let span_en = Tracer::start_span(tracer, "user.authentication")
  let span_zh = Tracer::start_span(tracer, "ç”¨æˆ·èº«ä»½éªŒè¯")
  let span_ja = Tracer::start_span(tracer, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼")
  let span_ko = Tracer::start_span(tracer, "ì‚¬ìš©ì ì¸ì¦")
  
  // Verify span names
  assert_eq(Span::name(span_en), "user.authentication")
  assert_eq(Span::name(span_zh), "ç”¨æˆ·èº«ä»½éªŒè¯")
  assert_eq(Span::name(span_ja), "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼")
  assert_eq(Span::name(span_ko), "ì‚¬ìš©ì ì¸ì¦")
  
  Span::end(span_en)
  Span::end(span_zh)
  Span::end(span_ja)
  Span::end(span_ko)
}

test "rtl_text_handling" {
  // Test right-to-left text handling
  let attrs = Attributes::new()
  
  // Test RTL languages
  Attributes::set(attrs, "arabic.label", StringValue("Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"))
  Attributes::set(attrs, "hebrew.label", StringValue("×©× ××©×ª××©"))
  Attributes::set(attrs, "persian.label", StringValue("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ"))
  Attributes::set(attrs, "urdu.label", StringValue("ØµØ§Ø±Ù Ú©Ø§ Ù†Ø§Ù…"))
  
  // Test mixed LTR/RTL content
  Attributes::set(attrs, "mixed.text", StringValue("Hello Ù…Ø±Ø­Ø¨Ø§ World"))
  Attributes::set(attrs, "arabic.with.numbers", StringValue("Ø§Ù„Ø±Ù‚Ù… 123"))
  Attributes::set(attrs, "hebrew.with.english", StringValue("Test ×‘×“×™×§×”"))
  
  // Verify RTL text is handled correctly
  let arabic_result = Attributes::get(attrs, "arabic.label")
  match arabic_result {
    Some(StringValue(value)) => assert_eq(value, "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")
    _ => assert_true(false)
  }
  
  let mixed_result = Attributes::get(attrs, "mixed.text")
  match mixed_result {
    Some(StringValue(value)) => assert_eq(value, "Hello Ù…Ø±Ø­Ø¨Ø§ World")
    _ => assert_true(false)
  }
}

test "localized_metric_names" {
  // Test localized metric names and descriptions
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "i18n-metrics")
  
  // Create metrics with localized names
  let counter_en = Meter::create_counter(meter, "response.time")
  let counter_zh = Meter::create_counter(meter, "å“åº”æ—¶é—´")
  let counter_ja = Meter::create_counter(meter, "å¿œç­”æ™‚é–“")
  let counter_ko = Meter::create_counter(meter, "ì‘ë‹µ ì‹œê°„")
  
  // Verify metric properties
  assert_eq(counter_en.name, "response.time")
  assert_eq(counter_zh.name, "å“åº”æ—¶é—´")
  assert_eq(counter_ja.name, "å¿œç­”æ™‚é–“")
  assert_eq(counter_ko.name, "ì‘ë‹µ ì‹œê°„")
  
  // Use the metrics
  Counter::add(counter_en, 100.0)
  Counter::add(counter_zh, 200.0)
  Counter::add(counter_ja, 150.0)
  Counter::add(counter_ko, 120.0)
}

test "cultural_number_formatting" {
  // Test cultural number formatting in attributes
  let attrs = Attributes::new()
  
  // Test different number formats
  Attributes::set(attrs, "western.number", StringValue("1,234.56"))
  Attributes::set(attrs, "european.number", StringValue("1.234,56"))
  Attributes::set(attrs, "arabic.number", StringValue("Ù¡Ù¬Ù¢Ù£Ù¤Ù«Ù¥Ù¦"))
  Attributes::set(attrs, "hindi.number", StringValue("à¥§,à¥¨à¥©à¥ª.à¥«à¥¬"))
  Attributes::set(attrs, "bengali.number", StringValue("à§§,à§¨à§©à§ª.à§«à§¬"))
  
  // Test different date formats
  Attributes::set(attrs, "us.date", StringValue("12/28/2025"))
  Attributes::set(attrs, "european.date", StringValue("28/12/2025"))
  Attributes::set(attrs, "iso.date", StringValue("2025-12-28"))
  Attributes::set(attrs, "japanese.date", StringValue("2025å¹´12æœˆ28æ—¥"))
  Attributes::set(attrs, "chinese.date", StringValue("2025å¹´12æœˆ28æ—¥"))
  
  // Verify cultural formats are preserved
  let western_result = Attributes::get(attrs, "western.number")
  match western_result {
    Some(StringValue(value)) => assert_eq(value, "1,234.56")
    None => assert_true(false)
  }
  
  let japanese_date_result = Attributes::get(attrs, "japanese.date")
  match japanese_date_result {
    Some(StringValue(value)) => assert_eq(value, "2025å¹´12æœˆ28æ—¥")
    None => assert_true(false)
  }
}