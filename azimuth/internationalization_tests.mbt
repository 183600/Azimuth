// Internationalization Tests
// This file contains test cases for internationalization and localization support

// Test 1: Unicode and multilingual attribute handling
pub test "unicode_multilingual_attributes" {
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "i18n-test-service")
  
  let span = azimuth::Tracer::start_span(tracer, "å¤šè¯­è¨€æ“ä½œæµ‹è¯•")
  
  // Test Unicode characters from different languages
  azimuth::Span::set_attribute(span, "user.name.cn", azimuth::StringValue("å¼ ä¸‰"))
  azimuth::Span::set_attribute(span, "user.name.jp", azimuth::StringValue("ç”°ä¸­å¤ªéƒ"))
  azimuth::Span::set_attribute(span, "user.name.kr", azimuth::StringValue("ê¹€ì² ìˆ˜"))
  azimuth::Span::set_attribute(span, "user.name.ar", azimuth::StringValue("Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯"))
  azimuth::Span::set_attribute(span, "user.name.ru", azimuth::StringValue("Ğ˜Ğ²Ğ°Ğ½ ĞŸĞµÑ‚Ñ€Ğ¾Ğ²"))
  azimuth::Span::set_attribute(span, "user.name.th", azimuth::StringValue("à¸ªà¸¡à¸Šà¸²à¸¢ à¹ƒà¸ˆà¸”à¸µ"))
  azimuth::Span::set_attribute(span, "user.name.he", azimuth::StringValue("×“×•×“ ×›×”×Ÿ"))
  azimuth::Span::set_attribute(span, "user.name.hi", azimuth::StringValue("à¤°à¤¾à¤® à¤•à¥à¤®à¤¾à¤°"))
  
  // Test emoji and special symbols
  azimuth::Span::set_attribute(span, "message.emoji", azimuth::StringValue("ğŸš€ğŸŒğŸ’»ğŸ“±"))
  azimuth::Span::set_attribute(span, "currency.symbols", azimuth::StringValue("$â‚¬Â£Â¥â‚¹â‚½â‚©"))
  azimuth::Span::set_attribute(span, "math.symbols", azimuth::StringValue("âˆ‘âˆâˆ«âˆ†âˆ‡âˆ‚"))
  
  // Test mixed language content
  azimuth::Span::set_attribute(span, "mixed.content", azimuth::StringValue("Hello ä¸–ç•Œ ã“ã‚“ã«ã¡ã¯ ì•ˆë…•í•˜ì„¸ìš” Ù…Ø±Ø­Ø¨Ø§"))
  
  // Test right-to-left languages
  azimuth::Span::set_attribute(span, "rtl.content", azimuth::StringValue("Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„Ø¹Ø§Ù„Ù…"))
  azimuth::Span::set_attribute(span, "rtl.mixed", azimuth::StringValue("Hello Ù…Ø±Ø­Ø¨Ø§ World"))
  
  // Verify Unicode attributes are correctly stored
  assert_eq(azimuth::Span::get_attribute(span, "user.name.cn"), Some(azimuth::StringValue("å¼ ä¸‰")))
  assert_eq(azimuth::Span::get_attribute(span, "user.name.jp"), Some(azimuth::StringValue("ç”°ä¸­å¤ªéƒ")))
  assert_eq(azimuth::Span::get_attribute(span, "message.emoji"), Some(azimuth::StringValue("ğŸš€ğŸŒğŸ’»ğŸ“±")))
  assert_eq(azimuth::Span::get_attribute(span, "mixed.content"), Some(azimuth::StringValue("Hello ä¸–ç•Œ ã“ã‚“ã«ã¡ã¯ ì•ˆë…•í•˜ì„¸ìš” Ù…Ø±Ø­Ø¨Ø§")))
  
  azimuth::Span::set_status_code(span, azimuth::Ok)
  azimuth::Span::end(span)
}

// Test 2: Multilingual logging and error messages
pub test "multilingual_logging_error_messages" {
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "i18n-logger")
  
  // Create log records in different languages
  let chinese_log = azimuth::LogRecord::new(azimuth::Info, "ç”¨æˆ·ç™»å½•æˆåŠŸ")
  let chinese_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(chinese_attrs, "ç”¨æˆ·å", azimuth::StringValue("å¼ ä¸‰"))
  azimuth::Attributes::set(chinese_attrs, "ç™»å½•æ—¶é—´", azimuth::StringValue("2023-01-01 10:30:00"))
  let chinese_enriched = azimuth::LogRecord::with_attributes(chinese_log, chinese_attrs)
  azimuth::Logger::emit(logger, chinese_enriched)
  
  let japanese_log = azimuth::LogRecord::new(azimuth::Warn, "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ")
  let japanese_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(japanese_attrs, "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹", azimuth::StringValue("production_db"))
  azimuth::Attributes::set(japanese_attrs, "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚é–“", azimuth::IntValue(30))
  let japanese_enriched = azimuth::LogRecord::with_attributes(japanese_log, japanese_attrs)
  azimuth::Logger::emit(logger, japanese_enriched)
  
  let korean_log = azimuth::LogRecord::new(azimuth::Error, "ì‚¬ìš©ì ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤")
  let korean_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(korean_attrs, "ì‚¬ìš©ì ID", azimuth::StringValue("user123"))
  azimuth::Attributes::set(korean_attrs, "ì‹¤íŒ¨ ì‚¬ìœ ", azimuth::StringValue("ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸"))
  let korean_enriched = azimuth::LogRecord::with_attributes(korean_log, korean_attrs)
  azimuth::Logger::emit(logger, korean_enriched)
  
  let arabic_log = azimuth::LogRecord::new(azimuth::Fatal, "Ù†ÙØ§Ø¯ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…")
  let arabic_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(arabic_attrs, "Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…ØªØ§Ø­Ø©", azimuth::IntValue(128))
  azimuth::Attributes::set(arabic_attrs, "Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©", azimuth::IntValue(1024))
  let arabic_enriched = azimuth::LogRecord::with_attributes(arabic_log, arabic_attrs)
  azimuth::Logger::emit(logger, arabic_enriched)
  
  // Create error messages in different languages
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "i18n-error-service")
  
  let error_span = azimuth::Tracer::start_span(tracer, "å¤šè¯­è¨€é”™è¯¯å¤„ç†")
  
  // Chinese error
  azimuth::Span::set_attribute(error_span, "é”™è¯¯.ç±»å‹", azimuth::StringValue("éªŒè¯é”™è¯¯"))
  azimuth::Span::set_attribute(error_span, "é”™è¯¯.æ¶ˆæ¯", azimuth::StringValue("è¾“å…¥çš„é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"))
  
  // Japanese error
  azimuth::Span::set_attribute(error_span, "ã‚¨ãƒ©ãƒ¼.ã‚¿ã‚¤ãƒ—", azimuth::StringValue("æ¤œè¨¼ã‚¨ãƒ©ãƒ¼"))
  azimuth::Span::set_attribute(error_span, "ã‚¨ãƒ©ãƒ¼.ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸", azimuth::StringValue("å…¥åŠ›ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“"))
  
  // Korean error
  azimuth::Span::set_attribute(error_span, "ì˜¤ë¥˜.ìœ í˜•", azimuth::StringValue("ê²€ì¦ ì˜¤ë¥˜"))
  azimuth::Span::set_attribute(error_span, "ì˜¤ë¥˜.ë©”ì‹œì§€", azimuth::StringValue("ì…ë ¥ëœ ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤"))
  
  azimuth::Span::set_status_code(error_span, azimuth::Error)
  azimuth::Span::end(error_span)
  
  // Verify logger functionality
  assert_eq(logger.scope.name, "i18n-logger")
}

// Test 3: Locale-specific formatting and data
pub test "locale_specific_formatting" {
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "locale-test-service")
  
  let span = azimuth::Tracer::start_span(tracer, "Locale-specific Operations")
  
  // Test different locale-specific number formats
  azimuth::Span::set_attribute(span, "number.us", azimuth::StringValue("1,234,567.89"))
  azimuth::Span::set_attribute(span, "number.eu", azimuth::StringValue("1.234.567,89"))
  azimuth::Span::set_attribute(span, "number.in", azimuth::StringValue("12,34,567.89"))
  azimuth::Span::set_attribute(span, "number.cn", azimuth::StringValue("1,234,567.89"))
  
  // Test different date formats
  azimuth::Span::set_attribute(span, "date.us", azimuth::StringValue("01/31/2023"))
  azimuth::Span::set_attribute(span, "date.eu", azimuth::StringValue("31/01/2023"))
  azimuth::Span::set_attribute(span, "date.iso", azimuth::StringValue("2023-01-31"))
  azimuth::Span::set_attribute(span, "date.jp", azimuth::StringValue("2023å¹´01æœˆ31æ—¥"))
  azimuth::Span::set_attribute(span, "date.cn", azimuth::StringValue("2023å¹´01æœˆ31æ—¥"))
  
  // Test different time formats
  azimuth::Span::set_attribute(span, "time.us", azimuth::StringValue("2:30:45 PM"))
  azimuth::Span::set_attribute(span, "time.eu", azimuth::StringValue("14:30:45"))
  azimuth::Span::set_attribute(span, "time.military", azimuth::StringValue("14:30:45"))
  
  // Test currency formats
  azimuth::Span::set_attribute(span, "currency.usd", azimuth::StringValue("$1,234.56"))
  azimuth::Span::set_attribute(span, "currency.eur", azimuth::StringValue("â‚¬1.234,56"))
  azimuth::Span::set_attribute(span, "currency.jpy", azimuth::StringValue("Â¥1,235"))
  azimuth::Span::set_attribute(span, "currency.cny", azimuth::StringValue("Â¥1,234.56"))
  azimuth::Span::set_attribute(span, "currency.inr", azimuth::StringValue("â‚¹1,234.56"))
  
  // Test address formats
  azimuth::Span::set_attribute(span, "address.us", azimuth::StringValue("123 Main St, New York, NY 10001"))
  azimuth::Span::set_attribute(span, "address.jp", azimuth::StringValue("ã€’100-0001 æ±äº¬éƒ½åƒä»£ç”°åŒºåƒä»£ç”°1-1"))
  azimuth::Span::set_attribute(span, "address.cn", azimuth::StringValue("ä¸­å›½åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½é—¨å¤–å¤§è¡—1å·"))
  azimuth::Span::set_attribute(span, "address.kr", azimuth::StringValue("ì„œìš¸íŠ¹ë³„ì‹œ ì¢…ë¡œêµ¬ ì¢…ë¡œ1ê°€"))
  
  // Verify locale-specific attributes
  assert_eq(azimuth::Span::get_attribute(span, "number.us"), Some(azimuth::StringValue("1,234,567.89")))
  assert_eq(azimuth::Span::get_attribute(span, "date.jp"), Some(azimuth::StringValue("2023å¹´01æœˆ31æ—¥")))
  assert_eq(azimuth::Span::get_attribute(span, "currency.eur"), Some(azimuth::StringValue("â‚¬1.234,56")))
  
  azimuth::Span::set_status_code(span, azimuth::Ok)
  azimuth::Span::end(span)
}

// Test 4: International resource and service names
pub test "international_resource_service_names" {
  // Create resources with international names
  let chinese_resource = azimuth::Resource::new()
  let chinese_resource_with_attrs = azimuth::Resource::with_attributes(chinese_resource, [
    ("æœåŠ¡.åç§°", azimuth::StringValue("ç”¨æˆ·æœåŠ¡")),
    ("æœåŠ¡.ç‰ˆæœ¬", azimuth::StringValue("1.0.0")),
    ("éƒ¨ç½².ç¯å¢ƒ", azimuth::StringValue("ç”Ÿäº§ç¯å¢ƒ")),
    ("ä¸»æœº.åç§°", azimuth::StringValue("ç”Ÿäº§æœåŠ¡å™¨-01"))
  ])
  
  let japanese_resource = azimuth::Resource::new()
  let japanese_resource_with_attrs = azimuth::Resource::with_attributes(japanese_resource, [
    ("ã‚µãƒ¼ãƒ“ã‚¹.åå‰", azimuth::StringValue("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹")),
    ("ã‚µãƒ¼ãƒ“ã‚¹.ãƒãƒ¼ã‚¸ãƒ§ãƒ³", azimuth::StringValue("1.0.0")),
    ("ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒ", azimuth::StringValue("æœ¬ç•ªç’°å¢ƒ")),
    ("ãƒ›ã‚¹ãƒˆå", azimuth::StringValue("æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼-01"))
  ])
  
  let korean_resource = azimuth::Resource::new()
  let korean_resource_with_attrs = azimuth::Resource::with_attributes(korean_resource, [
    ("ì„œë¹„ìŠ¤.ì´ë¦„", azimuth::StringValue("ì‚¬ìš©ì ì„œë¹„ìŠ¤")),
    ("ì„œë¹„ìŠ¤.ë²„ì „", azimuth::StringValue("1.0.0")),
    ("ë°°í¬.í™˜ê²½", azimuth::StringValue("í”„ë¡œë•ì…˜ í™˜ê²½")),
    ("í˜¸ìŠ¤íŠ¸.ì´ë¦„", azimuth::StringValue("í”„ë¡œë•ì…˜-ì„œë²„-01"))
  ])
  
  // Merge international resources
  let merged_resource = azimuth::Resource::merge(chinese_resource_with_attrs, japanese_resource_with_attrs)
  let final_resource = azimuth::Resource::merge(merged_resource, korean_resource_with_attrs)
  
  // Verify merged resource contains international attributes
  assert_eq(azimuth::Resource::get_attribute(final_resource, "æœåŠ¡.åç§°"), Some(azimuth::StringValue("ç”¨æˆ·æœåŠ¡")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "ã‚µãƒ¼ãƒ“ã‚¹.åå‰"), Some(azimuth::StringValue("ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "ì„œë¹„ìŠ¤.ì´ë¦„"), Some(azimuth::StringValue("ì‚¬ìš©ì ì„œë¹„ìŠ¤")))
  
  // Test international service names in spans
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "å›½é™…æœåŠ¡")
  
  let chinese_span = azimuth::Tracer::start_span(tracer, "ç”¨æˆ·è®¤è¯æ“ä½œ")
  azimuth::Span::set_attribute(chinese_span, "æ“ä½œ.ç±»å‹", azimuth::StringValue("ç”¨æˆ·ç™»å½•"))
  azimuth::Span::set_attribute(chinese_span, "ç”¨æˆ·.åœ°åŒº", azimuth::StringValue("ä¸­å›½"))
  
  let japanese_span = azimuth::Tracer::start_span(tracer, "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æ“ä½œ")
  azimuth::Span::set_attribute(japanese_span, "æ“ä½œ.ã‚¿ã‚¤ãƒ—", azimuth::StringValue("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³"))
  azimuth::Span::set_attribute(japanese_span, "ãƒ¦ãƒ¼ã‚¶ãƒ¼.åœ°åŸŸ", azimuth::StringValue("æ—¥æœ¬"))
  
  let korean_span = azimuth::Tracer::start_span(tracer, "ì‚¬ìš©ì ì¸ì¦ ì‘ì—…")
  azimuth::Span::set_attribute(korean_span, "ì‘ì—….ìœ í˜•", azimuth::StringValue("ì‚¬ìš©ì ë¡œê·¸ì¸"))
  azimuth::Span::set_attribute(korean_span, "ì‚¬ìš©ì.ì§€ì—­", azimuth::StringValue("í•œêµ­"))
  
  // Verify international span attributes
  assert_eq(azimuth::Span::get_attribute(chinese_span, "æ“ä½œ.ç±»å‹"), Some(azimuth::StringValue("ç”¨æˆ·ç™»å½•")))
  assert_eq(azimuth::Span::get_attribute(japanese_span, "æ“ä½œ.ã‚¿ã‚¤ãƒ—"), Some(azimuth::StringValue("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³")))
  assert_eq(azimuth::Span::get_attribute(korean_span, "ì‘ì—….ìœ í˜•"), Some(azimuth::StringValue("ì‚¬ìš©ì ë¡œê·¸ì¸")))
  
  // End spans
  azimuth::Span::set_status_code(chinese_span, azimuth::Ok)
  azimuth::Span::set_status_code(japanese_span, azimuth::Ok)
  azimuth::Span::set_status_code(korean_span, azimuth::Ok)
  azimuth::Span::end(chinese_span)
  azimuth::Span::end(japanese_span)
  azimuth::Span::end(korean_span)
}

// Test 5: International baggage and context propagation
pub test "international_baggage_context_propagation" {
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "å›½é™…åŒ–ä¼ æ’­æœåŠ¡")
  
  // Create context with international baggage
  let root_ctx = azimuth::Context::root()
  let baggage = azimuth::Baggage::new()
  
  // Add baggage entries in different languages
  let baggage_with_cn = azimuth::Baggage::set_entry(baggage, "ç”¨æˆ·.æ ‡è¯†", "ç”¨æˆ·123")
  let baggage_with_jp = azimuth::Baggage::set_entry(baggage_with_cn, "ãƒ¦ãƒ¼ã‚¶ãƒ¼.ID", "ãƒ¦ãƒ¼ã‚¶ãƒ¼456")
  let baggage_with_kr = azimuth::Baggage::set_entry(baggage_with_jp, "ì‚¬ìš©ì.ID", "ì‚¬ìš©ì789")
  let baggage_with_ar = azimuth::Baggage::set_entry(baggage_with_kr, "Ù…Ø¹Ø±Ù.Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…", "Ù…Ø³ØªØ®Ø¯Ù…101")
  
  let ctx_with_baggage = azimuth::Context::with_value(root_ctx, azimuth::ContextKey::new("å›½é™…åŒ–.baggage"), baggage_with_ar)
  
  // Create spans with international context
  let service_span = azimuth::Tracer::start_span_with_context(tracer, "å›½é™…åŒ–æœåŠ¡æ“ä½œ", ctx_with_baggage)
  azimuth::Span::set_attribute(service_span, "æœåŠ¡.åç§°", azimuth::StringValue("å¤šè¯­è¨€ç”¨æˆ·æœåŠ¡"))
  
  // Extract and verify baggage
  let propagated_baggage = azimuth::Context::get(azimuth::Span::context(service_span), azimuth::ContextKey::new("å›½é™…åŒ–.baggage"))
  assert_eq(azimuth::Baggage::get_entry(propagated_baggage, "ç”¨æˆ·.æ ‡è¯†"), Some("ç”¨æˆ·123"))
  assert_eq(azimuth::Baggage::get_entry(propagated_baggage, "ãƒ¦ãƒ¼ã‚¶ãƒ¼.ID"), Some("ãƒ¦ãƒ¼ã‚¶ãƒ¼456"))
  assert_eq(azimuth::Baggage::get_entry(propagated_baggage, "ì‚¬ìš©ì.ID"), Some("ì‚¬ìš©ì789"))
  assert_eq(azimuth::Baggage::get_entry(propagated_baggage, "Ù…Ø¹Ø±Ù.Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"), Some("Ù…Ø³ØªØ®Ø¯Ù…101"))
  
  // Add more international context
  let cn_key = azimuth::ContextKey::new("ä¸­æ–‡.é”®")
  let jp_key = azimuth::ContextKey::new("æ—¥æœ¬èª.ã‚­ãƒ¼")
  let kr_key = azimuth::ContextKey::new("í•œêµ­ì–´.í‚¤")
  
  let ctx_with_cn = azimuth::Context::with_value(azimuth::Span::context(service_span), cn_key, "ä¸­æ–‡å€¼")
  let ctx_with_jp = azimuth::Context::with_value(ctx_with_cn, jp_key, "æ—¥æœ¬èªå€¤")
  let ctx_with_kr = azimuth::Context::with_value(ctx_with_jp, kr_key, "í•œêµ­ì–´ ê°’")
  
  // Create child span with international context
  let child_span = azimuth::Tracer::start_span_with_context(tracer, "å›½é™…åŒ–å­æ“ä½œ", ctx_with_kr)
  azimuth::Span::set_attribute(child_span, "å­æ“ä½œ.ç±»å‹", azimuth::StringValue("å¤šè¯­è¨€æ•°æ®å¤„ç†"))
  
  // Verify international context propagation
  let child_ctx = azimuth::Span::context(child_span)
  assert_eq(azimuth::Context::get(child_ctx, cn_key), Some("ä¸­æ–‡å€¼"))
  assert_eq(azimuth::Context::get(child_ctx, jp_key), Some("æ—¥æœ¬èªå€¤"))
  assert_eq(azimuth::Context::get(child_ctx, kr_key), Some("í•œêµ­ì–´ ê°’"))
  
  // End spans
  azimuth::Span::set_status_code(child_span, azimuth::Ok)
  azimuth::Span::set_status_code(service_span, azimuth::Ok)
  azimuth::Span::end(child_span)
  azimuth::Span::end(service_span)
}