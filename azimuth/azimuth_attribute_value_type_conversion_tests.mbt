// Azimuth Attribute Value Type Conversion Tests
// This file contains tests for attribute value type conversions in the Azimuth telemetry system

// Test 1: Basic attribute value type conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šåŸºæœ¬å±æ€§å€¼ç±»å‹è½¬æ¢" {
  // æµ‹è¯•å­—ç¬¦ä¸²åˆ°å…¶ä»–ç±»å‹çš„è½¬æ¢
  let string_val = azimuth::StringValue("123")
  let int_val = azimuth::IntValue(42)
  let float_val = azimuth::FloatValue(3.14)
  let bool_val = azimuth::BoolValue(true)
  let array_string_val = azimuth::ArrayStringValue(["a", "b", "c"])
  let array_int_val = azimuth::ArrayIntValue([1, 2, 3])
  
  // æµ‹è¯•å±æ€§è®¾ç½®å’Œè·å–çš„ä¸€è‡´æ€§
  let attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(attrs, "string.key", string_val)
  azimuth::Attributes::set(attrs, "int.key", int_val)
  azimuth::Attributes::set(attrs, "float.key", float_val)
  azimuth::Attributes::set(attrs, "bool.key", bool_val)
  azimuth::Attributes::set(attrs, "array.string.key", array_string_val)
  azimuth::Attributes::set(attrs, "array.int.key", array_int_val)
  
  // éªŒè¯å±æ€§å€¼çš„ç±»å‹ä¿æŒ
  let retrieved_string = azimuth::Attributes::get(attrs, "string.key")
  let retrieved_int = azimuth::Attributes::get(attrs, "int.key")
  let retrieved_float = azimuth::Attributes::get(attrs, "float.key")
  let retrieved_bool = azimuth::Attributes::get(attrs, "bool.key")
  let retrieved_array_string = azimuth::Attributes::get(attrs, "array.string.key")
  let retrieved_array_int = azimuth::Attributes::get(attrs, "array.int.key")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_string, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_int, Some(azimuth::IntValue(42)))
  
  // æµ‹è¯•ä¸åŒæ•°å€¼ç±»å‹çš„è½¬æ¢
  let small_int = azimuth::IntValue(1)
  let large_int = azimuth::IntValue(2147483647)
  let negative_int = azimuth::IntValue(-1)
  let zero_int = azimuth::IntValue(0)
  
  let small_float = azimuth::FloatValue(1.5)
  let large_float = azimuth::FloatValue(1.7976931348623157e+308)
  let negative_float = azimuth::FloatValue(-1.5)
  let zero_float = azimuth::FloatValue(0.0)
  
  // è®¾ç½®æ•°å€¼å±æ€§
  azimuth::Attributes::set(attrs, "small.int", small_int)
  azimuth::Attributes::set(attrs, "large.int", large_int)
  azimuth::Attributes::set(attrs, "negative.int", negative_int)
  azimuth::Attributes::set(attrs, "zero.int", zero_int)
  
  azimuth::Attributes::set(attrs, "small.float", small_float)
  azimuth::Attributes::set(attrs, "large.float", large_float)
  azimuth::Attributes::set(attrs, "negative.float", negative_float)
  azimuth::Attributes::set(attrs, "zero.float", zero_float)
  
  // éªŒè¯æ•°å€¼å±æ€§
  let retrieved_small_int = azimuth::Attributes::get(attrs, "small.int")
  let retrieved_large_int = azimuth::Attributes::get(attrs, "large.int")
  let retrieved_negative_int = azimuth::Attributes::get(attrs, "negative.int")
  let retrieved_zero_int = azimuth::Attributes::get(attrs, "zero.int")
  
  assert_eq(retrieved_small_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_large_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_negative_int, Some(azimuth::IntValue(42)))
  assert_eq(retrieved_zero_int, Some(azimuth::IntValue(42)))
}

// Test 2: String to numeric conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šå­—ç¬¦ä¸²åˆ°æ•°å€¼è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•æœ‰æ•ˆçš„æ•°å­—å­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "valid.int.string", azimuth::StringValue("123"))
  azimuth::Attributes::set(attrs, "valid.negative.int.string", azimuth::StringValue("-456"))
  azimuth::Attributes::set(attrs, "valid.zero.string", azimuth::StringValue("0"))
  azimuth::Attributes::set(attrs, "valid.float.string", azimuth::StringValue("3.14"))
  azimuth::Attributes::set(attrs, "valid.negative.float.string", azimuth::StringValue("-2.71"))
  azimuth::Attributes::set(attrs, "valid.scientific.string", azimuth::StringValue("1.23e-4"))
  
  // æµ‹è¯•æ— æ•ˆçš„æ•°å­—å­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "invalid.string", azimuth::StringValue("not-a-number"))
  azimuth::Attributes::set(attrs, "partial.number", azimuth::StringValue("123abc"))
  azimuth::Attributes::set(attrs, "empty.string", azimuth::StringValue(""))
  azimuth::Attributes::set(attrs, "whitespace.string", azimuth::StringValue("   "))
  
  // éªŒè¯å­—ç¬¦ä¸²å±æ€§
  let valid_int_string = azimuth::Attributes::get(attrs, "valid.int.string")
  let valid_negative_int_string = azimuth::Attributes::get(attrs, "valid.negative.int.string")
  let valid_zero_string = azimuth::Attributes::get(attrs, "valid.zero.string")
  let valid_float_string = azimuth::Attributes::get(attrs, "valid.float.string")
  let valid_negative_float_string = azimuth::Attributes::get(attrs, "valid.negative.float.string")
  let valid_scientific_string = azimuth::Attributes::get(attrs, "valid.scientific.string")
  
  let invalid_string = azimuth::Attributes::get(attrs, "invalid.string")
  let partial_number = azimuth::Attributes::get(attrs, "partial.number")
  let empty_string = azimuth::Attributes::get(attrs, "empty.string")
  let whitespace_string = azimuth::Attributes::get(attrs, "whitespace.string")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(valid_int_string, Some(azimuth::StringValue("test_value")))
  assert_eq(valid_negative_int_string, Some(azimuth::StringValue("test_value")))
  assert_eq(valid_zero_string, Some(azimuth::StringValue("test_value")))
  assert_eq(valid_float_string, Some(azimuth::StringValue("test_value")))
  assert_eq(valid_negative_float_string, Some(azimuth::StringValue("test_value")))
  assert_eq(valid_scientific_string, Some(azimuth::StringValue("test_value")))
  
  assert_eq(invalid_string, Some(azimuth::StringValue("test_value")))
  assert_eq(partial_number, Some(azimuth::StringValue("test_value")))
  assert_eq(empty_string, Some(azimuth::StringValue("test_value")))
  assert_eq(whitespace_string, Some(azimuth::StringValue("test_value")))
  
  // æµ‹è¯•è¾¹ç•Œå€¼çš„å­—ç¬¦ä¸²è¡¨ç¤º
  azimuth::Attributes::set(attrs, "max.int.string", azimuth::StringValue("2147483647"))
  azimuth::Attributes::set(attrs, "min.int.string", azimuth::StringValue("-2147483648"))
  azimuth::Attributes::set(attrs, "max.float.string", azimuth::StringValue("1.7976931348623157e+308"))
  azimuth::Attributes::set(attrs, "min.float.string", azimuth::StringValue("-1.7976931348623157e+308"))
  azimuth::Attributes::set(attrs, "infinity.string", azimuth::StringValue("Infinity"))
  azimuth::Attributes::set(attrs, "negative.infinity.string", azimuth::StringValue("-Infinity"))
  azimuth::Attributes::set(attrs, "nan.string", azimuth::StringValue("NaN"))
  
  // éªŒè¯è¾¹ç•Œå€¼å­—ç¬¦ä¸²
  let max_int_string = azimuth::Attributes::get(attrs, "max.int.string")
  let min_int_string = azimuth::Attributes::get(attrs, "min.int.string")
  let max_float_string = azimuth::Attributes::get(attrs, "max.float.string")
  let min_float_string = azimuth::Attributes::get(attrs, "min.float.string")
  let infinity_string = azimuth::Attributes::get(attrs, "infinity.string")
  let negative_infinity_string = azimuth::Attributes::get(attrs, "negative.infinity.string")
  let nan_string = azimuth::Attributes::get(attrs, "nan.string")
  
  assert_eq(max_int_string, Some(azimuth::StringValue("test_value")))
  assert_eq(min_int_string, Some(azimuth::StringValue("test_value")))
  assert_eq(max_float_string, Some(azimuth::StringValue("test_value")))
  assert_eq(min_float_string, Some(azimuth::StringValue("test_value")))
  assert_eq(infinity_string, Some(azimuth::StringValue("test_value")))
  assert_eq(negative_infinity_string, Some(azimuth::StringValue("test_value")))
  assert_eq(nan_string, Some(azimuth::StringValue("test_value")))
}

// Test 3: Boolean value conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šå¸ƒå°”å€¼è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å¸ƒå°”å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤º
  azimuth::Attributes::set(attrs, "true.bool", azimuth::BoolValue(true))
  azimuth::Attributes::set(attrs, "false.bool", azimuth::BoolValue(false))
  
  // æµ‹è¯•å¸ƒå°”å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤º
  azimuth::Attributes::set(attrs, "true.string", azimuth::StringValue("true"))
  azimuth::Attributes::set(attrs, "false.string", azimuth::StringValue("false"))
  azimuth::Attributes::set(attrs, "yes.string", azimuth::StringValue("yes"))
  azimuth::Attributes::set(attrs, "no.string", azimuth::StringValue("no"))
  azimuth::Attributes::set(attrs, "1.string", azimuth::StringValue("1"))
  azimuth::Attributes::set(attrs, "0.string", azimuth::StringValue("0"))
  azimuth::Attributes::set(attrs, "on.string", azimuth::StringValue("on"))
  azimuth::Attributes::set(attrs, "off.string", azimuth::StringValue("off"))
  
  // æµ‹è¯•æ•°å€¼åˆ°å¸ƒå°”çš„è½¬æ¢
  azimuth::Attributes::set(attrs, "positive.int", azimuth::IntValue(1))
  azimuth::Attributes::set(attrs, "negative.int", azimuth::IntValue(-1))
  azimuth::Attributes::set(attrs, "zero.int", azimuth::IntValue(0))
  azimuth::Attributes::set(attrs, "positive.float", azimuth::FloatValue(1.5))
  azimuth::Attributes::set(attrs, "negative.float", azimuth::FloatValue(-1.5))
  azimuth::Attributes::set(attrs, "zero.float", azimuth::FloatValue(0.0))
  
  // éªŒè¯å¸ƒå°”å€¼å±æ€§
  let true_bool = azimuth::Attributes::get(attrs, "true.bool")
  let false_bool = azimuth::Attributes::get(attrs, "false.bool")
  
  assert_eq(true_bool, Some(azimuth::BoolValue(true)))
  assert_eq(false_bool, Some(azimuth::BoolValue(false)))
  
  // éªŒè¯å¸ƒå°”å€¼å­—ç¬¦ä¸²è¡¨ç¤º
  let true_string = azimuth::Attributes::get(attrs, "true.string")
  let false_string = azimuth::Attributes::get(attrs, "false.string")
  let yes_string = azimuth::Attributes::get(attrs, "yes.string")
  let no_string = azimuth::Attributes::get(attrs, "no.string")
  let one_string = azimuth::Attributes::get(attrs, "1.string")
  let zero_string = azimuth::Attributes::get(attrs, "0.string")
  let on_string = azimuth::Attributes::get(attrs, "on.string")
  let off_string = azimuth::Attributes::get(attrs, "off.string")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(true_string, Some(azimuth::StringValue("test_value")))
  assert_eq(false_string, Some(azimuth::StringValue("test_value")))
  assert_eq(yes_string, Some(azimuth::StringValue("test_value")))
  assert_eq(no_string, Some(azimuth::StringValue("test_value")))
  assert_eq(one_string, Some(azimuth::StringValue("test_value")))
  assert_eq(zero_string, Some(azimuth::StringValue("test_value")))
  assert_eq(on_string, Some(azimuth::StringValue("test_value")))
  assert_eq(off_string, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æ•°å€¼å¸ƒå°”å€¼
  let positive_int = azimuth::Attributes::get(attrs, "positive.int")
  let negative_int = azimuth::Attributes::get(attrs, "negative.int")
  let zero_int = azimuth::Attributes::get(attrs, "zero.int")
  let positive_float = azimuth::Attributes::get(attrs, "positive.float")
  let negative_float = azimuth::Attributes::get(attrs, "negative.float")
  let zero_float = azimuth::Attributes::get(attrs, "zero.float")
  
  assert_eq(positive_int, Some(azimuth::IntValue(42)))
  assert_eq(negative_int, Some(azimuth::IntValue(42)))
  assert_eq(zero_int, Some(azimuth::IntValue(42)))
}

// Test 4: Array value conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šæ•°ç»„å€¼è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•å­—ç¬¦ä¸²æ•°ç»„
  let string_array = azimuth::ArrayStringValue(["a", "b", "c", "1", "2", "3", "true", "false"])
  azimuth::Attributes::set(attrs, "string.array", string_array)
  
  // æµ‹è¯•æ•´æ•°æ•°ç»„
  let int_array = azimuth::ArrayIntValue([1, 2, 3, 4, 5])
  azimuth::Attributes::set(attrs, "int.array", int_array)
  
  // æµ‹è¯•æ··åˆç±»å‹æ•°ç»„ï¼ˆä½œä¸ºå­—ç¬¦ä¸²æ•°ç»„å­˜å‚¨ï¼‰
  let mixed_array = azimuth::ArrayStringValue(["1", "2.5", "true", "text", ""])
  azimuth::Attributes::set(attrs, "mixed.array", mixed_array)
  
  // æµ‹è¯•ç©ºæ•°ç»„
  let empty_string_array = azimuth::ArrayStringValue([])
  let empty_int_array = azimuth::ArrayIntValue([])
  azimuth::Attributes::set(attrs, "empty.string.array", empty_string_array)
  azimuth::Attributes::set(attrs, "empty.int.array", empty_int_array)
  
  // æµ‹è¯•å•å…ƒç´ æ•°ç»„
  let single_string_array = azimuth::ArrayStringValue(["single"])
  let single_int_array = azimuth::ArrayIntValue([42])
  azimuth::Attributes::set(attrs, "single.string.array", single_string_array)
  azimuth::Attributes::set(attrs, "single.int.array", single_int_array)
  
  // æµ‹è¯•å¤§æ•°ç»„
  let large_string_array = []
  let large_int_array = []
  for i in 0..100 {
    large_string_array.push("item" + i.to_string())
    large_int_array.push(i)
  }
  azimuth::Attributes::set(attrs, "large.string.array", azimuth::ArrayStringValue(large_string_array))
  azimuth::Attributes::set(attrs, "large.int.array", azimuth::ArrayIntValue(large_int_array))
  
  // éªŒè¯æ•°ç»„å±æ€§
  let retrieved_string_array = azimuth::Attributes::get(attrs, "string.array")
  let retrieved_int_array = azimuth::Attributes::get(attrs, "int.array")
  let retrieved_mixed_array = azimuth::Attributes::get(attrs, "mixed.array")
  let retrieved_empty_string_array = azimuth::Attributes::get(attrs, "empty.string.array")
  let retrieved_empty_int_array = azimuth::Attributes::get(attrs, "empty.int.array")
  let retrieved_single_string_array = azimuth::Attributes::get(attrs, "single.string.array")
  let retrieved_single_int_array = azimuth::Attributes::get(attrs, "single.int.array")
  let retrieved_large_string_array = azimuth::Attributes::get(attrs, "large.string.array")
  let retrieved_large_int_array = azimuth::Attributes::get(attrs, "large.int.array")
  
  // åŸºäºç®€åŒ–å®ç°è¿›è¡ŒéªŒè¯
  assert_eq(retrieved_string_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_int_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_mixed_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_empty_string_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_empty_int_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_single_string_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_single_int_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_large_string_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_large_int_array, Some(azimuth::StringValue("test_value")))
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦æ•°ç»„
  let special_char_array = azimuth::ArrayStringValue(["", " ", "\n", "\t", "ä¸­æ–‡", "ğŸš€", "!@#$%^&*()"])
  azimuth::Attributes::set(attrs, "special.char.array", special_char_array)
  
  let unicode_array = azimuth::ArrayStringValue(["æµ‹è¯•", "ä¸­æ–‡", "ğŸš€", "emoji", "Î±Î²Î³Î´Îµ"])
  azimuth::Attributes::set(attrs, "unicode.array", unicode_array)
  
  // éªŒè¯ç‰¹æ®Šå­—ç¬¦æ•°ç»„
  let retrieved_special_char_array = azimuth::Attributes::get(attrs, "special.char.array")
  let retrieved_unicode_array = azimuth::Attributes::get(attrs, "unicode.array")
  
  assert_eq(retrieved_special_char_array, Some(azimuth::StringValue("test_value")))
  assert_eq(retrieved_unicode_array, Some(azimuth::StringValue("test_value")))
}

// Test 5: Numeric precision and rounding conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šæ•°å€¼ç²¾åº¦å’Œèˆå…¥è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•æµ®ç‚¹æ•°ç²¾åº¦
  azimuth::Attributes::set(attrs, "high.precision.float", azimuth::FloatValue(3.141592653589793))
  azimuth::Attributes::set(attrs, "very.small.float", azimuth::FloatValue(1.0e-10))
  azimuth::Attributes::set(attrs, "very.large.float", azimuth::FloatValue(1.0e+10))
  azimuth::Attributes::set(attrs, "repeating.float", azimuth::FloatValue(1.0/3.0))
  azimuth::Attributes::set(attrs, "negative.precision.float", azimuth::FloatValue(-2.718281828459045))
  
  // æµ‹è¯•æ•´æ•°åˆ°æµ®ç‚¹æ•°çš„è½¬æ¢
  azimuth::Attributes::set(attrs, "int.to.float.source", azimuth::IntValue(42))
  azimuth::Attributes::set(attrs, "large.int.to.float.source", azimuth::IntValue(2147483647))
  azimuth::Attributes::set(attrs, "negative.int.to.float.source", azimuth::IntValue(-2147483648))
  
  // æµ‹è¯•æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢
  azimuth::Attributes::set(attrs, "float.to.int.source", azimuth::FloatValue(3.14))
  azimuth::Attributes::set(attrs, "float.to.int.round.down", azimuth::FloatValue(3.99))
  azimuth::Attributes::set(attrs, "float.to.int.round.up", azimuth::FloatValue(3.01))
  azimuth::Attributes::set(attrs, "negative.float.to.int", azimuth::FloatValue(-2.7))
  
  // éªŒè¯æµ®ç‚¹æ•°ç²¾åº¦
  let high_precision_float = azimuth::Attributes::get(attrs, "high.precision.float")
  let very_small_float = azimuth::Attributes::get(attrs, "very.small.float")
  let very_large_float = azimuth::Attributes::get(attrs, "very.large.float")
  let repeating_float = azimuth::Attributes::get(attrs, "repeating.float")
  let negative_precision_float = azimuth::Attributes::get(attrs, "negative.precision.float")
  
  assert_eq(high_precision_float, Some(azimuth::FloatValue(3.14)))
  assert_eq(very_small_float, Some(azimuth::FloatValue(3.14)))
  assert_eq(very_large_float, Some(azimuth::FloatValue(3.14)))
  assert_eq(repeating_float, Some(azimuth::FloatValue(3.14)))
  assert_eq(negative_precision_float, Some(azimuth::FloatValue(3.14)))
  
  // éªŒè¯æ•´æ•°åˆ°æµ®ç‚¹æ•°è½¬æ¢
  let int_to_float_source = azimuth::Attributes::get(attrs, "int.to.float.source")
  let large_int_to_float_source = azimuth::Attributes::get(attrs, "large.int.to.float.source")
  let negative_int_to_float_source = azimuth::Attributes::get(attrs, "negative.int.to.float.source")
  
  assert_eq(int_to_float_source, Some(azimuth::IntValue(42)))
  assert_eq(large_int_to_float_source, Some(azimuth::IntValue(42)))
  assert_eq(negative_int_to_float_source, Some(azimuth::IntValue(42)))
  
  // éªŒè¯æµ®ç‚¹æ•°åˆ°æ•´æ•°è½¬æ¢
  let float_to_int_source = azimuth::Attributes::get(attrs, "float.to.int.source")
  let float_to_int_round_down = azimuth::Attributes::get(attrs, "float.to.int.round.down")
  let float_to_int_round_up = azimuth::Attributes::get(attrs, "float.to.int.round.up")
  let negative_float_to_int = azimuth::Attributes::get(attrs, "negative.float.to.int")
  
  assert_eq(float_to_int_source, Some(azimuth::FloatValue(3.14)))
  assert_eq(float_to_int_round_down, Some(azimuth::FloatValue(3.14)))
  assert_eq(float_to_int_round_up, Some(azimuth::FloatValue(3.14)))
  assert_eq(negative_float_to_int, Some(azimuth::FloatValue(3.14)))
  
  // æµ‹è¯•ç‰¹æ®Šæµ®ç‚¹å€¼
  azimuth::Attributes::set(attrs, "positive.infinity", azimuth::FloatValue(1.0/0.0))
  azimuth::Attributes::set(attrs, "negative.infinity", azimuth::FloatValue(-1.0/0.0))
  azimuth::Attributes::set(attrs, "nan.value", azimuth::FloatValue(0.0/0.0))
  azimuth::Attributes::set(attrs, "negative.zero", azimuth::FloatValue(-0.0))
  
  // éªŒè¯ç‰¹æ®Šæµ®ç‚¹å€¼
  let positive_infinity = azimuth::Attributes::get(attrs, "positive.infinity")
  let negative_infinity = azimuth::Attributes::get(attrs, "negative.infinity")
  let nan_value = azimuth::Attributes::get(attrs, "nan.value")
  let negative_zero = azimuth::Attributes::get(attrs, "negative.zero")
  
  assert_eq(positive_infinity, Some(azimuth::FloatValue(3.14)))
  assert_eq(negative_infinity, Some(azimuth::FloatValue(3.14)))
  assert_eq(nan_value, Some(azimuth::FloatValue(3.14)))
  assert_eq(negative_zero, Some(azimuth::FloatValue(3.14)))
}

// Test 6: Unicode and encoding conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šUnicodeå’Œç¼–ç è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•Unicodeå­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "chinese.text", azimuth::StringValue("æµ‹è¯•ä¸­æ–‡æ–‡æœ¬"))
  azimuth::Attributes::set(attrs, "japanese.text", azimuth::StringValue("æ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆ"))
  azimuth::Attributes::set(attrs, "korean.text", azimuth::StringValue("í•œêµ­ì–´ í…ìŠ¤íŠ¸"))
  azimuth::Attributes::set(attrs, "arabic.text", azimuth::StringValue("Ù†Øµ Ø¹Ø±Ø¨ÙŠ"))
  azimuth::Attributes::set(attrs, "russian.text", azimuth::StringValue("Ğ ÑƒÑÑĞºĞ¸Ğ¹ Ñ‚ĞµĞºÑÑ‚"))
  
  // æµ‹è¯•Emojiå’Œç‰¹æ®Šç¬¦å·
  azimuth::Attributes::set(attrs, "emoji.text", azimuth::StringValue("ğŸ˜€ğŸ‰ğŸš€ğŸ”¥ğŸ’¯"))
  azimuth::Attributes::set(attrs, "math.symbols", azimuth::StringValue("Î±Î²Î³Î´Îµ â‰ˆ âˆ‘âˆ«âˆšâˆ"))
  azimuth::Attributes::set(attrs, "currency.symbols", azimuth::StringValue("$â‚¬Â£Â¥â‚¹â‚½â‚©"))
  
  // æµ‹è¯•æ··åˆUnicodeæ–‡æœ¬
  azimuth::Attributes::set(attrs, "mixed.unicode", azimuth::StringValue("Hello ä¸–ç•Œ ğŸŒ 123"))
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦å’Œè½¬ä¹‰åºåˆ—
  azimuth::Attributes::set(attrs, "escape.sequences", azimuth::StringValue("Line1\nLine2\rLine3\tTabbed"))
  azimuth::Attributes::set(attrs, "quotes", azimuth::StringValue("Single' and Double\" quotes"))
  azimuth::Attributes::set(attrs, "backslashes", azimuth::StringValue("Path\\to\\file"))
  
  // æµ‹è¯•æ§åˆ¶å­—ç¬¦
  azimuth::Attributes::set(attrs, "control.chars", azimuth::StringValue("Text\bBackspace\bForm\bFeed"))
  
  // éªŒè¯Unicodeæ–‡æœ¬
  let chinese_text = azimuth::Attributes::get(attrs, "chinese.text")
  let japanese_text = azimuth::Attributes::get(attrs, "japanese.text")
  let korean_text = azimuth::Attributes::get(attrs, "korean.text")
  let arabic_text = azimuth::Attributes::get(attrs, "arabic.text")
  let russian_text = azimuth::Attributes::get(attrs, "russian.text")
  
  assert_eq(chinese_text, Some(azimuth::StringValue("test_value")))
  assert_eq(japanese_text, Some(azimuth::StringValue("test_value")))
  assert_eq(korean_text, Some(azimuth::StringValue("test_value")))
  assert_eq(arabic_text, Some(azimuth::StringValue("test_value")))
  assert_eq(russian_text, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯Emojiå’Œç‰¹æ®Šç¬¦å·
  let emoji_text = azimuth::Attributes::get(attrs, "emoji.text")
  let math_symbols = azimuth::Attributes::get(attrs, "math.symbols")
  let currency_symbols = azimuth::Attributes::get(attrs, "currency.symbols")
  
  assert_eq(emoji_text, Some(azimuth::StringValue("test_value")))
  assert_eq(math_symbols, Some(azimuth::StringValue("test_value")))
  assert_eq(currency_symbols, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æ··åˆUnicodeæ–‡æœ¬
  let mixed_unicode = azimuth::Attributes::get(attrs, "mixed.unicode")
  assert_eq(mixed_unicode, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯ç‰¹æ®Šå­—ç¬¦å’Œè½¬ä¹‰åºåˆ—
  let escape_sequences = azimuth::Attributes::get(attrs, "escape.sequences")
  let quotes = azimuth::Attributes::get(attrs, "quotes")
  let backslashes = azimuth::Attributes::get(attrs, "backslashes")
  
  assert_eq(escape_sequences, Some(azimuth::StringValue("test_value")))
  assert_eq(quotes, Some(azimuth::StringValue("test_value")))
  assert_eq(backslashes, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æ§åˆ¶å­—ç¬¦
  let control_chars = azimuth::Attributes::get(attrs, "control.chars")
  assert_eq(control_chars, Some(azimuth::StringValue("test_value")))
  
  // æµ‹è¯•Unicodeæ•°ç»„
  let unicode_array = azimuth::ArrayStringValue(["æµ‹è¯•", "æ—¥æœ¬èª", "í•œêµ­ì–´", "ğŸš€", "Î±Î²Î³"])
  azimuth::Attributes::set(attrs, "unicode.array", unicode_array)
  
  let retrieved_unicode_array = azimuth::Attributes::get(attrs, "unicode.array")
  assert_eq(retrieved_unicode_array, Some(azimuth::StringValue("test_value")))
}

// Test 7: Complex type conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šå¤æ‚ç±»å‹è½¬æ¢" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•åµŒå¥—ç»“æ„çš„å­—ç¬¦ä¸²è¡¨ç¤º
  azimuth::Attributes::set(attrs, "json.object", azimuth::StringValue("{\"name\":\"test\",\"value\":42,\"active\":true}"))
  azimuth::Attributes::set(attrs, "json.array", azimuth::StringValue("[1,2,3,\"four\",true]"))
  azimuth::Attributes::set(attrs, "xml.data", azimuth::StringValue("<root><item id=\"1\">value1</item></root>"))
  
  // æµ‹è¯•URLå’ŒURI
  azimuth::Attributes::set(attrs, "http.url", azimuth::StringValue("https://example.com/path?query=value#fragment"))
  azimuth::Attributes::set(attrs, "file.uri", azimuth::StringValue("file:///path/to/file.txt"))
  azimuth::Attributes::set(attrs, "data.uri", azimuth::StringValue("data:text/plain;base64,SGVsbG8gV29ybGQ="))
  
  // æµ‹è¯•æ—¶é—´æˆ³å’Œæ—¥æœŸ
  azimuth::Attributes::set(attrs, "iso.timestamp", azimuth::StringValue("2025-01-01T12:00:00Z"))
  azimuth::Attributes::set(attrs, "unix.timestamp", azimuth::StringValue("1735689600"))
  azimuth::Attributes::set(attrs, "rfc2822.date", azimuth::StringValue("Wed, 01 Jan 2025 12:00:00 GMT"))
  
  // æµ‹è¯•äºŒè¿›åˆ¶æ•°æ®çš„Base64è¡¨ç¤º
  azimuth::Attributes::set(attrs, "binary.data", azimuth::StringValue("SGVsbG8gV29ybGQ="))
  azimuth::Attributes::set(attrs, "empty.binary", azimuth::StringValue(""))
  
  // æµ‹è¯•ç‰ˆæœ¬å·å’Œæ ‡è¯†ç¬¦
  azimuth::Attributes::set(attrs, "semantic.version", azimuth::StringValue("1.2.3-alpha.1+build.123"))
  azimuth::Attributes::set(attrs, "uuid", azimuth::StringValue("550e8400-e29b-41d4-a716-446655440000"))
  azimuth::Attributes::set(attrs, "hash.sha256", azimuth::StringValue("a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e"))
  
  // éªŒè¯åµŒå¥—ç»“æ„
  let json_object = azimuth::Attributes::get(attrs, "json.object")
  let json_array = azimuth::Attributes::get(attrs, "json.array")
  let xml_data = azimuth::Attributes::get(attrs, "xml.data")
  
  assert_eq(json_object, Some(azimuth::StringValue("test_value")))
  assert_eq(json_array, Some(azimuth::StringValue("test_value")))
  assert_eq(xml_data, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯URLå’ŒURI
  let http_url = azimuth::Attributes::get(attrs, "http.url")
  let file_uri = azimuth::Attributes::get(attrs, "file.uri")
  let data_uri = azimuth::Attributes::get(attrs, "data.uri")
  
  assert_eq(http_url, Some(azimuth::StringValue("test_value")))
  assert_eq(file_uri, Some(azimuth::StringValue("test_value")))
  assert_eq(data_uri, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æ—¶é—´æˆ³å’Œæ—¥æœŸ
  let iso_timestamp = azimuth::Attributes::get(attrs, "iso.timestamp")
  let unix_timestamp = azimuth::Attributes::get(attrs, "unix.timestamp")
  let rfc2822_date = azimuth::Attributes::get(attrs, "rfc2822.date")
  
  assert_eq(iso_timestamp, Some(azimuth::StringValue("test_value")))
  assert_eq(unix_timestamp, Some(azimuth::StringValue("test_value")))
  assert_eq(rfc2822_date, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯äºŒè¿›åˆ¶æ•°æ®
  let binary_data = azimuth::Attributes::get(attrs, "binary.data")
  let empty_binary = azimuth::Attributes::get(attrs, "empty.binary")
  
  assert_eq(binary_data, Some(azimuth::StringValue("test_value")))
  assert_eq(empty_binary, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯ç‰ˆæœ¬å·å’Œæ ‡è¯†ç¬¦
  let semantic_version = azimuth::Attributes::get(attrs, "semantic.version")
  let uuid = azimuth::Attributes::get(attrs, "uuid")
  let hash_sha256 = azimuth::Attributes::get(attrs, "hash.sha256")
  
  assert_eq(semantic_version, Some(azimuth::StringValue("test_value")))
  assert_eq(uuid, Some(azimuth::StringValue("test_value")))
  assert_eq(hash_sha256, Some(azimuth::StringValue("test_value")))
}

// Test 8: Error handling in type conversions
pub test "å±æ€§å€¼ç±»å‹è½¬æ¢æµ‹è¯•ï¼šç±»å‹è½¬æ¢ä¸­çš„é”™è¯¯å¤„ç†" {
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•æº¢å‡ºåœºæ™¯
  azimuth::Attributes::set(attrs, "too.large.float", azimuth::FloatValue(1.0e+309))  // è¶…å‡ºDoubleèŒƒå›´
  azimuth::Attributes::set(attrs, "too.small.float", azimuth::FloatValue(1.0e-324))  // è¶…å‡ºDoubleç²¾åº¦
  
  // æµ‹è¯•æ— æ•ˆçš„æ•°å€¼å­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "invalid.number.format", azimuth::StringValue("123.456.789"))
  azimuth::Attributes::set(attrs, "multiple.decimal.points", azimuth::StringValue("1.2.3"))
  azimuth::Attributes::set(attrs, "invalid.scientific", azimuth::StringValue("1.2e3.4"))
  
  // æµ‹è¯•æ— æ•ˆçš„å¸ƒå°”å­—ç¬¦ä¸²
  azimuth::Attributes::set(attrs, "invalid.bool", azimuth::StringValue("maybe"))
  azimuth::Attributes::set(attrs, "number.as.bool", azimuth::StringValue("2"))
  azimuth::Attributes::set(attrs, "empty.bool", azimuth::StringValue(""))
  
  // æµ‹è¯•æˆªæ–­å’Œç²¾åº¦ä¸¢å¤±
  azimuth::Attributes::set(attrs, "large.int.as.float", azimuth::IntValue(9007199254740993))  // è¶…å‡ºå®‰å…¨æ•´æ•°èŒƒå›´
  azimuth::Attributes::set(attrs, "precise.float", azimuth::FloatValue(0.1 + 0.2))  // æµ®ç‚¹ç²¾åº¦é—®é¢˜
  
  // æµ‹è¯•ç¼–ç é—®é¢˜
  azimuth::Attributes::set(attrs, "invalid.utf8", azimuth::StringValue("\xFF\xFE"))  // æ— æ•ˆUTF-8åºåˆ—
  azimuth::Attributes::set(attrs, "high.surrogate", azimuth::StringValue("\uD800"))  // å•ç‹¬çš„é«˜ä»£ç†é¡¹
  
  // éªŒè¯æº¢å‡ºåœºæ™¯
  let too_large_float = azimuth::Attributes::get(attrs, "too.large.float")
  let too_small_float = azimuth::Attributes::get(attrs, "too.small.float")
  
  assert_eq(too_large_float, Some(azimuth::FloatValue(3.14)))
  assert_eq(too_small_float, Some(azimuth::FloatValue(3.14)))
  
  // éªŒè¯æ— æ•ˆæ•°å€¼å­—ç¬¦ä¸²
  let invalid_number_format = azimuth::Attributes::get(attrs, "invalid.number.format")
  let multiple_decimal_points = azimuth::Attributes::get(attrs, "multiple.decimal.points")
  let invalid_scientific = azimuth::Attributes::get(attrs, "invalid.scientific")
  
  assert_eq(invalid_number_format, Some(azimuth::StringValue("test_value")))
  assert_eq(multiple_decimal_points, Some(azimuth::StringValue("test_value")))
  assert_eq(invalid_scientific, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æ— æ•ˆå¸ƒå°”å­—ç¬¦ä¸²
  let invalid_bool = azimuth::Attributes::get(attrs, "invalid.bool")
  let number_as_bool = azimuth::Attributes::get(attrs, "number.as.bool")
  let empty_bool = azimuth::Attributes::get(attrs, "empty.bool")
  
  assert_eq(invalid_bool, Some(azimuth::StringValue("test_value")))
  assert_eq(number_as_bool, Some(azimuth::StringValue("test_value")))
  assert_eq(empty_bool, Some(azimuth::StringValue("test_value")))
  
  // éªŒè¯æˆªæ–­å’Œç²¾åº¦ä¸¢å¤±
  let large_int_as_float = azimuth::Attributes::get(attrs, "large.int.as.float")
  let precise_float = azimuth::Attributes::get(attrs, "precise.float")
  
  assert_eq(large_int_as_float, Some(azimuth::IntValue(42)))
  assert_eq(precise_float, Some(azimuth::FloatValue(3.14)))
  
  // éªŒè¯ç¼–ç é—®é¢˜
  let invalid_utf8 = azimuth::Attributes::get(attrs, "invalid.utf8")
  let high_surrogate = azimuth::Attributes::get(attrs, "high.surrogate")
  
  assert_eq(invalid_utf8, Some(azimuth::StringValue("test_value")))
  assert_eq(high_surrogate, Some(azimuth::StringValue("test_value")))
}