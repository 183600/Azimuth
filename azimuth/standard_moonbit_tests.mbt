// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - 10ä¸ªé«˜è´¨é‡æµ‹è¯•ç”¨ä¾‹
// ä½¿ç”¨æ­£ç¡®çš„ @azimuth. å‰ç¼€è¯­æ³•

test "basic_functionality_validation" {
  // åŸºæœ¬åŠŸèƒ½éªŒè¯æµ‹è¯•
  @azimuth.assert_eq(10, @azimuth.add(7, 3))
  @azimuth.assert_eq(-4, @azimuth.add(-7, 3))
  @azimuth.assert_eq(0, @azimuth.add(0, 0))
  
  @azimuth.assert_eq(21, @azimuth.multiply(7, 3))
  @azimuth.assert_eq(-21, @azimuth.multiply(-7, 3))
  @azimuth.assert_eq(0, @azimuth.multiply(7, 0))
  
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(10, 3))
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(9, 3))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(5, 0))
}

test "mathematical_properties_verification" {
  // æ•°å­¦æ€§è´¨éªŒè¯æµ‹è¯•
  let x = 15
  let y = 8
  
  // åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(x, y), @azimuth.multiply(y, x))
  
  // åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  let a = 6
  let b = 4
  let c = 2
  @azimuth.assert_eq(
    @azimuth.multiply(a, @azimuth.add(b, c)),
    @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  )
  
  // åŠ æ³•æ’ç­‰å¼
  @azimuth.assert_eq(x, @azimuth.add(x, 0))
  @azimuth.assert_eq(x, @azimuth.add(0, x))
  
  // ä¹˜æ³•æ’ç­‰å¼
  @azimuth.assert_eq(x, @azimuth.multiply(x, 1))
  @azimuth.assert_eq(0, @azimuth.multiply(x, 0))
}

test "boundary_conditions_and_edge_cases" {
  // è¾¹ç•Œæ¡ä»¶å’Œè¾¹ç¼˜æƒ…å†µæµ‹è¯•
  // æžå€¼æµ‹è¯•
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -1))
  
  // é™¤é›¶é”™è¯¯å¤„ç†
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  
  // å¤§æ•°è¿ç®—
  @azimuth.assert_eq(2000000, @azimuth.add(1000000, 1000000))
  @azimuth.assert_eq(1000000, @azimuth.multiply(1000, 1000))
  @azimuth.assert_eq(100001, @azimuth.divide_with_ceil(1000001, 10))
}

test "unicode_and_internationalization" {
  // Unicodeå’Œå›½é™…åŒ–æµ‹è¯•
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ÐœÐ¾ÑÐºÐ²Ð°!", @azimuth.greet("ÐœÐ¾ÑÐºÐ²Ð°"))
  @azimuth.assert_eq_string("Hello, cafÃ©!", @azimuth.greet("cafÃ©"))
  @azimuth.assert_eq_string("Hello, ðŸš€!", @azimuth.greet("ðŸš€"))
  @azimuth.assert_eq_string("Hello, Ã±oÃ±o!", @azimuth.greet("Ã±oÃ±o"))
  @azimuth.assert_eq_string("Hello, ðŸ³ï¸â€ðŸŒˆ!", @azimuth.greet("ðŸ³ï¸â€ðŸŒˆ"))
  @azimuth.assert_eq_string("Hello, ðŸŒ™â­!", @azimuth.greet("ðŸŒ™â­"))
  
  // ç‰¹æ®Šå­—ç¬¦å’Œç©ºç™½å­—ç¬¦
  @azimuth.assert_eq_string("Hello, \n\t!", @azimuth.greet("\n\t"))
  @azimuth.assert_eq_string("Hello, \"quotes\"!", @azimuth.greet("\"quotes\""))
  @azimuth.assert_eq_string("Hello, 'apostrophe'!", @azimuth.greet("'apostrophe'"))
  @azimuth.assert_eq_string("Hello, \\backslash\\!", @azimuth.greet("\\backslash\\"))
}

test "complex_calculation_pipeline" {
  // å¤æ‚è®¡ç®—æµæ°´çº¿æµ‹è¯•
  // åœºæ™¯ï¼šé¡¹ç›®èµ„æºè§„åˆ’è®¡ç®—
  
  // åŸºç¡€å‚æ•°
  let team_size = 8
  let tasks_per_person = 5
  let sprint_capacity = 15
  let complexity_factor = 2
  
  // è®¡ç®—æ€»ä»»åŠ¡æ•°
  let total_tasks = @azimuth.multiply(team_size, tasks_per_person)
  @azimuth.assert_eq(40, total_tasks)
  
  // åº”ç”¨å¤æ‚åº¦å› å­
  let adjusted_tasks = @azimuth.multiply(total_tasks, complexity_factor)
  @azimuth.assert_eq(80, adjusted_tasks)
  
  // è®¡ç®—éœ€è¦çš„å†²åˆºæ•°
  let sprints_needed = @azimuth.divide_with_ceil(adjusted_tasks, sprint_capacity)
  @azimuth.assert_eq(6, sprints_needed)  // ceil(80/15) = 6
  
  // è®¡ç®—æ€»å®¹é‡
  let total_capacity = @azimuth.multiply(sprints_needed, sprint_capacity)
  @azimuth.assert_eq(90, total_capacity)
  
  // è®¡ç®—å‰©ä½™å®¹é‡
  let remaining_capacity = subtract(total_capacity, adjusted_tasks)
  @azimuth.assert_eq(10, remaining_capacity)
}

test "real_world_business_scenarios" {
  // çœŸå®žä¸–ç•Œä¸šåŠ¡åœºæ™¯æµ‹è¯•
  // åœºæ™¯1ï¼šåº“å­˜ç®¡ç†å’Œè£…ç®±
  let total_products = 157
  let box_capacity = 24
  let boxes_needed = @azimuth.divide_with_ceil(total_products, box_capacity)
  @azimuth.assert_eq(7, boxes_needed)  // ceil(157/24) = 7
  
  // éªŒè¯æ€»å®¹é‡
  let total_capacity = @azimuth.multiply(boxes_needed, box_capacity)
  @azimuth.assert_eq(168, total_capacity)
  
  // åœºæ™¯2ï¼šæ´»åŠ¨åº§ä½å®‰æŽ’
  let participants = 87
  let chairs_per_table = 8
  let tables_needed = @azimuth.divide_with_ceil(participants, chairs_per_table)
  @azimuth.assert_eq(11, tables_needed)  // ceil(87/8) = 11
  
  let total_seats = @azimuth.multiply(tables_needed, chairs_per_table)
  @azimuth.assert_eq(88, total_seats)
  
  // åœºæ™¯3ï¼šè¿è¾“è½¦è¾†è®¡ç®—
  let packages = 25
  let capacity_per_truck = 8
  let trucks_needed = @azimuth.divide_with_ceil(packages, capacity_per_truck)
  @azimuth.assert_eq(4, trucks_needed)  // ceil(25/8) = 4
}

test "error_handling_and_resilience" {
  // é”™è¯¯å¤„ç†å’Œæ¢å¤èƒ½åŠ›æµ‹è¯•
  // é™¤é›¶é”™è¯¯çš„å¤šç§æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))
  
  // æžå°é™¤æ•°æƒ…å†µ
  @azimuth.assert_eq(1000000, @azimuth.divide_with_ceil(999999, 1))
  @azimuth.assert_eq(-999999, @azimuth.divide_with_ceil(-999999, 1))
  
  // è¾¹ç•Œç®—æœ¯è¿ç®—
  @azimuth.assert_eq(2147483646, @azimuth.add(2147483645, 1))
  @azimuth.assert_eq(-2147483647, @azimuth.add(-2147483646, -1))
  
  // å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq_string("Hello, null!", @azimuth.greet("null"))
  @azimuth.assert_eq_string("Hello, undefined!", @azimuth.greet("undefined"))
  @azimuth.assert_eq_string("Hello, 0!", @azimuth.greet("0"))
}

test "performance_and_large_scale_operations" {
  // æ€§èƒ½å’Œå¤§è§„æ¨¡è¿ç®—æµ‹è¯•
  let large_number = 100000
  
  // å¤§æ•°åŠ æ³•
  let sum_result = @azimuth.add(large_number, large_number)
  @azimuth.assert_eq(200000, sum_result)
  
  // å¤§æ•°ä¹˜æ³•
  let product_result = @azimuth.multiply(100, large_number)
  @azimuth.assert_eq(10000000, product_result)
  
  // å¤§æ•°é™¤æ³•
  let division_result = @azimuth.divide_with_ceil(product_result, 50000)
  @azimuth.assert_eq(200, division_result)
  
  // è¿žç»­è¿ç®—æ€§èƒ½æµ‹è¯•
  let step1 = @azimuth.add(large_number, 50000)      // 150000
  let step2 = @azimuth.multiply(step1, 2)            // 300000
  let step3 = @azimuth.divide_with_ceil(step2, 1000) // 300
  let step4 = @azimuth.add(step3, 700)               // 1000
  @azimuth.assert_eq(1000, step4)
}

test "financial_calculation_scenarios" {
  // é‡‘èžè®¡ç®—åœºæ™¯æµ‹è¯•
  // åœºæ™¯ï¼šè´·æ¬¾åˆ†æœŸè®¡ç®—
  let loan_amount = 100000
  let monthly_payment = 3500
  let months_needed = @azimuth.divide_with_ceil(loan_amount, monthly_payment)
  @azimuth.assert_eq(29, months_needed)  // ceil(100000/3500) = 29
  
  // éªŒè¯æ€»æ”¯ä»˜é‡‘é¢
  let total_payment = @azimuth.multiply(months_needed, monthly_payment)
  @azimuth.assert_eq(101500, total_payment)
  
  // è®¡ç®—æœ€åŽä¸€ä¸ªæœˆçš„å®žé™…æ”¯ä»˜é‡‘é¢
  let regular_payments = @azimuth.multiply(months_needed - 1, monthly_payment)
  let final_payment = subtract(total_payment, regular_payments)
  @azimuth.assert_eq(1500, final_payment)
  
  // åœºæ™¯ï¼šæŠ•èµ„å›žæŠ¥è®¡ç®—
  let principal = 10000
  let annual_rate = 5  // 5%
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let year1_end = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, annual_rate), 100))
  let year2_end = @azimuth.add(year1_end, @azimuth.divide_with_ceil(@azimuth.multiply(year1_end, annual_rate), 100))
  let year3_end = @azimuth.add(year2_end, @azimuth.divide_with_ceil(@azimuth.multiply(year2_end, annual_rate), 100))
  
  @azimuth.assert_eq(10500, year1_end)  // 10000 + 5%
  @azimuth.assert_eq(11025, year2_end)  // 10500 + 5%
  @azimuth.assert_eq(11576, year3_end)  // 11025 + 5%
}

test "comprehensive_integration_test" {
  // ç»¼åˆé›†æˆæµ‹è¯•
  // å¤æ‚çš„å¤šæ­¥éª¤ä¸šåŠ¡åœºæ™¯
  
  // é¡¹ç›®å‚æ•°
  let project_duration = 12  // æœˆ
  let team_members = 6
  let hourly_rate = 75
  let hours_per_day = 8
  let work_days_per_month = 22
  
  // è®¡ç®—æœˆå·¥æ—¶
  let monthly_hours = @azimuth.multiply(hours_per_day, work_days_per_month)
  @azimuth.assert_eq(176, monthly_hours)
  
  // è®¡ç®—å›¢é˜Ÿæœˆå·¥æ—¶
  let team_monthly_hours = @azimuth.multiply(monthly_hours, team_members)
  @azimuth.assert_eq(1056, team_monthly_hours)
  
  // è®¡ç®—é¡¹ç›®æ€»å·¥æ—¶
  let total_hours = @azimuth.multiply(team_monthly_hours, project_duration)
  @azimuth.assert_eq(12672, total_hours)
  
  // è®¡ç®—é¡¹ç›®æ€»æˆæœ¬
  let total_cost = @azimuth.multiply(total_hours, hourly_rate)
  @azimuth.assert_eq(950400, total_cost)
  
  // è®¡ç®—å­£åº¦é¢„ç®—
  let quarterly_budget = @azimuth.divide_with_ceil(total_cost, 4)
  @azimuth.assert_eq(237600, quarterly_budget)
  
  // éªŒè¯æ€»é¢„ç®—
  let calculated_total = @azimuth.multiply(quarterly_budget, 4)
  @azimuth.assert_eq(950400, calculated_total)
  
  // é¡¹ç›®å®Œæˆåº¦è®¡ç®—
  let completed_tasks = 85
  let total_tasks = 100
  let completion_percentage = @azimuth.multiply(@azimuth.divide_with_ceil(@azimuth.multiply(completed_tasks, 100), total_tasks), 1)
  @azimuth.assert_eq(85, completion_percentage)
  
  // é¡¹ç›®å®Œæˆé—®å€™
  let project_name = "Azimuth"
  let greeting_message = @azimuth.greet(project_name)
  @azimuth.assert_eq_string("Hello, Azimuth!", greeting_message)
}

// è¾…åŠ©å‡½æ•°ï¼šå‡æ³•
fn subtract(a : Int, b : Int) -> Int {
  a - b
}