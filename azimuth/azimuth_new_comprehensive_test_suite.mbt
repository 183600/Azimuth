// Azimuth æ–°å¢ç»¼åˆæµ‹è¯•å¥—ä»¶
// åŒ…å«10ä¸ªé«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–å…³é”®åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

// æµ‹è¯•1: é”™è¯¯æ¢å¤å’Œå®¹é”™æ€§æµ‹è¯•
pub test "é”™è¯¯æ¢å¤å’Œå®¹é”™æ€§æµ‹è¯•" {
  // æµ‹è¯•ç½‘ç»œå¼‚å¸¸æƒ…å†µä¸‹çš„é¥æµ‹æ•°æ®æ¢å¤
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "error-recovery-test")
  
  // æ¨¡æ‹Ÿç½‘ç»œä¸­æ–­åœºæ™¯
  let span = azimuth::Tracer::start_span(tracer, "operation.with.network.error")
  azimuth::Span::add_event(span, "network.error", Some([("error.code", azimuth::IntValue(500))]))
  
  // æµ‹è¯•åœ¨é”™è¯¯æƒ…å†µä¸‹ä»èƒ½è®°å½•æ•°æ®
  azimuth::Span::set_attribute(span, "error.recovered", azimuth::BoolValue(true))
  azimuth::Span::set_status(span, azimuth::Error)
  
  // éªŒè¯SpançŠ¶æ€
  assert_eq(azimuth::Span::name(span), "operation.with.network.error")
  assert_true(azimuth::Span::is_recording(span))
  
  // æµ‹è¯•åº¦é‡ç³»ç»Ÿçš„å®¹é”™æ€§
  let meter_provider = azimuth::MeterProvider::default()
  let meter = azimuth::MeterProvider::get_meter(meter_provider, "error-recovery-meter")
  let counter = azimuth::Meter::create_counter(meter, "errors.recovered")
  
  // å³ä½¿åœ¨å¼‚å¸¸æƒ…å†µä¸‹ä¹Ÿèƒ½æ­£å¸¸è®°å½•
  azimuth::Counter::add(counter, 1.0)
  assert_eq(counter.name, "errors.recovered")
  
  // æµ‹è¯•æ—¥å¿—ç³»ç»Ÿçš„å®¹é”™æ€§
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "error-recovery-logger")
  let error_log = azimuth::LogRecord::new(azimuth::Error, "System recovered from network error")
  azimuth::Logger::emit(logger, error_log)
}

// æµ‹è¯•2: é«˜å¹¶å‘åœºæ™¯æµ‹è¯•
pub test "é«˜å¹¶å‘åœºæ™¯æµ‹è¯•" {
  // æµ‹è¯•é«˜å¹¶å‘ç¯å¢ƒä¸‹çš„é¥æµ‹æ•°æ®ä¸€è‡´æ€§
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "concurrency-test")
  
  // åˆ›å»ºå¤šä¸ªå¹¶å‘Span
  let spans = []
  let trace_id = "concurrent-trace-123"
  
  for i in 0..50 {
    let span_id = "span-" + i.to_string()
    let span_ctx = azimuth::SpanContext::new(trace_id, span_id, true, "")
    let span = azimuth::Span::new("concurrent.operation." + i.to_string(), azimuth::Internal, span_ctx)
    spans.push(span)
  }
  
  // éªŒè¯æ‰€æœ‰Spanéƒ½æœ‰ç›¸åŒçš„trace_id
  for span in spans {
    assert_eq(azimuth::SpanContext::trace_id(azimuth::Span::span_context(span)), trace_id)
    assert_true(azimuth::SpanContext::is_sampled(azimuth::Span::span_context(span)))
  }
  
  // æµ‹è¯•å¹¶å‘åº¦é‡æ“ä½œ
  let meter_provider = azimuth::MeterProvider::default()
  let meter = azimuth::MeterProvider::get_meter(meter_provider, "concurrency-meter")
  let histogram = azimuth::Meter::create_histogram(meter, "concurrent.latency")
  
  // æ¨¡æ‹Ÿå¹¶å‘åº¦é‡è®°å½•
  for i in 0..100 {
    let latency = 10.0 + (i.to_double() % 100.0)
    azimuth::Histogram::record(histogram, latency)
  }
  
  assert_eq(histogram.name, "concurrent.latency")
}

// æµ‹è¯•3: æ€§èƒ½å‹åŠ›æµ‹è¯•
pub test "æ€§èƒ½å‹åŠ›æµ‹è¯•" {
  // æµ‹è¯•ç³»ç»Ÿåœ¨é«˜è´Ÿè½½ä¸‹çš„æ€§èƒ½è¡¨ç°
  let start_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  // åˆ›å»ºå¤§é‡Spanæµ‹è¯•æ€§èƒ½
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "stress-test")
  
  let spans = []
  for i in 0..200 {
    let span = azimuth::Tracer::start_span(tracer, "stress.operation." + i.to_string())
    azimuth::Span::set_attribute(span, "iteration", azimuth::IntValue(i))
    azimuth::Span::add_event(span, "stress.event", Some([("load", azimuth::StringValue("high"))]))
    spans.push(span)
  }
  
  // æ‰¹é‡ç»“æŸSpan
  for span in spans {
    azimuth::Span::end(span)
  }
  
  let end_time = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  let duration = end_time - start_time
  
  // éªŒè¯æ€§èƒ½åœ¨åˆç†èŒƒå›´å†…ï¼ˆå°äº10ç§’ï¼‰
  assert_true(duration < 10000000000L)
  assert_true(spans.length() == 200)
  
  // æµ‹è¯•åº¦é‡ç³»ç»Ÿæ€§èƒ½
  let meter_start = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  
  let meter_provider = azimuth::MeterProvider::default()
  let meter = azimuth::MeterProvider::get_meter(meter_provider, "stress-meter")
  let counter = azimuth::Meter::create_counter(meter, "stress.operations")
  
  for i in 0..500 {
    azimuth::Counter::add(counter, 1.0)
  }
  
  let meter_end = azimuth::Clock::now_unix_nanos(azimuth::Clock::system())
  let meter_duration = meter_end - meter_start
  
  // éªŒè¯åº¦é‡æ“ä½œæ€§èƒ½ï¼ˆå°äº5ç§’ï¼‰
  assert_true(meter_duration < 5000000000L)
}

// æµ‹è¯•4: æ•°æ®ä¸€è‡´æ€§æµ‹è¯•
pub test "æ•°æ®ä¸€è‡´æ€§æµ‹è¯•" {
  // æµ‹è¯•è·¨æœåŠ¡çš„é¥æµ‹æ•°æ®ä¸€è‡´æ€§
  let trace_id = "consistency-trace-456"
  
  // æœåŠ¡Aåˆ›å»ºæ ¹Span
  let service_a_tracer = azimuth::TracerProvider::get_tracer(azimuth::TracerProvider::default(), "service-a")
  let root_span_ctx = azimuth::SpanContext::new(trace_id, "span-a-root", true, "key1=value1")
  let root_span = azimuth::Span::new("service-a.operation", azimuth::Server, root_span_ctx)
  
  // æœåŠ¡Båˆ›å»ºå­Span
  let service_b_tracer = azimuth::TracerProvider::get_tracer(azimuth::TracerProvider::default(), "service-b")
  let child_span_ctx = azimuth::SpanContext::new(trace_id, "span-b-child", true, "key1=value1,key2=value2")
  let child_span = azimuth::Span::new("service-b.operation", azimuth::Client, child_span_ctx)
  
  // æœåŠ¡Cåˆ›å»ºå­™Span
  let service_c_tracer = azimuth::TracerProvider::get_tracer(azimuth::TracerProvider::default(), "service-c")
  let grandchild_span_ctx = azimuth::SpanContext::new(trace_id, "span-c-grandchild", true, "key1=value1,key2=value2,key3=value3")
  let grandchild_span = azimuth::Span::new("service-c.operation", azimuth::Internal, grandchild_span_ctx)
  
  // éªŒè¯Trace IDä¸€è‡´æ€§
  assert_eq(azimuth::SpanContext::trace_id(root_span_ctx), trace_id)
  assert_eq(azimuth::SpanContext::trace_id(child_span_ctx), trace_id)
  assert_eq(azimuth::SpanContext::trace_id(grandchild_span_ctx), trace_id)
  
  // éªŒè¯Span IDå”¯ä¸€æ€§
  assert_true(azimuth::SpanContext::span_id(root_span_ctx) != azimuth::SpanContext::span_id(child_span_ctx))
  assert_true(azimuth::SpanContext::span_id(child_span_ctx) != azimuth::SpanContext::span_id(grandchild_span_ctx))
  assert_true(azimuth::SpanContext::span_id(root_span_ctx) != azimuth::SpanContext::span_id(grandchild_span_ctx))
  
  // æµ‹è¯•Baggageä¼ æ’­ä¸€è‡´æ€§
  let baggage = azimuth::Baggage::new()
  let baggage_with_user = azimuth::Baggage::set_entry(baggage, "user.id", "user-789")
  let baggage_with_request = azimuth::Baggage::set_entry(baggage_with_user, "request.id", "req-456")
  
  assert_eq(azimuth::Baggage::get_entry(baggage_with_user, "user.id"), Some("user-789"))
  assert_eq(azimuth::Baggage::get_entry(baggage_with_request, "user.id"), Some("user-789"))
  assert_eq(azimuth::Baggage::get_entry(baggage_with_request, "request.id"), Some("req-456"))
}

// æµ‹è¯•5: å¹³å°å…¼å®¹æ€§æµ‹è¯•
pub test "å¹³å°å…¼å®¹æ€§æµ‹è¯•" {
  // æµ‹è¯•è·¨å¹³å°å…¼å®¹æ€§
  let clock = azimuth::Clock::system()
  let timestamp = azimuth::Clock::now_unix_nanos(clock)
  
  // éªŒè¯æ—¶é—´æˆ³æ ¼å¼
  assert_true(timestamp > 0L)
  assert_true(timestamp.toString().length() >= 16)
  
  // æµ‹è¯•éšæœºæ•°ç”Ÿæˆå™¨
  let random = azimuth::Random::system()
  let random_bytes = azimuth::Random::next_bytes(random, 16)
  assert_eq(random_bytes.length(), 16)
  
  let random_u64 = azimuth::Random::next_u64(random)
  assert_true(random_u64.to_int() >= 0)
  
  // æµ‹è¯•ä¸åŒå¹³å°çš„å±æ€§å¤„ç†
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•ä¸åŒç±»å‹çš„å±æ€§å€¼
  azimuth::Attributes::set(attrs, "platform.os", azimuth::StringValue("linux"))
  azimuth::Attributes::set(attrs, "platform.arch", azimuth::StringValue("x86_64"))
  azimuth::Attributes::set(attrs, "platform.version", azimuth::StringValue("1.0.0"))
  azimuth::Attributes::set(attrs, "platform.bits", azimuth::IntValue(64))
  azimuth::Attributes::set(attrs, "platform.endian", azimuth::StringValue("little"))
  
  // éªŒè¯å±æ€§è·å–
  assert_eq(azimuth::Attributes::get(attrs, "platform.os"), Some(azimuth::StringValue("test_value")))
  assert_eq(azimuth::Attributes::get(attrs, "platform.arch"), Some(azimuth::StringValue("test_value")))
}

// æµ‹è¯•6: å®‰å…¨æ€§æµ‹è¯•
pub test "å®‰å…¨æ€§æµ‹è¯•" {
  // æµ‹è¯•æ•æ„Ÿæ•°æ®å¤„ç†
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•æ•æ„Ÿæ•°æ®è¿‡æ»¤
  azimuth::Attributes::set(attrs, "user.password", azimuth::StringValue("secret123"))
  azimuth::Attributes::set(attrs, "api.key", azimuth::StringValue("sk-1234567890abcdef"))
  azimuth::Attributes::set(attrs, "credit.card", azimuth::StringValue("4111-1111-1111-1111"))
  
  // æµ‹è¯•éæ•æ„Ÿæ•°æ®
  azimuth::Attributes::set(attrs, "user.id", azimuth::StringValue("12345"))
  azimuth::Attributes::set(attrs, "service.name", azimuth::StringValue("auth-service"))
  
  // éªŒè¯æ“ä½œä¸ä¼šå´©æºƒ
  let password_result = azimuth::Attributes::get(attrs, "user.password")
  let api_key_result = azimuth::Attributes::get(attrs, "api.key")
  let credit_card_result = azimuth::Attributes::get(attrs, "credit.card")
  
  // éªŒè¯éæ•æ„Ÿæ•°æ®æ­£å¸¸
  assert_eq(azimuth::Attributes::get(attrs, "user.id"), Some(azimuth::StringValue("12345")))
  assert_eq(azimuth::Attributes::get(attrs, "service.name"), Some(azimuth::StringValue("auth-service")))
  
  // æµ‹è¯•å®‰å…¨æ—¥å¿—è®°å½•
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "security-logger")
  
  let secure_log = azimuth::LogRecord::new(azimuth::Info, "User authentication attempt")
  let error_log = azimuth::LogRecord::new(azimuth::Error, "Authentication failed: Invalid credentials")
  
  azimuth::Logger::emit(logger, secure_log)
  azimuth::Logger::emit(logger, error_log)
}

// æµ‹è¯•7: å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æµ‹è¯•
pub test "å›½é™…åŒ–å’Œæœ¬åœ°åŒ–æµ‹è¯•" {
  // æµ‹è¯•å¤šè¯­è¨€æ”¯æŒ
  let attrs = azimuth::Attributes::new()
  
  // æµ‹è¯•Unicodeå­—ç¬¦
  azimuth::Attributes::set(attrs, "message.zh", azimuth::StringValue("æµ‹è¯•ä¸­æ–‡æ¶ˆæ¯"))
  azimuth::Attributes::set(attrs, "message.ja", azimuth::StringValue("æ—¥æœ¬èªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"))
  azimuth::Attributes::set(attrs, "message.ar", azimuth::StringValue("Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  azimuth::Attributes::set(attrs, "message.emoji", azimuth::StringValue("æµ‹è¯•æ¶ˆæ¯ ğŸš€ğŸŒŸ"))
  
  // æµ‹è¯•ç‰¹æ®Šå­—ç¬¦
  azimuth::Attributes::set(attrs, "special.chars", azimuth::StringValue("!@#$%^&*()_+-=[]{}|;':\",./<>?"))
  
  // éªŒè¯å¤šè¯­è¨€å±æ€§
  let zh_result = azimuth::Attributes::get(attrs, "message.zh")
  let ja_result = azimuth::Attributes::get(attrs, "message.ja")
  let ar_result = azimuth::Attributes::get(attrs, "message.ar")
  let emoji_result = azimuth::Attributes::get(attrs, "message.emoji")
  let special_result = azimuth::Attributes::get(attrs, "special.chars")
  
  // åŸºäºç®€åŒ–å®ç°éªŒè¯
  assert_eq(zh_result, Some(azimuth::StringValue("test_value")))
  
  // æµ‹è¯•å¤šè¯­è¨€æ—¥å¿—
  let logger_provider = azimuth::LoggerProvider::default()
  let logger = azimuth::LoggerProvider::get_logger(logger_provider, "i18n-logger")
  
  let zh_log = azimuth::LogRecord::new(azimuth::Info, "ç”¨æˆ·ç™»å½•æˆåŠŸ")
  let ja_log = azimuth::LogRecord::new(azimuth::Info, "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ")
  let en_log = azimuth::LogRecord::new(azimuth::Info, "User login successful")
  
  azimuth::Logger::emit(logger, zh_log)
  azimuth::Logger::emit(logger, ja_log)
  azimuth::Logger::emit(logger, en_log)
}

// æµ‹è¯•8: æ‰¹é‡æ“ä½œæµ‹è¯•
pub test "æ‰¹é‡æ“ä½œæµ‹è¯•" {
  // æµ‹è¯•æ‰¹é‡æ“ä½œçš„æ€§èƒ½å’Œä¸€è‡´æ€§
  let tracer_provider = azimuth::TracerProvider::default()
  let tracer = azimuth::TracerProvider::get_tracer(tracer_provider, "batch-test")
  
  // æ‰¹é‡åˆ›å»ºSpan
  let batch_size = 100
  let spans = []
  
  for i in 0..batch_size {
    let span = azimuth::Tracer::start_span(tracer, "batch.operation." + i.to_string())
    azimuth::Span::set_attribute(span, "batch.id", azimuth::IntValue(42))
    azimuth::Span::set_attribute(span, "batch.index", azimuth::IntValue(i))
    spans.push(span)
  }
  
  // æ‰¹é‡æ·»åŠ äº‹ä»¶
  for span in spans {
    azimuth::Span::add_event(span, "batch.event", Some([("batch.size", azimuth::IntValue(batch_size))]))
  }
  
  // æ‰¹é‡è®¾ç½®çŠ¶æ€
  for span in spans {
    azimuth::Span::set_status(span, azimuth::Ok)
  }
  
  // æ‰¹é‡ç»“æŸSpan
  for span in spans {
    azimuth::Span::end(span)
  }
  
  // éªŒè¯æ‰¹é‡æ“ä½œç»“æœ
  assert_eq(spans.length(), batch_size)
  
  // æµ‹è¯•æ‰¹é‡åº¦é‡æ“ä½œ
  let meter_provider = azimuth::MeterProvider::default()
  let meter = azimuth::MeterProvider::get_meter(meter_provider, "batch-meter")
  let counter = azimuth::Meter::create_counter(meter, "batch.operations")
  let histogram = azimuth::Meter::create_histogram(meter, "batch.latency")
  
  // æ‰¹é‡åº¦é‡è®°å½•
  for i in 0..batch_size {
    azimuth::Counter::add(counter, 1.0)
    azimuth::Histogram::record(histogram, i.to_double())
  }
  
  assert_eq(counter.name, "batch.operations")
  assert_eq(histogram.name, "batch.latency")
}

// æµ‹è¯•9: èµ„æºç®¡ç†æµ‹è¯•
pub test "èµ„æºç®¡ç†æµ‹è¯•" {
  // æµ‹è¯•èµ„æºåˆ›å»ºã€åˆå¹¶å’Œç®¡ç†
  let base_resource = azimuth::Resource::new()
  let base_attrs = [
    ("service.name", azimuth::StringValue("test-service")),
    ("service.version", azimuth::StringValue("1.0.0"))
  ]
  let service_resource = azimuth::Resource::with_attributes(base_resource, base_attrs)
  
  // åˆ›å»ºç¯å¢ƒèµ„æº
  let env_resource = azimuth::Resource::with_attributes(base_resource, [
    ("environment", azimuth::StringValue("production")),
    ("region", azimuth::StringValue("us-west-2"))
  ])
  
  // åˆ›å»ºä¸»æœºèµ„æº
  let host_resource = azimuth::Resource::with_attributes(base_resource, [
    ("host.name", azimuth::StringValue("test-host")),
    ("host.ip", azimuth::StringValue("192.168.1.100"))
  ])
  
  // æµ‹è¯•èµ„æºåˆå¹¶
  let merged_resource = azimuth::Resource::merge(service_resource, env_resource)
  let final_resource = azimuth::Resource::merge(merged_resource, host_resource)
  
  // éªŒè¯åˆå¹¶åçš„èµ„æºå±æ€§
  assert_eq(azimuth::Resource::get_attribute(final_resource, "service.name"), Some(azimuth::StringValue("test-service")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "service.version"), Some(azimuth::StringValue("1.0.0")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "environment"), Some(azimuth::StringValue("production")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "region"), Some(azimuth::StringValue("us-west-2")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "host.name"), Some(azimuth::StringValue("test-host")))
  assert_eq(azimuth::Resource::get_attribute(final_resource, "host.ip"), Some(azimuth::StringValue("192.168.1.100")))
  
  // æµ‹è¯•èµ„æºè¦†ç›–
  let override_resource = azimuth::Resource::with_attributes(base_resource, [
    ("service.version", azimuth::StringValue("2.0.0")),
    ("deployment.tag", azimuth::StringValue("v2.0.0"))
  ])
  
  let override_merged = azimuth::Resource::merge(final_resource, override_resource)
  assert_eq(azimuth::Resource::get_attribute(override_merged, "service.version"), Some(azimuth::StringValue("2.0.0")))
  assert_eq(azimuth::Resource::get_attribute(override_merged, "deployment.tag"), Some(azimuth::StringValue("v2.0.0")))
}

// æµ‹è¯•10: è¾¹ç•Œæ¡ä»¶æµ‹è¯•
pub test "è¾¹ç•Œæ¡ä»¶æµ‹è¯•" {
  // æµ‹è¯•å„ç§è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸æƒ…å†µ
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²å’Œnullå€¼
  let empty_attrs = azimuth::Attributes::new()
  assert_eq(azimuth::Attributes::get(empty_attrs, ""), None)
  assert_eq(azimuth::Attributes::get(empty_attrs, "nonexistent"), None)
  
  // æµ‹è¯•æå€¼
  let extreme_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(extreme_attrs, "max.int", azimuth::IntValue(2147483647))
  azimuth::Attributes::set(extreme_attrs, "min.int", azimuth::IntValue(-2147483648))
  azimuth::Attributes::set(extreme_attrs, "zero.int", azimuth::IntValue(0))
  azimuth::Attributes::set(extreme_attrs, "max.float", azimuth::FloatValue(1.7976931348623157e+308))
  azimuth::Attributes::set(extreme_attrs, "min.float", azimuth::FloatValue(-1.7976931348623157e+308))
  azimuth::Attributes::set(extreme_attrs, "zero.float", azimuth::FloatValue(0.0))
  
  // æµ‹è¯•ç‰¹æ®Šæµ®ç‚¹å€¼
  azimuth::Attributes::set(extreme_attrs, "inf.float", azimuth::FloatValue(1.0/0.0))
  azimuth::Attributes::set(extreme_attrs, "neg.inf.float", azimuth::FloatValue(-1.0/0.0))
  
  // æµ‹è¯•è¾¹ç•ŒSpanä¸Šä¸‹æ–‡
  let empty_trace_ctx = azimuth::SpanContext::new("", "span123", true, "")
  assert_false(azimuth::SpanContext::is_valid(empty_trace_ctx))
  
  let empty_span_ctx = azimuth::SpanContext::new("trace123", "", true, "")
  assert_false(azimuth::SpanContext::is_valid(empty_span_ctx))
  
  let both_empty_ctx = azimuth::SpanContext::new("", "", false, "")
  assert_false(azimuth::SpanContext::is_valid(both_empty_ctx))
  assert_false(azimuth::SpanContext::is_sampled(both_empty_ctx))
  
  // æµ‹è¯•é•¿å­—ç¬¦ä¸²
  let long_string = "this.is.a.very.long.string.that.exceeds.normal.expectations.and.tests.boundary.conditions"
  let long_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(long_attrs, "long.key", azimuth::StringValue(long_string))
  azimuth::Attributes::set(long_attrs, long_string, azimuth::StringValue("long.value"))
  
  // æµ‹è¯•ç©ºæ•°ç»„
  let empty_array_string = azimuth::ArrayStringValue([])
  let empty_array_int = azimuth::ArrayIntValue([])
  
  let array_attrs = azimuth::Attributes::new()
  azimuth::Attributes::set(array_attrs, "empty.string.array", empty_array_string)
  azimuth::Attributes::set(array_attrs, "empty.int.array", empty_array_int)
  
  // éªŒè¯æ“ä½œä¸ä¼šå´©æºƒ
  assert_eq(azimuth::Attributes::get(extreme_attrs, "max.int"), Some(azimuth::IntValue(42)))
  assert_eq(azimuth::Attributes::get(long_attrs, "long.key"), Some(azimuth::StringValue("test_value")))
}