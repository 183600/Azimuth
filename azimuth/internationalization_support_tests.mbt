// å›½é™…åŒ–æ”¯æŒæµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•å¤šè¯­è¨€å’Œæœ¬åœ°åŒ–åŠŸèƒ½

test "å¤šè¯­è¨€Spanåç§°æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "å›½é™…åŒ–æµ‹è¯•")
  
  // æµ‹è¯•ä¸­æ–‡Spanåç§°
  let chinese_span = Tracer::start_span(tracer, "ç”¨æˆ·ç™»å½•æ“ä½œ")
  assert_eq(Span::name(chinese_span), "ç”¨æˆ·ç™»å½•æ“ä½œ")
  Span::add_event(chinese_span, "éªŒè¯æˆåŠŸ", Some([("ç”¨æˆ·ID", StringValue("12345")), ("ç”¨æˆ·å", StringValue("å¼ ä¸‰"))]))
  Span::set_status(chinese_span, Ok, Some("æ“ä½œæˆåŠŸå®Œæˆ"))
  Span::end(chinese_span)
  
  // æµ‹è¯•è‹±æ–‡Spanåç§°
  let english_tracer = TracerProvider::get_tracer(tracer_provider, "internationalization.test")
  let english_span = Tracer::start_span(english_tracer, "User Login Operation")
  assert_eq(Span::name(english_span), "User Login Operation")
  Span::add_event(english_span, "Authentication Success", Some([("userID", StringValue("12345")), ("username", StringValue("John Doe"))]))
  Span::set_status(english_span, Ok, Some("Operation completed successfully"))
  Span::end(english_span)
  
  // æµ‹è¯•æ—¥æ–‡Spanåç§°
  let japanese_tracer = TracerProvider::get_tracer(tracer_provider, "å›½éš›åŒ–ãƒ†ã‚¹ãƒˆ")
  let japanese_span = Tracer::start_span(japanese_tracer, "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æ“ä½œ")
  assert_eq(Span::name(japanese_span), "ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æ“ä½œ")
  Span::add_event(japanese_span, "èªè¨¼æˆåŠŸ", Some([("ãƒ¦ãƒ¼ã‚¶ãƒ¼ID", StringValue("12345")), ("ãƒ¦ãƒ¼ã‚¶ãƒ¼å", StringValue("ç”°ä¸­å¤ªéƒ"))]))
  Span::set_status(japanese_span, Ok, Some("æ“ä½œãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸ"))
  Span::end(japanese_span)
  
  // æµ‹è¯•éŸ©æ–‡Spanåç§°
  let korean_tracer = TracerProvider::get_tracer(tracer_provider, "êµ­ì œí™” í…ŒìŠ¤íŠ¸")
  let korean_span = Tracer::start_span(korean_tracer, "ì‚¬ìš©ì ë¡œê·¸ì¸ ì‘ì—…")
  assert_eq(Span::name(korean_span), "ì‚¬ìš©ì ë¡œê·¸ì¸ ì‘ì—…")
  Span::add_event(korean_span, "ì¸ì¦ ì„±ê³µ", Some([("ì‚¬ìš©ìID", StringValue("12345")), ("ì‚¬ìš©ìëª…", StringValue("ê¹€ì² ìˆ˜"))]))
  Span::set_status(korean_span, Ok, Some("ì‘ì—…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤"))
  Span::end(korean_span)
  
  assert_true(true) // å¦‚æœæ‰€æœ‰å¤šè¯­è¨€spanæ“ä½œéƒ½æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "å¤šè¯­è¨€å±æ€§å€¼æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "multilingual.attributes")
  let span = Tracer::start_span(tracer, "Multilingual Attributes Test")
  
  // æµ‹è¯•å„ç§è¯­è¨€çš„å±æ€§å€¼
  let multilingual_attrs = [
    ("ä¸­æ–‡.æ¶ˆæ¯", StringValue("è¿™æ˜¯ä¸€ä¸ªä¸­æ–‡æ¶ˆæ¯")),
    ("è‹±æ–‡.æ¶ˆæ¯", StringValue("This is an English message")),
    ("æ—¥æ–‡.æ¶ˆæ¯", StringValue("ã“ã‚Œã¯æ—¥æœ¬èªã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™")),
    ("éŸ©æ–‡.æ¶ˆæ¯", StringValue("ì´ê²ƒì€ í•œêµ­ì–´ ë©”ì‹œì§€ì…ë‹ˆë‹¤")),
    ("é˜¿æ‹‰ä¼¯æ–‡.æ¶ˆæ¯", StringValue("Ù‡Ø°Ù‡ Ø±Ø³Ø§Ù„Ø© Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")),
    ("ä¿„æ–‡.æ¶ˆæ¯", StringValue("Ğ­Ñ‚Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ")),
    ("æ³•æ–‡.æ¶ˆæ¯", StringValue("Ceci est un message en franÃ§ais")),
    ("å¾·æ–‡.æ¶ˆæ¯", StringValue("Dies ist eine deutsche Nachricht")),
    ("è¥¿ç­ç‰™æ–‡.æ¶ˆæ¯", StringValue("Este es un mensaje en espaÃ±ol")),
    ("è‘¡è„ç‰™æ–‡.æ¶ˆæ¯", StringValue("Esta Ã© uma mensagem em portuguÃªs"))
  ]
  
  // æ·»åŠ å¤šè¯­è¨€å±æ€§åˆ°span
  for attr in multilingual_attrs {
    Span::add_event(span, "multilingual.attr", Some([attr]))
  }
  
  // æµ‹è¯•åŒ…å«å¤šç§è¯­è¨€çš„å¤åˆå±æ€§
  let composite_attrs = [
    ("å¤šè¯­è¨€.æ ‡é¢˜", StringValue("å›½é™…åŒ–æµ‹è¯• / Internationalization Test / å›½éš›åŒ–ãƒ†ã‚¹ãƒˆ / êµ­ì œí™” í…ŒìŠ¤íŠ¸")),
    ("å¤šè¯­è¨€.æè¿°", StringValue("è¿™æ˜¯ä¸€ä¸ªåŒ…å«å¤šç§è¯­è¨€çš„æµ‹è¯•æè¿° / This is a test description with multiple languages")),
    ("å¤šè¯­è¨€.æ ‡ç­¾", ArrayStringValue(["ä¸­æ–‡æ ‡ç­¾", "English Tag", "æ—¥æœ¬èªã‚¿ã‚°", "í•œêµ­ì–´ íƒœê·¸"]))
  ]
  
  for attr in composite_attrs {
    Span::add_event(span, "composite.attr", Some([attr]))
  }
  
  Span::end(span)
  assert_true(true) // å¦‚æœå¤šè¯­è¨€å±æ€§å¤„ç†æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "å¤šè¯­è¨€æ—¥å¿—è®°å½•æµ‹è¯•" {
  let logger_provider = LoggerProvider::default()
  
  // åˆ›å»ºä¸åŒè¯­è¨€çš„logger
  let chinese_logger = LoggerProvider::get_logger(logger_provider, "ä¸­æ–‡æ—¥å¿—è®°å½•å™¨")
  let english_logger = LoggerProvider::get_logger(logger_provider, "english.logger")
  let japanese_logger = LoggerProvider::get_logger(logger_provider, "æ—¥æœ¬èªãƒ­ã‚¬ãƒ¼")
  
  // æµ‹è¯•ä¸­æ–‡æ—¥å¿—
  let chinese_log = LogRecord::new_with_context(
    Info,
    Some("ç”¨æˆ·ç™»å½•æˆåŠŸ"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("ä¸­æ–‡è¿½è¸ªID"),
    Some("ä¸­æ–‡è·¨åº¦ID"),
    None
  )
  Logger::emit(chinese_logger, chinese_log)
  
  // æµ‹è¯•è‹±æ–‡æ—¥å¿—
  let english_log = LogRecord::new_with_context(
    Info,
    Some("User login successful"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("english_trace_id"),
    Some("english_span_id"),
    None
  )
  Logger::emit(english_logger, english_log)
  
  // æµ‹è¯•æ—¥æ–‡æ—¥å¿—
  let japanese_log = LogRecord::new_with_context(
    Info,
    Some("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ"),
    Some(Attributes::new()),
    Some(Clock::now_unix_nanos(Clock::system())),
    None,
    Some("æ—¥æœ¬èªãƒˆãƒ¬ãƒ¼ã‚¹ID"),
    Some("æ—¥æœ¬èªã‚¹ãƒ‘ãƒ³ID"),
    None
  )
  Logger::emit(japanese_logger, japanese_log)
  
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯æ—¥å¿—
  let error_logs = [
    (Warn, "è­¦å‘Šï¼šæ•°æ®åº“è¿æ¥è¶…æ—¶", "Warning: Database connection timeout", "è­¦å‘Šï¼šãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ"),
    (Error, "é”™è¯¯ï¼šç”¨æˆ·è®¤è¯å¤±è´¥", "Error: User authentication failed", "ã‚¨ãƒ©ãƒ¼ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å¤±æ•—"),
    (Fatal, "è‡´å‘½é”™è¯¯ï¼šç³»ç»Ÿå´©æºƒ", "Fatal error: System crash", "è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ï¼šã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ©ãƒƒã‚·ãƒ¥")
  ]
  
  for log_data in error_logs {
    let (severity, chinese_msg, english_msg, japanese_msg) = log_data
    
    let chinese_error = LogRecord::new(severity, chinese_msg)
    let english_error = LogRecord::new(severity, english_msg)
    let japanese_error = LogRecord::new(severity, japanese_msg)
    
    Logger::emit(chinese_logger, chinese_error)
    Logger::emit(english_logger, english_error)
    Logger::emit(japanese_logger, japanese_error)
  }
  
  assert_true(true) // å¦‚æœæ‰€æœ‰å¤šè¯­è¨€æ—¥å¿—è®°å½•æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "å¤šè¯­è¨€Metricsæµ‹è¯•" {
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "å¤šè¯­è¨€æŒ‡æ ‡")
  
  // åˆ›å»ºå¤šè¯­è¨€metrics
  let chinese_counter = Meter::create_counter(meter, "ä¸­æ–‡.è¯·æ±‚è®¡æ•°", Some("ä¸­æ–‡è¯·æ±‚æ€»æ•°ç»Ÿè®¡"), Some("æ¬¡"))
  let english_counter = Meter::create_counter(meter, "english.request.count", Some("Total English request count"), Some("requests"))
  let japanese_counter = Meter::create_counter(meter, "æ—¥æœ¬èª.ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°", Some("æ—¥æœ¬èªãƒªã‚¯ã‚¨ã‚¹ãƒˆç·æ•°çµ±è¨ˆ"), Some("å›"))
  
  // æ›´æ–°å¤šè¯­è¨€metrics
  Counter::add(chinese_counter, 100.0)
  Counter::add(english_counter, 200.0)
  Counter::add(japanese_counter, 150.0)
  
  // æµ‹è¯•å¤šè¯­è¨€histogram
  let chinese_histogram = Meter::create_histogram(meter, "ä¸­æ–‡.å“åº”æ—¶é—´", Some("ä¸­æ–‡å“åº”æ—¶é—´åˆ†å¸ƒ"), Some("æ¯«ç§’"))
  let english_histogram = Meter::create_histogram(meter, "english.response.time", Some("English response time distribution"), Some("milliseconds"))
  
  Histogram::record(chinese_histogram, 100.0)
  Histogram::record(chinese_histogram, 200.0)
  Histogram::record(chinese_histogram, 150.0)
  
  Histogram::record(english_histogram, 50.0)
  Histogram::record(english_histogram, 75.0)
  Histogram::record(english_histogram, 60.0)
  
  // æµ‹è¯•å¤šè¯­è¨€å±æ€§ä¸metricsç»“åˆ
  let multilingual_attrs = Attributes::new()
  Attributes::set(multilingual_attrs, "åœ°åŒº", StringValue("ä¸­å›½"))
  Attributes::set(multilingual_attrs, "è¯­è¨€", StringValue("ä¸­æ–‡"))
  Attributes::set(multilingual_attrs, "Region", StringValue("United States"))
  Attributes::set(multilingual_attrs, "Language", StringValue("English"))
  
  let localized_counter = Meter::create_counter(meter, "æœ¬åœ°åŒ–.ç”¨æˆ·æ“ä½œ", Some("æŒ‰åœ°åŒºå’Œè¯­è¨€åˆ†ç±»çš„ç”¨æˆ·æ“ä½œ"), Some("æ“ä½œ"))
  Counter::add(localized_counter, 1.0, Some(multilingual_attrs))
  
  assert_true(true) // å¦‚æœå¤šè¯­è¨€metricsæ“ä½œæˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "Unicodeå­—ç¬¦å¤„ç†æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "unicode.å¤„ç†")
  let span = Tracer::start_span(tracer, "Unicodeå­—ç¬¦å¤„ç†æµ‹è¯•")
  
  // æµ‹è¯•å„ç§Unicodeå­—ç¬¦
  let unicode_chars = [
    ("emoji.ç¬‘è„¸", StringValue("ğŸ˜ŠğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…ğŸ˜‚ğŸ¤£â˜ºï¸ğŸ˜Š")),
    ("emoji.åŠ¨ç‰©", StringValue("ğŸ¶ğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¦ŠğŸ»ğŸ¼ğŸ¨ğŸ¯")),
    ("emoji.é£Ÿç‰©", StringValue("ğŸğŸŠğŸ‹ğŸŒğŸ‰ğŸ‡ğŸ“ğŸ«ğŸˆğŸ’")),
    ("æ•°å­¦ç¬¦å·", StringValue("âˆ‘âˆâˆ†âˆ‡âˆ‚âˆ«âˆÂ±â‰¤â‰¥â‰ â‰ˆâˆâˆš")),
    ("è´§å¸ç¬¦å·", StringValue("Â¥â‚¬Â£$â‚¹â‚½â‚©â‚ªâ‚«â‚¡â‚¨â‚±â‚²â‚´â‚¸â‚¼â‚½")),
    ("ç®­å¤´ç¬¦å·", StringValue("â†â†’â†‘â†“â†–â†—â†˜â†™â‡â‡’â‡‘â‡“â‡”â‡•â‡–â‡—â‡˜â‡™")),
    ("ç‰¹æ®Šå­—ç¬¦", StringValue("Â©Â®â„¢â„ â„¡â„–â„€â„â„…â„†â„‡â„ˆâ„‰â„Šâ„‹â„Œâ„â„â„")),
    ("å›½é™…å­—ç¬¦", StringValue("Ã±Ã¼Ã¶Ã¤Ã©Ã Ã¨Ã¹ÃªÃ«Ã®Ã¯Ã´Ã¤Ã§ÃŸÃ¸Ã¥Ã¦Å“")),
    ("ç»„åˆå­—ç¬¦", StringValue("eÌeÌ‚eÌˆeÌŠoÌoÌ‚oÌˆoÌŠaÌaÌ‚aÌˆaÌŠ")),
    ("é›¶å®½å­—ç¬¦", StringValue("zero\u200Bwidth\u200Cjoiner\u200Dnon\uFEFFjoiner"))
  ]
  
  for char_data in unicode_chars {
    Span::add_event(span, "unicode.test", Some([char_data]))
  }
  
  // æµ‹è¯•åŒ…å«Unicodeçš„trace_idå’Œspan_id
  let unicode_trace_id = "è¿½è¸ªğŸš€ID_ğŸŒŸ123"
  let unicode_span_id = "è·¨åº¦ğŸ’ID_âœ¨456"
  
  let unicode_span_ctx = SpanContext::new(unicode_trace_id, unicode_span_id, true, "çŠ¶æ€=ğŸ¯")
  let unicode_span = Span::new("Unicode Span", Internal, unicode_span_ctx)
  
  assert_eq(SpanContext::trace_id(unicode_span_ctx), unicode_trace_id)
  assert_eq(SpanContext::span_id(unicode_span_ctx), unicode_span_id)
  assert_true(SpanContext::is_sampled(unicode_span_ctx))
  
  Span::end(unicode_span)
  Span::end(span)
  
  assert_true(true) // å¦‚æœUnicodeå­—ç¬¦å¤„ç†æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "æœ¬åœ°åŒ–æ ¼å¼åŒ–æµ‹è¯•" {
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "æœ¬åœ°åŒ–æ ¼å¼åŒ–")
  
  // æµ‹è¯•ä¸åŒåœ°åŒºçš„æ—¥æœŸæ—¶é—´æ ¼å¼
  let timestamp = Clock::now_unix_nanos(Clock::system())
  
  let date_formats = [
    ("ä¸­æ–‡.æ—¥æœŸ", "2025å¹´12æœˆ28æ—¥ æ˜ŸæœŸæ—¥"),
    ("è‹±æ–‡.æ—¥æœŸ", "Sunday, December 28, 2025"),
    ("æ—¥æ–‡.æ—¥æœŸ", "2025å¹´12æœˆ28æ—¥ æ—¥æ›œæ—¥"),
    ("ä¸­æ–‡.æ—¶é—´", "14:30:45"),
    ("è‹±æ–‡.æ—¶é—´", "2:30:45 PM"),
    ("æ—¥æ–‡.æ—¶é—´", "14æ™‚30åˆ†45ç§’")
  ]
  
  for format in date_formats {
    let (key, formatted_value) = format
    let log_record = LogRecord::new_with_context(
      Info,
      Some("æ ¼å¼åŒ–æ—¶é—´æµ‹è¯•"),
      Some(Attributes::new()),
      Some(timestamp),
      None,
      None,
      None,
      None
    )
    
    // åœ¨å®é™…å®ç°ä¸­ï¼Œè¿™é‡Œä¼šä½¿ç”¨æœ¬åœ°åŒ–æ ¼å¼åŒ–
    // è¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿæ ¼å¼åŒ–ç»“æœ
    Logger::emit(logger, log_record)
  }
  
  // æµ‹è¯•æ•°å­—æ ¼å¼åŒ–
  let number_formats = [
    ("ä¸­æ–‡.æ•°å­—", "1,234.56"),
    ("è‹±æ–‡.æ•°å­—", "1,234.56"),
    ("å¾·æ–‡.æ•°å­—", "1.234,56"),
    ("æ³•æ–‡.æ•°å­—", "1 234,56"),
    ("ä¸­æ–‡.è´§å¸", "Â¥1,234.56"),
    ("è‹±æ–‡.è´§å¸", "$1,234.56"),
    ("æ¬§å…ƒ.è´§å¸", "â‚¬1,234.56"),
    ("æ—¥æ–‡.è´§å¸", "Â¥1,235")
  ]
  
  for format in number_formats {
    let (key, formatted_value) = format
    let log_record = LogRecord::new_with_context(
      Info,
      Some("æ•°å­—æ ¼å¼åŒ–æµ‹è¯•"),
      Some(Attributes::new()),
      Some(timestamp),
      None,
      None,
      None,
      None
    )
    
    Logger::emit(logger, log_record)
  }
  
  assert_true(true) // å¦‚æœæœ¬åœ°åŒ–æ ¼å¼åŒ–å¤„ç†æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "å¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯æµ‹è¯•" {
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "å¤šè¯­è¨€é”™è¯¯å¤„ç†")
  let logger_provider = LoggerProvider::default()
  let logger = LoggerProvider::get_logger(logger_provider, "å¤šè¯­è¨€é”™è¯¯æ—¥å¿—")
  
  // æµ‹è¯•å¤šè¯­è¨€é”™è¯¯åœºæ™¯
  let error_scenarios = [
    ("æ•°æ®åº“è¿æ¥å¤±è´¥", "Database connection failed", "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šå¤±æ•—", "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨"),
    ("ç”¨æˆ·è®¤è¯è¶…æ—¶", "User authentication timeout", "ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ", "ì‚¬ìš©ì ì¸ì¦ ì‹œê°„ ì´ˆê³¼"),
    ("æ–‡ä»¶ä¸å­˜åœ¨", "File not found", "ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ã¾ã›ã‚“", "íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤"),
    ("æƒé™ä¸è¶³", "Insufficient permissions", "æ¨©é™ãŒä¸è¶³ã—ã¦ã„ã¾ã™", "ê¶Œí•œì´ ë¶€ì¡±í•©ë‹ˆë‹¤"),
    ("ç½‘ç»œè¯·æ±‚å¤±è´¥", "Network request failed", "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¤±æ•—", "ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì‹¤íŒ¨"),
    ("å†…å­˜ä¸è¶³", "Out of memory", "ãƒ¡ãƒ¢ãƒªä¸è¶³", "ë©”ëª¨ë¦¬ ë¶€ì¡±"),
    ("æœåŠ¡ä¸å¯ç”¨", "Service unavailable", "ã‚µãƒ¼ãƒ“ã‚¹ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“", "ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),
    ("å‚æ•°éªŒè¯å¤±è´¥", "Parameter validation failed", "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¤œè¨¼å¤±æ•—", "ë§¤ê°œë³€ìˆ˜ ê²€ì¦ ì‹¤íŒ¨")
  ]
  
  for error in error_scenarios {
    let (chinese_msg, english_msg, japanese_msg, korean_msg) = error
    
    // åˆ›å»ºé”™è¯¯span
    let error_span = Tracer::start_span(tracer, "é”™è¯¯å¤„ç†")
    Span::set_status(error_span, Error, Some(chinese_msg))
    Span::add_event(error_span, "é”™è¯¯è¯¦æƒ…", Some([
      ("ä¸­æ–‡.é”™è¯¯", StringValue(chinese_msg)),
      ("è‹±æ–‡.é”™è¯¯", StringValue(english_msg)),
      ("æ—¥æ–‡.é”™è¯¯", StringValue(japanese_msg)),
      ("éŸ©æ–‡.é”™è¯¯", StringValue(korean_msg))
    ]))
    Span::end(error_span)
    
    // åˆ›å»ºå¤šè¯­è¨€é”™è¯¯æ—¥å¿—
    let chinese_error_log = LogRecord::new(Error, chinese_msg)
    let english_error_log = LogRecord::new(Error, english_msg)
    let japanese_error_log = LogRecord::new(Error, japanese_msg)
    let korean_error_log = LogRecord::new(Error, korean_msg)
    
    Logger::emit(logger, chinese_error_log)
    Logger::emit(logger, english_error_log)
    Logger::emit(logger, japanese_error_log)
    Logger::emit(logger, korean_error_log)
  }
  
  // æµ‹è¯•å¤šè¯­è¨€å¼‚å¸¸æ¢å¤
  let recovery_span = Tracer::start_span(tracer, "å¼‚å¸¸æ¢å¤")
  Span::set_status(recovery_span, Ok, Some("ç³»ç»Ÿå·²ä»å¤šè¯­è¨€é”™è¯¯ä¸­æ¢å¤ / System recovered from multilingual errors"))
  Span::add_event(recovery_span, "æ¢å¤æˆåŠŸ", Some([
    ("æ¢å¤çŠ¶æ€", StringValue("æˆåŠŸ")),
    ("Recovery Status", StringValue("Success")),
    ("å¾©æ—§ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹", StringValue("æˆåŠŸ")),
    ("ë³µêµ¬ ìƒíƒœ", StringValue("ì„±ê³µ"))
  ]))
  Span::end(recovery_span)
  
  assert_true(true) // å¦‚æœå¤šè¯­è¨€é”™è¯¯å¤„ç†æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}

test "æ–‡åŒ–ç‰¹å®šæ•°æ®å¤„ç†æµ‹è¯•" {
  let meter_provider = MeterProvider::default()
  let meter = MeterProvider::get_meter(meter_provider, "æ–‡åŒ–ç‰¹å®šæ•°æ®")
  let tracer_provider = TracerProvider::default()
  let tracer = TracerProvider::get_tracer(tracer_provider, "æ–‡åŒ–ç‰¹å®šå¤„ç†")
  
  // æµ‹è¯•æ–‡åŒ–ç‰¹å®šçš„æ•°æ®å¤„ç†
  let cultural_data = [
    ("ä¸­æ–‡.å§“åæ ¼å¼", "å¼ ä¸‰", "å§“åœ¨å‰ï¼Œååœ¨å"),
    ("è‹±æ–‡.å§“åæ ¼å¼", "John Smith", "ååœ¨å‰ï¼Œå§“åœ¨å"),
    ("æ—¥æ–‡.å§“åæ ¼å¼", "ç”°ä¸­å¤ªéƒ", "å§“åœ¨å‰ï¼Œååœ¨å"),
    ("éŸ©æ–‡.å§“åæ ¼å¼", "ê¹€ì² ìˆ˜", "å§“åœ¨å‰ï¼Œååœ¨å"),
    ("ä¸­æ–‡.åœ°å€æ ¼å¼", "ä¸­å›½åŒ—äº¬å¸‚æœé˜³åŒºå»ºå›½è·¯88å·", "ä»å¤§åˆ°å°ï¼šå›½å®¶-çœå¸‚-åŒºå¿-è¡—é“"),
    ("è‹±æ–‡.åœ°å€æ ¼å¼", "88 Jianguo Road, Chaoyang District, Beijing, China", "ä»å°åˆ°å¤§ï¼šé—¨ç‰Œå·-è¡—é“-åŒºå¿-åŸå¸‚-å›½å®¶"),
    ("ä¸­æ–‡.ç”µè¯æ ¼å¼", "+86 138-0013-8000", "å›½å®¶ç -åœ°åŒºç -å·ç "),
    ("è‹±æ–‡.ç”µè¯æ ¼å¼", "+1 (555) 123-4567", "å›½å®¶ç -(åŒºå·) å·ç ")
  ]
  
  for data in cultural_data {
    let (key, value, description) = data
    let span = Tracer::start_span(tracer, "æ–‡åŒ–æ•°æ®å¤„ç†")
    Span::add_event(span, "æ–‡åŒ–æ•°æ®", Some([
      (key, StringValue(value)),
      (key + ".æè¿°", StringValue(description))
    ]))
    
    // åˆ›å»ºæ–‡åŒ–ç‰¹å®šçš„metrics
    let cultural_counter = Meter::create_counter(meter, key, Some(description), Some("æ¬¡"))
    Counter::add(cultural_counter, 1.0)
    
    Span::end(span)
  }
  
  // æµ‹è¯•æ–‡åŒ–ç‰¹å®šçš„æ’åºå’Œæ¯”è¾ƒ
  let sorting_span = Tracer::start_span(tracer, "æ–‡åŒ–ç‰¹å®šæ’åº")
  let multilingual_names = [
    "å¼ ä¸‰", "æå››", "ç‹äº”",  // ä¸­æ–‡
    "John", "Mary", "David",  // è‹±æ–‡
    "ç”°ä¸­", "ä½è—¤", "éˆ´æœ¨",  // æ—¥æ–‡
    "ê¹€ì² ìˆ˜", "ì´ì˜í¬", "ë°•ë¯¼ì¤€"  // éŸ©æ–‡
  ]
  
  for name in multilingual_names {
    Span::add_event(sorting_span, "å¤šè¯­è¨€å§“å", Some([("å§“å", StringValue(name))]))
  }
  
  Span::end(sorting_span)
  assert_true(true) // å¦‚æœæ–‡åŒ–ç‰¹å®šæ•°æ®å¤„ç†æˆåŠŸåˆ™æµ‹è¯•é€šè¿‡
}