// Azimuth å¢å¼ºå•å…ƒæµ‹è¯•
// ä¸“æ³¨äºè¾¹ç•Œæ¡ä»¶å’Œå¤æ‚åœºæ™¯çš„æµ‹è¯•

test "add_large_number_commutativity" {
  // æµ‹è¯•å¤§æ•°åŠ æ³•çš„äº¤æ¢å¾‹
  let large_pos = 1000000
  let large_neg = -1000000
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ­£æ•°äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(large_pos, max_val - 1000000), @azimuth.add(max_val - 1000000, large_pos))
  
  // è´Ÿæ•°äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(large_neg, min_val + 1000000), @azimuth.add(min_val + 1000000, large_neg))
  
  // æ··åˆç¬¦å·äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(large_pos, large_neg), @azimuth.add(large_neg, large_pos))
}

test "add_associativity_with_overflow" {
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹åœ¨æº¢å‡ºæƒ…å†µä¸‹çš„è¡Œä¸º
  let max_val = 2147483647
  let min_val = -2147483648
  let mid_val = 1000000
  
  // (max + mid) + min vs max + (mid + min)
  let result1 = @azimuth.add(@azimuth.add(max_val, mid_val), min_val)
  let result2 = @azimuth.add(max_val, @azimuth.add(mid_val, min_val))
  @azimuth.assert_eq(result1, result2)
}

test "multiply_power_of_two_edge_cases" {
  // æµ‹è¯•2çš„å¹‚æ¬¡æ–¹çš„ä¹˜æ³•è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(1024, @azimuth.multiply(32, 32))
  @azimuth.assert_eq(1048576, @azimuth.multiply(1024, 1024))
  @azimuth.assert_eq(-1024, @azimuth.multiply(-32, 32))
  @azimuth.assert_eq(1024, @azimuth.multiply(-32, -32))
  
  // æµ‹è¯•æ¥è¿‘æº¢å‡ºçš„2çš„å¹‚æ¬¡æ–¹
  let max_val = 2147483647
  @azimuth.assert_eq(max_val, @azimuth.multiply(65536, 32768))
}

test "multiply_distributive_property" {
  // æµ‹è¯•ä¹˜æ³•åˆ†é…å¾‹ a * (b + c) = a * b + a * c
  let a = 123
  let b = 456
  let c = 789
  
  let left = @azimuth.multiply(a, @azimuth.add(b, c))
  let right = @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  @azimuth.assert_eq(left, right)
}

test "divide_with_ceil_negative_dividend" {
  // æµ‹è¯•è´Ÿæ•°è¢«é™¤æ•°çš„å‘ä¸Šå–æ•´é™¤æ³•
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(-1, 3))
  @azimuth.assert_eq(-2, @azimuth.divide_with_ceil(-4, 3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-6, 2))
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(-7, 2))
  @azimuth.assert_eq(-333334, @azimuth.divide_with_ceil(-1000000, 3))
}

test "divide_with_ceil_negative_divisor" {
  // æµ‹è¯•è´Ÿæ•°é™¤æ•°çš„å‘ä¸Šå–æ•´é™¤æ³•
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(10, -3))
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(11, -3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(9, -3))
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(-9, -3))
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(-5, -3))
}

test "greet_unicode_and_whitespace" {
  // æµ‹è¯•åŒ…å«Unicodeå­—ç¬¦å’Œç©ºæ ¼çš„é—®å€™
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("   "))
  @azimuth.assert_eq_string("Hello, \t\n!", @azimuth.greet("\t\n"))
  @azimuth.assert_eq_string("Hello, cafÃ©!", @azimuth.greet("cafÃ©"))
}

test "complex_arithmetic_sequence" {
  // æµ‹è¯•å¤æ‚çš„ç®—æœ¯åºåˆ—è®¡ç®—
  // è®¡ç®—: 1 + 2*3 + 4*5 + 6*7 + 8*9
  let step1 = @azimuth.multiply(2, 3)
  let step2 = @azimuth.multiply(4, 5)
  let step3 = @azimuth.multiply(6, 7)
  let step4 = @azimuth.multiply(8, 9)
  
  let sum1 = @azimuth.add(1, step1)
  let sum2 = @azimuth.add(sum1, step2)
  let sum3 = @azimuth.add(sum2, step3)
  let result = @azimuth.add(sum3, step4)
  
  @azimuth.assert_eq(1 + 6 + 20 + 42 + 72, result)
}

test "extreme_value_combinations" {
  // æµ‹è¯•æå€¼ç»„åˆçš„è¿ç®—
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æå€¼åŠ æ³•ç»„åˆ
  @azimuth.assert_eq(0, @azimuth.add(max_val, min_val + 1))
  @azimuth.assert_eq(-2, @azimuth.add(min_val, min_val + 2))
  
  // æå€¼ä¹˜æ³•ç»„åˆ
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}