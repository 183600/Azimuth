// é¢å¤–çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// ä¸º azimuth åº“æ·»åŠ é«˜è´¨é‡æµ‹è¯•è¦†ç›–

test "precision_calculations" {
  // ç²¾åº¦è®¡ç®—æµ‹è¯•
  // æµ‹è¯•å¤§æ•°è¿ç®—çš„ç²¾åº¦ä¿æŒ
  let large_num = 1000000
  let small_num = 3
  
  // å¤§æ•°åŠ æ³•ç²¾åº¦
  assert_eq(1000003, add(large_num, small_num))
  
  // å¤§æ•°ä¹˜æ³•ç²¾åº¦
  assert_eq(3000000, multiply(large_num, small_num))
  
  // å‘ä¸Šå–æ•´é™¤æ³•ç²¾åº¦
  assert_eq(333334, divide_with_ceil(large_num, small_num))
}

test "string_edge_cases" {
  // å­—ç¬¦ä¸²è¾¹ç¼˜æƒ…å†µæµ‹è¯•
  // æµ‹è¯•å„ç§ç‰¹æ®Šå­—ç¬¦ä¸²è¾“å…¥
  assert_eq_string("Hello, null!", greet("null"))
  assert_eq_string("Hello, undefined!", greet("undefined"))
  assert_eq_string("Hello, 0x123!", greet("0x123"))
  assert_eq_string("Hello, NaN!", greet("NaN"))
  assert_eq_string("Hello, Infinity!", greet("Infinity"))
}

test "mathematical_identities" {
  // æ•°å­¦æ’ç­‰å¼æµ‹è¯•
  let x = 42
  
  // åŠ æ³•æ’ç­‰å¼
  assert_eq(x, add(x, 0))
  assert_eq(0, add(x, -x))
  
  // ä¹˜æ³•æ’ç­‰å¼
  assert_eq(x, multiply(x, 1))
  assert_eq(-x, multiply(x, -1))
  assert_eq(0, multiply(x, 0))
  
  // é™¤æ³•æ’ç­‰å¼ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  assert_eq(1, divide_with_ceil(x, x))
  assert_eq(0, divide_with_ceil(0, x))
}

test "inventory_management" {
  // åº“å­˜ç®¡ç†ä¸šåŠ¡é€»è¾‘æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—ä»“åº“å­˜å‚¨éœ€æ±‚
  let product_a = 127  // äº§å“Aæ•°é‡
  let product_b = 89   // äº§å“Bæ•°é‡
  let product_c = 45   // äº§å“Cæ•°é‡
  
  let box_capacity = 24  // æ¯ç®±å®¹é‡
  
  // è®¡ç®—å„äº§å“éœ€è¦çš„ç®±å­æ•°
  let boxes_a = divide_with_ceil(product_a, box_capacity)  // ceil(127/24) = 6
  let boxes_b = divide_with_ceil(product_b, box_capacity)  // ceil(89/24) = 4
  let boxes_c = divide_with_ceil(product_c, box_capacity)  // ceil(45/24) = 2
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  assert_eq(12, total_boxes)
  
  // è®¡ç®—æ€»å­˜å‚¨å®¹é‡
  let total_capacity = multiply(total_boxes, box_capacity)
  assert_eq(288, total_capacity)
  
  // è®¡ç®—å‰©ä½™ç©ºé—´
  let total_products = add(add(product_a, product_b), product_c)
  let remaining_space = subtract(total_capacity, total_products)
  assert_eq(27, remaining_space)
}

test "error_resilience" {
  // é”™è¯¯æ¢å¤èƒ½åŠ›æµ‹è¯•
  // æµ‹è¯•å„ç§å¼‚å¸¸è¾“å…¥çš„å¤„ç†
  
  // é™¤é›¶é”™è¯¯å¤„ç†
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  
  // æå€¼å¤„ç†
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(-1, divide_with_ceil(-1, -1))
  assert_eq(0, divide_with_ceil(0, 1))
  assert_eq(0, divide_with_ceil(0, -1))
}

test "calculation_pipeline" {
  // è®¡ç®—æµæ°´çº¿æµ‹è¯•
  // æ¨¡æ‹Ÿå¤šæ­¥éª¤è®¡ç®—æµç¨‹
  let initial_value = 15
  
  // æ­¥éª¤1ï¼šä¹˜ä»¥3
  let step1 = multiply(initial_value, 3)  // 45
  
  // æ­¥éª¤2ï¼šåŠ ä¸Š20
  let step2 = add(step1, 20)  // 65
  
  // æ­¥éª¤3ï¼šé™¤ä»¥7å‘ä¸Šå–æ•´
  let step3 = divide_with_ceil(step2, 7)  // ceil(65/7) = 10
  
  // æ­¥éª¤4ï¼šä¹˜ä»¥2
  let step4 = multiply(step3, 2)  // 20
  
  // æ­¥éª¤5ï¼šå‡å»5
  let final_result = subtract(step4, 5)  // 15
  
  assert_eq(15, final_result)
}

test "internationalization_support" {
  // å›½é™…åŒ–æ”¯æŒæµ‹è¯•
  // æµ‹è¯•å„ç§è¯­è¨€å’Œç‰¹æ®Šå­—ç¬¦
  assert_eq_string("Hello, åŒ—äº¬!", greet("åŒ—äº¬"))
  assert_eq_string("Hello, SÃ£o Paulo!", greet("SÃ£o Paulo"))
  assert_eq_string("Hello, MÃ¼nchen!", greet("MÃ¼nchen"))
  assert_eq_string("Hello, ğŸŒ!", greet("ğŸŒ"))
  assert_eq_string("Hello, ğ”˜ğ”«ğ”¦ğ” ğ”¬ğ”¡ğ”¢!", greet("ğ”˜ğ”«ğ”¦ğ” ğ”¬ğ”¡ğ”¢"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, ×¢×‘×¨×™×ª!", greet("×¢×‘×¨×™×ª"))
  assert_eq_string("Hello, à¤¹à¤¿à¤¨à¥à¤¦à¥€!", greet("à¤¹à¤¿à¤¨à¥à¤¦à¥€"))
}

test "resource_optimization" {
  // èµ„æºä¼˜åŒ–æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—æœ€ä¼˜èµ„æºåˆ†é…
  let total_tasks = 157
  let team_size = 8
  let working_days = 5
  
  // è®¡ç®—æ¯äººæ¯å¤©éœ€è¦å®Œæˆçš„ä»»åŠ¡æ•°
  let total_person_days = multiply(team_size, working_days)  // 40äººå¤©
  let tasks_per_person_day = divide_with_ceil(total_tasks, total_person_days)  // ceil(157/40) = 4
  
  // éªŒè¯æ€»å¤„ç†èƒ½åŠ›
  let total_capacity = multiply(tasks_per_person_day, total_person_days)  // 4 * 40 = 160
  assert_eq(160, total_capacity)
  
  // éªŒè¯èƒ½å¤Ÿå¤„ç†æ‰€æœ‰ä»»åŠ¡
  assert_true(total_capacity >= total_tasks)
  
  // è®¡ç®—æ•ˆç‡æŸå¤±
  let efficiency = divide_with_ceil(multiply(total_tasks, 100), total_capacity)  // ceil(15700/160) = 99
  assert_eq(99, efficiency)  // 99%çš„åˆ©ç”¨ç‡
}