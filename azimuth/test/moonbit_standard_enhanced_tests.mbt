// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - å¢å¼ºç‰ˆ
// æµ‹è¯• azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "divide_with_ceil_zero_divisor" {
  // æµ‹è¯•é™¤æ•°ä¸ºé›¶çš„æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(10, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-10, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))
}

test "large_number_operations_stability" {
  // æµ‹è¯•å¤§æ•°è¿ç®—çš„ç¨³å®šæ€§
  let large_num1 = 100000
  let large_num2 = 200000
  let large_num3 = -150000
  
  // å¤§æ•°åŠ æ³•
  @azimuth.assert_eq(300000, @azimuth.add(large_num1, large_num2))
  @azimuth.assert_eq(-50000, @azimuth.add(large_num1, large_num3))
  
  // å¤§æ•°ä¹˜æ³•
  @azimuth.assert_eq(20000000000, @azimuth.multiply(large_num1, large_num2))
  @azimuth.assert_eq(-15000000000, @azimuth.multiply(large_num1, large_num3))
  
  // å¤§æ•°é™¤æ³•
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(large_num2, large_num1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(large_num3, -large_num1))
}

test "string_special_characters_comprehensive" {
  // æµ‹è¯•å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦å¤„ç†
  @azimuth.assert_eq_string("Hello, \n\t\r!", @azimuth.greet("\n\t\r"))
  @azimuth.assert_eq_string("Hello, \"quoted\"!", @azimuth.greet("\"quoted\""))
  @azimuth.assert_eq_string("Hello, \\backslash!", @azimuth.greet("\\backslash"))
  @azimuth.assert_eq_string("Hello, mixed123!@#!", @azimuth.greet("mixed123!@#"))
  @azimuth.assert_eq_string("Hello, ğŸŒ™ğŸš€â­!", @azimuth.greet("ğŸŒ™ğŸš€â­"))
}

test "mathematical_associative_laws" {
  // æµ‹è¯•æ•°å­¦è¿ç®—çš„ç»“åˆå¾‹
  let a = 15
  let b = 25
  let c = 35
  
  // åŠ æ³•ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  let left_assoc = @azimuth.add(@azimuth.add(a, b), c)
  let right_assoc = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(left_assoc, right_assoc)
  
  // ä¹˜æ³•ç»“åˆå¾‹: (a * b) * c = a * (b * c)
  let mult_left = @azimuth.multiply(@azimuth.multiply(a, b), c)
  let mult_right = @azimuth.multiply(a, @azimuth.multiply(b, c))
  @azimuth.assert_eq(mult_left, mult_right)
}

test "real_world_business_calculations" {
  // æµ‹è¯•å®é™…ä¸šåŠ¡åœºæ™¯è®¡ç®—
  
  // åœºæ™¯1: è®¡ç®—å«ç¨ä»·æ ¼
  let base_price = 1000
  let tax_rate = 8  // 8%ç¨ç‡ï¼Œä»¥æ•´æ•°å½¢å¼å­˜å‚¨
  let tax_amount = @azimuth.divide_with_ceil(@azimuth.multiply(base_price, tax_rate), 100)
  let total_price = @azimuth.add(base_price, tax_amount)
  @azimuth.assert_eq(1080, total_price)
  
  // åœºæ™¯2: è®¡ç®—æŠ˜æ‰£ä»·æ ¼
  let original_price = 2500
  let discount_percentage = 15  // 15%æŠ˜æ‰£
  let discount_amount = @azimuth.divide_with_ceil(@azimuth.multiply(original_price, discount_percentage), 100)
  let final_price = @azimuth.add(original_price, -discount_amount)
  @azimuth.assert_eq(2125, final_price)
  
  // åœºæ™¯3: è®¡ç®—æ‰¹é‡é‡‡è´­æ‰€éœ€çš„åŒ…è£…æ•°é‡
  let total_items = 987
  let items_per_package = 50
  let packages_needed = @azimuth.divide_with_ceil(total_items, items_per_package)
  @azimuth.assert_eq(20, packages_needed)
}

test "boundary_value_combinations" {
  // æµ‹è¯•è¾¹ç•Œå€¼çš„ç»„åˆè¿ç®—
  let max_val = 2147483647
  let min_val = -2147483648
  let mid_val = 0
  
  // è¾¹ç•Œå€¼åŠ æ³•ç»„åˆ
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, mid_val))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, mid_val))
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
  
  // è¾¹ç•Œå€¼ä¹˜æ³•ç»„åˆ
  @azimuth.assert_eq(0, @azimuth.multiply(max_val, mid_val))
  @azimuth.assert_eq(0, @azimuth.multiply(min_val, mid_val))
  @azimuth.assert_eq(0, @azimuth.multiply(mid_val, mid_val))
  
  // è¾¹ç•Œå€¼é™¤æ³•ç»„åˆ
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(max_val, max_val))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(min_val, min_val))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(mid_val, max_val))
}

test "negative_number_operations_comprehensive" {
  // æµ‹è¯•è´Ÿæ•°è¿ç®—çš„å„ç§ç»„åˆ
  let neg1 = -15
  let neg2 = -25
  let pos1 = 20
  let pos2 = 30
  
  // è´Ÿæ•°åŠ æ³•
  @azimuth.assert_eq(-40, @azimuth.add(neg1, neg2))
  @azimuth.assert_eq(5, @azimuth.add(neg1, pos1))
  @azimuth.assert_eq(-5, @azimuth.add(neg2, pos1))
  
  // è´Ÿæ•°ä¹˜æ³•
  @azimuth.assert_eq(375, @azimuth.multiply(neg1, neg2))
  @azimuth.assert_eq(-300, @azimuth.multiply(neg1, pos2))
  @azimuth.assert_eq(-500, @azimuth.multiply(neg2, pos2))
  
  // è´Ÿæ•°é™¤æ³•
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(neg1, neg2))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(neg1, pos1))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(pos1, neg2))
}

test "function_chaining_operations" {
  // æµ‹è¯•å‡½æ•°é“¾å¼è°ƒç”¨
  let initial_value = 10
  
  // é“¾å¼åŠ æ³•æ“ä½œ
  let chain_add = @azimuth.add(@azimuth.add(@azimuth.add(initial_value, 5), 10), 15)
  @azimuth.assert_eq(40, chain_add)
  
  // é“¾å¼ä¹˜æ³•æ“ä½œ
  let chain_multiply = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(initial_value, 2), 3), 4)
  @azimuth.assert_eq(240, chain_multiply)
  
  // æ··åˆé“¾å¼æ“ä½œ
  let mixed_chain = @azimuth.multiply(@azimuth.add(initial_value, 5), @azimuth.divide_with_ceil(20, 4))
  @azimuth.assert_eq(30, mixed_chain)
  
  // å­—ç¬¦ä¸²é“¾å¼å¤„ç†
  let greet_chain1 = @azimuth.greet("User")
  let greet_chain2 = @azimuth.greet(@azimuth.greet("Admin"))
  @azimuth.assert_eq_string("Hello, User!", greet_chain1)
  @azimuth.assert_eq_string("Hello, Hello, Admin!!", greet_chain2)
}

test "complex_calculation_scenarios" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åœºæ™¯
  
  // åœºæ™¯1: è®¡ç®—å¤åˆåˆ©ç‡
  let principal = 10000
  let rate = 5  // 5%åˆ©ç‡
  let years = 3
  let year1_interest = @azimuth.divide_with_ceil(@azimuth.multiply(principal, rate), 100)
  let year1_total = @azimuth.add(principal, year1_interest)
  let year2_interest = @azimuth.divide_with_ceil(@azimuth.multiply(year1_total, rate), 100)
  let year2_total = @azimuth.add(year1_total, year2_interest)
  let year3_interest = @azimuth.divide_with_ceil(@azimuth.multiply(year2_total, rate), 100)
  let final_amount = @azimuth.add(year2_total, year3_interest)
  @azimuth.assert_eq(11576, final_amount)
  
  // åœºæ™¯2: è®¡ç®—èµ„æºåˆ†é…
  let total_resources = 1000
  let team_a_size = 3
  let team_b_size = 5
  let team_c_size = 2
  let total_team_size = @azimuth.add(@azimuth.add(team_a_size, team_b_size), team_c_size)
  let resources_per_person = @azimuth.divide_with_ceil(total_resources, total_team_size)
  let team_a_resources = @azimuth.multiply(resources_per_person, team_a_size)
  let team_b_resources = @azimuth.multiply(resources_per_person, team_b_size)
  let team_c_resources = @azimuth.multiply(resources_per_person, team_c_size)
  @azimuth.assert_eq(100, resources_per_person)
  @azimuth.assert_eq(300, team_a_resources)
  @azimuth.assert_eq(500, team_b_resources)
  @azimuth.assert_eq(200, team_c_resources)
}

test "error_handling_and_edge_cases" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µ
  
  // æµ‹è¯•æå€¼è¿ç®—
  let max_int = 2147483647
  let min_int = -2147483648
  
  // æå€¼åŠ æ³•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_int, @azimuth.add(max_int, max_int))
  @azimuth.assert_eq(min_int, @azimuth.add(min_int, min_int))
  
  // æå€¼ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_int, @azimuth.multiply(max_int, 2))
  @azimuth.assert_eq(min_int, @azimuth.multiply(min_int, 2))
  
  // ç‰¹æ®Šé™¤æ³•æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, max_int))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, min_int))
  
  // ç©ºå­—ç¬¦ä¸²å’Œç‰¹æ®Šå­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(" "))
  @azimuth.assert_eq_string("Hello, null!", @azimuth.greet("null"))
  @azimuth.assert_eq_string("Hello, undefined!", @azimuth.greet("undefined"))
}