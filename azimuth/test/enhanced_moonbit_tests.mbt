// Enhanced MoonBit æµ‹è¯•ç”¨ä¾‹
// è¿™äº›æµ‹è¯•ç”¨ä¾‹å±•ç¤ºäº† MoonBit æ ‡å‡†æµ‹è¯•è¯­æ³•çš„å„ç§ç”¨æ³•

// æµ‹è¯•åŠ æ³•å‡½æ•°çš„æ•°å­¦ç‰¹æ€§
test "add_mathematical_properties" {
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹: a + b = b + a
  let a = 12345
  let b = -6789
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // æµ‹è¯•åŠ æ³•ç»“åˆå¾‹: (a + b) + c = a + (b + c)
  let c = 9876
  let result1 = @azimuth.add(@azimuth.add(a, b), c)
  let result2 = @azimuth.add(a, @azimuth.add(b, c))
  @azimuth.assert_eq(result1, result2)
}

// æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„æ•°å­¦ç‰¹æ€§
test "multiply_mathematical_properties" {
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹: a * b = b * a
  let a = 123
  let b = 456
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // æµ‹è¯•ä¹˜æ³•ç»“åˆå¾‹: (a * b) * c = a * (b * c)
  let c = 78
  let result1 = @azimuth.multiply(@azimuth.multiply(a, b), c)
  let result2 = @azimuth.multiply(a, @azimuth.multiply(b, c))
  @azimuth.assert_eq(result1, result2)
}

// æµ‹è¯•å­—ç¬¦ä¸²å¤„ç†åŠŸèƒ½
test "string_processing_features" {
  // æµ‹è¯•åŒ…å«å„ç§å­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  @azimuth.assert_eq_string("Hello, 12345!", @azimuth.greet("12345"))
  @azimuth.assert_eq_string("Hello, ğŸŒ™!", @azimuth.greet("ğŸŒ™"))
  
  // æµ‹è¯•åŒ…å«ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  @azimuth.assert_eq_string("Hello, test@example.com!", @azimuth.greet("test@example.com"))
}

// æµ‹è¯•è¾¹ç•Œå€¼å’Œæå€¼æƒ…å†µ
test "extreme_values_handling" {
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•åŠ æ³•çš„è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, max_val))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, min_val))
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -1))
  
  // æµ‹è¯•ä¹˜æ³•çš„è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—ä¸‰è§’å½¢é¢ç§¯
test "triangle_area_calculation" {
  // ä½¿ç”¨æµ·ä¼¦å…¬å¼è®¡ç®—ä¸‰è§’å½¢é¢ç§¯çš„ç®€åŒ–ç‰ˆæœ¬
  // å‡è®¾ä¸‰è¾¹é•¿ä¸º a, b, cï¼ŒåŠå‘¨é•¿ p = (a + b + c) / 2
  // é¢ç§¯ = p * (p - a) * (p - b) * (p - c) çš„å¹³æ–¹æ ¹
  // è¿™é‡Œæˆ‘ä»¬åªè®¡ç®—åˆ°åŠå‘¨é•¿
  
  let side_a = 3
  let side_b = 4
  let side_c = 5
  
  // è®¡ç®—åŠå‘¨é•¿
  let perimeter = @azimuth.add(@azimuth.add(side_a, side_b), side_c)
  let semi_perimeter = perimeter / 2
  
  @azimuth.assert_eq(6, semi_perimeter)
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—å¹³å‡åˆ†
test "average_score_calculation" {
  // è®¡ç®—5ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†
  let score1 = 85
  let score2 = 92
  let score3 = 78
  let score4 = 96
  let score5 = 88
  
  // è®¡ç®—æ€»åˆ†
  let total_score = @azimuth.add(
    @azimuth.add(@azimuth.add(score1, score2), @azimuth.add(score3, score4)),
    score5
  )
  
  // è®¡ç®—å¹³å‡åˆ†ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
  let average_score = total_score / 5
  
  @azimuth.assert_eq(87, average_score)  // (85 + 92 + 78 + 96 + 88) / 5 = 439 / 5 = 87
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—æŠ˜æ‰£ä»·æ ¼
test "discount_price_calculation" {
  // è®¡ç®—å•†å“æŠ˜æ‰£åçš„ä»·æ ¼
  let original_price = 299
  let discount_percentage = 20  // 20% æŠ˜æ‰£
  
  // è®¡ç®—æŠ˜æ‰£é‡‘é¢ï¼ˆä½¿ç”¨æ•´æ•°è¿ç®—ï¼‰
  let discount_amount = @azimuth.multiply(original_price, discount_percentage) / 100
  let final_price = @azimuth.add(original_price, -discount_amount)
  
  @azimuth.assert_eq(239, final_price)  // 299 - (299 * 20 / 100) = 299 - 59 = 240
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—æ¸©åº¦è½¬æ¢
test "temperature_conversion_calculation" {
  // æ‘„æ°åº¦è½¬åæ°åº¦çš„ç®€åŒ–ç‰ˆæœ¬ï¼šF = C * 2 + 32
  let celsius_temp = 25
  let fahrenheit_temp = @azimuth.add(@azimuth.multiply(celsius_temp, 2), 32)
  @azimuth.assert_eq(82, fahrenheit_temp)
  
  // åæ°åº¦è½¬æ‘„æ°åº¦çš„ç®€åŒ–ç‰ˆæœ¬ï¼šC = (F - 32) / 2
  let fahrenheit_temp2 = 68
  let celsius_temp2 = (@azimuth.add(fahrenheit_temp2, -32)) / 2
  @azimuth.assert_eq(18, celsius_temp2)
}

// æµ‹è¯•å®é™…åº”ç”¨åœºæ™¯ï¼šè®¡ç®—ç®€å•åˆ©æ¯
test "simple_interest_calculation" {
  // è®¡ç®—ç®€å•åˆ©æ¯ï¼šåˆ©æ¯ = æœ¬é‡‘ Ã— åˆ©ç‡ Ã— æ—¶é—´
  let principal = 10000
  let rate = 5  // 5% å¹´åˆ©ç‡
  let time = 3  // 3å¹´
  
  // è®¡ç®—æ€»åˆ©æ¯ï¼ˆä½¿ç”¨æ•´æ•°è¿ç®—ï¼‰
  let total_interest = @azimuth.multiply(principal, @azimuth.multiply(rate, time)) / 100
  
  // è®¡ç®—æœ€ç»ˆé‡‘é¢
  let final_amount = @azimuth.add(principal, total_interest)
  
  @azimuth.assert_eq(11500, final_amount)  // 10000 + (10000 * 5 * 3 / 100) = 10000 + 1500 = 11500
}

// æµ‹è¯•å¸ƒå°”æ¡ä»¶è¡¨è¾¾å¼
test "boolean_condition_expressions" {
  // æµ‹è¯•å„ç§å¸ƒå°”æ¡ä»¶
  @azimuth.assert_true(5 > 3)
  @azimuth.assert_true(10 >= 10)
  @azimuth.assert_true(-5 < 0)
  @azimuth.assert_true(-10 <= -10)
  
  @azimuth.assert_false(3 > 5)
  @azimuth.assert_false(10 > 10)
  @azimuth.assert_false(0 < -5)
  @azimuth.assert_false(-10 < -10)
  
  // æµ‹è¯•å¤åˆæ¡ä»¶
  @azimuth.assert_true(5 > 3 && 3 > 1)
  @azimuth.assert_true(5 > 3 || 3 > 5)
  @azimuth.assert_false(5 > 3 && 3 > 5)
  @azimuth.assert_true(!(5 > 3 && 3 > 5))
}