// æ–°çš„é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "add_function_large_numbers" {
  // æµ‹è¯•å¤§æ•°åŠ æ³•è¿ç®—
  @azimuth.assert_eq(2000000, @azimuth.add(1000000, 1000000))
  @azimuth.assert_eq(2147483646, @azimuth.add(2147483645, 1))
  @azimuth.assert_eq(-2147483647, @azimuth.add(-2147483646, -1))
}

test "multiply_function_precision" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„ç²¾åº¦å’Œè¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(1, @azimuth.multiply(1, 1))
  @azimuth.assert_eq(-1, @azimuth.multiply(-1, 1))
  @azimuth.assert_eq(1, @azimuth.multiply(-1, -1))
  @azimuth.assert_eq(2147483647, @azimuth.multiply(46340, 46340))
}

test "divide_with_ceil_edge_scenarios" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç¼˜åœºæ™¯
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(1, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-1, 1))
  @azimuth.assert_eq(2147483647, @azimuth.divide_with_ceil(2147483647, 1))
}

test "greet_function_complex_strings" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„å¤æ‚å­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, line\nbreak\ttab!", @azimuth.greet("line\nbreak\ttab"))
  @azimuth.assert_eq_string("Hello, \"quoted\"!", @azimuth.greet("\"quoted\""))
  @azimuth.assert_eq_string("Hello, \\backslash!", @azimuth.greet("\\backslash"))
  @azimuth.assert_eq_string("Hello, emoji ğŸŠğŸ‰!", @azimuth.greet("emoji ğŸŠğŸ‰"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯æµ‹è¯•
  let principal = 50000
  let annual_rate = 8
  let years = 5
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—
  let year1 = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, annual_rate), 100))
  let year2 = @azimuth.add(year1, @azimuth.divide_with_ceil(@azimuth.multiply(year1, annual_rate), 100))
  let year3 = @azimuth.add(year2, @azimuth.divide_with_ceil(@azimuth.multiply(year2, annual_rate), 100))
  
  // éªŒè¯å¤åˆ©å¢é•¿
  @azimuth.assert_eq(54000, year1)
  @azimuth.assert_eq(58320, year2)
  @azimuth.assert_eq(62986, year3)
  
  // è®¡ç®—æœˆä¾›
  let total_months = @azimuth.multiply(years, 12)
  let monthly_payment = @azimuth.divide_with_ceil(year3, total_months)
  @azimuth.assert_eq(875, monthly_payment)
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–æµ‹è¯•
  let total_resources = 12345
  let departments = 7
  let base_allocation = @azimuth.divide_with_ceil(total_resources, departments)
  
  @azimuth.assert_eq(1764, base_allocation)
  
  // éªŒè¯åˆ†é…ç»“æœ
  let total_allocated = @azimuth.multiply(base_allocation, departments)
  @azimuth.assert_eq(12348, total_allocated)
  
  // è®¡ç®—èµ„æºåˆ©ç”¨ç‡
  let utilization = @azimuth.divide_with_ceil(@azimuth.multiply(total_resources, 100), total_allocated)
  @azimuth.assert_eq(99, utilization)
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—æµ‹è¯•
  let n = 10
  
  // è®¡ç®—ç­‰å·®æ•°åˆ—å’Œ: 1 + 2 + ... + n
  let arithmetic_sum = @azimuth.divide_with_ceil(@azimuth.multiply(n, @azimuth.add(n, 1)), 2)
  @azimuth.assert_eq(55, arithmetic_sum)
  
  // è®¡ç®—ç­‰æ¯”æ•°åˆ—å’Œ: 1 + 2 + 4 + ... + 2^(n-1)
  let geometric_sum = @azimuth.subtract(@azimuth.multiply(2, n), 1)
  @azimuth.assert_eq(19, geometric_sum)
  
  // éªŒè¯æ•°åˆ—æ€§è´¨
  @azimuth.assert_eq(@azimuth.add(arithmetic_sum, geometric_sum), 74)
}

test "inventory_management_comprehensive" {
  // ç»¼åˆåº“å­˜ç®¡ç†æµ‹è¯•
  let product_a = 125
  let product_b = 87
  let product_c = 156
  
  let box_capacity_a = 12
  let box_capacity_b = 8
  let box_capacity_c = 15
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_a = @azimuth.divide_with_ceil(product_a, box_capacity_a)
  let boxes_b = @azimuth.divide_with_ceil(product_b, box_capacity_b)
  let boxes_c = @azimuth.divide_with_ceil(product_c, box_capacity_c)
  
  @azimuth.assert_eq(11, boxes_a)
  @azimuth.assert_eq(11, boxes_b)
  @azimuth.assert_eq(11, boxes_c)
  
  // è®¡ç®—æ€»å­˜å‚¨å®¹é‡
  let total_boxes = @azimuth.add(@azimuth.add(boxes_a, boxes_b), boxes_c)
  let avg_capacity = @azimuth.divide_with_ceil(
    @azimuth.add(@azimuth.add(box_capacity_a, box_capacity_b), box_capacity_c), 3
  )
  let total_capacity = @azimuth.multiply(total_boxes, avg_capacity)
  
  @azimuth.assert_eq(33, total_boxes)
  @azimuth.assert_eq(12, avg_capacity)
  @azimuth.assert_eq(396, total_capacity)
}

test "error_handling_comprehensive" {
  // ç»¼åˆé”™è¯¯å¤„ç†æµ‹è¯•
  // æµ‹è¯•å„ç§é™¤é›¶æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))
  
  // æµ‹è¯•æå€¼è¿ç®—
  @azimuth.assert_eq(0, @azimuth.multiply(0, 2147483647))
  @azimuth.assert_eq(0, @azimuth.multiply(0, -2147483648))
  @azimuth.assert_eq(2147483647, @azimuth.add(2147483647, 0))
  @azimuth.assert_eq(-2147483648, @azimuth.add(-2147483648, 0))
}

test "complex_business_workflow" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµæµ‹è¯•
  // åœºæ™¯ï¼šé¡¹ç›®ç®¡ç†ä¸èµ„æºåˆ†é…
  let project_duration = 18  // æœˆ
  let team_size = 12
  let budget_per_month = 25000
  let tasks_per_person = 8
  
  // è®¡ç®—é¡¹ç›®æ€»é¢„ç®—
  let total_budget = @azimuth.multiply(project_duration, budget_per_month)
  @azimuth.assert_eq(450000, total_budget)
  
  // è®¡ç®—æ€»ä»»åŠ¡æ•°
  let total_tasks = @azimuth.multiply(team_size, tasks_per_person)
  @azimuth.assert_eq(96, total_tasks)
  
  // è®¡ç®—æ¯æœˆéœ€è¦å®Œæˆçš„ä»»åŠ¡æ•°
  let monthly_tasks = @azimuth.divide_with_ceil(total_tasks, project_duration)
  @azimuth.assert_eq(6, monthly_tasks)
  
  // è®¡ç®—æ¯ä¸ªä»»åŠ¡çš„å¹³å‡é¢„ç®—
  let budget_per_task = @azimuth.divide_with_ceil(total_budget, total_tasks)
  @azimuth.assert_eq(4688, budget_per_task)
  
  // éªŒè¯é¢„ç®—åˆ†é…åˆç†æ€§
  let allocated_budget = @azimuth.multiply(budget_per_task, total_tasks)
  @azimuth.assert_eq(450048, allocated_budget)
  
  // è®¡ç®—é¢„ç®—ä½™é‡
  let budget_buffer = @azimuth.subtract(allocated_budget, total_budget)
  @azimuth.assert_eq(48, budget_buffer)
}