// é¢å¤–çš„æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹
// åŒ…å«10ä¸ªé«˜è´¨é‡æµ‹è¯•ç”¨ä¾‹ï¼Œä½¿ç”¨æ ‡å‡† MoonBit æµ‹è¯•è¯­æ³•

test "mathematical_identity_properties" {
  // æµ‹è¯•æ•°å­¦æ’ç­‰å¼æ€§è´¨
  let x = 42
  let y = 17
  
  // åŠ æ³•æ’ç­‰å¼
  @azimuth.assert_eq(x, @azimuth.add(x, 0))
  @azimuth.assert_eq(y, @azimuth.add(0, y))
  
  // ä¹˜æ³•æ’ç­‰å¼
  @azimuth.assert_eq(x, @azimuth.multiply(x, 1))
  @azimuth.assert_eq(y, @azimuth.multiply(1, y))
  
  // åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
  
  // ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(x, y), @azimuth.multiply(y, x))
}

test "boundary_condition_handling" {
  // æµ‹è¯•è¾¹ç•Œæ¡ä»¶å¤„ç†
  let max_int = 2147483647
  let min_int = -2147483648
  
  // è¾¹ç•Œå€¼åŠ æ³•æµ‹è¯•
  @azimuth.assert_eq(max_int, @azimuth.add(max_int, 0))
  @azimuth.assert_eq(min_int, @azimuth.add(min_int, 0))
  
  // è¾¹ç•Œå€¼ä¹˜æ³•æµ‹è¯•
  @azimuth.assert_eq(0, @azimuth.multiply(max_int, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(min_int, 0))
  @azimuth.assert_eq(max_int, @azimuth.multiply(max_int, 1))
  @azimuth.assert_eq(min_int, @azimuth.multiply(min_int, 1))
  
  // é™¤é›¶é”™è¯¯å¤„ç†
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(100, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-100, 0))
}

test "real_world_business_scenarios" {
  // æµ‹è¯•çœŸå®ä¸–ç•Œä¸šåŠ¡åœºæ™¯
  // åœºæ™¯1ï¼šè®¡ç®—è®¢å•æ€»ä»·
  let item_price = 199
  let quantity = 3
  let shipping = 15
  let discount = -20
  let subtotal = @azimuth.multiply(item_price, quantity)
  let total = @azimuth.add(@azimuth.add(subtotal, shipping), discount)
  @azimuth.assert_eq(602, total)
  
  // åœºæ™¯2ï¼šè®¡ç®—èµ„æºåˆ†é…
  let total_resources = 100
  let teams = 3
  let resources_per_team = @azimuth.divide_with_ceil(total_resources, teams)
  let total_allocated = @azimuth.multiply(resources_per_team, teams)
  @azimuth.assert_eq(34, resources_per_team)
  @azimuth.assert_eq(102, total_allocated)
  
  // åœºæ™¯3ï¼šç”¨æˆ·ä¸ªæ€§åŒ–é—®å€™
  let user_name = "ææ˜"
  let greeting = @azimuth.greet(user_name)
  @azimuth.assert_eq_string("Hello, ææ˜!", greeting)
}

test "unicode_string_processing" {
  // æµ‹è¯•Unicodeå­—ç¬¦ä¸²å¤„ç†
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", @azimuth.greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  @azimuth.assert_eq_string("Hello, cafÃ©!", @azimuth.greet("cafÃ©"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  @azimuth.assert_eq_string("Hello, Ã±oÃ±o!", @azimuth.greet("Ã±oÃ±o"))
  @azimuth.assert_eq_string("Hello, ğŸ³ï¸â€ğŸŒˆ!", @azimuth.greet("ğŸ³ï¸â€ğŸŒˆ"))
  @azimuth.assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", @azimuth.greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  @azimuth.assert_eq_string("Hello, ×¢×‘×¨×™×ª!", @azimuth.greet("×¢×‘×¨×™×ª"))
}

test "complex_calculation_sequences" {
  // æµ‹è¯•å¤æ‚è®¡ç®—åºåˆ—
  // åœºæ™¯ï¼šè®¡ç®—å¤åˆåˆ©æ¯
  let principal = 1000
  let rate1 = 5
  let rate2 = 3
  let rate3 = 4
  
  let year1 = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, rate1), 100))
  let year2 = @azimuth.add(year1, @azimuth.divide_with_ceil(@azimuth.multiply(year1, rate2), 100))
  let year3 = @azimuth.add(year2, @azimuth.divide_with_ceil(@azimuth.multiply(year2, rate3), 100))
  
  @azimuth.assert_eq(1050, year1)
  @azimuth.assert_eq(1082, year2)
  @azimuth.assert_eq(1126, year3)
  
  // åœºæ™¯ï¼šè®¡ç®—æ•°åˆ—æ€»å’Œ
  let sequence_sum = @azimuth.add(
    @azimuth.add(@azimuth.add(1, 2), @azimuth.add(3, 4)),
    @azimuth.add(@azimuth.add(5, 6), @azimuth.add(7, 8))
  )
  @azimuth.assert_eq(36, sequence_sum)
}

test "error_handling_and_robustness" {
  // æµ‹è¯•é”™è¯¯å¤„ç†å’Œå¥å£®æ€§
  // æµ‹è¯•é™¤é›¶çš„å„ç§æƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(1, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-1, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))
  
  // æµ‹è¯•æç«¯å€¼çš„è¿ç®—
  @azimuth.assert_eq(2147483647, @azimuth.add(2147483647, 2147483647))
  @azimuth.assert_eq(-2147483648, @azimuth.add(-2147483648, -2147483648))
  @azimuth.assert_eq(2147483647, @azimuth.multiply(2147483647, 2147483647))
  
  // æµ‹è¯•ç©ºå­—ç¬¦ä¸²å’Œç‰¹æ®Šå­—ç¬¦
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
  @azimuth.assert_eq_string("Hello, \n\t!", @azimuth.greet("\n\t"))
}

test "performance_related_operations" {
  // æµ‹è¯•æ€§èƒ½ç›¸å…³æ“ä½œ
  // å¤§æ•°è¿ç®—æµ‹è¯•
  let large_num1 = 1000000
  let large_num2 = 2000000
  
  @azimuth.assert_eq(3000000, @azimuth.add(large_num1, large_num2))
  @azimuth.assert_eq(2000000000000, @azimuth.multiply(large_num1, large_num2))
  
  // è¿ç»­è¿ç®—æµ‹è¯•
  let mut accumulator = 1
  accumulator = @azimuth.multiply(accumulator, 2)
  accumulator = @azimuth.multiply(accumulator, 3)
  accumulator = @azimuth.multiply(accumulator, 4)
  accumulator = @azimuth.multiply(accumulator, 5)
  @azimuth.assert_eq(120, accumulator)
  
  // æ‰¹é‡å¤„ç†æ¨¡æ‹Ÿ
  let batch_size = 100
  let num_batches = 10
  let total_items = @azimuth.multiply(batch_size, num_batches)
  let processing_time = @azimuth.divide_with_ceil(total_items, 50)
  @azimuth.assert_eq(1000, total_items)
  @azimuth.assert_eq(20, processing_time)
}

test "function_composition_patterns" {
  // æµ‹è¯•å‡½æ•°ç»„åˆæ¨¡å¼
  // åœºæ™¯ï¼šè®¡ç®—è¡¨è¾¾å¼ (a + b) * (c - d) / e
  let a = 10
  let b = 5
  let c = 20
  let d = 8
  let e = 3
  
  let sum_ab = @azimuth.add(a, b)
  let diff_cd = @azimuth.add(c, -d)
  let product = @azimuth.multiply(sum_ab, diff_cd)
  let result = @azimuth.divide_with_ceil(product, e)
  
  @azimuth.assert_eq(15, sum_ab)
  @azimuth.assert_eq(12, diff_cd)
  @azimuth.assert_eq(180, product)
  @azimuth.assert_eq(60, result)
  
  // åœºæ™¯ï¼šè®¡ç®—å¹³å‡å€¼çš„å‘ä¸Šå–æ•´
  let values_sum = @azimuth.add(@azimuth.add(@azimuth.add(15, 25), 35), 45)
  let count = 4
  let average_ceil = @azimuth.divide_with_ceil(values_sum, count)
  @azimuth.assert_eq(120, values_sum)
  @azimuth.assert_eq(30, average_ceil)
}

test "data_type_compatibility" {
  // æµ‹è¯•æ•°æ®ç±»å‹å…¼å®¹æ€§
  // æµ‹è¯•æ­£æ•°ã€è´Ÿæ•°å’Œé›¶çš„ç»„åˆ
  let positive = 42
  let negative = -17
  let zero = 0
  
  @azimuth.assert_eq(25, @azimuth.add(positive, negative))
  @azimuth.assert_eq(-25, @azimuth.add(negative, positive))
  @azimuth.assert_eq(42, @azimuth.add(positive, zero))
  @azimuth.assert_eq(-17, @azimuth.add(negative, zero))
  @azimuth.assert_eq(0, @azimuth.add(zero, zero))
  
  @azimuth.assert_eq(-714, @azimuth.multiply(positive, negative))
  @azimuth.assert_eq(-714, @azimuth.multiply(negative, positive))
  @azimuth.assert_eq(0, @azimuth.multiply(positive, zero))
  @azimuth.assert_eq(0, @azimuth.multiply(negative, zero))
  @azimuth.assert_eq(0, @azimuth.multiply(zero, zero))
  
  // æµ‹è¯•å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq_string("Hello, 0!", @azimuth.greet("0"))
  @azimuth.assert_eq_string("Hello, -1!", @azimuth.greet("-1"))
  @azimuth.assert_eq_string("Hello, 3.14!", @azimuth.greet("3.14"))
  @azimuth.assert_eq_string("Hello, true!", @azimuth.greet("true"))
  @azimuth.assert_eq_string("Hello, false!", @azimuth.greet("false"))
}

test "algorithm_implementation_tests" {
  // æµ‹è¯•ç®—æ³•å®ç°
  // åœºæ™¯ï¼šè®¡ç®—é˜¶ä¹˜ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let fact_1 = @azimuth.multiply(1, 1)
  let fact_2 = @azimuth.multiply(fact_1, 2)
  let fact_3 = @azimuth.multiply(fact_2, 3)
  let fact_4 = @azimuth.multiply(fact_3, 4)
  let fact_5 = @azimuth.multiply(fact_4, 5)
  
  @azimuth.assert_eq(1, fact_1)
  @azimuth.assert_eq(2, fact_2)
  @azimuth.assert_eq(6, fact_3)
  @azimuth.assert_eq(24, fact_4)
  @azimuth.assert_eq(120, fact_5)
  
  // åœºæ™¯ï¼šè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let fib_0 = 0
  let fib_1 = 1
  let fib_2 = @azimuth.add(fib_0, fib_1)
  let fib_3 = @azimuth.add(fib_1, fib_2)
  let fib_4 = @azimuth.add(fib_2, fib_3)
  let fib_5 = @azimuth.add(fib_3, fib_4)
  
  @azimuth.assert_eq(0, fib_0)
  @azimuth.assert_eq(1, fib_1)
  @azimuth.assert_eq(1, fib_2)
  @azimuth.assert_eq(2, fib_3)
  @azimuth.assert_eq(3, fib_4)
  @azimuth.assert_eq(5, fib_5)
  
  // åœºæ™¯ï¼šè®¡ç®—æœ€å¤§å…¬çº¦æ•°ï¼ˆç®€åŒ–ç‰ˆï¼Œä½¿ç”¨å‡æ³•ï¼‰
  let a = 48
  let b = 18
  let mut gcd_a = a
  let mut gcd_b = b
  
  // ç®€åŒ–çš„æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆä»…æ¼”ç¤ºæ¦‚å¿µï¼‰
  @azimuth.assert_eq(48, gcd_a)
  @azimuth.assert_eq(18, gcd_b)
  
  // éªŒè¯æ•°å­¦æ€§è´¨
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
}