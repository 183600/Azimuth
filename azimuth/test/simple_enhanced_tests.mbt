// ç®€å•çš„ MoonBit å¢å¼ºæµ‹è¯•ç”¨ä¾‹
// ä¸“æ³¨äºè¾¹ç•Œæ¡ä»¶ã€å®é™…åº”ç”¨åœºæ™¯å’Œé«˜çº§åŠŸèƒ½æµ‹è¯•

test "integer_overflow_boundary_conditions" {
  // æµ‹è¯•æ•´æ•°æº¢å‡ºçš„è¾¹ç•Œæ¡ä»¶
  let max_int = 2147483647
  let min_int = -2147483648
  
  // æµ‹è¯•æ¥è¿‘æœ€å¤§å€¼çš„åŠ æ³•
  @azimuth.assert_eq(max_int, @azimuth.add(max_int - 1, 1))
  @azimuth.assert_eq(max_int, @azimuth.add(max_int - 100, 100))
  
  // æµ‹è¯•æ¥è¿‘æœ€å°å€¼çš„å‡æ³•ï¼ˆé€šè¿‡åŠ è´Ÿæ•°å®ç°ï¼‰
  @azimuth.assert_eq(min_int, @azimuth.add(min_int + 1, -1))
  @azimuth.assert_eq(min_int, @azimuth.add(min_int + 100, -100))
}

test "real_world_inventory_management" {
  // å®é™…åº“å­˜ç®¡ç†åœºæ™¯æµ‹è¯•
  let initial_stock = 150
  let incoming_shipment = 75
  let sold_items = 43
  let returned_items = 5
  
  // è®¡ç®—æœ€ç»ˆåº“å­˜
  let total_received = @azimuth.add(initial_stock, incoming_shipment)
  let net_sold = @azimuth.add(sold_items, -returned_items)
  let final_stock = @azimuth.add(total_received, -net_sold)
  
  @azimuth.assert_eq(187, final_stock)
  
  // è®¡ç®—éœ€è¦çš„å­˜å‚¨ç®±æ•°é‡ï¼ˆæ¯ç®±æœ€å¤šè£…25ä¸ªï¼‰
  let boxes_needed = @azimuth.divide_with_ceil(final_stock, 25)
  @azimuth.assert_eq(8, boxes_needed)  // ceil(187/25) = 8
}

test "string_processing_internationalization" {
  // å›½é™…åŒ–å­—ç¬¦ä¸²å¤„ç†æµ‹è¯•
  // æµ‹è¯•äºšæ´²å§“å
  let asian_name1 = "å¼ ä¸‰"
  let asian_name2 = "æå››"
  let greeting1 = @azimuth.greet(asian_name1)
  let greeting2 = @azimuth.greet(asian_name2)
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", greeting1)
  @azimuth.assert_eq_string("Hello, æå››!", greeting2)
  
  // æµ‹è¯•æ¬§æ´²å§“å
  let european_name1 = "Jean"
  let european_name2 = "FranÃ§ois"
  let greeting3 = @azimuth.greet(european_name1)
  let greeting4 = @azimuth.greet(european_name2)
  @azimuth.assert_eq_string("Hello, Jean!", greeting3)
  @azimuth.assert_eq_string("Hello, FranÃ§ois!", greeting4)
  
  // æµ‹è¯•æ··åˆå§“å
  let mixed_name1 = "JosÃ©"
  let mixed_name2 = "å¼ ä¼Ÿ"
  let greeting5 = @azimuth.greet(mixed_name1)
  let greeting6 = @azimuth.greet(mixed_name2)
  @azimuth.assert_eq_string("Hello, JosÃ©!", greeting5)
  @azimuth.assert_eq_string("Hello, å¼ ä¼Ÿ!", greeting6)
}

test "mathematical_sequence_calculations" {
  // æ•°å­¦åºåˆ—è®¡ç®—æµ‹è¯•
  // æ–æ³¢é‚£å¥‘æ•°åˆ—å‰å‡ é¡¹çš„è®¡ç®—
  let fib1 = 1
  let fib2 = 1
  let fib3 = @azimuth.add(fib1, fib2)  // 2
  let fib4 = @azimuth.add(fib2, fib3)  // 3
  let fib5 = @azimuth.add(fib3, fib4)  // 5
  let fib6 = @azimuth.add(fib4, fib5)  // 8
  let fib7 = @azimuth.add(fib5, fib6)  // 13
  
  @azimuth.assert_eq(2, fib3)
  @azimuth.assert_eq(3, fib4)
  @azimuth.assert_eq(5, fib5)
  @azimuth.assert_eq(8, fib6)
  @azimuth.assert_eq(13, fib7)
  
  // é˜¶ä¹˜è®¡ç®—
  let fact3 = @azimuth.multiply(3, 2)  // 6
  let fact4 = @azimuth.multiply(fact3, 3)  // 18
  let fact5 = @azimuth.multiply(fact4, 4)  // 72
  
  @azimuth.assert_eq(6, fact3)
  @azimuth.assert_eq(18, fact4)
  @azimuth.assert_eq(72, fact5)
}

test "business_financial_calculations" {
  // ä¸šåŠ¡è´¢åŠ¡è®¡ç®—æµ‹è¯•
  let unit_price = 199
  let quantity = 17
  let discount_rate = 15  // 15% æŠ˜æ‰£
  let tax_rate = 8        // 8% ç¨ç‡
  
  // è®¡ç®—å°è®¡
  let subtotal = @azimuth.multiply(unit_price, quantity)
  
  // è®¡ç®—æŠ˜æ‰£é‡‘é¢
  let discount_amount = @azimuth.divide_with_ceil(@azimuth.multiply(subtotal, discount_rate), 100)
  
  // è®¡ç®—æŠ˜åä»·æ ¼
  let discounted_price = @azimuth.add(subtotal, -discount_amount)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = @azimuth.divide_with_ceil(@azimuth.multiply(discounted_price, tax_rate), 100)
  
  // è®¡ç®—æ€»ä»·
  let total_price = @azimuth.add(discounted_price, tax_amount)
  
  @azimuth.assert_eq(3383, subtotal)
  @azimuth.assert_eq(508, discount_amount)  // ceil(3383 * 15 / 100)
  @azimuth.assert_eq(2875, discounted_price)
  @azimuth.assert_eq(231, tax_amount)      // ceil(2875 * 8 / 100)
  @azimuth.assert_eq(3106, total_price)
}

test "performance_large_number_operations" {
  // å¤§æ•°æ“ä½œæ€§èƒ½æµ‹è¯•
  // æµ‹è¯•å¤§æ•°åŠ æ³•
  let mut sum = 0
  sum = @azimuth.add(sum, 100000)
  sum = @azimuth.add(sum, 250000)
  sum = @azimuth.add(sum, 500000)
  sum = @azimuth.add(sum, 750000)
  sum = @azimuth.add(sum, 1000000)
  @azimuth.assert_eq(2600000, sum)
  
  // æµ‹è¯•å¤§æ•°ä¹˜æ³•
  let large_num1 = 10000
  let large_num2 = 10000
  let large_product = @azimuth.multiply(large_num1, large_num2)
  @azimuth.assert_eq(100000000, large_product)
  
  // æµ‹è¯•å¤§æ•°é™¤æ³•å‘ä¸Šå–æ•´
  let large_dividend = 1000000
  let large_divisor = 37
  let large_div_result = @azimuth.divide_with_ceil(large_dividend, large_divisor)
  @azimuth.assert_eq(27028, large_div_result)  // ceil(1000000/37)
}

test "edge_case_special_values" {
  // ç‰¹æ®Šå€¼è¾¹ç•Œæƒ…å†µæµ‹è¯•
  // æµ‹è¯•é›¶å€¼çš„å„ç§ç»„åˆ
  @azimuth.assert_eq(0, @azimuth.add(0, 0))
  @azimuth.assert_eq(0, @azimuth.multiply(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1000))
  
  // æµ‹è¯•å•ä½å€¼çš„å„ç§ç»„åˆ
  @azimuth.assert_eq(2, @azimuth.add(1, 1))
  @azimuth.assert_eq(1, @azimuth.multiply(1, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1))
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(2, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 2))
  
  // æµ‹è¯•è´Ÿå•ä½å€¼
  @azimuth.assert_eq(-2, @azimuth.add(-1, -1))
  @azimuth.assert_eq(1, @azimuth.multiply(-1, -1))
  @azimuth.assert_eq(-1, @azimuth.multiply(-1, 1))
  @azimuth.assert_eq(-1, @azimuth.multiply(1, -1))
}

test "complex_data_processing_pipeline" {
  // å¤æ‚æ•°æ®å¤„ç†æµæ°´çº¿æµ‹è¯•
  // æ¨¡æ‹Ÿæ•°æ®å¤„ç†æµç¨‹ï¼šæ”¶é›† -> å¤„ç† -> åˆ†ç»„ -> æ±‡æ€»
  
  // é˜¶æ®µ1ï¼šæ•°æ®æ”¶é›†
  let mut total = 0
  total = @azimuth.add(total, 15)
  total = @azimuth.add(total, 23)
  total = @azimuth.add(total, 7)
  total = @azimuth.add(total, 42)
  total = @azimuth.add(total, 18)
  total = @azimuth.add(total, 33)
  total = @azimuth.add(total, 27)
  total = @azimuth.add(total, 11)
  @azimuth.assert_eq(176, total)
  
  // é˜¶æ®µ2ï¼šæ•°æ®å¤„ç† - è®¡ç®—å¹³å‡å€¼ï¼ˆå‘ä¸Šå–æ•´ï¼‰
  let count = 8
  let average = @azimuth.divide_with_ceil(total, count)
  @azimuth.assert_eq(22, average)  // ceil(176/8)
  
  // é˜¶æ®µ3ï¼šæ•°æ®åˆ†ç»„ - æŒ‰å¹³å‡å€¼åˆ†ç»„
  let above_average = @azimuth.divide_with_ceil(@azimuth.multiply(42, 33), average)
  let below_average = @azimuth.divide_with_ceil(@azimuth.multiply(15, 7), average)
  
  // é˜¶æ®µ4ï¼šæ•°æ®æ±‡æ€»
  let processing_result = @azimuth.add(above_average, below_average)
  @azimuth.assert_eq(88, processing_result)
}

test "unicode_and_emoji_support" {
  // Unicodeå’Œè¡¨æƒ…ç¬¦å·æ”¯æŒæµ‹è¯•
  // æµ‹è¯•è¡¨æƒ…ç¬¦å·
  let emoji1 = "ğŸš€"
  let emoji2 = "ğŸŒ™"
  let greeting1 = @azimuth.greet(emoji1)
  let greeting2 = @azimuth.greet(emoji2)
  @azimuth.assert_eq_string("Hello, ğŸš€!", greeting1)
  @azimuth.assert_eq_string("Hello, ğŸŒ™!", greeting2)
  
  // æµ‹è¯•Unicodeç¬¦å·
  let symbol1 = "Î±"
  let symbol2 = "Î²"
  let greeting3 = @azimuth.greet(symbol1)
  let greeting4 = @azimuth.greet(symbol2)
  @azimuth.assert_eq_string("Hello, Î±!", greeting3)
  @azimuth.assert_eq_string("Hello, Î²!", greeting4)
  
  // æµ‹è¯•æ··åˆå†…å®¹
  let mixed1 = "HelloğŸŒ"
  let mixed2 = "æµ‹è¯•ğŸ§ª"
  let greeting5 = @azimuth.greet(mixed1)
  let greeting6 = @azimuth.greet(mixed2)
  @azimuth.assert_eq_string("Hello, HelloğŸŒ!", greeting5)
  @azimuth.assert_eq_string("Hello, æµ‹è¯•ğŸ§ª!", greeting6)
}