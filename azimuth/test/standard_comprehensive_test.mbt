// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - é›†åˆæµ‹è¯•
// ä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½çš„å…¨é¢æµ‹è¯•è¦†ç›–

test "subtract_function_comprehensive" {
  // å…¨é¢æµ‹è¯•å‡æ³•å‡½æ•°
  @azimuth.assert_eq(5, @azimuth.subtract(10, 5))
  @azimuth.assert_eq(-5, @azimuth.subtract(5, 10))
  @azimuth.assert_eq(0, @azimuth.subtract(10, 10))
  @azimuth.assert_eq(15, @azimuth.subtract(10, -5))
  @azimuth.assert_eq(-15, @azimuth.subtract(-10, 5))
  @azimuth.assert_eq(0, @azimuth.subtract(0, 0))
  @azimuth.assert_eq(2147483647, @azimuth.subtract(2147483647, 0))
  @azimuth.assert_eq(-2147483648, @azimuth.subtract(-2147483648, 0))
}

test "divide_with_ceil_precision_edge_cases" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„ç²¾åº¦è¾¹ç¼˜æƒ…å†µ
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(-1, -1))
  @azimuth.assert_eq(2, @azimuth.divide_with_ceil(3, 2))
  @azimuth.assert_eq(-2, @azimuth.divide_with_ceil(-3, 2))
  @azimuth.assert_eq(-1, @azimuth.divide_with_ceil(3, -2))
  @azimuth.assert_eq(1000, @azimuth.divide_with_ceil(999, 1))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(1, 1000))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1000))
}

test "greet_function_whitespace_and_special_chars" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ç©ºç™½å­—ç¬¦å’Œç‰¹æ®Šå­—ç¬¦å¤„ç†
  @azimuth.assert_eq_string("Hello,   !", @azimuth.greet("  "))
  @azimuth.assert_eq_string("Hello, \t\n\r!", @azimuth.greet("\t\n\r"))
  @azimuth.assert_eq_string("Hello, \"quoted\"!", @azimuth.greet("\"quoted\""))
  @azimuth.assert_eq_string("Hello, 'single'!", @azimuth.greet("'single'"))
  @azimuth.assert_eq_string("Hello, \\backslash\\!", @azimuth.greet("\\backslash\\"))
  @azimuth.assert_eq_string("Hello, []{}()!", @azimuth.greet("[]{}()"))
  @azimuth.assert_eq_string("Hello, @#$%^&*!", @azimuth.greet("@#$%^&*"))
  @azimuth.assert_eq_string("Hello, emojiğŸ‰!", @azimuth.greet("emojiğŸ‰"))
}

test "complex_financial_calculation" {
  // å¤æ‚é‡‘èè®¡ç®—åœºæ™¯
  let principal = 10000
  let rate1 = 5  // ç¬¬ä¸€å¹´åˆ©ç‡5%
  let rate2 = 3  // ç¬¬äºŒå¹´åˆ©ç‡3%
  let rate3 = 4  // ç¬¬ä¸‰å¹´åˆ©ç‡4%
  
  // è®¡ç®—ä¸‰å¹´å¤åˆ©
  let year1_end = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, rate1), 100))
  let year2_end = @azimuth.add(year1_end, @azimuth.divide_with_ceil(@azimuth.multiply(year1_end, rate2), 100))
  let year3_end = @azimuth.add(year2_end, @azimuth.divide_with_ceil(@azimuth.multiply(year2_end, rate3), 100))
  
  @azimuth.assert_eq(10500, year1_end)  // 10000 + 5%
  @azimuth.assert_eq(10815, year2_end)  // 10500 + 3%
  @azimuth.assert_eq(11247, year3_end)  // 10815 + 4%
  
  // è®¡ç®—æœˆä¾›ï¼ˆ36ä¸ªæœˆåˆ†æœŸï¼‰
  let monthly_payment = @azimuth.divide_with_ceil(year3_end, 36)
  @azimuth.assert_eq(313, monthly_payment)  // ceil(11247/36)
}

test "inventory_management_optimization" {
  // åº“å­˜ç®¡ç†ä¼˜åŒ–åœºæ™¯
  let product_a = 127
  let product_b = 89
  let product_c = 156
  let box_capacity = 24
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_a = @azimuth.divide_with_ceil(product_a, box_capacity)
  let boxes_b = @azimuth.divide_with_ceil(product_b, box_capacity)
  let boxes_c = @azimuth.divide_with_ceil(product_c, box_capacity)
  
  @azimuth.assert_eq(6, boxes_a)  // ceil(127/24)
  @azimuth.assert_eq(4, boxes_b)  // ceil(89/24)
  @azimuth.assert_eq(7, boxes_c)  // ceil(156/24)
  
  // è®¡ç®—æ€»ç®±å­æ•°å’Œæ€»å®¹é‡
  let total_boxes = @azimuth.add(@azimuth.add(boxes_a, boxes_b), boxes_c)
  let total_capacity = @azimuth.multiply(total_boxes, box_capacity)
  let total_products = @azimuth.add(@azimuth.add(product_a, product_b), product_c)
  
  @azimuth.assert_eq(17, total_boxes)
  @azimuth.assert_eq(408, total_capacity)
  @azimuth.assert_eq(372, total_products)
  
  // è®¡ç®—ç©ºé—´åˆ©ç”¨ç‡
  let utilization = @azimuth.divide_with_ceil(@azimuth.multiply(total_products, 100), total_capacity)
  @azimuth.assert_eq(92, utilization)  // ceil(37200/408) = 92%
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—åœºæ™¯
  // æ–æ³¢é‚£å¥‘å¼åºåˆ—ï¼ˆç®€åŒ–ç‰ˆï¼‰
  let n1 = 1
  let n2 = 1
  let n3 = @azimuth.add(n1, n2)  // 2
  let n4 = @azimuth.add(n2, n3)  // 3
  let n5 = @azimuth.add(n3, n4)  // 5
  let n6 = @azimuth.add(n4, n5)  // 8
  let n7 = @azimuth.add(n5, n6)  // 13
  let n8 = @azimuth.add(n6, n7)  // 21
  
  @azimuth.assert_eq(2, n3)
  @azimuth.assert_eq(3, n4)
  @azimuth.assert_eq(5, n5)
  @azimuth.assert_eq(8, n6)
  @azimuth.assert_eq(13, n7)
  @azimuth.assert_eq(21, n8)
  
  // è®¡ç®—åºåˆ—çš„ä¹˜ç§¯å’Œ
  let sequence_sum = @azimuth.add(@azimuth.add(@azimuth.add(n5, n6), n7), n8)
  let sequence_product = @azimuth.multiply(@azimuth.multiply(n5, n6), n7)
  
  @azimuth.assert_eq(47, sequence_sum)  // 5 + 8 + 13 + 21
  @azimuth.assert_eq(520, sequence_product)  // 5 * 8 * 13
}

test "resource_allocation_fair_distribution" {
  // èµ„æºåˆ†é…å…¬å¹³åˆ†å¸ƒåœºæ™¯
  let total_budget = 10000
  let team_members = 7
  let min_bonus = 500
  
  // è®¡ç®—å¹³å‡åˆ†é…
  let avg_share = @azimuth.divide_with_ceil(total_budget, team_members)
  @azimuth.assert_eq(1429, avg_share)  // ceil(10000/7)
  
  // è®¡ç®—æ€»åˆ†é…é‡‘é¢
  let total_allocated = @azimuth.multiply(avg_share, team_members)
  @azimuth.assert_eq(10003, total_allocated)
  
  // è®¡ç®—å‰©ä½™/è¶…å‡ºçš„é‡‘é¢
  let excess = @azimuth.subtract(total_allocated, total_budget)
  @azimuth.assert_eq(3, excess)
  
  // éªŒè¯æ¯ä¸ªæˆå‘˜éƒ½èƒ½è·å¾—æœ€ä½å¥–é‡‘
  @azimuth.assert_true(avg_share >= min_bonus)
  
  // è®¡ç®—å®é™…å¯ç”¨å¥–é‡‘ï¼ˆå‡å»æœ€ä½å¥–é‡‘åçš„ä½™é¢ï¼‰
  let remaining_budget = @azimuth.subtract(total_budget, @azimuth.multiply(min_bonus, team_members))
  let additional_bonus = @azimuth.divide_with_ceil(remaining_budget, team_members)
  @azimuth.assert_eq(929, additional_bonus)  // ceil(6500/7)
}

test "error_handling_boundary_conditions" {
  // é”™è¯¯å¤„ç†è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  let max_int = 2147483647
  let min_int = -2147483648
  
  // æµ‹è¯•åŠ æ³•è¾¹ç•Œ
  @azimuth.assert_eq(max_int, @azimuth.add(max_int, max_int))
  @azimuth.assert_eq(min_int, @azimuth.add(min_int, min_int))
  @azimuth.assert_eq(max_int, @azimuth.add(max_int, 1))
  @azimuth.assert_eq(min_int, @azimuth.add(min_int, -1))
  
  // æµ‹è¯•å‡æ³•è¾¹ç•Œ
  @azimuth.assert_eq(max_int, @azimuth.subtract(max_int, 0))
  @azimuth.assert_eq(min_int, @azimuth.subtract(min_int, 0))
  @azimuth.assert_eq(max_int, @azimuth.subtract(max_int, min_int))
  
  // æµ‹è¯•ä¹˜æ³•è¾¹ç•Œ
  @azimuth.assert_eq(max_int, @azimuth.multiply(max_int, 1))
  @azimuth.assert_eq(min_int, @azimuth.multiply(min_int, 1))
  @azimuth.assert_eq(max_int, @azimuth.multiply(max_int, -1))
  @azimuth.assert_eq(min_int, @azimuth.multiply(min_int, -1))
  
  // æµ‹è¯•é™¤æ³•è¾¹ç•Œ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(max_int, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(min_int, 0))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(max_int, max_int))
  @azimuth.assert_eq(1, @azimuth.divide_with_ceil(min_int, min_int))
}

test "complex_business_workflow" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµæµ‹è¯•
  // åœºæ™¯ï¼šç”µå•†è®¢å•å¤„ç†
  
  // è®¢å•åŸºæœ¬ä¿¡æ¯
  let items_count = 15
  let unit_price = 199
  let shipping_cost = 25
  let tax_rate = 8  // 8%
  let discount = -50
  
  // è®¡ç®—å•†å“æ€»ä»·
  let subtotal = @azimuth.multiply(items_count, unit_price)
  @azimuth.assert_eq(2985, subtotal)
  
  // åº”ç”¨æŠ˜æ‰£
  let discounted_total = @azimuth.add(subtotal, discount)
  @azimuth.assert_eq(2935, discounted_total)
  
  // è®¡ç®—ç¨è´¹
  let tax_amount = @azimuth.divide_with_ceil(@azimuth.multiply(discounted_total, tax_rate), 100)
  @azimuth.assert_eq(235, tax_amount)
  
  // åŠ ä¸Šè¿è´¹å’Œç¨è´¹
  let total_with_shipping = @azimuth.add(discounted_total, shipping_cost)
  let final_total = @azimuth.add(total_with_shipping, tax_amount)
  @azimuth.assert_eq(3195, final_total)
  
  // è®¡ç®—åŒ…è£…éœ€æ±‚ï¼ˆæ¯ç®±æœ€å¤š5ä»¶ï¼‰
  let boxes_needed = @azimuth.divide_with_ceil(items_count, 5)
  @azimuth.assert_eq(3, boxes_needed)
  
  // ç”Ÿæˆå®¢æˆ·é—®å€™
  let customer_name = "å¼ ä¸‰"
  let greeting = @azimuth.greet(customer_name)
  @azimuth.assert_eq_string("Hello, å¼ ä¸‰!", greeting)
  
  // è®¡ç®—é¢„æœŸäº¤ä»˜å¤©æ•°ï¼ˆæ¯ç®±å¤„ç†1å¤©ï¼‰
  let delivery_days = @azimuth.add(boxes_needed, 2)  // åŸºç¡€å¤„ç†2å¤© + åŒ…è£…å¤©æ•°
  @azimuth.assert_eq(5, delivery_days)
}