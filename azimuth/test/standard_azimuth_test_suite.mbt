// æ ‡å‡† Azimuth æµ‹è¯•å¥—ä»¶ - 10ä¸ªé«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹
// æµ‹è¯•è¦†ç›–åŸºæœ¬åŠŸèƒ½ã€è¾¹ç•Œæ¡ä»¶ã€ä¸šåŠ¡é€»è¾‘å’ŒçœŸå®åœºæ™¯

test "basic_arithmetic_combinations" {
  // åŸºæœ¬ç®—æœ¯è¿ç®—ç»„åˆæµ‹è¯•
  // æµ‹è¯•åŠ æ³•å’Œä¹˜æ³•çš„å„ç§ç»„åˆ
  
  // åŸºæœ¬åŠ æ³•æµ‹è¯•
  @azimuth.assert_eq(10, @azimuth.add(3, 7))
  @azimuth.assert_eq(0, @azimuth.add(5, -5))
  @azimuth.assert_eq(-8, @azimuth.add(-3, -5))
  
  // åŸºæœ¬ä¹˜æ³•æµ‹è¯•
  @azimuth.assert_eq(21, @azimuth.multiply(3, 7))
  @azimuth.assert_eq(-15, @azimuth.multiply(3, -5))
  @azimuth.assert_eq(15, @azimuth.multiply(-3, -5))
}

test "boundary_values_and_overflow_handling" {
  // è¾¹ç•Œå€¼å’Œæº¢å‡ºå¤„ç†æµ‹è¯•
  let max_int = 2147483647
  let min_int = -2147483648
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„åŠ æ³•
  @azimuth.assert_eq(max_int, @azimuth.add(max_int, 1))  // æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(min_int, @azimuth.add(min_int, -1))  // ä¸‹æº¢ä¿æŠ¤
  @azimuth.assert_eq(0, @azimuth.add(max_int, min_int + 1))
  
  // æµ‹è¯•æ¥è¿‘è¾¹ç•Œçš„ä¹˜æ³•
  @azimuth.assert_eq(max_int, @azimuth.multiply(46340, 46341))  // æ¥è¿‘âˆšmax_int
  @azimuth.assert_eq(min_int, @azimuth.multiply(-46340, 46341))
  
  // æµ‹è¯•é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, -1))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(10, 0))  // é™¤é›¶ä¿æŠ¤
}

test "mathematical_properties_validation" {
  // æ•°å­¦æ€§è´¨éªŒè¯æµ‹è¯•
  let a = 12
  let b = 8
  let c = 5
  
  // åŠ æ³•äº¤æ¢å¾‹ï¼ša + b = b + a
  @azimuth.assert_eq(@azimuth.add(a, b), @azimuth.add(b, a))
  
  // ä¹˜æ³•äº¤æ¢å¾‹ï¼ša * b = b * a
  @azimuth.assert_eq(@azimuth.multiply(a, b), @azimuth.multiply(b, a))
  
  // åŠ æ³•ç»“åˆå¾‹ï¼š(a + b) + c = a + (b + c)
  @azimuth.assert_eq(
    @azimuth.add(@azimuth.add(a, b), c),
    @azimuth.add(a, @azimuth.add(b, c))
  )
  
  // ä¹˜æ³•ç»“åˆå¾‹ï¼š(a * b) * c = a * (b * c)
  @azimuth.assert_eq(
    @azimuth.multiply(@azimuth.multiply(a, b), c),
    @azimuth.multiply(a, @azimuth.multiply(b, c))
  )
  
  // åˆ†é…å¾‹ï¼ša * (b + c) = a * b + a * c
  @azimuth.assert_eq(
    @azimuth.multiply(a, @azimuth.add(b, c)),
    @azimuth.add(@azimuth.multiply(a, b), @azimuth.multiply(a, c))
  )
}

test "string_processing_and_internationalization" {
  // å­—ç¬¦ä¸²å¤„ç†å’Œå›½é™…åŒ–æµ‹è¯•
  // åŸºæœ¬å­—ç¬¦ä¸²æµ‹è¯•
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  
  // ç©ºå­—ç¬¦ä¸²å’Œç‰¹æ®Šå­—ç¬¦æµ‹è¯•
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello,  !", @azimuth.greet(" "))
  @azimuth.assert_eq_string("Hello, 123!", @azimuth.greet("123"))
  
  // Unicode å’Œå›½é™…åŒ–å­—ç¬¦æµ‹è¯•
  @azimuth.assert_eq_string("Hello, ä¸–ç•Œ!", @azimuth.greet("ä¸–ç•Œ"))
  @azimuth.assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", @azimuth.greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  @azimuth.assert_eq_string("Hello, cafÃ©!", @azimuth.greet("cafÃ©"))
  @azimuth.assert_eq_string("Hello, ğŸš€!", @azimuth.greet("ğŸš€"))
  
  // å¤æ‚å­—ç¬¦ä¸²æµ‹è¯•
  @azimuth.assert_eq_string("Hello, John Doe!", @azimuth.greet("John Doe"))
  @azimuth.assert_eq_string("Hello, user@example.com!", @azimuth.greet("user@example.com"))
}

test "business_logic_inventory_management" {
  // ä¸šåŠ¡é€»è¾‘ï¼šåº“å­˜ç®¡ç†æµ‹è¯•
  // åœºæ™¯ï¼šä»“åº“ä¸­æœ‰å¤šç§å•†å“ï¼Œéœ€è¦è®¡ç®—å­˜å‚¨éœ€æ±‚
  
  // å•†å“1ï¼š157ä»¶ï¼Œæ¯ç®±å®¹é‡24ä»¶
  let product1_quantity = 157
  let product1_capacity = 24
  let product1_boxes = @azimuth.divide_with_ceil(product1_quantity, product1_capacity)
  
  // å•†å“2ï¼š89ä»¶ï¼Œæ¯ç®±å®¹é‡16ä»¶
  let product2_quantity = 89
  let product2_capacity = 16
  let product2_boxes = @azimuth.divide_with_ceil(product2_quantity, product2_capacity)
  
  // å•†å“3ï¼š203ä»¶ï¼Œæ¯ç®±å®¹é‡32ä»¶
  let product3_quantity = 203
  let product3_capacity = 32
  let product3_boxes = @azimuth.divide_with_ceil(product3_quantity, product3_capacity)
  
  // è®¡ç®—æ€»ç®±å­æ•°
  let total_boxes = @azimuth.add(@azimuth.add(product1_boxes, product2_boxes), product3_boxes)
  @azimuth.assert_eq(23, total_boxes)
  
  // è®¡ç®—æ€»å­˜å‚¨å®¹é‡
  let total_capacity = @azimuth.add(
    @azimuth.multiply(product1_boxes, product1_capacity),
    @azimuth.add(
      @azimuth.multiply(product2_boxes, product2_capacity),
      @azimuth.multiply(product3_boxes, product3_capacity)
    )
  )
  @azimuth.assert_eq(736, total_capacity)
  
  // è®¡ç®—æ€»å•†å“æ•°
  let total_items = @azimuth.add(@azimuth.add(product1_quantity, product2_quantity), product3_quantity)
  @azimuth.assert_eq(449, total_items)
  
  // è®¡ç®—ç©ºé—´åˆ©ç”¨ç‡
  let utilization = @azimuth.divide_with_ceil(
    @azimuth.multiply(total_items, 100),
    total_capacity
  )
  @azimuth.assert_eq(61, utilization)  // çº¦61%çš„ç©ºé—´åˆ©ç”¨ç‡
}

test "error_handling_and_robustness" {
  // é”™è¯¯å¤„ç†å’Œå¥å£®æ€§æµ‹è¯•
  // é™¤é›¶é”™è¯¯å¤„ç†æµ‹è¯•
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(10, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-10, 0))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))
  
  // æå€¼è¿ç®—æµ‹è¯•
  let large_number = 100000
  @azimuth.assert_eq(200000, @azimuth.add(large_number, large_number))
  @azimuth.assert_eq(100000000, @azimuth.multiply(large_number, large_number))
  
  // è´Ÿæ•°é™¤æ³•æµ‹è¯•
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))
  @azimuth.assert_eq(-4, @azimuth.divide_with_ceil(-10, -3))
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(10, -3))
  
  // æ··åˆç¬¦å·è¿ç®—æµ‹è¯•
  @azimuth.assert_eq(-5, @azimuth.add(10, -15))
  @azimuth.assert_eq(150, @azimuth.multiply(-10, -15))
  @azimuth.assert_eq(-150, @azimuth.multiply(10, -15))
}

test "performance_and_large_data_handling" {
  // æ€§èƒ½å’Œå¤§æ•°æ®é‡å¤„ç†æµ‹è¯•
  // å¤§æ•°è¿ç®—æµ‹è¯•
  let large_num1 = 100000
  let large_num2 = 200000
  let large_num3 = 300000
  
  // å¤§æ•°åŠ æ³•é“¾
  let sum_chain = @azimuth.add(@azimuth.add(large_num1, large_num2), large_num3)
  @azimuth.assert_eq(600000, sum_chain)
  
  // å¤§æ•°ä¹˜æ³•é“¾
  let product_chain = @azimuth.multiply(@azimuth.multiply(100, 1000), @azimuth.multiply(10, 100))
  @azimuth.assert_eq(100000000, product_chain)
  
  // æ‰¹é‡è®¡ç®—æµ‹è¯•
  let batch_size = 1000
  let batch_count = 50
  let total_items = @azimuth.multiply(batch_size, batch_count)
  let items_per_container = 75
  let containers_needed = @azimuth.divide_with_ceil(total_items, items_per_container)
  
  @azimuth.assert_eq(50000, total_items)
  @azimuth.assert_eq(667, containers_needed)
  
  // æ€§èƒ½å‹åŠ›æµ‹è¯•ï¼šè¿ç»­è¿ç®—
  let mut result = 1
  result = @azimuth.add(result, 99)      // 100
  result = @azimuth.multiply(result, 10) // 1000
  result = @azimuth.add(result, 9000)    // 10000
  result = @azimuth.divide_with_ceil(result, 100) // 100
  @azimuth.assert_eq(100, result)
}

test "function_composition_and_complex_calculations" {
  // å‡½æ•°ç»„åˆå’Œå¤æ‚è®¡ç®—æµ‹è¯•
  // å¤æ‚çš„åµŒå¥—è®¡ç®—
  let base_value = 15
  
  // è®¡ç®—ï¼š((base * 2) + 10) / 3 + 5
  let step1 = @azimuth.multiply(base_value, 2)           // 30
  let step2 = @azimuth.add(step1, 10)                    // 40
  let step3 = @azimuth.divide_with_ceil(step2, 3)        // 14
  let final_result = @azimuth.add(step3, 5)              // 19
  @azimuth.assert_eq(19, final_result)
  
  // å¤æ‚çš„ä¸šåŠ¡è®¡ç®—ï¼šé¡¹ç›®æˆæœ¬ä¼°ç®—
  let labor_cost = 5000
  let material_cost = 3000
  let overhead_rate = 20  // 20%
  let profit_margin = 15  // 15%
  
  // è®¡ç®—ç›´æ¥æˆæœ¬
  let direct_cost = @azimuth.add(labor_cost, material_cost)
  @azimuth.assert_eq(8000, direct_cost)
  
  // è®¡ç®—ç®¡ç†è´¹ç”¨
  let overhead_cost = @azimuth.divide_with_ceil(
    @azimuth.multiply(direct_cost, overhead_rate),
    100
  )
  @azimuth.assert_eq(1600, overhead_cost)
  
  // è®¡ç®—æ€»æˆæœ¬
  let total_cost = @azimuth.add(direct_cost, overhead_cost)
  @azimuth.assert_eq(9600, total_cost)
  
  // è®¡ç®—æœ€ç»ˆä»·æ ¼
  let final_price = @azimuth.add(
    total_cost,
    @azimuth.divide_with_ceil(@azimuth.multiply(total_cost, profit_margin), 100)
  )
  @azimuth.assert_eq(11040, final_price)
}

test "resource_allocation_and_optimization" {
  // èµ„æºåˆ†é…å’Œä¼˜åŒ–æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—èµ„æºåˆ†é…ä¼˜åŒ–
  let total_memory = 16384  // GB
  let total_cpu_cores = 64
  let services = 5
  
  // å†…å­˜åˆ†é…ï¼ˆä½¿ç”¨å‘ä¸Šå–æ•´ç¡®ä¿æ¯ä¸ªæœåŠ¡æœ‰è¶³å¤Ÿå†…å­˜ï¼‰
  let memory_per_service = @azimuth.divide_with_ceil(total_memory, services)
  @azimuth.assert_eq(3277, memory_per_service)
  
  // CPUæ ¸å¿ƒåˆ†é…
  let cpu_per_service = @azimuth.divide_with_ceil(total_cpu_cores, services)
  @azimuth.assert_eq(13, cpu_per_service)
  
  // è®¡ç®—å®é™…åˆ†é…çš„æ€»èµ„æº
  let allocated_memory = @azimuth.multiply(memory_per_service, services)
  let allocated_cpu = @azimuth.multiply(cpu_per_service, services)
  
  @azimuth.assert_eq(16385, allocated_memory)
  @azimuth.assert_eq(65, allocated_cpu)
  
  // è®¡ç®—èµ„æºæµªè´¹ï¼ˆä½¿ç”¨åŠ æ³•ä»£æ›¿å‡æ³•ï¼‰
  let memory_waste = @azimuth.add(allocated_memory, -total_memory)
  let cpu_waste = @azimuth.add(allocated_cpu, -total_cpu_cores)
  
  @azimuth.assert_eq(1, memory_waste)
  @azimuth.assert_eq(1, cpu_waste)
  
  // ä¼˜åŒ–åçš„åˆ†é…ç­–ç•¥ï¼ˆå¢åŠ ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹ï¼‰
  let optimized_services = @azimuth.add(services, 1)
  let optimized_memory = @azimuth.divide_with_ceil(total_memory, optimized_services)
  let optimized_cpu = @azimuth.divide_with_ceil(total_cpu_cores, optimized_services)
  
  @azimuth.assert_eq(2341, optimized_memory)
  @azimuth.assert_eq(11, optimized_cpu)
}

test "real_world_application_scenarios" {
  // çœŸå®ä¸–ç•Œåº”ç”¨åœºæ™¯æµ‹è¯•
  // åœºæ™¯ï¼šæ´»åŠ¨ç­–åˆ’å’Œé¢„ç®—ç®¡ç†
  
  let participants = 187
  let chairs_per_table = 10
  let catering_cost_per_person = 25
  let venue_cost_per_hour = 150
  let event_duration_hours = 4
  let staff_count = 8
  let staff_cost_per_hour = 20
  
  // è®¡ç®—åº§ä½éœ€æ±‚
  let chairs_needed = @azimuth.divide_with_ceil(participants, chairs_per_table)
  @azimuth.assert_eq(19, chairs_needed)
  
  // è®¡ç®—å®é™…å¯ç”¨åº§ä½
  let available_chairs = @azimuth.multiply(chairs_needed, chairs_per_table)
  @azimuth.assert_eq(190, available_chairs)
  
  // è®¡ç®—é¤é¥®æˆæœ¬
  let catering_cost = @azimuth.multiply(participants, catering_cost_per_person)
  @azimuth.assert_eq(4675, catering_cost)
  
  // è®¡ç®—åœºåœ°æˆæœ¬
  let venue_cost = @azimuth.multiply(venue_cost_per_hour, event_duration_hours)
  @azimuth.assert_eq(600, venue_cost)
  
  // è®¡ç®—äººåŠ›æˆæœ¬
  let total_staff_hours = @azimuth.multiply(staff_count, event_duration_hours)
  let staff_cost = @azimuth.multiply(total_staff_hours, staff_cost_per_hour)
  @azimuth.assert_eq(640, staff_cost)
  
  // è®¡ç®—æ€»é¢„ç®—
  let total_budget = @azimuth.add(@azimuth.add(catering_cost, venue_cost), staff_cost)
  @azimuth.assert_eq(5915, total_budget)
  
  // è®¡ç®—äººå‡æˆæœ¬
  let cost_per_person = @azimuth.divide_with_ceil(total_budget, participants)
  @azimuth.assert_eq(32, cost_per_person)
  
  // è®¡ç®—å‰©ä½™åº§ä½ï¼ˆä½¿ç”¨åŠ æ³•ä»£æ›¿å‡æ³•ï¼‰
  let empty_chairs = @azimuth.add(available_chairs, -participants)
  @azimuth.assert_eq(3, empty_chairs)
  
  // è®¡ç®—é¢„ç®—ç¼“å†²ï¼ˆ10%ï¼‰
  let budget_buffer = @azimuth.divide_with_ceil(
    @azimuth.multiply(total_budget, 10),
    100
  )
  let total_budget_with_buffer = @azimuth.add(total_budget, budget_buffer)
  @azimuth.assert_eq(6507, total_budget_with_buffer)
}