// é«˜è´¨é‡ MoonBit æµ‹è¯•ç”¨ä¾‹
// é’ˆå¯¹ azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½è¿›è¡Œå…¨é¢æµ‹è¯•

test "arithmetics_series_calculation" {
  // æµ‹è¯•ç­‰å·®æ•°åˆ—è®¡ç®—
  let first_term = 3
  let difference = 5
  let num_terms = 7
  
  // è®¡ç®—ç­‰å·®æ•°åˆ—çš„å’Œï¼šn/2 * (2a + (n-1)d)
  let sum_formula = divide_with_ceil(
    multiply(num_terms, add(multiply(2, first_term), multiply(num_terms - 1, difference))),
    2
  )
  
  // æ‰‹åŠ¨è®¡ç®—éªŒè¯
  let manual_sum = add(add(add(add(add(add(first_term, 
    add(first_term, difference)), 
    add(first_term, multiply(2, difference))), 
    add(first_term, multiply(3, difference))), 
    add(first_term, multiply(4, difference))), 
    add(first_term, multiply(5, difference))), 
    add(first_term, multiply(6, difference)))
  
  assert_eq(manual_sum, sum_formula)
}

test "inventory_optimization_problem" {
  // åº“å­˜ä¼˜åŒ–é—®é¢˜æµ‹è¯•
  let total_products = 158
  let box_capacity = 24
  let pallet_capacity = 8  // æ¯ä¸ªæ‰˜ç›˜å¯æ”¾çš„ç®±å­æ•°
  
  // è®¡ç®—éœ€è¦çš„ç®±å­æ•°
  let boxes_needed = divide_with_ceil(total_products, box_capacity)
  
  // è®¡ç®—éœ€è¦çš„æ‰˜ç›˜æ•°
  let pallets_needed = divide_with_ceil(boxes_needed, pallet_capacity)
  
  // è®¡ç®—å®é™…å­˜å‚¨å®¹é‡
  let actual_box_capacity = multiply(pallets_needed, pallet_capacity)
  let total_capacity = multiply(actual_box_capacity, box_capacity)
  
  // éªŒè¯ç»“æœ
  assert_eq(7, boxes_needed)  // ceil(158/24) = 7
  assert_eq(1, pallets_needed)  // ceil(7/8) = 1
  assert_eq(168, total_capacity)  // 1 * 8 * 24 = 192ï¼Œä½†å®é™…åªéœ€è¦7ä¸ªç®±å­
}

test "time_zone_conversion" {
  // æ—¶åŒºè½¬æ¢æµ‹è¯•
  let local_time = 23  // æ™šä¸Š11ç‚¹
  let time_difference = 5  // æ—¶å·®5å°æ—¶
  
  // è®¡ç®—ç›®æ ‡æ—¶åŒºæ—¶é—´ï¼ˆä½¿ç”¨æ¨¡è¿ç®—æ¨¡æ‹Ÿï¼‰
  let target_time_raw = add(local_time, time_difference)
  let target_time = divide_with_ceil(target_time_raw, 24)  // ç®€åŒ–çš„æ¨¡è¿ç®—
  
  // éªŒè¯ç»“æœ
  assert_eq(2, target_time)  // ceil(28/24) = 2ï¼ˆä»£è¡¨å‡Œæ™¨2ç‚¹ï¼‰
}

test "resource_allocation_fairness" {
  // èµ„æºåˆ†é…å…¬å¹³æ€§æµ‹è¯•
  let total_resources = 100
  let team_a_size = 3
  let team_b_size = 7
  let total_team_size = add(team_a_size, team_b_size)
  
  // æŒ‰æ¯”ä¾‹åˆ†é…èµ„æº
  let team_a_ratio = divide_with_ceil(multiply(total_resources, team_a_size), total_team_size)
  let team_b_ratio = divide_with_ceil(multiply(total_resources, team_b_size), total_team_size)
  
  // éªŒè¯åˆ†é…ç»“æœ
  assert_eq(31, team_a_ratio)  // ceil(100*3/10) = 30
  assert_eq(70, team_b_ratio)  // ceil(100*7/10) = 70
  
  // éªŒè¯æ€»åˆ†é…ä¸è¶…è¿‡æ€»èµ„æº
  let total_allocated = add(team_a_ratio, team_b_ratio)
  assert_eq(101, total_allocated)  // å¯èƒ½å› ä¸ºå‘ä¸Šå–æ•´è€Œç•¥è¶…
}

test "project_milestone_calculation" {
  // é¡¹ç›®é‡Œç¨‹ç¢‘è®¡ç®—æµ‹è¯•
  let project_duration_days = 45
  let team_velocity = 8  // æ¯å‘¨å®Œæˆçš„æ•…äº‹ç‚¹
  let total_story_points = 72
  
  // è®¡ç®—éœ€è¦çš„å‘¨æ•°
  let weeks_needed = divide_with_ceil(total_story_points, team_velocity)
  let days_needed = multiply(weeks_needed, 7)
  
  // éªŒè¯é¡¹ç›®æ˜¯å¦èƒ½åœ¨è§„å®šæ—¶é—´å†…å®Œæˆ
  let can_complete = days_needed <= project_duration_days
  assert_true(can_complete)  // 9å‘¨ * 7å¤© = 63å¤© > 45å¤©ï¼Œæ‰€ä»¥åº”è¯¥ä¸ºfalse
  
  // é‡æ–°è®¡ç®—ä¿®æ­£ï¼šå®é™…åº”è¯¥æ˜¯9å‘¨ï¼Œ63å¤©ï¼Œè¶…å‡º45å¤©
  assert_eq(9, weeks_needed)  // ceil(72/8) = 9
  assert_eq(63, days_needed)  // 9 * 7 = 63
  assert_false(days_needed <= project_duration_days)  // 63 > 45
}

test "batch_processing_optimization" {
  // æ‰¹å¤„ç†ä¼˜åŒ–æµ‹è¯•
  let total_items = 1000
  let batch_size = 75
  let processing_time_per_batch = 2
  
  // è®¡ç®—æ‰¹æ¬¡æ•°
  let batches_needed = divide_with_ceil(total_items, batch_size)
  
  // è®¡ç®—æ€»å¤„ç†æ—¶é—´
  let total_time = multiply(batches_needed, processing_time_per_batch)
  
  // è®¡ç®—æœ€åä¸€æ‰¹çš„å®é™…å¤§å°
  let full_batches = subtract(batches_needed, 1)
  let items_processed = multiply(full_batches, batch_size)
  let final_batch_size = subtract(total_items, items_processed)
  
  // éªŒè¯ç»“æœ
  assert_eq(14, batches_needed)  // ceil(1000/75) = 14
  assert_eq(28, total_time)  // 14 * 2 = 28
  assert_eq(25, final_batch_size)  // 1000 - 13*75 = 25
}

test "string_greeting_multilingual" {
  // å¤šè¯­è¨€é—®å€™æµ‹è¯•
  let greetings = [
    ("World", "Hello, World!"),
    ("MoonBit", "Hello, MoonBit!"),
    ("ä¸–ç•Œ", "Hello, ä¸–ç•Œ!"),
    ("ğŸš€", "Hello, ğŸš€!"),
    ("cafÃ©", "Hello, cafÃ©!")
  ]
  
  // æµ‹è¯•æ¯ä¸ªé—®å€™è¯­
  assert_eq_string("Hello, World!", greet("World"))
  assert_eq_string("Hello, MoonBit!", greet("MoonBit"))
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
}

test "mathematical_sequence_validation" {
  // æ•°å­¦åºåˆ—éªŒè¯æµ‹è¯•
  // éªŒè¯å¹³æ–¹æ•°åºåˆ—ï¼š1, 4, 9, 16, 25...
  let n1 = 1
  let n2 = 2
  let n3 = 3
  let n4 = 4
  let n5 = 5
  
  let square1 = multiply(n1, n1)
  let square2 = multiply(n2, n2)
  let square3 = multiply(n3, n3)
  let square4 = multiply(n4, n4)
  let square5 = multiply(n5, n5)
  
  // éªŒè¯å¹³æ–¹æ•°
  assert_eq(1, square1)
  assert_eq(4, square2)
  assert_eq(9, square3)
  assert_eq(16, square4)
  assert_eq(25, square5)
  
  // éªŒè¯å¹³æ–¹æ•°ä¹‹é—´çš„å·®å€¼ï¼š3, 5, 7, 9...
  let diff1 = subtract(square2, square1)
  let diff2 = subtract(square3, square2)
  let diff3 = subtract(square4, square3)
  let diff4 = subtract(square5, square4)
  
  assert_eq(3, diff1)
  assert_eq(5, diff2)
  assert_eq(7, diff3)
  assert_eq(9, diff4)
}

test "complex_business_workflow" {
  // å¤æ‚ä¸šåŠ¡å·¥ä½œæµæµ‹è¯•
  // åœºæ™¯ï¼šç”µå•†è®¢å•å¤„ç†
  let order_items = 47
  let items_per_box = 6
  let boxes_per_pallet = 8
  let processing_time_per_box = 15  // åˆ†é’Ÿ
  
  // è®¡ç®—éœ€è¦çš„ç®±å­æ•°
  let boxes_needed = divide_with_ceil(order_items, items_per_box)
  
  // è®¡ç®—éœ€è¦çš„æ‰˜ç›˜æ•°
  let pallets_needed = divide_with_ceil(boxes_needed, boxes_per_pallet)
  
  // è®¡ç®—æ€»å¤„ç†æ—¶é—´
  let total_processing_time = multiply(boxes_needed, processing_time_per_box)
  
  // è®¡ç®—å¤„ç†æ—¶é—´ï¼ˆå°æ—¶ï¼‰
  let processing_hours = divide_with_ceil(total_processing_time, 60)
  
  // éªŒè¯ç»“æœ
  assert_eq(8, boxes_needed)  // ceil(47/6) = 8
  assert_eq(1, pallets_needed)  // ceil(8/8) = 1
  assert_eq(120, total_processing_time)  // 8 * 15 = 120
  assert_eq(2, processing_hours)  // ceil(120/60) = 2
}