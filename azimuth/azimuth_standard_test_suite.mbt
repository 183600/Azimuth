// Azimuth æ ‡å‡†æµ‹è¯•ç”¨ä¾‹é›†
// ä½¿ç”¨æ ‡å‡†çš„ MoonBit æµ‹è¯•è¯­æ³•

test "add_function_basic_tests" {
  // æµ‹è¯•åŸºæœ¬åŠ æ³•åŠŸèƒ½
  @azimuth.assert_eq(7, @azimuth.add(3, 4))
  @azimuth.assert_eq(0, @azimuth.add(-5, 5))
  @azimuth.assert_eq(-8, @azimuth.add(-3, -5))
  @azimuth.assert_eq(1000, @azimuth.add(500, 500))
}

test "add_function_overflow_protection" {
  // æµ‹è¯•åŠ æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•æ­£æº¢å‡º
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 100))
  
  // æµ‹è¯•è´Ÿæº¢å‡º
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, -100))
  
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(-1, @azimuth.add(max_val, min_val))
}

test "multiply_function_basic_tests" {
  // æµ‹è¯•åŸºæœ¬ä¹˜æ³•åŠŸèƒ½
  @azimuth.assert_eq(12, @azimuth.multiply(3, 4))
  @azimuth.assert_eq(-12, @azimuth.multiply(-3, 4))
  @azimuth.assert_eq(12, @azimuth.multiply(-3, -4))
  @azimuth.assert_eq(0, @azimuth.multiply(100, 0))
}

test "multiply_function_overflow_protection" {
  // æµ‹è¯•ä¹˜æ³•æº¢å‡ºä¿æŠ¤
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•å¤§æ•°ç›¸ä¹˜çš„æº¢å‡ºä¿æŠ¤
  @azimuth.assert_eq(max_val, @azimuth.multiply(50000, 50000))
  
  // æµ‹è¯•æœ€å°å€¼çš„ç‰¹æ®Šå¤„ç†
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 2))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "greet_function_tests" {
  // æµ‹è¯•é—®å€™å‡½æ•°
  @azimuth.assert_eq_string("Hello, MoonBit!", @azimuth.greet("MoonBit"))
  @azimuth.assert_eq_string("Hello, World!", @azimuth.greet("World"))
  @azimuth.assert_eq_string("Hello, !", @azimuth.greet(""))
  @azimuth.assert_eq_string("Hello, ç”¨æˆ·123!", @azimuth.greet("ç”¨æˆ·123"))
}

test "divide_with_ceil_function_tests" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•åŠŸèƒ½
  @azimuth.assert_eq(4, @azimuth.divide_with_ceil(10, 3))
  @azimuth.assert_eq(3, @azimuth.divide_with_ceil(9, 3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(-10, 3))
  @azimuth.assert_eq(-3, @azimuth.divide_with_ceil(10, -3))
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 5))
}

test "assertion_functions_tests" {
  // æµ‹è¯•æ–­è¨€å‡½æ•°
  @azimuth.assert_true(true)
  @azimuth.assert_false(false)
  @azimuth.assert_true(10 > 5)
  @azimuth.assert_false(3 > 10)
  @azimuth.assert_eq(42, 42)
  @azimuth.assert_eq_string("test", "test")
}

test "complex_arithmetic_operations" {
  // æµ‹è¯•å¤åˆç®—æœ¯è¿ç®—
  let a = 15
  let b = 25
  let c = -10
  
  // è®¡ç®— (a + b) * c
  let sum = @azimuth.add(a, b)
  let result = @azimuth.multiply(sum, c)
  @azimuth.assert_eq(-400, result)
  
  // è®¡ç®— a * b + c
  let product = @azimuth.multiply(a, b)
  let result2 = @azimuth.add(product, c)
  @azimuth.assert_eq(365, result2)
}

test "edge_cases_and_special_values" {
  // æµ‹è¯•è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æµ‹è¯•ä¸Ž0å’Œ1çš„è¿ç®—
  @azimuth.assert_eq(max_val, @azimuth.add(max_val, 0))
  @azimuth.assert_eq(min_val, @azimuth.add(min_val, 0))
  @azimuth.assert_eq(max_val, @azimuth.multiply(max_val, 1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, 1))
  
  // æµ‹è¯•-1çš„ä¹˜æ³•
  @azimuth.assert_eq(-max_val, @azimuth.multiply(max_val, -1))
  @azimuth.assert_eq(min_val, @azimuth.multiply(min_val, -1))
}

test "mathematical_properties" {
  // æµ‹è¯•æ•°å­¦æ€§è´¨
  let x = 123
  let y = 456
  let z = 789
  
  // æµ‹è¯•åŠ æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.add(x, y), @azimuth.add(y, x))
  
  // æµ‹è¯•ä¹˜æ³•äº¤æ¢å¾‹
  @azimuth.assert_eq(@azimuth.multiply(x, y), @azimuth.multiply(y, x))
  
  // æµ‹è¯•åˆ†é…å¾‹ a * (b + c) = a * b + a * c
  let left = @azimuth.multiply(x, @azimuth.add(y, z))
  let right = @azimuth.add(@azimuth.multiply(x, y), @azimuth.multiply(x, z))
  @azimuth.assert_eq(left, right)
}

// æ–°å¢žçš„8ä¸ªæ ‡å‡†MoonBitæµ‹è¯•ç”¨ä¾‹
test "performance_large_scale_operations" {
  // å¤§è§„æ¨¡è¿ç®—æ€§èƒ½æµ‹è¯•
  let iterations = 10000
  let sum_result = @azimuth.add(iterations, iterations)
  let product_result = @azimuth.multiply(100, iterations)
  let division_result = @azimuth.divide_with_ceil(product_result, 50)
  
  @azimuth.assert_eq(20000, sum_result)
  @azimuth.assert_eq(1000000, product_result)
  @azimuth.assert_eq(20000, division_result)
}

test "error_boundary_conditions" {
  // é”™è¯¯è¾¹ç•Œæ¡ä»¶æµ‹è¯•
  // æµ‹è¯•å„ç§å¯èƒ½å¯¼è‡´é”™è¯¯çš„è¾¹ç•Œæƒ…å†µ
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(0, 0))  // 0/0
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(1, 0))  // æ­£æ•°/0
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-1, 0))  // è´Ÿæ•°/0
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(2147483647, 0))  // æœ€å¤§å€¼/0
  @azimuth.assert_eq(0, @azimuth.divide_with_ceil(-2147483648, 0))  // æœ€å°å€¼/0
}

test "string_encoding_handling" {
  // å­—ç¬¦ä¸²ç¼–ç å¤„ç†æµ‹è¯•
  @azimuth.assert_eq_string("Hello, ðŸŒ™â­!", @azimuth.greet("ðŸŒ™â­"))
  @azimuth.assert_eq_string("Hello, \n\r\t!", @azimuth.greet("\n\r\t"))
  @azimuth.assert_eq_string("Hello, \"quotes\"!", @azimuth.greet("\"quotes\""))
  @azimuth.assert_eq_string("Hello, 'apostrophe'!", @azimuth.greet("'apostrophe'"))
  @azimuth.assert_eq_string("Hello, \\backslash\\!", @azimuth.greet("\\backslash\\"))
}

test "complex_financial_calculations" {
  // å¤æ‚é‡‘èžè®¡ç®—æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—å¤åˆ©å’Œåˆ†æœŸä»˜æ¬¾
  let principal = 10000
  let annual_rate = 5  // 5%
  let years = 3
  
  // ç®€åŒ–çš„å¤åˆ©è®¡ç®—ï¼ˆæ¯å¹´è®¡ç®—ä¸€æ¬¡ï¼‰
  let year1_end = @azimuth.add(principal, @azimuth.divide_with_ceil(@azimuth.multiply(principal, annual_rate), 100))
  let year2_end = @azimuth.add(year1_end, @azimuth.divide_with_ceil(@azimuth.multiply(year1_end, annual_rate), 100))
  let year3_end = @azimuth.add(year2_end, @azimuth.divide_with_ceil(@azimuth.multiply(year2_end, annual_rate), 100))
  
  // éªŒè¯å¤åˆ©å¢žé•¿
  @azimuth.assert_eq(10500, year1_end)  // 10000 + 5%
  @azimuth.assert_eq(11025, year2_end)  // 10500 + 5%
  @azimuth.assert_eq(11576, year3_end)  // 11025 + 5%
  
  // è®¡ç®—æœˆä¾›ï¼ˆç®€åŒ–è®¡ç®—ï¼‰
  let total_months = @azimuth.multiply(years, 12)
  let monthly_payment = @azimuth.divide_with_ceil(year3_end, total_months)
  @azimuth.assert_eq(322, monthly_payment)  // ceil(11576/36)
}

test "algorithm_complexity_analysis" {
  // ç®—æ³•å¤æ‚åº¦åˆ†æžæµ‹è¯•
  let input_sizes = [10, 100, 1000]
  
  // æ¨¡æ‹ŸO(n)ç®—æ³•
  let linear_10 = @azimuth.multiply(input_sizes[0], 2)
  let linear_100 = @azimuth.multiply(input_sizes[1], 2)
  let linear_1000 = @azimuth.multiply(input_sizes[2], 2)
  
  // æ¨¡æ‹ŸO(log n)ç®—æ³•ï¼ˆç®€åŒ–ä¸ºé™¤æ³•ï¼‰
  let log_10 = @azimuth.divide_with_ceil(input_sizes[0], 3)
  let log_100 = @azimuth.divide_with_ceil(input_sizes[1], 3)
  let log_1000 = @azimuth.divide_with_ceil(input_sizes[2], 3)
  
  // éªŒè¯å¤æ‚åº¦ç‰¹å¾
  @azimuth.assert_eq(20, linear_10)
  @azimuth.assert_eq(200, linear_100)
  @azimuth.assert_eq(2000, linear_1000)
  
  @azimuth.assert_eq(4, log_10)
  @azimuth.assert_eq(34, log_100)
  @azimuth.assert_eq(334, log_1000)
}

test "data_structure_operations" {
  // æ•°æ®ç»“æž„æ“ä½œæµ‹è¯•
  // æ¨¡æ‹Ÿæ ˆæ“ä½œ
  let stack_size = 0
  let stack_size_after_push = @azimuth.add(stack_size, 1)
  let stack_size_after_pop = subtract(stack_size_after_push, 1)
  
  @azimuth.assert_eq(1, stack_size_after_push)
  @azimuth.assert_eq(0, stack_size_after_pop)
  
  // æ¨¡æ‹Ÿé˜Ÿåˆ—æ“ä½œ
  let queue_capacity = 10
  let queue_items = 7
  let remaining_capacity = subtract(queue_capacity, queue_items)
  let can_add_more = remaining_capacity > 0
  
  @azimuth.assert_eq(3, remaining_capacity)
  @azimuth.assert_true(can_add_more)
}

test "resource_utilization_optimization" {
  // èµ„æºåˆ©ç”¨ä¼˜åŒ–æµ‹è¯•
  // åœºæ™¯ï¼šæœåŠ¡å™¨èµ„æºåˆ†é…
  let total_memory = 16384  // GB
  let servers = 5
  let memory_per_server = @azimuth.divide_with_ceil(total_memory, servers)
  
  @azimuth.assert_eq(3277, memory_per_server)  // ceil(16384/5)
  
  // è®¡ç®—å®žé™…åˆ†é…çš„æ€»å†…å­˜
  let total_allocated = @azimuth.multiply(memory_per_server, servers)
  let memory_waste = subtract(total_allocated, total_memory)
  
  @azimuth.assert_eq(16385, total_allocated)
  @azimuth.assert_eq(1, memory_waste)
  
  // ä¼˜åŒ–åˆ†é…ç­–ç•¥
  let optimized_servers = @azimuth.add(servers, 1)
  let optimized_memory_per_server = @azimuth.divide_with_ceil(total_memory, optimized_servers)
  @azimuth.assert_eq(2341, optimized_memory_per_server)  // ceil(16384/6)
}

test "edge_case_mathematical_operations" {
  // è¾¹ç¼˜æƒ…å†µæ•°å­¦è¿ç®—æµ‹è¯•
  // æµ‹è¯•è¿žç»­è¿ç®—çš„è¾¹ç•Œæƒ…å†µ
  let initial_value = 1
  
  // è¿žç»­åŠ æ³•
  let result1 = @azimuth.add(@azimuth.add(@azimuth.add(initial_value, 1), 1), 1)
  @azimuth.assert_eq(4, result1)
  
  // è¿žç»­ä¹˜æ³•
  let result2 = @azimuth.multiply(@azimuth.multiply(@azimuth.multiply(initial_value, 2), 2), 2)
  @azimuth.assert_eq(8, result2)
  
  // æ··åˆè¿ç®—
  let result3 = @azimuth.divide_with_ceil(@azimuth.multiply(@azimuth.add(initial_value, 2), 3), 4)
  @azimuth.assert_eq(3, result3)  // ceil((1+2)*3/4) = ceil(9/4) = 3
  
  // æžå€¼è¿ç®—
  let max_int_test = @azimuth.add(2147483647, 0)
  let min_int_test = @azimuth.add(-2147483648, 0)
  
  @azimuth.assert_eq(2147483647, max_int_test)
  @azimuth.assert_eq(-2147483648, min_int_test)
}

// è¾…åŠ©å‡½æ•°ï¼šå‡æ³•
fn subtract(a : Int, b : Int) -> Int {
  a - b
}