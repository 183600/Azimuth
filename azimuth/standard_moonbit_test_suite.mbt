// æ ‡å‡† MoonBit æµ‹è¯•å¥—ä»¶ - 10ä¸ªé«˜è´¨é‡æµ‹è¯•ç”¨ä¾‹
// è¦†ç›– azimuth åº“çš„æ ¸å¿ƒåŠŸèƒ½å’Œå„ç§ä½¿ç”¨åœºæ™¯

test "basic_arithmetic_operations_comprehensive" {
  // ç»¼åˆæµ‹è¯•åŸºæœ¬ç®—æœ¯è¿ç®—
  assert_eq(15, add(8, 7))
  assert_eq(-1, add(-8, 7))
  assert_eq(56, multiply(7, 8))
  assert_eq(-56, multiply(-7, 8))
  assert_eq(0, multiply(0, 123))
  assert_eq(3, divide_with_ceil(25, 8))
  assert_eq(-3, divide_with_ceil(-25, 8))
  assert_eq(1, subtract(10, 9))
  assert_eq(-1, subtract(9, 10))
}

test "mathematical_properties_and_identities" {
  // æµ‹è¯•æ•°å­¦æ€§è´¨å’Œæ’ç­‰å¼
  let x = 42
  let y = 17
  
  // åŠ æ³•äº¤æ¢å¾‹å’Œç»“åˆå¾‹
  assert_eq(add(x, y), add(y, x))
  assert_eq(add(add(x, y), 5), add(x, add(y, 5)))
  
  // ä¹˜æ³•äº¤æ¢å¾‹å’Œç»“åˆå¾‹
  assert_eq(multiply(x, y), multiply(y, x))
  assert_eq(multiply(multiply(x, y), 2), multiply(x, multiply(y, 2)))
  
  // åˆ†é…å¾‹
  assert_eq(multiply(x, add(y, 3)), add(multiply(x, y), multiply(x, 3)))
  
  // æ’ç­‰å¼
  assert_eq(x, add(x, 0))
  assert_eq(x, multiply(x, 1))
  assert_eq(0, multiply(x, 0))
}

test "edge_cases_and_boundary_conditions" {
  // æµ‹è¯•è¾¹ç¼˜æƒ…å†µå’Œè¾¹ç•Œæ¡ä»¶
  // é›¶å€¼å¤„ç†
  assert_eq(0, add(0, 0))
  assert_eq(5, add(5, 0))
  assert_eq(-5, add(-5, 0))
  assert_eq(0, multiply(5, 0))
  assert_eq(0, divide_with_ceil(0, 5))
  assert_eq(0, divide_with_ceil(0, -5))
  
  // é™¤é›¶å¤„ç†
  assert_eq(0, divide_with_ceil(10, 0))
  assert_eq(0, divide_with_ceil(-10, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  
  // å•ä½å€¼
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(5, divide_with_ceil(5, 1))
  assert_eq(-5, divide_with_ceil(-5, 1))
}

test "string_and_unicode_comprehensive" {
  // å…¨é¢æµ‹è¯•å­—ç¬¦ä¸²å’ŒUnicodeå¤„ç†
  assert_eq_string("Hello, World!", greet("World"))
  assert_eq_string("Hello, MoonBit!", greet("MoonBit"))
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,   !", greet("  "))
  
  // Unicodeå­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ğŸš€!", greet("ğŸš€"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, Ã±oÃ±o!", greet("Ã±oÃ±o"))
  
  // ç‰¹æ®Šå­—ç¬¦æµ‹è¯•
  assert_eq_string("Hello, @#$%!", greet("@#$%"))
  assert_eq_string("Hello, \n\t!", greet("\n\t"))
  assert_eq_string("Hello, \"quoted\"!", greet("\"quoted\""))
}

test "business_logic_inventory_management" {
  // ä¸šåŠ¡é€»è¾‘ï¼šåº“å­˜ç®¡ç†åœºæ™¯æµ‹è¯•
  let total_products = 157
  let box_capacity = 24
  let warehouses = 3
  
  // è®¡ç®—æ¯ä¸ªä»“åº“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_per_warehouse = divide_with_ceil(total_products, warehouses)
  assert_eq(53, boxes_per_warehouse)  // ceil(157/3) = 53
  
  // è®¡ç®—æ¯ä¸ªä»“åº“éœ€è¦çš„ç®±å­æ•°é‡ï¼ˆåŸºäºå®¹é‡ï¼‰
  let boxes_needed = divide_with_ceil(total_products, box_capacity)
  assert_eq(7, boxes_needed)  // ceil(157/24) = 7
  
  // éªŒè¯æ€»å®¹é‡
  let total_capacity = multiply(boxes_needed, box_capacity)
  assert_eq(168, total_capacity)
  
  // éªŒè¯å‰©ä½™ç©ºé—´
  let remaining_space = subtract(total_capacity, total_products)
  assert_eq(11, remaining_space)
  
  // è®¡ç®—ç©ºé—´åˆ©ç”¨ç‡
  let utilization = multiply(divide_with_ceil(multiply(total_products, 100), total_capacity), 1)
  assert_eq(93, utilization)  // floor(15700/168) = 93%
}

test "financial_calculations_and_budgeting" {
  // é‡‘èè®¡ç®—å’Œé¢„ç®—åœºæ™¯æµ‹è¯•
  let project_budget = 50000
  let team_members = 8
  let project_duration_months = 6
  
  // è®¡ç®—æ¯äººæ¯æœˆé¢„ç®—
  let total_person_months = multiply(team_members, project_duration_months)
  let budget_per_person_month = divide_with_ceil(project_budget, total_person_months)
  assert_eq(1042, budget_per_person_month)  // ceil(50000/48)
  
  // è®¡ç®—æ€»åˆ†é…é¢„ç®—
  let total_allocated = multiply(budget_per_person_month, total_person_months)
  assert_eq(50016, total_allocated)
  
  // è®¡ç®—é¢„ç®—æº¢å‡º
  let budget_overflow = subtract(total_allocated, project_budget)
  assert_eq(16, budget_overflow)
  
  // è®¡ç®—åº”æ€¥å‚¨å¤‡é‡‘ï¼ˆ10%ï¼‰
  let emergency_fund = divide_with_ceil(multiply(project_budget, 10), 100)
  assert_eq(5000, emergency_fund)
  
  // è®¡ç®—æ€»éœ€æ±‚
  let total_required = add(project_budget, emergency_fund)
  assert_eq(55000, total_required)
}

test "complex_calculation_pipeline" {
  // å¤æ‚è®¡ç®—æµæ°´çº¿æµ‹è¯•
  let initial_value = 12
  
  // è®¡ç®—æµæ°´çº¿ï¼š((value * 3 + 8) / 5) * 2 - 3
  let step1 = multiply(initial_value, 3)      // 36
  let step2 = add(step1, 8)                   // 44
  let step3 = divide_with_ceil(step2, 5)      // 9 (ceil(44/5))
  let step4 = multiply(step3, 2)              // 18
  let final_result = subtract(step4, 3)       // 15
  
  assert_eq(15, final_result)
  
  // éªŒè¯ä¸­é—´æ­¥éª¤
  assert_eq(36, step1)
  assert_eq(44, step2)
  assert_eq(9, step3)
  assert_eq(18, step4)
}

test "resource_optimization_and_allocation" {
  // èµ„æºä¼˜åŒ–å’Œåˆ†é…æµ‹è¯•
  let total_resources = 1000
  let projects = 4
  let min_resources_per_project = 200
  
  // è®¡ç®—æ¯ä¸ªé¡¹ç›®çš„åŸºç¡€èµ„æº
  let base_resources = divide_with_ceil(total_resources, projects)
  assert_eq(250, base_resources)  // ceil(1000/4)
  
  // éªŒè¯æ‰€æœ‰é¡¹ç›®éƒ½èƒ½æ»¡è¶³æœ€å°èµ„æºéœ€æ±‚
  assert_true(base_resources >= min_resources_per_project)
  
  // è®¡ç®—æ€»åˆ†é…èµ„æº
  let total_allocated = multiply(base_resources, projects)
  assert_eq(1000, total_allocated)
  
  // è®¡ç®—èµ„æºä½™ç¼º
  let resource_balance = subtract(total_allocated, total_resources)
  assert_eq(0, resource_balance)
  
  // å¦‚æœæœ‰é¢å¤–èµ„æºï¼Œé‡æ–°åˆ†é…
  let additional_resources = 150
  let new_total = add(total_resources, additional_resources)
  let new_allocation = divide_with_ceil(new_total, projects)
  assert_eq(288, new_allocation)  // ceil(1150/4)
}

test "error_handling_and_robustness" {
  // é”™è¯¯å¤„ç†å’Œå¥å£®æ€§æµ‹è¯•
  // æµ‹è¯•å„ç§å¼‚å¸¸è¾“å…¥æƒ…å†µ
  
  // é™¤é›¶çš„å„ç§æƒ…å†µ
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, divide_with_ceil(2147483647, 0))
  assert_eq(0, divide_with_ceil(-2147483648, 0))
  
  // æå€¼æµ‹è¯•
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(1, divide_with_ceil(-1, -1))
  assert_eq(-1, divide_with_ceil(1, -1))
  assert_eq(-1, divide_with_ceil(-1, 1))
  
  // å¤§æ•°è¿ç®—
  assert_eq(2000000, add(1000000, 1000000))
  assert_eq(1000000000000, multiply(1000000, 1000000))
  assert_eq(1000000, divide_with_ceil(1000000, 1))
  
  // å­—ç¬¦ä¸²è¾¹ç•Œæƒ…å†µ
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello, a!", greet("a"))
  assert_eq_string("Hello, A!", greet("A"))
}

test "real_world_application_scenarios" {
  // çœŸå®ä¸–ç•Œåº”ç”¨åœºæ™¯ç»¼åˆæµ‹è¯•
  // åœºæ™¯ï¼šæ´»åŠ¨ç­–åˆ’å’Œèµ„æºåˆ†é…
  
  let event_participants = 87
  let tables_available = 10
  let chairs_per_table = 8
  let budget_per_participant = 50
  let venue_cost_per_hour = 200
  let event_duration_hours = 4
  
  // è®¡ç®—éœ€è¦çš„æ¡Œå­æ•°é‡
  let tables_needed = divide_with_ceil(event_participants, chairs_per_table)
  assert_eq(11, tables_needed)  // ceil(87/8)
  
  // éªŒè¯æ¡Œå­æ•°é‡æ˜¯å¦è¶³å¤Ÿ
  assert_true(tables_needed <= tables_available)
  
  // è®¡ç®—æ€»åº§ä½æ•°
  let total_seats = multiply(tables_needed, chairs_per_table)
  assert_eq(88, total_seats)
  
  // è®¡ç®—å‰©ä½™åº§ä½
  let remaining_seats = subtract(total_seats, event_participants)
  assert_eq(1, remaining_seats)
  
  // è®¡ç®—å‚ä¸è€…æ€»é¢„ç®—
  let total_participant_budget = multiply(event_participants, budget_per_participant)
  assert_eq(4350, total_participant_budget)
  
  // è®¡ç®—åœºåœ°æ€»æˆæœ¬
  let total_venue_cost = multiply(venue_cost_per_hour, event_duration_hours)
  assert_eq(800, total_venue_cost)
  
  // è®¡ç®—æ´»åŠ¨æ€»æˆæœ¬
  let total_event_cost = add(total_participant_budget, total_venue_cost)
  assert_eq(5150, total_event_cost)
  
  // è®¡ç®—äººå‡å®é™…æˆæœ¬
  let actual_cost_per_person = divide_with_ceil(total_event_cost, event_participants)
  assert_eq(60, actual_cost_per_person)  // ceil(5150/87)
  
  // éªŒè¯é¢„ç®—å……è¶³æ€§
  assert_true(actual_cost_per_person <= budget_per_participant + 20)  // å…è®¸20å…ƒæº¢å‡º
}