// Azimuth å¢žå¼ºæ ‡å‡†æµ‹è¯•ç”¨ä¾‹
// é«˜è´¨é‡çš„ MoonBit æµ‹è¯•ï¼Œè¦†ç›–å„ç§è¾¹ç•Œæƒ…å†µå’Œå®žé™…åº”ç”¨åœºæ™¯

test "add_function_overflow_protection" {
  // æµ‹è¯•åŠ æ³•å‡½æ•°çš„æº¢å‡ºä¿æŠ¤
  assert_eq(2147483646, add(2147483645, 1))  // æŽ¥è¿‘ Int æœ€å¤§å€¼
  assert_eq(-2147483647, add(-2147483646, -1))  // æŽ¥è¿‘ Int æœ€å°å€¼
  assert_eq(0, add(2147483647, -2147483647))  // æœ€å¤§å€¼ä¸Žæœ€å°å€¼ç›¸åŠ 
  assert_eq(100000, add(99999, 1))  // 5ä½æ•°è¾¹ç•Œ
}

test "multiply_function_power_operations" {
  // æµ‹è¯•ä¹˜æ³•å‡½æ•°çš„å¹‚è¿ç®—
  assert_eq(1, multiply(1, 1))  // 1çš„å¹³æ–¹
  assert_eq(4, multiply(2, 2))  // 2çš„å¹³æ–¹
  assert_eq(9, multiply(3, 3))  // 3çš„å¹³æ–¹
  assert_eq(16, multiply(4, 4))  // 4çš„å¹³æ–¹
  assert_eq(1024, multiply(32, 32))  // 32çš„å¹³æ–¹
  assert_eq(-1024, multiply(-32, 32))  // è´Ÿæ•°ä¹˜æ³•
}

test "greet_function_empty_and_whitespace" {
  // æµ‹è¯•é—®å€™å‡½æ•°çš„ç©ºå­—ç¬¦ä¸²å’Œç©ºç™½å­—ç¬¦å¤„ç†
  assert_eq_string("Hello, !", greet(""))
  assert_eq_string("Hello,  !", greet(" "))
  assert_eq_string("Hello,   !", greet("  "))
  assert_eq_string("Hello, \t!", greet("\t"))
  assert_eq_string("Hello, \n!", greet("\n"))
  assert_eq_string("Hello, \r!", greet("\r"))
}

test "divide_with_ceil_fractional_precision" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„å°æ•°ç²¾åº¦å¤„ç†
  assert_eq(1, divide_with_ceil(1, 2))  // 0.5 -> 1
  assert_eq(2, divide_with_ceil(3, 2))  // 1.5 -> 2
  assert_eq(3, divide_with_ceil(5, 2))  // 2.5 -> 3
  assert_eq(4, divide_with_ceil(7, 2))  // 3.5 -> 4
  assert_eq(5, divide_with_ceil(9, 2))  // 4.5 -> 5
  assert_eq(100, divide_with_ceil(199, 2))  // 99.5 -> 100
}

test "resource_allocation_optimization" {
  // èµ„æºåˆ†é…ä¼˜åŒ–åœºæ™¯æµ‹è¯•
  // åœºæ™¯ï¼šäº‘æœåŠ¡å™¨èµ„æºåˆ†é…
  let total_memory = 64000  // GB
  let servers = 13
  let memory_per_server = divide_with_ceil(total_memory, servers)
  
  assert_eq(4924, memory_per_server)  // ceil(64000/13)
  
  // è®¡ç®—å®žé™…åˆ†é…çš„æ€»å†…å­˜
  let total_allocated = multiply(memory_per_server, servers)
  let memory_waste = subtract(total_allocated, total_memory)
  
  assert_eq(64012, total_allocated)
  assert_eq(12, memory_waste)
  
  // ä¼˜åŒ–åŽçš„åˆ†é…ç­–ç•¥
  let optimized_servers = add(servers, 2)
  let optimized_memory_per_server = divide_with_ceil(total_memory, optimized_servers)
  assert_eq(4000, optimized_memory_per_server)  // ceil(64000/15)
}

test "complex_inventory_management" {
  // å¤æ‚åº“å­˜ç®¡ç†åœºæ™¯æµ‹è¯•
  // åœºæ™¯ï¼šå¤šäº§å“ä»“åº“ç®¡ç†
  let product_a = 127
  let product_b = 89
  let product_c = 234
  let box_capacity = 25
  
  // è®¡ç®—æ¯ç§äº§å“éœ€è¦çš„ç®±å­æ•°é‡
  let boxes_a = divide_with_ceil(product_a, box_capacity)  // ceil(127/25) = 6
  let boxes_b = divide_with_ceil(product_b, box_capacity)  // ceil(89/25) = 4
  let boxes_c = divide_with_ceil(product_c, box_capacity)  // ceil(234/25) = 10
  
  assert_eq(6, boxes_a)
  assert_eq(4, boxes_b)
  assert_eq(10, boxes_c)
  
  // è®¡ç®—æ€»ç®±å­æ•°å’Œæ€»å®¹é‡
  let total_boxes = add(add(boxes_a, boxes_b), boxes_c)
  let total_capacity = multiply(total_boxes, box_capacity)
  
  assert_eq(20, total_boxes)
  assert_eq(500, total_capacity)
  
  // è®¡ç®—æ€»äº§å“æ•°
  let total_products = add(add(product_a, product_b), product_c)
  assert_eq(450, total_products)
  
  // è®¡ç®—å‰©ä½™ç©ºé—´
  let remaining_space = subtract(total_capacity, total_products)
  assert_eq(50, remaining_space)
}

test "mathematical_sequence_calculation" {
  // æ•°å­¦åºåˆ—è®¡ç®—æµ‹è¯•
  // åœºæ™¯ï¼šè®¡ç®—ç­‰å·®æ•°åˆ—å’Œç­‰æ¯”æ•°åˆ—
  
  // ç­‰å·®æ•°åˆ—ï¼š2, 5, 8, 11, 14 (å…¬å·®ä¸º3)
  let arithmetic_sum = add(add(add(add(2, 5), 8), 11), 14)
  assert_eq(40, arithmetic_sum)
  
  // ç­‰æ¯”æ•°åˆ—ï¼š2, 4, 8, 16, 32 (å…¬æ¯”ä¸º2)
  let geometric_sum = add(add(add(add(2, 4), 8), 16), 32)
  assert_eq(62, geometric_sum)
  
  // å¤æ‚è®¡ç®—ï¼šç»“åˆåŠ æ³•å’Œä¹˜æ³•
  let complex_result = add(multiply(3, 4), multiply(5, 6))
  assert_eq(42, complex_result)  // 3*4 + 5*6 = 12 + 30 = 42
}

test "error_handling_comprehensive" {
  // ç»¼åˆé”™è¯¯å¤„ç†æµ‹è¯•
  // æµ‹è¯•å„ç§é”™è¯¯æƒ…å†µå’Œè¾¹ç•Œæ¡ä»¶
  
  // é™¤é›¶é”™è¯¯çš„æ‰€æœ‰æƒ…å†µ
  assert_eq(0, divide_with_ceil(0, 0))  // 0/0
  assert_eq(0, divide_with_ceil(1, 0))  // 1/0
  assert_eq(0, divide_with_ceil(-1, 0))  // -1/0
  assert_eq(0, divide_with_ceil(100, 0))  // 100/0
  assert_eq(0, divide_with_ceil(-100, 0))  // -100/0
  
  // æžå€¼æµ‹è¯•
  assert_eq(1, divide_with_ceil(1, 1))  // æœ€å°æ­£æ•°ç›¸é™¤
  assert_eq(1, divide_with_ceil(-1, -1))  // æœ€å°è´Ÿæ•°ç›¸é™¤
  assert_eq(0, divide_with_ceil(0, 1))  // é›¶é™¤ä»¥æ­£æ•°
  assert_eq(0, divide_with_ceil(0, -1))  // é›¶é™¤ä»¥è´Ÿæ•°
  
  // å¤§æ•°æµ‹è¯•
  assert_eq(1, divide_with_ceil(2147483647, 2147483647))  // æœ€å¤§å€¼è‡ªé™¤
  assert_eq(2, divide_with_ceil(2147483647, 2147483646))  // æŽ¥è¿‘æœ€å¤§å€¼ç›¸é™¤
}

test "string_encoding_internationalization" {
  // å­—ç¬¦ä¸²ç¼–ç å’Œå›½é™…åŒ–æµ‹è¯•
  // æµ‹è¯•å„ç§å­—ç¬¦ç¼–ç å’Œå›½é™…åŒ–å­—ç¬¦ä¸²
  
  // ä¸­æ–‡å­—ç¬¦
  assert_eq_string("Hello, ä½ å¥½ä¸–ç•Œ!", greet("ä½ å¥½ä¸–ç•Œ"))
  assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", greet("ä¸­æ–‡æµ‹è¯•"))
  
  // æ—¥æ–‡å­—ç¬¦
  assert_eq_string("Hello, ã“ã‚“ã«ã¡ã¯!", greet("ã“ã‚“ã«ã¡ã¯"))
  assert_eq_string("Hello, æ—¥æœ¬èªž!", greet("æ—¥æœ¬èªž"))
  
  // éŸ©æ–‡å­—ç¬¦
  assert_eq_string("Hello, ì•ˆë…•í•˜ì„¸ìš”!", greet("ì•ˆë…•í•˜ì„¸ìš”"))
  assert_eq_string("Hello, í•œêµ­ì–´!", greet("í•œêµ­ì–´"))
  
  // é˜¿æ‹‰ä¼¯å­—ç¬¦
  assert_eq_string("Hello, Ù…Ø±Ø­Ø¨Ø§!", greet("Ù…Ø±Ø­Ø¨Ø§"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  
  // å°åœ°è¯­å­—ç¬¦
  assert_eq_string("Hello, à¤¨à¤®à¤¸à¥à¤¤à¥‡!", greet("à¤¨à¤®à¤¸à¥à¤¤à¥‡"))
  assert_eq_string("Hello, à¤¹à¤¿à¤¨à¥à¤¦à¥€!", greet("à¤¹à¤¿à¤¨à¥à¤¦à¥€"))
  
  // æ··åˆå­—ç¬¦å’Œè¡¨æƒ…ç¬¦å·
  assert_eq_string("Hello, HelloðŸŒWorld!", greet("HelloðŸŒWorld"))
  assert_eq_string("Hello, ðŸŽ‰ðŸš€ðŸŒŸ!", greet("ðŸŽ‰ðŸš€ðŸŒŸ"))
}

// è¾…åŠ©å‡½æ•°ï¼šå‡æ³•
fn subtract(a : Int, b : Int) -> Int {
  a - b
}