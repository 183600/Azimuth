// ä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½çš„ç»¼åˆæµ‹è¯•ç”¨ä¾‹
// æµ‹è¯• azimuth åŒ…çš„å…³é”®åŠŸèƒ½å’Œè¾¹ç•Œæƒ…å†µ

test "add_extreme_boundary_values" {
  // æµ‹è¯•åŠ æ³•çš„æç«¯è¾¹ç•Œå€¼
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æ¥è¿‘æœ€å¤§å€¼çš„åŠ æ³•
  assert_eq(max_val, add(max_val - 10, 10))
  assert_eq(max_val, add(max_val - 100, 100))
  assert_eq(max_val, add(max_val - 1000, 1000))
  
  // æ¥è¿‘æœ€å°å€¼çš„åŠ æ³•
  assert_eq(min_val, add(min_val + 10, -10))
  assert_eq(min_val, add(min_val + 100, -100))
  
  // æ··åˆç¬¦å·çš„è¾¹ç•Œæµ‹è¯•
  assert_eq(max_val - 1, add(max_val, -1))
  assert_eq(min_val + 1, add(min_val, 1))
}

test "multiply_precision_boundary" {
  // æµ‹è¯•ä¹˜æ³•çš„ç²¾åº¦è¾¹ç•Œ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // å¤§æ•°ç›¸ä¹˜çš„è¾¹ç•Œæƒ…å†µ
  assert_eq(max_val, multiply(46340, 46341)) // sqrt(max_val) * (sqrt(max_val) + 1)
  assert_eq(max_val, multiply(65536, 32768)) // 2^16 * 2^15
  
  // è´Ÿæ•°ä¹˜æ³•è¾¹ç•Œ
  assert_eq(min_val, multiply(-46340, 46341))
  assert_eq(min_val, multiply(46340, -46341))
  
  // æœ€å°å€¼ç›¸å…³æµ‹è¯•
  assert_eq(min_val, multiply(min_val, 2))
  assert_eq(min_val, multiply(min_val, -2))
  assert_eq(0, multiply(min_val, 0))
}

test "greet_special_characters" {
  // æµ‹è¯• greet å‡½æ•°çš„ç‰¹æ®Šå­—ç¬¦å¤„ç†
  assert_eq_string("Hello, \n\t\r!", greet("\n\t\r"))
  assert_eq_string("Hello, \"\'!", greet("\"\'"))
  assert_eq_string("Hello, \u{1F600}!", greet("\u{1F600}")) // emoji
  assert_eq_string("Hello, ä¸­æ–‡æµ‹è¯•!", greet("ä¸­æ–‡æµ‹è¯•"))
  assert_eq_string("Hello, ğŸš€ğŸŒ™!", greet("ğŸš€ğŸŒ™"))
  assert_eq_string("Hello, null\\0char!", greet("null\\0char"))
}

test "divide_with_ceil_edge_cases" {
  // æµ‹è¯•å‘ä¸Šå–æ•´é™¤æ³•çš„è¾¹ç•Œæƒ…å†µ
  let max_val = 2147483647
  let min_val = -2147483648
  
  // æå€¼æµ‹è¯•
  assert_eq(max_val, divide_with_ceil(max_val, 1))
  assert_eq(min_val, divide_with_ceil(min_val, 1))
  assert_eq(-max_val, divide_with_ceil(-max_val, 1))
  
  // å¤§æ•°é™¤æ³•
  assert_eq(1073741824, divide_with_ceil(max_val, 2))
  assert_eq(715827883, divide_with_ceil(max_val, 3))
  
  // è´Ÿæ•°é™¤æ³•çš„ç‰¹æ®Šå¤„ç†
  assert_eq(-1073741824, divide_with_ceil(min_val, 2))
  assert_eq(-715827882, divide_with_ceil(min_val, 3))
  
  // å°æ•°å€¼æµ‹è¯•
  assert_eq(1, divide_with_ceil(1, max_val))
  assert_eq(-1, divide_with_ceil(-1, max_val))
}

test "complex_mathematical_expressions" {
  // æµ‹è¯•å¤æ‚çš„æ•°å­¦è¡¨è¾¾å¼
  let a = 100
  let b = 25
  let c = 4
  
  // å¤šå±‚åµŒå¥—è¿ç®—
  assert_eq(500, multiply(add(a, b), c))
  assert_eq(125, add(multiply(a, b), divide_with_ceil(c, 2)))
  assert_eq(30, divide_with_ceil(add(multiply(a, b), c), 85))
  
  // è´Ÿæ•°æ··åˆè¿ç®—
  assert_eq(-300, multiply(add(-a, b), c))
  assert_eq(-75, add(multiply(-a, b), divide_with_ceil(c, 2)))
}

test "error_handling_robustness" {
  // æµ‹è¯•é”™è¯¯å¤„ç†çš„å¥å£®æ€§
  let max_val = 2147483647
  let min_val = -2147483648
  
  // è¿ç»­æº¢å‡ºæ“ä½œ
  let result1 = add(max_val, 1) // åº”è¯¥è¿”å› max_val
  let result2 = add(result1, 1) // åº”è¯¥ä»ç„¶è¿”å› max_val
  assert_eq(max_val, result2)
  
  // è¿ç»­ä¹˜æ³•æº¢å‡º
  let result3 = multiply(max_val, 2) // åº”è¯¥è¿”å› max_val
  let result4 = multiply(result3, 2) // åº”è¯¥ä»ç„¶è¿”å› max_val
  assert_eq(max_val, result4)
  
  // æœ€å°å€¼çš„è¿ç»­æ“ä½œ
  let result5 = add(min_val, 0) // åº”è¯¥è¿”å› min_val
  let result6 = multiply(result5, 1) // åº”è¯¥ä»ç„¶è¿”å› min_val
  assert_eq(min_val, result6)
}

test "performance_critical_operations" {
  // æµ‹è¯•æ€§èƒ½å…³é”®æ“ä½œçš„æ­£ç¡®æ€§
  // è¿™äº›æµ‹è¯•ç¡®ä¿å¸¸ç”¨æ“ä½œçš„æ­£ç¡®æ€§
  
  // å¿«é€Ÿè·¯å¾„æµ‹è¯•ï¼ˆé›¶å€¼ã€å•ä½å€¼ï¼‰
  assert_eq(42, add(42, 0))
  assert_eq(42, add(0, 42))
  assert_eq(42, multiply(42, 1))
  assert_eq(42, multiply(1, 42))
  assert_eq(0, multiply(42, 0))
  assert_eq(0, multiply(0, 42))
  
  // è´Ÿä¸€å¿«é€Ÿè·¯å¾„
  assert_eq(-42, multiply(-1, 42))
  assert_eq(-42, multiply(42, -1))
  assert_eq(42, multiply(-1, -42))
  
  // é™¤æ³•çš„ç‰¹æ®Šæƒ…å†µ
  assert_eq(5, divide_with_ceil(10, 2))
  assert_eq(4, divide_with_ceil(8, 2))
  assert_eq(3, divide_with_ceil(6, 2))
}

test "unicode_string_comprehensive" {
  // å…¨é¢çš„ Unicode å­—ç¬¦ä¸²æµ‹è¯•
  assert_eq_string("Hello, ğŸ‘‹!", greet("ğŸ‘‹"))
  assert_eq_string("Hello, ğŸ‰ğŸŠğŸˆ!", greet("ğŸ‰ğŸŠğŸˆ"))
  assert_eq_string("Hello, Î±Î²Î³Î´Îµ!", greet("Î±Î²Î³Î´Îµ")) // å¸Œè…Šå­—æ¯
  assert_eq_string("Hello, ã‚ã„ã†ãˆãŠ!", greet("ã‚ã„ã†ãˆãŠ")) // æ—¥æ–‡å¹³å‡å
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©")) // é˜¿æ‹‰ä¼¯æ–‡
  assert_eq_string("Hello, ×¢×‘×¨×™×ª!", greet("×¢×‘×¨×™×ª")) // å¸Œä¼¯æ¥æ–‡
  assert_eq_string("Hello, ğŸŒğŸŒğŸŒ!", greet("ğŸŒğŸŒğŸŒ")) // åœ°çƒemoji
}

test "mathematical_invariants" {
  // æµ‹è¯•æ•°å­¦ä¸å˜é‡
  let max_val = 2147483647
  let min_val = -2147483648
  
  // åŠ æ³•ä¸å˜é‡ï¼ˆåœ¨å®‰å…¨èŒƒå›´å†…ï¼‰
  for i = 0; i < 100; i = i + 1 {
    let x = i - 50 // -50 åˆ° 49
    let y = 25
    assert_eq(add(x, y), add(y, x)) // äº¤æ¢å¾‹
    assert_eq(add(add(x, y), 10), add(x, add(y, 10))) // ç»“åˆå¾‹
  }
  
  // ä¹˜æ³•ä¸å˜é‡ï¼ˆåœ¨å®‰å…¨èŒƒå›´å†…ï¼‰
  for i = 1; i < 10; i = i + 1 {
    let x = i
    let y = 3
    assert_eq(multiply(x, y), multiply(y, x)) // äº¤æ¢å¾‹
    assert_eq(multiply(multiply(x, y), 2), multiply(x, multiply(y, 2))) // ç»“åˆå¾‹
  }
  
  // åˆ†é…å¾‹ï¼ˆåœ¨å®‰å…¨èŒƒå›´å†…ï¼‰
  for i = 0; i < 10; i = i + 1 {
    let x = i
    let y = 2
    let z = 3
    assert_eq(multiply(x, add(y, z)), add(multiply(x, y), multiply(x, z)))
  }
}