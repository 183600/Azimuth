// æ ‡å‡† MoonBit æµ‹è¯•ç”¨ä¾‹ - ä¸º azimuth åº“æ·»åŠ çš„é«˜è´¨é‡æµ‹è¯•
// åŒ…å«è¾¹ç•Œæƒ…å†µã€å®é™…åº”ç”¨åœºæ™¯å’Œæ•°å­¦æ€§è´¨éªŒè¯

test "subtract_function_comprehensive" {
  // å…¨é¢æµ‹è¯•å‡æ³•å‡½æ•°
  assert_eq(5, subtract(10, 5))
  assert_eq(-5, subtract(5, 10))
  assert_eq(0, subtract(5, 5))
  assert_eq(15, subtract(10, -5))
  assert_eq(-15, subtract(-10, 5))
  assert_eq(0, subtract(0, 0))
}

test "complex_inventory_calculation" {
  // å¤æ‚åº“å­˜è®¡ç®—åœºæ™¯
  let initial_stock = 150
  let sold_items = 47
  let returned_items = 8
  let new_shipment = 75
  
  // è®¡ç®—æœ€ç»ˆåº“å­˜
  let after_sales = subtract(initial_stock, sold_items)
  let after_returns = add(after_sales, returned_items)
  let final_stock = add(after_returns, new_shipment)
  
  assert_eq(186, final_stock)  // 150 - 47 + 8 + 75 = 186
}

test "pricing_strategy_calculation" {
  // å®šä»·ç­–ç•¥è®¡ç®—æµ‹è¯•
  let cost_price = 120
  let markup_percentage = 25
  let bulk_discount = 15
  
  // è®¡ç®—æ ‡ä»·ï¼ˆæˆæœ¬åŠ æˆï¼‰
  let markup_amount = divide_with_ceil(multiply(cost_price, markup_percentage), 100)
  let list_price = add(cost_price, markup_amount)
  
  // è®¡ç®—æ‰¹é‡æŠ˜æ‰£ä»·æ ¼
  let discount_amount = divide_with_ceil(multiply(list_price, bulk_discount), 100)
  let final_price = subtract(list_price, discount_amount)
  
  assert_eq(150, list_price)     // 120 + 25% = 150
  assert_eq(128, final_price)    // 150 - 15% = 127.5 -> ceil = 128
}

test "resource_scheduling_optimization" {
  // èµ„æºè°ƒåº¦ä¼˜åŒ–æµ‹è¯•
  let total_tasks = 89
  let team_members = 5
  let working_days = 4
  
  // è®¡ç®—æ¯äººæ¯å¤©éœ€è¦å®Œæˆçš„ä»»åŠ¡æ•°
  let total_capacity = multiply(team_members, working_days)
  let tasks_per_person_per_day = divide_with_ceil(total_tasks, total_capacity)
  
  assert_eq(5, tasks_per_person_per_day)  // ceil(89/20) = 5
  
  // éªŒè¯æ€»å¤„ç†èƒ½åŠ›
  let actual_capacity = multiply(tasks_per_person_per_day, total_capacity)
  assert_eq(100, actual_capacity)
  
  // è®¡ç®—å‰©ä½™å¤„ç†èƒ½åŠ›
  let spare_capacity = subtract(actual_capacity, total_tasks)
  assert_eq(11, spare_capacity)
}

test "mathematical_identities_verification" {
  // æ•°å­¦æ’ç­‰å¼éªŒè¯
  let x = 42
  let y = 17
  
  // åŠ æ³•æ’ç­‰å¼
  assert_eq(x, add(x, 0))
  assert_eq(x, subtract(add(x, y), y))
  
  // ä¹˜æ³•æ’ç­‰å¼
  assert_eq(x, multiply(x, 1))
  assert_eq(x, divide_with_ceil(multiply(x, y), y)) when y > 0
  assert_eq(0, multiply(x, 0))
  
  // åˆ†é…å¾‹éªŒè¯
  assert_eq(
    multiply(x, add(y, 3)),
    add(multiply(x, y), multiply(x, 3))
  )
}

test "error_handling_edge_cases" {
  // é”™è¯¯å¤„ç†å’Œè¾¹ç¼˜æƒ…å†µæµ‹è¯•
  // é™¤é›¶é”™è¯¯çš„å…¨é¢æµ‹è¯•
  assert_eq(0, divide_with_ceil(0, 0))
  assert_eq(0, divide_with_ceil(100, 0))
  assert_eq(0, divide_with_ceil(-100, 0))
  
  // æå€¼æµ‹è¯•
  assert_eq(1, divide_with_ceil(1, 1))
  assert_eq(-1, divide_with_ceil(-1, 1))
  assert_eq(1, divide_with_ceil(-1, -1))
  
  // å¤§æ•°è¿ç®—æµ‹è¯•
  assert_eq(1000000, multiply(1000, 1000))
  assert_eq(2000000, add(1000000, 1000000))
  assert_eq(0, subtract(1000000, 1000000))
}

test "internationalization_support" {
  // å›½é™…åŒ–æ”¯æŒæµ‹è¯•
  assert_eq_string("Hello, ä¸–ç•Œ!", greet("ä¸–ç•Œ"))
  assert_eq_string("Hello, ĞœĞ¾ÑĞºĞ²Ğ°!", greet("ĞœĞ¾ÑĞºĞ²Ğ°"))
  assert_eq_string("Hello, cafÃ©!", greet("cafÃ©"))
  assert_eq_string("Hello, Ã±oÃ±o!", greet("Ã±oÃ±o"))
  assert_eq_string("Hello, ğŸŒ™â­!", greet("ğŸŒ™â­"))
  assert_eq_string("Hello, Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©!", greet("Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"))
  assert_eq_string("Hello, à¤¹à¤¿à¤¨à¥à¤¦à¥€!", greet("à¤¹à¤¿à¤¨à¥à¤¦à¥€"))
}

test "performance_benchmark_operations" {
  // æ€§èƒ½åŸºå‡†æ“ä½œæµ‹è¯•
  let base_value = 1000
  
  // è¿ç»­è¿ç®—æ€§èƒ½æµ‹è¯•
  let result1 = add(add(add(base_value, 100), 200), 300)
  let result2 = multiply(multiply(multiply(base_value, 2), 3), 4)
  let result3 = divide_with_ceil(divide_with_ceil(divide_with_ceil(base_value, 10), 5), 2)
  
  assert_eq(1600, result1)  // 1000 + 100 + 200 + 300
  assert_eq(24000, result2) // 1000 * 2 * 3 * 4
  assert_eq(10, result3)    // ceil(ceil(ceil(1000/10)/5)/2) = 10
}

test "business_workflow_simulation" {
  // ä¸šåŠ¡å·¥ä½œæµç¨‹æ¨¡æ‹Ÿæµ‹è¯•
  // åœºæ™¯ï¼šè®¢å•å¤„ç†æµç¨‹
  let orders_received = 127
  let orders_per_batch = 15
  let processing_time_per_batch = 2  // å°æ—¶
  let working_hours_per_day = 8
  
  // è®¡ç®—éœ€è¦çš„æ‰¹æ¬¡æ•°
  let batches_needed = divide_with_ceil(orders_received, orders_per_batch)
  assert_eq(9, batches_needed)  // ceil(127/15) = 9
  
  // è®¡ç®—æ€»å¤„ç†æ—¶é—´
  let total_processing_hours = multiply(batches_needed, processing_time_per_batch)
  assert_eq(18, total_processing_hours)  // 9 * 2 = 18
  
  // è®¡ç®—éœ€è¦çš„å·¥ä½œæ—¥æ•°
  let days_needed = divide_with_ceil(total_processing_hours, working_hours_per_day)
  assert_eq(3, days_needed)  // ceil(18/8) = 3
  
  // è®¡ç®—å®é™…å¤„ç†çš„è®¢å•æ•°
  let actual_processed = multiply(batches_needed - 1, orders_per_batch)
  let final_batch_size = subtract(orders_received, actual_processed)
  assert_eq(7, final_batch_size)  // æœ€åä¸€æ‰¹å¤„ç†7ä¸ªè®¢å•
}

test "data_validation_and_integrity" {
  // æ•°æ®éªŒè¯å’Œå®Œæ•´æ€§æµ‹è¯•
  // åœºæ™¯ï¼šè´¢åŠ¡æ•°æ®éªŒè¯
  let opening_balance = 50000
  let total_income = 15000
  let total_expenses = 8000
  let expected_closing = 57000
  
  // è®¡ç®—å®é™…æœŸæœ«ä½™é¢
  let calculated_closing = add(subtract(opening_balance, total_expenses), total_income)
  assert_eq(expected_closing, calculated_closing)
  
  // éªŒè¯æ•°æ®å®Œæ•´æ€§
  let balance_check = subtract(calculated_closing, opening_balance)
  let net_change = subtract(total_income, total_expenses)
  assert_eq(balance_check, net_change)
  
  // è¾¹ç•Œæƒ…å†µéªŒè¯
  assert_eq(0, subtract(opening_balance, opening_balance))
  assert_eq(opening_balance, add(opening_balance, 0))
  assert_eq(0, multiply(total_expenses, 0))
}